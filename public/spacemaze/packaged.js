var requirejs,require,define;!function(e){function t(e,t){return y.call(e,t)}function i(e,t){var i,n,o,r,s,a,l,h,c,d,u,p=t&&t.split("/"),f=g.map,m=f&&f["*"]||{};if(e&&"."===e.charAt(0))if(t){for(p=p.slice(0,p.length-1),e=e.split("/"),s=e.length-1,g.nodeIdCompat&&v.test(e[s])&&(e[s]=e[s].replace(v,"")),e=p.concat(e),c=0;c<e.length;c+=1)if(u=e[c],"."===u)e.splice(c,1),c-=1;else if(".."===u){if(1===c&&(".."===e[2]||".."===e[0]))break;c>0&&(e.splice(c-1,2),c-=2)}e=e.join("/")}else 0===e.indexOf("./")&&(e=e.substring(2));if((p||m)&&f){for(i=e.split("/"),c=i.length;c>0;c-=1){if(n=i.slice(0,c).join("/"),p)for(d=p.length;d>0;d-=1)if(o=f[p.slice(0,d).join("/")],o&&(o=o[n])){r=o,a=c;break}if(r)break;!l&&m&&m[n]&&(l=m[n],h=c)}!r&&l&&(r=l,a=h),r&&(i.splice(0,a,r),e=i.join("/"))}return e}function n(t,i){return function(){var n=b.call(arguments,0);return"string"!=typeof n[0]&&1===n.length&&n.push(null),c.apply(e,n.concat([t,i]))}}function o(e){return function(t){return i(t,e)}}function r(e){return function(t){p[e]=t}}function s(i){if(t(f,i)){var n=f[i];delete f[i],m[i]=!0,h.apply(e,n)}if(!t(p,i)&&!t(m,i))throw new Error("No "+i);return p[i]}function a(e){var t,i=e?e.indexOf("!"):-1;return i>-1&&(t=e.substring(0,i),e=e.substring(i+1,e.length)),[t,e]}function l(e){return function(){return g&&g.config&&g.config[e]||{}}}var h,c,d,u,p={},f={},g={},m={},y=Object.prototype.hasOwnProperty,b=[].slice,v=/\.js$/;d=function(e,t){var n,r=a(e),l=r[0];return e=r[1],l&&(l=i(l,t),n=s(l)),l?e=n&&n.normalize?n.normalize(e,o(t)):i(e,t):(e=i(e,t),r=a(e),l=r[0],e=r[1],l&&(n=s(l))),{f:l?l+"!"+e:e,n:e,pr:l,p:n}},u={require:function(e){return n(e)},exports:function(e){var t=p[e];return"undefined"!=typeof t?t:p[e]={}},module:function(e){return{id:e,uri:"",exports:p[e],config:l(e)}}},h=function(i,o,a,l){var h,c,g,y,b,v,C=[],w=typeof a;if(l=l||i,"undefined"===w||"function"===w){for(o=!o.length&&a.length?["require","exports","module"]:o,b=0;b<o.length;b+=1)if(y=d(o[b],l),c=y.f,"require"===c)C[b]=u.require(i);else if("exports"===c)C[b]=u.exports(i),v=!0;else if("module"===c)h=C[b]=u.module(i);else if(t(p,c)||t(f,c)||t(m,c))C[b]=s(c);else{if(!y.p)throw new Error(i+" missing "+c);y.p.load(y.n,n(l,!0),r(c),{}),C[b]=p[c]}g=a?a.apply(p[i],C):void 0,i&&(h&&h.exports!==e&&h.exports!==p[i]?p[i]=h.exports:g===e&&v||(p[i]=g))}else i&&(p[i]=a)},requirejs=require=c=function(t,i,n,o,r){if("string"==typeof t)return u[t]?u[t](i):s(d(t,i).f);if(!t.splice){if(g=t,g.deps&&c(g.deps,g.callback),!i)return;i.splice?(t=i,i=n,n=null):t=e}return i=i||function(){},"function"==typeof n&&(n=o,o=r),o?h(e,t,i,n):setTimeout(function(){h(e,t,i,n)},4),c},c.config=function(e){return c(e)},requirejs._defined=p,define=function(e,i,n){i.splice||(n=i,i=[]),t(p,e)||t(f,e)||(f[e]=[e,i,n])},define.amd={jQuery:!0}}(),define("lib/almond/almond",function(){}),define("domready",[],function(){function e(e){var t;for(t=0;t<e.length;t+=1)e[t](h)}function t(){var t=c;l&&t.length&&(c=[],e(t))}function i(){l||(l=!0,s&&clearInterval(s),t())}function n(e){return l?e(h):c.push(e),n}var o,r,s,a="undefined"!=typeof window&&window.document,l=!a,h=a?document:null,c=[];if(a){if(document.addEventListener)document.addEventListener("DOMContentLoaded",i,!1),window.addEventListener("load",i,!1);else if(window.attachEvent){window.attachEvent("onload",i),r=document.createElement("div");try{o=null===window.frameElement}catch(d){}r.doScroll&&o&&window.external&&(s=setInterval(function(){try{r.doScroll(),i()}catch(e){}},30))}"complete"===document.readyState&&i()}return n.version="2.0.1",n.load=function(e,t,i,o){o.isBuild?i(null):n(i)},n}),define("font-data",[],function(){var e=function(){},t={version:"1",loadFonts:!1};return e.prototype.get=function(){return t},new e}),define("error-printer",[],function(){var e=function(){},t=function(e){return"#"+e.toLowerCase().trim().replace(/ /g,"_")};return e.prototype.printError=function(e,i,n){throw new Error(e+" => "+i+"\nhttp://diegomarquez.github.io/game-builder/errors.html"+t(e))},e.prototype.mustOverrideError=function(e){throw new Error(e+" => This method must be overriden\nhttp://diegomarquez.github.io/game-builder/errors.html#common")},e.prototype.missingArgumentError=function(e){for(var i=Array.prototype.slice.call(arguments,1),n=0;n<i.length;n++)throw new Error(e+" => Missing argument:"+i[n]+"\nhttp://diegomarquez.github.io/game-builder/errors.html"+t(e))},e.prototype.wrongTypeArgumentError=function(e,i,n){throw new Error(e+" => Wrong type error: "+i+" must be of type"+n+"\nhttp://diegomarquez.github.io/game-builder/errors.html"+t(e))},new e}),define("font-loader",["require","font-data","error-printer","error-printer"],function(e){var t=function(){};t.prototype.start=function(t){var n=e("font-data").get();if(!n.loadFonts)return void t();n.data.active=function(){t()},n.data.inactive=function(){e("error-printer").printError("Font Loader","No fonts are available"),t()},n.data.fontinactive=function(t){e("error-printer").printError("Font Loader","Font: "+t+" could not be loaded")};var o="https:"===document.location.protocol?"https":"http";i(o+"://ajax.googleapis.com/ajax/libs/webfont/"+n.version+"/webfont.js",function(){WebFont.load(n.data)})};var i=function(e,t){var i,n,o;n=!1,i=document.createElement("script"),i.type="text/javascript",i.src=e,i.onload=i.onreadystatechange=function(){n||this.readyState&&"complete"!=this.readyState||(n=!0,t())},o=document.getElementsByTagName("script")[0],o.parentNode.insertBefore(i,o)};return new t}),define("pre-load",["require","domready!","font-loader"],function(e,t,i){i.start(function(){e(["main"])})}),define("class",[],function(){var e=!1,t=/xyz/.test(function(){})?/\b_super\b/:/.*/,i=function(){};return i.extend=function(n){function o(){!e&&this.init&&this.init.apply(this,arguments)}var r=this.prototype;e=!0;var s=Object.create(r);e=!1;for(var a in n)s[a]="function"==typeof n[a]&&"function"==typeof r[a]&&t.test(n[a])?function(e,t){return function(){var i=this._super;this._super=r[e];var n=t.apply(this,arguments);return this._super=i,n}}(a,n[a]):n[a];return o.prototype=s,o.prototype.constructor=o,o.extend=i.extend,o},i}),define("util",[],function(){var e=function(){};return e.prototype.distance=function(e,t,i,n){var o=e-i,r=t-n;return Math.sqrt(o*o+r*r)},e.prototype.polylineLength=function(e){for(var t=0,i=0;i<e.length-1;i++)t+=this.distance(e[i].x,e[i].y,e[i+1].x,e[i+1].y);return t},e.prototype.normalize=function(e,t,i){return(e-t)/(i-t)},e.prototype.interpolate=function(e,t,i){return t+(i-t)*e},e.prototype.map=function(e,t,i,n,o){return this.interpolate(this.normalize(e,t,i),n,o)},e.prototype.shallow_merge=function(e,t){var i={};return this.shallow_copy(e,i),this.shallow_copy(t,i),i},e.prototype.shallow_merge_many=function(){for(var e={},t=0;t<arguments.length;t++)arguments[t]&&this.shallow_copy(arguments[t],e);return e},e.prototype.shallow_copy=function(e,t){e=e||{},t=t||{};for(var i in e)t[i]=e[i];return t},e.prototype.destroyObject=function(e){for(var t in e)e.hasOwnProperty(t)&&delete e[t]},e.prototype.iterateObject=function(e,t){for(var i in e)e.hasOwnProperty(i)&&e[i]&&t(e,i)},e.prototype.destroyArray=function(e,t){for(var i=0;i<e.length;i++)e[i]=null;t&&(e.length=0)},e.prototype.iterateArray=function(e,t){for(var i=0;i<e.length;i++)e[i]&&t(e,e[i],i)},e.prototype.cache=function(e,t,i){var n,o=function(){n=this.isArray(i)?e.apply(t||this,i):e.call(t||this,i)}.bind(this);return function(e){return n||o(),e&&o(),n}},e.prototype.defineGetter=function(e,t,i){Object.defineProperty(e,t,{configurable:!0,enumerable:!0,get:i})},e.prototype.defineSetter=function(e,t,i){Object.defineProperty(e,t,{configurable:!0,enumerable:!0,set:i})},e.prototype.isFunction=function(e){return e?"[object Function]"==Object.prototype.toString.call(e):!1},e.prototype.isObject=function(e){return e?"[object Object]"==Object.prototype.toString.call(e):!1},e.prototype.isArray=function(e){return e?"[object Array]"==Object.prototype.toString.call(e):!1},e.prototype.isString=function(e){return e?"[object String]"==Object.prototype.toString.call(e):!1},e.prototype.isNumber=function(e){return!isNaN(parseFloat(e))&&isFinite(e)},e.prototype.isBoolean=function(e){return e===!0?!0:e===!1?!0:!1},e.prototype.wrapInRange=function(e,t,i){return t>e?i-(t-e):e>i?t+(e-i):e},e.prototype.generateUUID=function(){var e=(new Date).getTime(),t="xxxyxxxxxxxxyxxx".replace(/[xy]/g,function(t){var i=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"==t?i:3&i|8).toString(16)});return t},e.prototype.rand_f=function(e,t){return Math.random()*(t-e)+e},e.prototype.rand_i=function(e,t){return Math.floor(Math.random()*(t-e+1))+e},e.prototype.rand_pair=function(e,t){return Math.random()>=.5?e:t},e.prototype.rand_b=function(){return Math.random()>=.5},e.prototype.rand_color=function(){return"#"+Math.floor(16777215*Math.random()).toString(16)},new e}),define("delegate",["class","util"],function(e,t){var i=e.extend({init:function(){this.callbackList={}},on:function(e,t,i,n,o,r,s){if(this.callbackList[e]||(this.callbackList[e]=[]),!r||1!=this.callbackList[e].length){var a={scope:t,callback:i,removeOnExecute:n,keep:o,level:s};this.callbackList[e].push(a)}},once:function(e,t,i,n){this.on(e,t,i,!0,!1,!1,n)},persist:function(e,t,i,n){this.on(e,t,i,!1,!0,!1,n)},single:function(e,t,i,n){this.on(e,t,i,!1,!1,!0,n)},remove:function(e,t,i){this.removeDelegate(e,t,i)},removeDelegate:function(e,t,i){var n=this.callbackList[e];if(n)for(var o=n.length-1;o>=0;o--){var r=n[o];t===r.scope&&i===r.callback&&n.splice(o,1)}},removeAll:function(e){this.callbackList[e]&&(this.callbackList[e].splice(0,this.callbackList[e].lenght),this.callbackList[e].lenght=0,this.callbackList[e]=null,delete this.callbackList[e])},softCleanUp:function(){n.call(this,function(e){return!e.keep})},levelCleanUp:function(e){n.call(this,function(t){return t.level===e})},hardCleanUp:function(){for(var e in this.callbackList)this.removeAll(e)},isRegistered:function(e){var t=this.callbackList[e];if(!t)return!1;for(var i=0;i<t.length;i++)if(t[i])return!0;return!1},destroy:function(){t.destroyObject(this)},execute:function(e,t,i){if(!this.callbackList)throw new Error("No callback list found, did you forget to call init._super() ?");var n=this.callbackList[e];if(n){i=i||"call";for(var o=n.length,r=0;o>r;r++){var s=n[r];s&&(s.callback[i](s.scope,t),s.removeOnExecute&&(n[r]=null))}this.removeAllNulls(n)}},removeAllNulls:function(e){if(e)for(var t=e.length-1;t>=0;t--){var i=e[t];i||e.splice(t,1)}}}),n=function(e){for(var t in this.callbackList){var i=this.callbackList[t];if(i)for(var n=i.length-1;n>=0;n--){var o=i[n];e(o)&&i.splice(n,1)}}};return i}),define("asset-map",[],function(){var e=function(){},t={"ANIMATEDARROW.PNG":"assets/images/AnimatedArrow.png?b=171c5ec3-154b-4463-b2aa-0b1001021aeb","ARROWBULLET.PNG":"assets/images/ArrowBullet.png?b=171c5ec3-154b-4463-b2aa-0b1001021aeb","BALL.PNG":"assets/images/Ball.png?b=171c5ec3-154b-4463-b2aa-0b1001021aeb","BLOB.PNG":"assets/images/Blob.png?b=171c5ec3-154b-4463-b2aa-0b1001021aeb","BOSS1BODY.PNG":"assets/images/Boss1/Boss1Body.png?b=171c5ec3-154b-4463-b2aa-0b1001021aeb","BOSS1CABLE.PNG":"assets/images/Boss1/Boss1Cable.png?b=171c5ec3-154b-4463-b2aa-0b1001021aeb","BOSS1CABLEDAMAGED.PNG":"assets/images/Boss1/Boss1CableDamaged.png?b=171c5ec3-154b-4463-b2aa-0b1001021aeb","BOSS1CHUNK1.PNG":"assets/images/Boss1/Boss1Chunk1.png?b=171c5ec3-154b-4463-b2aa-0b1001021aeb","BOSS1CHUNK2.PNG":"assets/images/Boss1/Boss1Chunk2.png?b=171c5ec3-154b-4463-b2aa-0b1001021aeb","BOSS2BODY.PNG":"assets/images/Boss2/Boss2Body.png?b=171c5ec3-154b-4463-b2aa-0b1001021aeb","BOSS2CHUNK1.PNG":"assets/images/Boss2/Boss2Chunk1.png?b=171c5ec3-154b-4463-b2aa-0b1001021aeb","BOSS2CHUNK2.PNG":"assets/images/Boss2/Boss2Chunk2.png?b=171c5ec3-154b-4463-b2aa-0b1001021aeb","BOSS2CORE.PNG":"assets/images/Boss2/Boss2Core.png?b=171c5ec3-154b-4463-b2aa-0b1001021aeb","BOSS3INNEREYE.PNG":"assets/images/Boss3/Boss3InnerEye.png?b=171c5ec3-154b-4463-b2aa-0b1001021aeb","BOSS3OUTEREYE.PNG":"assets/images/Boss3/Boss3OuterEye.png?b=171c5ec3-154b-4463-b2aa-0b1001021aeb","GENERATORWAYPOINT.PNG":"assets/images/Boss3/GeneratorWayPoint.png?b=171c5ec3-154b-4463-b2aa-0b1001021aeb","BOSS4BODY.PNG":"assets/images/Boss4/Boss4Body.png?b=171c5ec3-154b-4463-b2aa-0b1001021aeb","BOSS4CHUNK1.PNG":"assets/images/Boss4/Boss4Chunk1.png?b=171c5ec3-154b-4463-b2aa-0b1001021aeb","BOSS4CHUNK2.PNG":"assets/images/Boss4/Boss4Chunk2.png?b=171c5ec3-154b-4463-b2aa-0b1001021aeb","BOSS4CHUNK3.PNG":"assets/images/Boss4/Boss4Chunk3.png?b=171c5ec3-154b-4463-b2aa-0b1001021aeb","BOSS4CHUNK4.PNG":"assets/images/Boss4/Boss4Chunk4.png?b=171c5ec3-154b-4463-b2aa-0b1001021aeb","BOSSCANNONBASE.PNG":"assets/images/BossCannon/BossCannonBase.png?b=171c5ec3-154b-4463-b2aa-0b1001021aeb","BOSSCANNONSHOOTER.PNG":"assets/images/BossCannon/BossCannonShooter.png?b=171c5ec3-154b-4463-b2aa-0b1001021aeb","BOSSGENERATOR.PNG":"assets/images/BossGenerator.png?b=171c5ec3-154b-4463-b2aa-0b1001021aeb","BOSSLASERTURRET.PNG":"assets/images/BossLaserTurret.png?b=171c5ec3-154b-4463-b2aa-0b1001021aeb","BOSS1PORTRAIT.PNG":"assets/images/BossPortraits/Boss1Portrait.png?b=171c5ec3-154b-4463-b2aa-0b1001021aeb","BOSS2PORTRAIT.PNG":"assets/images/BossPortraits/Boss2Portrait.png?b=171c5ec3-154b-4463-b2aa-0b1001021aeb","BOSS3PORTRAIT.PNG":"assets/images/BossPortraits/Boss3Portrait.png?b=171c5ec3-154b-4463-b2aa-0b1001021aeb","BOSS4PORTRAIT.PNG":"assets/images/BossPortraits/Boss4Portrait.png?b=171c5ec3-154b-4463-b2aa-0b1001021aeb","BURST.PNG":"assets/images/Burst.png?b=171c5ec3-154b-4463-b2aa-0b1001021aeb","CANNONBASE.PNG":"assets/images/Cannon/CannonBase.png?b=171c5ec3-154b-4463-b2aa-0b1001021aeb","CANNONSHOOTER.PNG":"assets/images/Cannon/CannonShooter.png?b=171c5ec3-154b-4463-b2aa-0b1001021aeb","CHECKEREDFLAG.PNG":"assets/images/CheckeredFlag.png?b=171c5ec3-154b-4463-b2aa-0b1001021aeb","CHECKEREDFLAGDOWN.PNG":"assets/images/CheckeredFlagDown.png?b=171c5ec3-154b-4463-b2aa-0b1001021aeb","CHECKEREDFLAGLEFT.PNG":"assets/images/CheckeredFlagLeft.png?b=171c5ec3-154b-4463-b2aa-0b1001021aeb","CHECKEREDFLAGRIGHT.PNG":"assets/images/CheckeredFlagRight.png?b=171c5ec3-154b-4463-b2aa-0b1001021aeb","CHECKEREDFLAGUP.PNG":"assets/images/CheckeredFlagUp.png?b=171c5ec3-154b-4463-b2aa-0b1001021aeb","DOUBLECANNON.PNG":"assets/images/DoubleCannon.png?b=171c5ec3-154b-4463-b2aa-0b1001021aeb","ENEMYSHIP1.PNG":"assets/images/EnemyShip1.png?b=171c5ec3-154b-4463-b2aa-0b1001021aeb","ENEMYSHIP2.PNG":"assets/images/EnemyShip2.png?b=171c5ec3-154b-4463-b2aa-0b1001021aeb","FASTDOWNARROW.PNG":"assets/images/FastDownArrow.png?b=171c5ec3-154b-4463-b2aa-0b1001021aeb","FASTLEFTARROW.PNG":"assets/images/FastLeftArrow.png?b=171c5ec3-154b-4463-b2aa-0b1001021aeb","FASTRIGHTARROW.PNG":"assets/images/FastRightArrow.png?b=171c5ec3-154b-4463-b2aa-0b1001021aeb","FASTUPARROW.PNG":"assets/images/FastUpArrow.png?b=171c5ec3-154b-4463-b2aa-0b1001021aeb","FLAG.PNG":"assets/images/Flag.png?b=171c5ec3-154b-4463-b2aa-0b1001021aeb","GENERATOR.PNG":"assets/images/Generator.png?b=171c5ec3-154b-4463-b2aa-0b1001021aeb","HPMETER.PNG":"assets/images/HPMeter.png?b=171c5ec3-154b-4463-b2aa-0b1001021aeb","HEALTHUP.PNG":"assets/images/HealthUp.png?b=171c5ec3-154b-4463-b2aa-0b1001021aeb","LASERBASE.PNG":"assets/images/LaserBase.png?b=171c5ec3-154b-4463-b2aa-0b1001021aeb","LASERHIT.PNG":"assets/images/LaserHit.png?b=171c5ec3-154b-4463-b2aa-0b1001021aeb","LASERTURRET.PNG":"assets/images/LaserTurret.png?b=171c5ec3-154b-4463-b2aa-0b1001021aeb","LEVELCOMPLETEICON.PNG":"assets/images/LevelCompleteIcon.png?b=171c5ec3-154b-4463-b2aa-0b1001021aeb","LEVELFRAME.PNG":"assets/images/LevelFrame.png?b=171c5ec3-154b-4463-b2aa-0b1001021aeb","MINE.PNG":"assets/images/Mine.png?b=171c5ec3-154b-4463-b2aa-0b1001021aeb","MINIBLOB.PNG":"assets/images/MiniBlob.png?b=171c5ec3-154b-4463-b2aa-0b1001021aeb","BOSSMISSILETURRETSHOOTER.PNG":"assets/images/MissileTurret/BossMissileTurretShooter.png?b=171c5ec3-154b-4463-b2aa-0b1001021aeb","MISSILE.PNG":"assets/images/MissileTurret/Missile.png?b=171c5ec3-154b-4463-b2aa-0b1001021aeb","MISSILETURRETBASE.PNG":"assets/images/MissileTurret/MissileTurretBase.png?b=171c5ec3-154b-4463-b2aa-0b1001021aeb","MISSILETURRETHINGE.PNG":"assets/images/MissileTurret/MissileTurretHinge.png?b=171c5ec3-154b-4463-b2aa-0b1001021aeb","MISSILETURRETSHOOTER.PNG":"assets/images/MissileTurret/MissileTurretShooter.png?b=171c5ec3-154b-4463-b2aa-0b1001021aeb","MOON.PNG":"assets/images/Moon.png?b=171c5ec3-154b-4463-b2aa-0b1001021aeb","PLAYERBULLET1.PNG":"assets/images/PlayerBullet1.png?b=171c5ec3-154b-4463-b2aa-0b1001021aeb","PLAYEREXHAUST.PNG":"assets/images/PlayerExhaust.png?b=171c5ec3-154b-4463-b2aa-0b1001021aeb","POWERUP.PNG":"assets/images/PowerUp.png?b=171c5ec3-154b-4463-b2aa-0b1001021aeb","ROUNDBULLET.PNG":"assets/images/RoundBullet.png?b=171c5ec3-154b-4463-b2aa-0b1001021aeb","SMALLSPIDER.PNG":"assets/images/SmallSpider.png?b=171c5ec3-154b-4463-b2aa-0b1001021aeb","SOUND.PNG":"assets/images/Sound.png?b=171c5ec3-154b-4463-b2aa-0b1001021aeb","SPEEDUP.PNG":"assets/images/SpeedUp.png?b=171c5ec3-154b-4463-b2aa-0b1001021aeb","STAR.PNG":"assets/images/Star.png?b=171c5ec3-154b-4463-b2aa-0b1001021aeb","STOP.PNG":"assets/images/Stop.png?b=171c5ec3-154b-4463-b2aa-0b1001021aeb","WARNING.PNG":"assets/images/Warning.png?b=171c5ec3-154b-4463-b2aa-0b1001021aeb","BIOHAZARD.PNG":"assets/images/biohazard.png?b=171c5ec3-154b-4463-b2aa-0b1001021aeb","DOWNARROW.PNG":"assets/images/downArrow.png?b=171c5ec3-154b-4463-b2aa-0b1001021aeb","DOWNLEFTARROW.PNG":"assets/images/downLeftArrow.png?b=171c5ec3-154b-4463-b2aa-0b1001021aeb","DOWNRIGHTARROW.PNG":"assets/images/downRightArrow.png?b=171c5ec3-154b-4463-b2aa-0b1001021aeb","LEFTARROW.PNG":"assets/images/leftArrow.png?b=171c5ec3-154b-4463-b2aa-0b1001021aeb","RIGHTARROW.PNG":"assets/images/rightArrow.png?b=171c5ec3-154b-4463-b2aa-0b1001021aeb","UPARROW.PNG":"assets/images/upArrow.png?b=171c5ec3-154b-4463-b2aa-0b1001021aeb","UPLEFTARROW.PNG":"assets/images/upLeftArrow.png?b=171c5ec3-154b-4463-b2aa-0b1001021aeb","UPRIGHTARROW.PNG":"assets/images/upRightArrow.png?b=171c5ec3-154b-4463-b2aa-0b1001021aeb","WEBBULLET.PNG":"assets/images/webBullet.png?b=171c5ec3-154b-4463-b2aa-0b1001021aeb","BACK.OGG":"assets/sound/back.ogg?b=171c5ec3-154b-4463-b2aa-0b1001021aeb","BLOOB.OGG":"assets/sound/bloob.ogg?b=171c5ec3-154b-4463-b2aa-0b1001021aeb","BUG.OGG":"assets/sound/bug.ogg?b=171c5ec3-154b-4463-b2aa-0b1001021aeb","COSMICDANCE.OGG":"assets/sound/cosmicDance.ogg?b=171c5ec3-154b-4463-b2aa-0b1001021aeb","DEFLECT.OGG":"assets/sound/deflect.ogg?b=171c5ec3-154b-4463-b2aa-0b1001021aeb","EXPLOSION1.OGG":"assets/sound/explosion1.ogg?b=171c5ec3-154b-4463-b2aa-0b1001021aeb","EXPLOSION2.OGG":"assets/sound/explosion2.ogg?b=171c5ec3-154b-4463-b2aa-0b1001021aeb","EXPLOSION3.OGG":"assets/sound/explosion3.ogg?b=171c5ec3-154b-4463-b2aa-0b1001021aeb","EXPLOSION4.OGG":"assets/sound/explosion4.ogg?b=171c5ec3-154b-4463-b2aa-0b1001021aeb","EXPLOSION5.OGG":"assets/sound/explosion5.ogg?b=171c5ec3-154b-4463-b2aa-0b1001021aeb","EXPLOSION6.OGG":"assets/sound/explosion6.ogg?b=171c5ec3-154b-4463-b2aa-0b1001021aeb","EXPLOSION7.OGG":"assets/sound/explosion7.ogg?b=171c5ec3-154b-4463-b2aa-0b1001021aeb","HIT.OGG":"assets/sound/hit.ogg?b=171c5ec3-154b-4463-b2aa-0b1001021aeb","INTRO.OGG":"assets/sound/intro.ogg?b=171c5ec3-154b-4463-b2aa-0b1001021aeb","LARGEBUG.OGG":"assets/sound/largeBug.ogg?b=171c5ec3-154b-4463-b2aa-0b1001021aeb","LEVEL1.OGG":"assets/sound/level1.ogg?b=171c5ec3-154b-4463-b2aa-0b1001021aeb","LEVEL2.OGG":"assets/sound/level2.ogg?b=171c5ec3-154b-4463-b2aa-0b1001021aeb","LEVEL3.OGG":"assets/sound/level3.ogg?b=171c5ec3-154b-4463-b2aa-0b1001021aeb","LEVEL5.OGG":"assets/sound/level5.ogg?b=171c5ec3-154b-4463-b2aa-0b1001021aeb","OK.OGG":"assets/sound/ok.ogg?b=171c5ec3-154b-4463-b2aa-0b1001021aeb","OPENHATCH.OGG":"assets/sound/openHatch.ogg?b=171c5ec3-154b-4463-b2aa-0b1001021aeb","PLAYERDAMAGE.OGG":"assets/sound/playerDamage.ogg?b=171c5ec3-154b-4463-b2aa-0b1001021aeb","PLAYERSHOT.OGG":"assets/sound/playerShot.ogg?b=171c5ec3-154b-4463-b2aa-0b1001021aeb","POWERUP.OGG":"assets/sound/powerUp.ogg?b=171c5ec3-154b-4463-b2aa-0b1001021aeb","SELECT.OGG":"assets/sound/select.ogg?b=171c5ec3-154b-4463-b2aa-0b1001021aeb","SMALLLAUNCH.OGG":"assets/sound/smallLaunch.ogg?b=171c5ec3-154b-4463-b2aa-0b1001021aeb","WARNING.OGG":"assets/sound/warning.ogg?b=171c5ec3-154b-4463-b2aa-0b1001021aeb","WIN.OGG":"assets/sound/win.ogg?b=171c5ec3-154b-4463-b2aa-0b1001021aeb"};return e.prototype.get=function(){return t},new e}),define("matrix-3x3",[],function(){var e=function(e,t,i,n,o,r,s){this.initialize(e,t,i,n,o,r,s)},t=e.prototype;return e.DEG_TO_RAD=Math.PI/180,t.a=1,t.b=0,t.c=0,t.d=1,t.tx=0,t.ty=0,t.alpha=1,t.initialize=function(e,t,i,n,o,r,s){return this.a=e||1,this.b=t||0,this.c=i||0,this.d=n||1,this.tx=o||0,this.ty=r||0,this.alpha=s||1,this},t.prepend=function(e,t,i,n,o,r){var s=this.tx;if(1!=e||0!=t||0!=i||1!=n){var a=this.a,l=this.c;this.a=a*e+this.b*i,this.b=a*t+this.b*n,this.c=l*e+this.d*i,this.d=l*t+this.d*n}return this.tx=s*e+this.ty*i+o,this.ty=s*t+this.ty*n+r,this},t.append=function(e,t,i,n,o,r){var s=this.a,a=this.b,l=this.c,h=this.d;return this.a=e*s+t*l,this.b=e*a+t*h,this.c=i*s+n*l,this.d=i*a+n*h,this.tx=o*s+r*l+this.tx,this.ty=o*a+r*h+this.ty,this},t.prependTransform=function(t,i,n,o,r,s,a,l){var h,c;if(r%360){var d=r*e.DEG_TO_RAD;h=Math.cos(d),c=Math.sin(d)}else h=1,c=0;return(s||a)&&(this.tx-=s,this.ty-=a),this.prepend(h*n,c*n,-c*o,h*o,t,i),this.alpha*=l,this},t.appendTransform=function(t,i,n,o,r,s,a,l){if(r%360)var h=r*e.DEG_TO_RAD,c=Math.cos(h),d=Math.sin(h);else c=1,d=0;return this.append(c*n,d*n,-d*o,c*o,t,i),(s||a)&&(this.tx-=s*this.a+a*this.c,this.ty-=s*this.b+a*this.d),this.alpha*=l,this},t.rotate=function(e){var t=Math.cos(e),i=Math.sin(e),n=this.a,o=this.c,r=this.tx;return this.a=n*t-this.b*i,this.b=n*i+this.b*t,this.c=o*t-this.d*i,this.d=o*i+this.d*t,this.tx=r*t-this.ty*i,this.ty=r*i+this.ty*t,this},t.scale=function(e,t){return this.a*=e,this.d*=t,this.c*=e,this.b*=t,this.tx*=e,this.ty*=t,this},t.translate=function(e,t){return this.tx+=e,this.ty+=t,this},t.invert=function(){var e=this.a,t=this.b,i=this.c,n=this.d,o=this.tx,r=e*n-t*i;return this.a=n/r,this.b=-t/r,this.c=-i/r,this.d=e/r,this.tx=(i*this.ty-n*o)/r,this.ty=-(e*this.ty-t*o)/r,this},t.identity=function(){return this.a=this.d=this.alpha=1,this.b=this.c=this.tx=this.ty=0,this},t.decompose=function(t){null==t&&(t={}),t.x=this.tx,t.y=this.ty,t.scaleX=Math.sqrt(this.a*this.a+this.b*this.b),t.scaleY=Math.sqrt(this.c*this.c+this.d*this.d);var i=Math.atan2(-this.c,this.d),n=Math.atan2(this.b,this.a);return i==n&&(t.rotation=n/e.DEG_TO_RAD,this.a<0&&this.d>=0&&(t.rotation+=t.rotation<=0?180:-180)),t},t.transformPoint=function(e,t,i){return i.x=e*this.a+t*this.c+this.tx,i.y=e*this.b+t*this.d+this.ty,i},t.clone=function(){return new e(this.a,this.b,this.c,this.d,this.tx,this.ty,this.alpha)},e}),define("draw",[],function(){var e=function(){};return e.prototype.circle=function(e,t,i,n,o,r,s,a){o&&(e.fillStyle=o),r&&(e.strokeStyle=r),s&&(e.lineWidth=s),void 0===a&&(a=!0),e.beginPath(),e.arc(t,i,n,0,2*Math.PI,!1),a&&e.closePath(),o&&e.fill(),r&&e.stroke()},e.prototype.rectangle=function(e,t,i,n,o,r,s,a,l){s&&(e.strokeStyle=s),a&&(e.lineWidth=a),r&&(e.fillStyle=r),void 0===l&&(l=!0),e.beginPath(),e.rect(t,i,n,o),l&&e.closePath(),r&&e.fill(),s&&e.stroke()},e.prototype.triangle=function(e,t,i,n,o,r,s,a,l,h,c,d,u,p){c&&(e.strokeStyle=c),d&&(e.lineWidth=d),h&&(e.fillStyle=h),void 0===p&&(p=!0),u||(u=1),n*=u,r*=u,a*=u,o*=u,s*=u,l*=u,n+=t,r+=t,a+=t,o+=i,s+=i,l+=i,e.beginPath(),e.moveTo(n,o),e.lineTo(r,s),e.lineTo(a,l),p&&e.closePath(),h&&e.fill(),c&&e.stroke()},e.prototype.quadraticTriangle=function(e,t,i,n,o,r,s,a,l,h,c,d,u,p,f,g,m,y,b,v){m&&(e.strokeStyle=m),y&&(e.lineWidth=y),g&&(e.fillStyle=g),void 0===v&&(v=!0),b||(b=1),n*=b,a*=b,d*=b,o*=b,l*=b,u*=b,r*=b,h*=b,p*=b,s*=b,c*=b,f*=b,n+=t,a+=t,d+=t,o+=i,l+=i,u+=i,r+=t,h+=t,p+=t,s+=i,c+=i,f+=i,e.beginPath(),e.moveTo(n,o),e.quadraticCurveTo(r,s,a,l),e.quadraticCurveTo(h,c,d,u),e.quadraticCurveTo(p,f,n,o),v&&e.closePath(),g&&e.fill(),m&&e.stroke()},e.prototype.polygon=function(e,t,i,n,o,r,s,a,l){r&&(e.strokeStyle=r),s&&(e.lineWidth=s),o&&(e.fillStyle=o),void 0===l&&(l=!0),a||(a=1),e.beginPath(),e.moveTo(n[0].x*a+t,n[0].y*a+i);for(var h=1;h<n.length;h++)e.lineTo(n[h].x*a+t,n[h].y*a+i);l&&e.closePath(),o&&e.fill(),r&&e.stroke()},e.prototype.relativePolygon=function(e,t,i,n,o,r,s,a,l){r&&(e.strokeStyle=r),s&&(e.lineWidth=s),o&&(e.fillStyle=o),void 0===l&&(l=!0),a||(a=1),e.beginPath(),e.moveTo(n[0].x*a+t,n[0].y*a+i);for(var h=n[0].x,c=n[0].y,d=1;d<n.length;d++)e.lineTo((n[d].x+h)*a+t,(n[d].y+c)*a+i),h=n[d].x+h,c=n[d].y+c;l&&e.closePath(),o&&e.fill(),r&&e.stroke()},e.prototype.quadraticPolygon=function(e,t,i,n,o,r,s,a,l){r&&(e.strokeStyle=r),s&&(e.lineWidth=s),o&&(e.fillStyle=o),void 0===l&&(l=!0),a||(a=1),e.beginPath(),e.moveTo(n[0].x*a+t,n[0].y*a+i);for(var h=1;h<n.length;h+=2){var c=h+1;c>=n.length&&(c=0),e.quadraticCurveTo(n[h].x*a+t,n[h].y*a+i,n[c].x*a+t,n[c].y*a+i)}l&&e.closePath(),o&&e.fill(),r&&e.stroke()},e.prototype.quadraticPolygonAuto=function(e,t,i,n,o,r,s,a,l,h,c){s&&(e.strokeStyle=s),a&&(e.lineWidth=a),r&&(e.fillStyle=r),void 0===c&&(c=!0),l||(l=1),e.beginPath();for(var d,u,p,f,g=h,m=1;m<o.length;m++){d=(o[m-1].x+o[m].x)/2,u=(o[m-1].y+o[m].y)/2;var y=Math.atan2(o[m-1].y-o[m].y,o[m-1].x-o[m].x)+Math.PI/2;g?(p=d+Math.cos(y)*n,f=u+Math.sin(y)*n):(p=d+Math.cos(y)*-n,f=u+Math.sin(y)*-n),e.moveTo(o[m-1].x*l+t,o[m-1].y*l+i),e.quadraticCurveTo(p*l+t,f*l+i,o[m].x*l+t,o[m].y*l+i),g=!g}c&&(e.moveTo(o[o.length-1].x*l+t,o[o.length-1].y*l+i),e.lineTo(o[0].x*l+t,o[0].y*l+i)),r&&e.fill(),s&&e.stroke()},e.prototype.realtiveQuadraticPolygonAuto=function(e,t,i,n,o,r,s,a,l,h,c){s&&(e.strokeStyle=s),a&&(e.lineWidth=a),r&&(e.fillStyle=r),void 0===c&&(c=!0),l||(l=1),e.beginPath();for(var d,u,p,f,g=h,m=o[0].x,y=o[0].y,b=1;b<o.length;b++){d=(o[b].x+m+m)/2,u=(o[b].y+y+y)/2;var v=Math.atan2(u,d)+Math.PI/2;g?(p=d+Math.cos(v)*n,f=u+Math.sin(v)*n):(p=d+Math.cos(v)*-n,f=u+Math.sin(v)*-n),e.moveTo(m*l+t,y*l+i),e.quadraticCurveTo(p*l+t,f*l+i,(o[b].x+m)*l+t,(o[b].y+y)*l+i),g=!g,m=o[b].x+m,y=o[b].y+y}c&&(e.moveTo(o[o.length-1].x*l+t,o[o.length-1].y*l+i),e.lineTo(o[0].x*l+t,o[0].y*l+i)),r&&e.fill(),s&&e.stroke()},new e}),define("game-object-debug-draw",["require","draw","gb"],function(e){var t={};return t.drawModule=null,t.gbModule=null,t.draw=function(){return t.drawModule||(t.drawModule=e("draw")),t.drawModule},t.gb=function(){return t.gbModule||(t.gbModule=e("gb")),t.gbModule},t.gameObject=function(e,t,i){var n=this.gb(),o=this.draw();if(n.debug&&!e.skipDebug){if(t.save(),t.setTransform(1,0,0,1,0,0),i.transformContext(t),e.renderer&&e.renderer.debug_draw(t,i,o,n),e.components)for(var r=0;r<e.components.length;r++)e.components[r].debug_draw(t,i,o,n);e.debug_draw(t,i,o,n),t.restore()}},t}),define("component-finder",[],function(){var e=null,t=!1,i=function(){};i.prototype.user=function(i){return e=i,t=!1,this},i.prototype.not=function(){return t=!0,this},i.prototype.all=function(e){return n(e,"all","truthyResult","collection",t)},i.prototype.allWithType=function(e){return n(e,"allWithType","matchingId","collection",t)},i.prototype.allWithProp=function(e){return n(e,"allWithProp","matchingProp","collection",t)},i.prototype.first=function(e){return n(e,"first","truthyResult","single",t)},i.prototype.firstWithType=function(e){return n(e,"firstWithType","matchingId","single",t)},i.prototype.firstWithProp=function(e){return n(e,"firstWithType","matchingProp","single",t)};var n=function(t,i,n,o,s){if(null!==e){var a;return"collection"==o&&(a=[]),"single"==o&&(a=null),e.components?(a=r[o](e.components,t,i,n,a,s),e=null,a):(e=null,a)}},o={matchingId:function(e,t,i){return(e.typeId==t||e.poolId==t)^i},matchingProp:function(e,t,i){return t in e^i},truthyResult:function(e,t,i){return(!t||t(e))^i}},r={collection:function(e,t,i,n,r,s){for(var a=0;a<e.length;a++){var l=e[a];o[n](l,t,s)&&r.push(l)}return r},single:function(e,t,i,n,r,s){for(var a=0;a<e.length;a++){var l=e[a];if(o[n](l,t,s))return l}}};return new i}),define("game-object",["delegate","matrix-3x3","game-object-debug-draw","util","component-finder"],function(e,t,i,n,o){var r=e.extend({init:function(){this._super(),this.uid=null,this.parent=null,this.matrix=new t,this.components=null,this.renderer=null,this.x=0,this.y=0,this.centerX=0,this.centerY=0,this.rotation=0,this.scaleX=1,this.scaleY=1,this.alpha=1,this.viewportOffsetX=0,this.viewportOffsetY=0,this.typeId=null,this.poolId=null,this.canUpdate=!1,this.canDraw=!1,this.viewportVisibility={},this.viewports=[],this.updateGroup=null,this.debugColor="#FF00FF",this.isTransformed=!1,this.decomposed=null},reset:function(){this.uid=null,this.rotation=0,this.scaleX=1,this.scaleY=1,this.alpha=1,this.viewportOffsetX=0,this.viewportOffsetY=0,this.centerX=0,this.centerY=0,this.viewportVisibility={},this.viewports=[],this.updateGroup=null,this.isChildInContainer=!1,this.isTransformed=!1},added:function(){this.isTransformed=!1,this.execute(this.ADD,this)},removed:function(){this.execute(this.REMOVE,this)},start:function(){if(this.canUpdate=!0,this.canDraw=!0,this.renderer&&this.renderer.onStarted(this),this.components)for(var e=0;e<this.components.length;e++)this.components[e].onStarted(this);this.execute(this.START,this)},update:function(){},recycle:function(){this.execute(this.RECYCLE,this)},configure:function(e){if(e){for(var t in e)if(this[t]=e[t],n.isObject(e[t])){var i=e[t]._get,o=e[t]._set;i||o?(n.isFunction(i)&&n.defineGetter(this,t,i),n.isFunction(o)&&n.defineSetter(this,t,o)):this[t]=e[t]}else this[t]=e[t];this.args=e}},setRenderer:function(e){e&&(this.renderer=e,this.renderer.onAdded(this))},removeRenderer:function(){this.renderer&&(this.renderer.onRemoved(this),this.renderer.onRecycled(),this.renderer=null)},addComponent:function(e){this.components||(this.components=[]),e.parent&&e.parent.removeComponent(e),this.components.push(e),e.onAdded(this)},removeComponent:function(e){if(this.components){var t=this.components.indexOf(e);-1!=t&&(this.components.splice(t,1),e.onRemoved(this),e.onRecycled(this))}},removeComponents:function(e){if(this.components)if(e&&n.isArray(e))for(var t=0;t<e.length;t++)this.removeComponent(e[t]);else for(var t=this.components.length-1;t>=0;t--)this.removeComponent(this.components[t])},findComponents:function(){return o.user(this)},transform:function(e){this.concatenateMatrix(this.matrix,e),this.isTransformed=!0},draw:function(e,t){if(this.isTransformed){e.save();var n=this.getMatrix();e.transform(n.a,n.b,n.c,n.d,n.tx,n.ty),1!==n.alpha&&(e.globalAlpha*=n.alpha),n.alpha>0&&this.renderer&&this.renderer.isEnabled()&&this.renderer.draw(e,t),i.gameObject(this,e,t),e.restore()}},hide:function(e){this.canDraw=!1,e||this.execute(this.HIDE,this)},show:function(e){this.canDraw=!0,e||this.execute(this.SHOW,this)},toggleVisibility:function(e){this.canDraw=!this.canDraw,e||(this.canDraw?this.execute(this.SHOW,this):this.execute(this.HIDE,this))},stop:function(e){this.canUpdate=!1,e||this.execute(this.STOP,this)},run:function(e){this.canUpdate=!0,e||this.execute(this.RUN,this)},hasViewport:function(){return this.viewports.length>0},addToViewportList:function(e,t){var i={viewport:e,layer:t};this.viewports.push(i),this.execute(this.ADD_TO_VIEWPORT,[i])},removeFromViewportList:function(e,t){for(var i=this.viewports.length-1;i>=0;i--){var n=this.viewports[i];n.viewport===e&&n.layer===t&&(this.viewports.splice(i,1),this.execute(this.REMOVE_FROM_VIEWPORT,[n]))}},setViewportVisibility:function(e,t){this.viewportVisibility[e]=t},getViewportVisibility:function(e){return this.viewportVisibility[e]},getViewportList:function(){for(var e=this;!e.viewports||0==e.viewports.length;)if(e=e.parent,result=e.viewports,result&&result.length>0)return result;return this.viewports},getUpdateGroup:function(){for(var e=this;!e.updateGroup;)e=e.parent;return e.updateGroup},clear:function(){this.recycle(),this.execute(this.CLEAR,this),this.removeRenderer(),this.removeComponents(),this.hardCleanUp(),this.canUpdate=!1,this.canDraw=!1,this.parent=null,this.typeId=null
},resetTransform:function(e,t,i,n,o,r,s){this.x=e||0,this.y=t||0,this.scaleX=null==i?1:i,this.scaleY=null==n?1:n,this.rotation=o||0,this.centerX=r||0,this.centerY=s||0},setTransform:function(e,t,i,n,o,r,s){e&&(this.x=e),t&&(this.y=t),i&&(this.scaleX=i),n&&(this.scaleY=n),o&&(this.rotation=o),r&&(this.centerX=r),s&&(this.centerY=s)},concatenateMatrix:function(e,i){e?e.identity():e=(new t).identity();for(var n=this;null!=n;)i&&i.noViewportOffsets?(e.prependTransform(n.x,n.y,n.scaleX,n.scaleY,n.rotation,n.centerX,n.centerY,this.alpha),n=n.parent):(e.prependTransform(n.x+n.viewportOffsetX,n.y+n.viewportOffsetY,n.scaleX,n.scaleY,n.rotation,n.centerX,n.centerY,this.alpha),n=n.parent);return e},getMatrix:function(){return this.matrix},getTransform:function(e,i,n){i?i.identity():i=(new t).identity();for(var o=this;null!=o;)n&&n.noViewportOffsets?(i.prependTransform(o.x,o.y,o.scaleX,o.scaleY,o.rotation,o.centerX,o.centerY,this.alpha),o=o.parent):(i.prependTransform(o.x+o.viewportOffsetX,o.y+o.viewportOffsetY,o.scaleX,o.scaleY,o.rotation,o.centerX,o.centerY,this.alpha),o=o.parent);return i.decompose(e)},hasRenderer:function(){return!!this.renderer},hasComponents:function(){return this.components?this.components.length>0:!1},getComponents:function(){return this.components},isContainer:function(){return!1},typeName:function(){return"GameObject"},isChild:function(){return this.parent?"GameObjectContainer"==this.parent.typeName():!1},isActive:function(){return!!this.typeId},isRunning:function(){return this.canUpdate},isDrawing:function(){return this.canDraw},transformedOnce:function(){return this.isTransformed},debug_draw:function(e,t,i,n){n.gameObjectDebug&&(this.decomposed=this.matrix.decompose(this.decomposed),e.save(),e.translate(this.decomposed.x,this.decomposed.y),i.circle(e,0,0,2,this.debugColor,null,1),e.restore())}});return Object.defineProperty(r.prototype,"X",{get:function(){return this.x+this.viewportOffsetX}}),Object.defineProperty(r.prototype,"Y",{get:function(){return this.y+this.viewportOffsetY}}),Object.defineProperty(r.prototype,"START",{get:function(){return"start"}}),Object.defineProperty(r.prototype,"RECYCLE",{get:function(){return"recycle"}}),Object.defineProperty(r.prototype,"CLEAR",{get:function(){return"clear"}}),Object.defineProperty(r.prototype,"ADD",{get:function(){return"added"}}),Object.defineProperty(r.prototype,"REMOVE",{get:function(){return"removed"}}),Object.defineProperty(r.prototype,"ADD_TO_VIEWPORT",{get:function(){return"added_to_viewport"}}),Object.defineProperty(r.prototype,"REMOVE_FROM_VIEWPORT",{get:function(){return"removed_from_viewport"}}),Object.defineProperty(r.prototype,"HIDE",{get:function(){return"hide"}}),Object.defineProperty(r.prototype,"SHOW",{get:function(){return"show"}}),Object.defineProperty(r.prototype,"STOP",{get:function(){return"stop"}}),Object.defineProperty(r.prototype,"RUN",{get:function(){return"run"}}),r}),define("visibility-control",[],function(){var e=null,t=null,i=!1,n=!0,o=null,r=!1,s=!1,a=function(){};a.prototype.user=function(o){return e=o,s=!1,r=!1,n=!0,t=null,i=!1,this},a.prototype.ommitSelf=function(){return n=!1,this},a.prototype.hide=function(e){return t=!1,o=e,this},a.prototype.show=function(e){return t=!0,o=e,this},a.prototype.toggle=function(e){return i=!0,o=e,this},a.prototype.recurse=function(){return s=!0,this},a.prototype.not=function(){return r=!0,this},a.prototype.all=function(e){l(c,e)},a.prototype.allWithProp=function(e){l(d,e)},a.prototype.allWithType=function(e){l(u,e)};var l=function(r,s){null!==e&&(n&&o.call(e),r(s,t,i),e=null)},h=function(){var t=e.findChildren();return r&&(t=t.not()),s&&(t=t.recurse()),t},c=function(e,t,i){p(h().all(e),t,i)},d=function(e,t,i){p(h().allWithProp(e),t,i)},u=function(e,t,i){p(h().allWithType(e),t,i)},p=function(e,t,i){if(e)for(var n=0;n<e.length;n++)i?e[n].toggleVisibility():t?e[n].show():e[n].hide()};return new a}),define("child-finder",[],function(){var e=null,t=!1,i=!1,n=function(){};n.prototype.user=function(n){return e=n,i=!1,t=!1,this},n.prototype.recurse=function(){return i=!0,this},n.prototype.not=function(){return t=!0,this},n.prototype.all=function(e){return o(e,"all","truthyResult","collection",t,i)},n.prototype.allWithType=function(e){return o(e,"allWithType","matchingId","collection",t,i)},n.prototype.first=function(e){return o(e,"first","truthyResult","single",t,i)},n.prototype.firstWithType=function(e){return o(e,"firstWithType","matchingId","single",t,i)};var o=function(t,i,n,o,r,a){if(null!==e){var l;return"collection"==o&&(l=[]),"single"==o&&(l=null),e.childs?(l=s[o](e.childs,t,i,n,l,r,a),e=null,l):(e=null,l)}},r={matchingId:function(e,t,i){return(e.typeId==t||e.poolId==t)^i},truthyResult:function(e,t,i){return(!t||t(e))^i}},s={collection:function(e,t,i,n,o,s,a){for(var l=0;l<e.length;l++){var h=e[l];if(r[n](h,t,s)&&o.push(h),a&&h.isContainer()){var c;c=s?h.findChildren().recurse().not()[i](t):h.findChildren().recurse()[i](t),c&&(o=o.concat(c))}}return o},single:function(e,t,i,n,o,s,a){for(var l=0;l<e.length;l++){var h=e[l];if(r[n](h,t,s))return h}if(a)for(var l=0;l<e.length;l++)if(h=e[l],h.isContainer())return s?h.findChildren().recurse().not()[i](t):h.findChildren().recurse()[i](t)}};return new n}),define("game-object-container",["game-object","visibility-control","child-finder"],function(e,t,i){var n=e.extend({init:function(){this._super(),this.childs=null},start:function(){if(this._super(),this.childs)for(var e=0;e<this.childs.length;e++)this.childs[e].start()},add:function(e){return e?(this.childs||(this.childs=[]),e.parent&&e.parent.remove(e),e.parent=this,this.childs.push(e),e.added(this),e):void 0},remove:function(e){e&&(e.parent=null,this.childs&&(this.childs.splice(this.childs.indexOf(e),1),this.childrenOptions&&this.childrenOptions[e.uid]&&delete this.childrenOptions[e.uid],e.removed(this)))},update:function(e){if(this.transform(),this.childs)for(var t,i=null,n=0;n<this.childs.length;n++)if(i=this.childs[n],i.canUpdate&&(!this.childrenOptions||!this.childrenOptions[i.uid]||this.childrenOptions[i.uid].update))if(i.update(e),t=i.hasRenderer(),i.hasComponents()){if(i.transformedOnce())for(var o=0;o<i.components.length;o++)i.components[o].update&&i.components[o].isEnabled()&&i.components[o].update(e);t&&i.renderer.update(e),i.isContainer()||i.transform()}else t&&i.renderer.update(e),i.isContainer()||i.transform()},draw:function(e,t){if(this.canDraw&&t.isGameObjectInside(this,e)&&this._super(e,t),this.childs)for(var i=null,n=0;n<this.childs.length;n++)i=this.childs[n],i.isContainer()?i.draw(e,t):i.canDraw&&t.isGameObjectInside(i,e)&&(this.childrenOptions&&this.childrenOptions[i.uid]?this.childrenOptions[i.uid].draw&&i.draw(e,t):i.draw(e,t))},hide:function(e){if(e)return t.user(this).hide(this._super);if(this._super(),this.childs)for(var i=0;i<this.childs.length;i++)this.childs[i].hide()},show:function(e){if(e)return t.user(this).show(this._super);if(this._super(),this.childs)for(var i=0;i<this.childs.length;i++)this.childs[i].show()},stop:function(e){if(this._super(e),this.childs)for(var t=0;t<this.childs.length;t++)this.childs[t].stop(e)},run:function(e){if(this._super(e),this.childs)for(var t=0;t<this.childs.length;t++)this.childs[t].run(e)},toggleVisibility:function(e){if(e)return t.user(this).toggle(this._super);if(this._super(),this.childs)for(var i=0;i<this.childs.length;i++)this.childs[i].toggleVisibility()},addToViewportList:function(e,t){if(this._super(e,t),this.childs)for(var i=0;i<this.childs.length;i++)this.childs[i].addToViewportList(e,t)},removeFromViewportList:function(e,t){if(this._super(e,t),this.childs)for(var i=0;i<this.childs.length;i++)this.childs[i].removeFromViewportList(e,t)},setChildOptions:function(e,t){this.childrenOptions||(this.childrenOptions={}),t=t||{},t.hasOwnProperty("update")||(t.update=!0),t.hasOwnProperty("draw")||(t.draw=!0),this.childrenOptions[e.uid]=t},getChildOptions:function(e){return this.childrenOptions||(this.childrenOptions={}),this.childrenOptions[e.uid]?this.childrenOptions[e.uid]:(this.setChildOptions(e),this.childrenOptions[e.uid])},findChildren:function(){return i.user(this)},recycle:function(){if(this.childs){for(var e=0;e<this.childs.length;e++)this.childs[e].recycle();this.childs.length=0,this.childs=null}this._super()},clear:function(){if(this.childs){for(;this.childs.length;)this.childs.pop().clear();this.childs.length=0,this.childs=null}this.childrenOptions=null,this._super()},isContainer:function(){return!0},typeName:function(){return"GameObjectContainer"}});return n}),define("layer",["delegate"],function(e){var t=e.extend({init:function(e,t){this.name=e,this.gameObjects=[],this.visible=!0,this.viewport=t},add:function(e){var t=this.gameObjects.indexOf(e);return-1==t?(this.gameObjects.push(e),e.addToViewportList(this.viewport.name,this.name),e):null},remove:function(e){var t=this.gameObjects.indexOf(e);return-1!=t?(this.gameObjects.splice(t,1),e.removeFromViewportList(this.viewport.name,this.name),e):null},removeAll:function(){for(var e=[],t=0;t<this.gameObjects.length;t++)e.push(this.remove(this.gameObjects[t]));return e},draw:function(e){if(this.visible)for(var t=0;t<this.gameObjects.length;t++){var i=this.gameObjects[t];i.isContainer()?i.draw(e,this.viewport):i.canDraw&&this.viewport.isGameObjectInside(i,e)&&i.draw(e,this.viewport)}},show:function(){this.visible=!0},showGameObjects:function(){for(var e=0;e<this.gameObjects.length;e++)this.gameObjects[e].show()},hide:function(){this.visible=!1},hideGameObjects:function(){for(var e=0;e<this.gameObjects.length;e++)this.gameObjects[e].hide()},moveGameObjectToFront:function(e){var t=this.gameObjects.indexOf(e);-1!=t&&(this.gameObjects.splice(t,1),this.gameObjects.push(e))},moveGameObjectToBack:function(e){var t=this.gameObjects.indexOf(e);-1!=t&&(this.gameObjects.splice(t,1),this.gameObjects.unshift(e))},isVisible:function(){return this.visible}});return t}),define("pool",["delegate","util","error-printer"],function(e,t,i){var n=e.extend({init:function(){this._super(),this.pools={},this.configurations={},this.active={}},createPool:function(e,t,i){null==this.pools[e]&&(this.pools[e]={objects:[],type:t},this.addInitialObjectsToPool(i,e),this.execute(this.INIT,this.pools[e])),null==this.active[e]&&(this.active[e]=[])},createDynamicPool:function(e,t){null==this.pools[e]&&(this.pools[e]={objects:[],type:t},this.pools[e].dynamic=!0,this.execute(this.INIT,this.pools[e])),null==this.active[e]&&(this.active[e]=[])},createPooledObject:function(e){var t=this.pools[e],i=new t.type;i.poolId=e,t.objects.push(i)},getPoolSize:function(e){this.pools[e].objects.length},getTotalPooledObjectsCount:function(){var e=0;for(var t in this.pools)e+=this.pools[t].objects.length;return e},getTotalActiveObjectsCount:function(){var e=0;for(var t in this.active)e+=this.active[t].length;return e},getActiveObjects:function(e){return this.active[e]},getAllActiveObjects:function(){return this.active},returnToPool:function(e){e.poolId&&(this.pools[e.poolId].objects.push(e),this.active[e.poolId].splice(this.active[e.poolId].indexOf(e),1),this.execute(this.RETURN,e))},getName:function(){i.mustOverrideError("Pool")},addInitialObjectsToPool:function(){i.mustOverrideError("Pool")},createConfiguration:function(){i.mustOverrideError("Pool")},createConfigurationFromObject:function(){i.mustOverrideError("Pool")},getConfiguration:function(){i.mustOverrideError("Pool")},createNewIfNeeded:function(e,t){var i;return t?(i=this.pools[e],i.objects.push(new i.type),i.objects[i.objects.length-1].poolId=e,!0):this.pools[e].maxAmount?!1:(i=this.pools[e],i.objects.push(new i.type),i.objects[i.objects.length-1].poolId=e,!0)},getPooledObject:function(e){var t=this.pools[e].objects.pop();return this.active[e].push(t),this.execute(this.GET,t),t},clear:function(){this.clearObjects(),this.clearConfigurations();for(var e in this.pools)t.destroyObject(this.pools[e]);this.pools={},this.active={},this.execute(this.CLEAR)},clearObjects:function(){var e;for(e in this.pools)for(var i=this.pools[e].objects;i.length>0;)t.destroyObject(i.pop());for(e in this.active)for(var n=this.active[e];n.length>0;)t.destroyObject(n.pop());this.execute(this.CLEAR_OBJECTS)},clearConfiguration:function(e){var i=this.configurations[e];i&&(t.destroyObject(i),delete this.configurations[e],this.execute(this.CLEAR_CONFIGURATION,e))},clearConfigurations:function(){for(var e in this.configurations)this.clearConfiguration(e);this.configurations={},this.execute(this.CLEAR_CONFIGURATIONS)},getConfigurationTypes:function(){var e=[];for(var t in this.configurations)e.push(t);return e},configurationExists:function(e){return!!this.configurations[e]},updateConfigurationId:function(e,t){this.configurations[t]=this.configurations[e],delete this.configurations[e];for(var i=this.configurations[t].typeId(),n=this.getActiveObjects(i),o=0;o<n.length;o++)n[o].typeId===e&&(n[o].typeId=t)},toString:function(){var e={name:this.getName()},t=0;for(var i in this.pools)e[i]={pooled:this.pools[i].objects.length,active:this.active[i].length,total:this.pools[i].objects.length+this.active[i].length},t+=e[i].total;return e.total=t,JSON.stringify(e,null,2)}});return Object.defineProperty(n.prototype,"INIT",{get:function(){return"init"}}),Object.defineProperty(n.prototype,"GET",{get:function(){return"get"}}),Object.defineProperty(n.prototype,"RETURN",{get:function(){return"return"}}),Object.defineProperty(n.prototype,"CREATE_CONFIGURATION",{get:function(){return"create_configurations"}}),Object.defineProperty(n.prototype,"UPDATE_CONFIGURATION",{get:function(){return"update_configurations"}}),Object.defineProperty(n.prototype,"CLEAR",{get:function(){return"clear"}}),Object.defineProperty(n.prototype,"CLEAR_OBJECTS",{get:function(){return"clear_objects"}}),Object.defineProperty(n.prototype,"CLEAR_CONFIGURATIONS",{get:function(){return"clear_configurations"}}),Object.defineProperty(n.prototype,"CLEAR_CONFIGURATION",{get:function(){return"clear_configuration"}}),n}),define("game-object-configuration",["require"],function(){var e=function(e,t){return{componentId:e,args:t}},t=function(e,t,i){this.type=t,this.alias=i,this.hardArguments=null,this.childs=[],this.components=[],this.renderer=null,Object.defineProperty(this,"pool",{configurable:!1,enumerable:!1,writable:!1,value:e})};return t.prototype.typeId=function(){return this.type},t.prototype.configurationId=function(){return this.alias},t.prototype.args=function(e){return this.hardArguments=e,this.pool.execute(this.pool.UPDATE_CONFIGURATION,this),this},t.prototype.addChild=function(e,t){return this.childs.push({childId:e,args:t}),this.pool.execute(this.pool.UPDATE_CONFIGURATION,this),this},t.prototype.addComponent=function(t,i){return this.components.push(e(t,i)),this.pool.execute(this.pool.UPDATE_CONFIGURATION,this),this},t.prototype.setRenderer=function(t,i){return this.renderer=e(t,i),this.pool.execute(this.pool.UPDATE_CONFIGURATION,this),this},t}),define("game-object-pool",["require","error-printer","pool","game-object-configuration"],function(e){var t=e("error-printer"),i=e("pool").extend({createConfiguration:function(t,i){return this.configurations[t]?this.configurations[t]:(this.configurations[t]=new(e("game-object-configuration"))(this,i,t),this.execute(this.CREATE_CONFIGURATION,this.configurations[t]),this.configurations[t])},createConfigurationFromObject:function(e){var t=this.createConfiguration(e.alias,e.type);for(var i in e)t[i]=e[i];return this.execute(this.CREATE_CONFIGURATION,t),t},getName:function(){return"Game Object Pool"},addInitialObjectsToPool:function(e,t){if(e){for(var i=0;e>i;i++)this.createPooledObject(t);this.pools[t].maxAmount=e}},getConfiguration:function(e,i,n){this.configurations[e]||t.printError("Game Object Pool","Configuration with id: "+e+" does not exist");var o=this.configurations[e],r=this.pools[o.type];if(i||r.maxAmount||r.dynamic||t.printError("Game Object Pool","Game Object with type: "+o.type+" does not have a value for maxAmount. It can not be requested explicitly"),r.objects.length<=0){var s;s=r.dynamic?this.createNewIfNeeded(o.type,!0):this.createNewIfNeeded(o.type,n),s||t.printError("Game Object Pool","Game Object with type: "+o.type+" is not available")}return o},getConfigurationObject:function(e){return this.configurations[e]||t.printError("Game Object Pool","Configuration with id: "+e+" does not exist"),this.configurations[e]},getConfigurationTypes:function(){var e=[];for(var t in this.configurations)e.push(t);return e}});return new i}),define("component-configuration",["require"],function(){var e=function(e,t,i){this.componentId=t,this.alias=i,this.componentArgs=null,Object.defineProperty(this,"pool",{configurable:!1,enumerable:!1,writable:!1,value:e})};return e.prototype.typeId=function(){return this.type},e.prototype.configurationId=function(){return this.alias},e.prototype.args=function(e){this.componentArgs=e,this.pool.execute(this.pool.UPDATE_CONFIGURATION,this)},e}),define("component-pool",["require","pool","component-configuration","error-printer","error-printer"],function(e){var t=e("pool").extend({createConfiguration:function(t,i){return this.configurations[t]?this.configurations[t]:(this.configurations[t]=new(e("component-configuration"))(this,i,t),this.execute(this.CREATE_CONFIGURATION,this.configurations[t]),this.configurations[t])},createConfigurationFromObject:function(e){var t=this.createConfiguration(e.alias,e.componentId);for(var i in e)t[i]=e[i];return this.execute(this.CREATE_CONFIGURATION,t),t},getName:function(){return"Component Pool"},addInitialObjectsToPool:function(){},getConfiguration:function(t){var i=this.configurations[t],n=this.pools[i.componentId];if(n.objects.length<=0){var o=this.createNewIfNeeded(i.componentId);o||e("error-printer").printError("Component Pool","Component with id: "+i.componentId+" is not available")}return i},getConfigurationObject:function(t){var i=this.configurations[t];return i||e("error-printer").printError("Component Pool","Configuration with id: "+t+" does not exist"),this.configurations[t]}});return new t}),define("reclaimer",["game-object-pool","component-pool","error-printer"],function(e,t,i){var n=function(){this.marked=[]};return n.prototype.claimWithId=function(e,t){e||i.missingArgumentError("Reclaimer","go"),t||i.missingArgumentError("Reclaimer","id"),(e.typeId==t||e.poolId==t)&&this.claim(e)},n.prototype.markWithId=function(e,t){e||i.missingArgumentError("Reclaimer","go"),t||i.missingArgumentError("Reclaimer","id"),(e.typeId==t||e.poolId==t)&&this.mark(e)},n.prototype.claim=function(e){e.parent&&e.parent.remove(e),e.clear()},n.prototype.mark=function(e){-1==this.marked.indexOf(e)&&e.isActive()&&(this.marked.push(e),e.once(e.RECYCLE,this,function(e){var t=this.marked.indexOf(e);-1!=t&&this.marked.splice(t,1)}))},n.prototype.claimMarked=function(){for(var i=this.marked.length-1;i>=0;i--)this.marked[i]&&this.claim(this.marked[i]);this.clearObjectsFromPools&&(e.clearObjects(),t.clearObjects(),this.clearObjectsFromPools=!1),this.clearPools&&(e.clear(),t.clear(),this.clearPools=!1)},n.prototype.claimChildren=function(e){if(e.isContainer())for(var t=e.findChildren().all(),i=0;i<t.length;i++)this.claim(t[i])},n.prototype.claimType=function(t){for(var i=e.getActiveObjects(t),n=i.length-1;n>=0;n--)this.claimWithId(i[n],t)},n.prototype.markType=function(t){for(var i=e.getActiveObjects(t),n=i.length-1;n>=0;n--)this.markWithId(i[n],t)},n.prototype.claimConfiguration=function(t){for(var i=e.getConfigurationObject(t),n=e.getActiveObjects(i.type),o=n.length-1;o>=0;o--)this.claimWithId(n[o],t)},n.prototype.claimAll=function(){var t=e.getAllActiveObjects();for(var i in t)this.claimType(i)},n.prototype.markAll=function(){var t=e.getAllActiveObjects();for(var i in t)this.markType(i)},n.prototype.claimAllBut=function(t,i){var n=e.getAllActiveObjects(),o=t.charAt(0).toUpperCase()+t.slice(1);for(var r in n)for(var s=n[r],a=s.length-1;a>=0;a--){var l=s[a];"Configuration"==o&&-1==i.indexOf(l.typeId)&&this.claimWithId(l,l.typeId),"Type"==o&&-1==i.indexOf(l.poolId)&&this.claimWithId(l,l.poolId)}},n.prototype.claimOnly=function(e,t){for(var i=e.charAt(0).toUpperCase()+e.slice(1),n=t.length-1;n>=0;n--)this["claim"+i](t[n])},n.prototype.clearAllPools=function(){return{later:function(){this.markAll(),this.clearPools=!0}.bind(this),now:function(){this.claimAll(),e.clear(),t.clear()}.bind(this)}},n.prototype.clearAllObjectsFromPools=function(){return{later:function(){this.markAll(),this.clearObjectsFromPools=!0}.bind(this),now:function(){this.claimAll(),e.clearObjects(),t.clearObjects()}.bind(this)}},n.prototype.clearGameObjectConfiguration=function(t){this.claimConfiguration(t),e.clearConfiguration(t)},new n}),define("vector-2D",[],function(){var e=["copy","perp","reverse","normalize","add","sub","scale","project","projectN","reflect","reflectN","dot","len","len2","distance","equal"],t=function(e,t){this.x=this.x=e||0,this.y=this.y=t||0};return t.prototype.copy=function(e){return this.x=e.x,this.y=e.y,this},t.prototype.perp=function(){var e=this.x;return this.x=this.y,this.y=-e,this},t.prototype.reverse=function(){return this.x=-this.x,this.y=-this.y,this},t.prototype.normalize=function(){var e=this.len();return e>0&&(this.x=this.x/e,this.y=this.y/e),this},t.prototype.add=function(e){return this.x+=e.x,this.y+=e.y,this},t.prototype.sub=function(e){return this.x-=e.x,this.y-=e.y,this},t.prototype.scale=function(e,t){return this.x*=e,this.y*=t||e,this},t.prototype.project=function(e){var t=this.dot(e)/e.len2();return this.x=t*e.x,this.y=t*e.y,this},t.prototype.projectN=function(e){var t=this.dot(e);return this.x=t*e.x,this.y=t*e.y,this},t.prototype.reflect=function(e){var t=this.x,i=this.y;return this.project(e).scale(2),this.x-=t,this.y-=i,this},t.prototype.reflectN=function(e){var t=this.x,i=this.y;return this.projectN(e).scale(2),this.x-=t,this.y-=i,this},t.prototype.dot=function(e){return this.x*e.x+this.y*e.y},t.prototype.len2=function(){return this.dot(this)},t.prototype.len=function(){return Math.sqrt(this.len2())},t.prototype.distance=function(e){var t=0,i=0;return t=e.x-this.x,t*=t,i=e.y-this.y,i*=i,Math.sqrt(t+i)},t.prototype.equal=function(e){return this.x===e.x&&this.y===e.y},t.prototype.clone=function(){return new t(this.x,this.y)},t.isVector=function(t){for(var i=0;i<e.length;i++){var n=e[i];if("[object Function]"!=Object.prototype.toString.call(t[n]))return!1}return!0},t}),define("sat",["vector-2D"],function(e){for(var t=[],i=0;10>i;i++)t.push(new e);for(var n=[],i=0;5>i;i++)n.push([]);var o=function(t,i){this.pos=this.pos=t||new e,this.r=this.r=i||0},r=function(t,i){this.pos=this.pos=t||new e,this.points=this.points=i||[],this.recalc()};r.prototype.recalc=function(){var t=this.points,i=t.length;this.edges=[],this.normals=[];for(var n=0;i>n;n++){var o=t[n],r=i-1>n?t[n+1]:t[0],s=(new e).copy(r).sub(o),a=(new e).copy(s).perp().normalize();this.edges.push(s),this.normals.push(a)}};var s=function(t,i){this.pos=this.pos=t||new e,this.points=this.points=i||[],this.edges=[],this.normals=[];for(var n=0;n<this.points.length;n++)this.edges.push(new e),this.normals.push(new e);this.recalc()};s.prototype.update=function(t){this.points=this.points=t||[],this.edges.length=0,this.normals.length=0;for(var i=0;i<this.points.length;i++)this.edges.push(new e),this.normals.push(new e);this.recalc()},s.prototype.recalc=function(){for(var e=0;e<this.points.length;e++){var t=e<this.points.length-1?this.points[e+1]:this.points[0];this.edges[e].copy(t).sub(this.points[e]),this.normals[e].copy(this.edges[e]).perp().normalize()}};var a=function(){this.a=this.a=null,this.b=this.b=null,this.overlapN=this.overlapN=new e,this.overlapV=this.overlapV=new e,this.clear()};a.prototype.clear=function(){return this.aInB=this.aInB=!0,this.bInA=this.bInA=!0,this.overlap=this.overlap=Number.MAX_VALUE,this},a.prototype.copy=function(t){this.a=t.a,this.b=t.b,this.overlap=t.overlap,this.overlapN=new e,this.overlapV=new e,this.overlapN.copy(t.overlapN),this.overlapV.copy(t.overlapV),this.aInB=t.aInB,this.bInA=t.bInA},a.prototype.invert=function(){var e=this.a;this.a=this.b,this.b=e,this.overlapN=this.overlapN.reverse(),this.overlapV=this.overlapV.reverse(),this.aInB=!this.aInB,this.bInA=!this.bInA};var l=function(e,t,i){for(var n=Number.MAX_VALUE,o=-Number.MAX_VALUE,r=e.length,s=0;r>s;s++){var a=e[s].dot(t);n>a&&(n=a),a>o&&(o=a)}i[0]=n,i[1]=o},h=function(e,i,o,r,s,a){var h=n.pop(),c=n.pop(),d=t.pop().copy(i).sub(e),u=d.dot(s);if(l(o,s,h),l(r,s,c),c[0]+=u,c[1]+=u,h[0]>c[1]||c[0]>h[1])return t.push(d),n.push(h),n.push(c),!0;if(a){var p=0;if(h[0]<c[0])if(a.aInB=!1,h[1]<c[1])p=h[1]-c[0],a.bInA=!1;else{var f=h[1]-c[0],g=c[1]-h[0];p=g>f?f:-g}else if(a.bInA=!1,h[1]>c[1])p=h[0]-c[1],a.aInB=!1;else{var f=h[1]-c[0],g=c[1]-h[0];p=g>f?f:-g}var m=Math.abs(p);m<a.overlap&&(a.overlap=m,a.overlapN.copy(s),0>p&&a.overlapN.reverse())}return t.push(d),n.push(h),n.push(c),!1},c=-1,d=0,u=1,p=function(e,t){var i=e.len2(),n=t.dot(e);return 0>n?c:n>i?u:d},f=function(e,i,n){var o=t.pop().copy(i.pos).sub(e.pos),r=e.r+i.r,s=r*r,a=o.len2();if(a>s)return t.push(o),!1;if(n){var l=Math.sqrt(a);n.a=e,n.b=i,n.overlap=r-l,n.overlapN.copy(o.normalize()),n.overlapV.copy(o).scale(n.overlap),n.aInB=e.r<=i.r&&l<=i.r-e.r,n.bInA=i.r<=e.r&&l<=e.r-i.r}return t.push(o),!0},g=function(e,i,n){for(var o=t.pop().copy(i.pos).sub(e.pos),r=i.r,s=r*r,a=e.points,l=a.length,h=t.pop(),d=t.pop(),f=0;l>f;f++){var g=f===l-1?0:f+1,m=0===f?l-1:f-1,y=0,b=null;h.copy(e.edges[f]),d.copy(o).sub(a[f]),n&&d.len2()>s&&(n.aInB=!1);var v=p(h,d);if(v===c){h.copy(e.edges[m]);var C=t.pop().copy(o).sub(a[m]);if(v=p(h,C),v===u){var w=d.len();if(w>r)return t.push(o),t.push(h),t.push(d),t.push(C),!1;n&&(n.bInA=!1,b=d.normalize(),y=r-w)}t.push(C)}else if(v===u){if(h.copy(e.edges[g]),d.copy(o).sub(a[g]),v=p(h,d),v===c){var w=d.len();if(w>r)return t.push(o),t.push(h),t.push(d),!1;n&&(n.bInA=!1,b=d.normalize(),y=r-w)}}else{var P=h.perp().normalize(),w=d.dot(P),_=Math.abs(w);if(w>0&&_>r)return t.push(o),t.push(P),t.push(d),!1;n&&(b=P,y=r-w,(w>=0||2*r>y)&&(n.bInA=!1))}b&&n&&Math.abs(y)<Math.abs(n.overlap)&&(n.overlap=y,n.overlapN.copy(b))}return n&&(n.a=e,n.b=i,n.overlapV.copy(n.overlapN).scale(n.overlap)),t.push(o),t.push(h),t.push(d),!0},m=function(e,t,i){var n=g(t,e,i);if(n&&i){var o=i.a,r=i.aInB;i.overlapN.reverse(),i.overlapV.reverse(),i.a=i.b,i.b=o,i.aInB=i.bInA,i.bInA=r}return n},y=function(e,t,i){for(var n=e.points,o=n.length,r=t.points,s=r.length,a=0;o>a;a++)if(h(e.pos,t.pos,n,r,e.normals[a],i))return!1;for(var a=0;s>a;a++)if(h(e.pos,t.pos,n,r,t.normals[a],i))return!1;return i&&(i.a=e,i.b=t,i.overlapV.copy(i.overlapN).scale(i.overlap)),!0},b=new r(new e,[new e(0,0),new e(1,0),new e(1,1),new e(0,1)]),v=new a,C=function(e,t){b.pos.copy(e),v.clear();var i=y(b,t,v);return i&&(i=v.aInB),i},w={};return w.Circle=o,w.Polygon=r,w.FixedSizePolygon=s,w.Response=a,w.testCircleCircle=f,w.testPolygonCircle=g,w.testCirclePolygon=m,w.testPolygonPolygon=y,w.pointInPolygon=C,w}),define("viewport",["delegate","layer","reclaimer","matrix-3x3","sat","vector-2D","error-printer"],function(e,t,i,n,o,r,s){var a=e.extend({init:function(e,t,i,o,s,a,l){this._super(),this.name=e,this.x=0,this.y=0,this.Width=t,this.Height=i,this.ScaleX=a||1,this.ScaleY=l||1,this.OffsetX=o||0,this.OffsetY=s||0,this.WorldFit=!1,this.Culling=!0,this.Clipping=!0,this.MouseEnabled=!0,this.MouseBounded=!0,this.visible=!0,this.layers=[],this.matrix=new n,this.p1=new r,this.p2=new r,this.p3=new r,this.p4=new r,this.rOffsetX,this.rOffsetY,this.rWidth,this.rHeight,this.left=0,this.top=0,this.right=0,this.bottom=0},setStroke:function(e,t){e&&(this.strokeWidth=e),t&&(this.strokeColor=t)},getStroke:function(){return{width:this.strokeWidth,color:this.strokeColor}},addLayer:function(e){var t=c.call(this,e);return t.newLayer&&(this.layers.push(t.layer),this.execute(this.ADD,t.layer)),t.layer},addLayerAfter:function(e,t){var i=c.call(this,e);return i.newLayer&&(this.layers.splice(u.call(this,t)+1,0,i.layer),this.execute(this.ADD,i.layer)),i.layer},addLayerBefore:function(e,t){var i=c.call(this,e);return i.newLayer&&(this.layers.splice(u.call(this,t),0,i.layer),this.execute(this.ADD,i.layer)),i.layer},getLayers:function(){return this.layers},getLayer:function(e){return d.call(this,e)},changeLayer:function(e,t){var i=d.call(this,e),n=u.call(this,e);this.layers.splice(n,1),this.layers.splice(t,0,i),this.execute(this.CHANGE,result.layer)},removeLayer:function(e){for(var t=0;t<this.layers.length;t++){var i=this.layers[t];if(i.name==e)return this.execute(this.REMOVE,i),p(i.removeAll()),void this.layers.splice(t,1)}s.printError("Viewport","Layer with id:"+e+" does not exist.")},removeAllLayers:function(){for(var e=[];0!=this.layers.length;)e=e.concat(this.layers.pop().removeAll());p(e),this.execute(this.REMOVE_ALL)},addGameObject:function(e,t){var i=d.call(this,e),n=i.add(t);return n&&t.on(t.RECYCLE,this,function(e){i.remove(e)},!0),n},removeGameObject:function(e,t){d.call(this,e).remove(t),p(t)},moveGameObject:function(e,t,i){this.addGameObject(t,i),removeGameObject(e,i)},removeAllGameObjects:function(){for(var e=[],t=0;t<this.layers.length;t++)e=e.concat(this.layers[t].removeAll());p(e)},destroy:function(){this.matrix=null,this.removeAllLayers()},draw:function(e){if(this.visible)for(var t=0;t<this.layers.length;t++)this.layers[t].draw(e)},show:function(){this.visible=!0;for(var e=0;e<this.layers.length;e++)this.layers[e].show()},hide:function(){this.visible=!1;for(var e=0;e<this.layers.length;e++)this.layers[e].hide()},isVisible:function(){return this.visible},isGameObjectInside:function(e,t){var i,n=e.renderer,o=e.getMatrix();if(n?(this.rOffsetX=n.rendererOffsetX(),this.rOffsetY=n.rendererOffsetY(),this.rWidth=n.rendererWidth(),this.rHeight=n.rendererHeight()):(this.rOffsetX=0,this.rOffsetY=0,this.rWidth=1,this.rHeight=1),this.p1=o.transformPoint(this.rOffsetX,this.rOffsetY,this.p1),this.p2=o.transformPoint(this.rOffsetX+this.rWidth,this.rOffsetY,this.p2),this.p3=o.transformPoint(this.rOffsetX+this.rWidth,this.rOffsetY+this.rHeight,this.p3),this.p4=o.transformPoint(this.rOffsetX,this.rOffsetY+this.rHeight,this.p4),this.Culling)return this.left=this.p1.x,this.right=this.p2.x,this.left>this.right&&(i=this.left,this.left=this.right,this.right=i),this.p3.x<this.left&&(this.left=this.p3.x),this.p3.x>this.right&&(this.right=this.p3.x),this.p4.x<this.left&&(this.left=this.p4.x),this.p4.x>this.right&&(this.right=this.p4.x),this.top=this.p1.y,this.bottom=this.p2.y,this.top>this.bottom&&(i=this.top,this.top=this.bottom,this.bottom=i),this.p3.y<this.top&&(this.top=this.p3.y),this.p3.y>this.bottom&&(this.bottom=this.p3.y),this.p4.y<this.top&&(this.top=this.p4.y),this.p4.y>this.bottom&&(this.bottom=this.p4.y),this.left*=this.ScaleX,this.top*=this.ScaleY,this.right*=this.ScaleX,this.bottom*=this.ScaleY,this.left>-this.x+this.Width||-this.x>this.right||this.top>-this.y+this.Height||-this.y>this.bottom?(e.setViewportVisibility(this.name,!1),!1):(e.setViewportVisibility(this.name,!0),!0);var r=this.getMatrix();return this.p1=r.transformPoint(this.p1.x,this.p1.y,this.p1),this.p2=r.transformPoint(this.p2.x,this.p2.y,this.p2),this.p3=r.transformPoint(this.p3.x,this.p3.y,this.p3),this.p4=r.transformPoint(this.p4.x,this.p4.y,this.p4),this.left=this.p1.x,this.right=this.p2.x,this.left>this.right&&(i=this.left,this.left=this.right,this.right=i),this.p3.x<this.left&&(this.left=this.p3.x),this.p3.x>this.right&&(this.right=this.p3.x),this.p4.x<this.left&&(this.left=this.p4.x),this.p4.x>this.right&&(this.right=this.p4.x),this.top=this.p1.y,this.bottom=this.p2.y,this.top>this.bottom&&(i=this.top,this.top=this.bottom,this.bottom=i),this.p3.y<this.top&&(this.top=this.p3.y),this.p3.y>this.bottom&&(this.bottom=this.p3.y),this.p4.y<this.top&&(this.top=this.p4.y),this.p4.y>this.bottom&&(this.bottom=this.p4.y),this.left*=this.ScaleX,this.top*=this.ScaleY,this.right*=this.ScaleX,this.bottom*=this.ScaleY,this.left>t.canvas.width||0>this.right||this.top>t.canvas.height||0>this.bottom?(e.setViewportVisibility(this.name,!1),!1):(e.setViewportVisibility(this.name,!0),!0)
},isPointInside:function(e,t){return e>=this.OffsetX&&e<=this.OffsetX+this.Width&&t>=this.OffsetY&&t<=this.OffsetY+this.Height?!0:!1},layerExists:function(e){return d.call(this,e,!0)?!0:!1},showLayer:function(e){d.call(this,e).show()},hideLayer:function(e){d.call(this,e).hide()},getMatrix:function(){return this.matrix.identity(),this.matrix.prependTransform(this.x+this.OffsetX,this.y+this.OffsetY,this.ScaleX,this.ScaleY,0,0,0,1),this.matrix},transformContext:function(e){e.translate(this.x+this.OffsetX,this.y+this.OffsetY),e.scale(this.ScaleX,this.ScaleY)},canvasToLocalCoordinates:function(e,t,i){var n=this.getMatrix();return n.invert(),n.append(1,0,0,1,e,t),i=i||{},i.x=n.tx,i.y=n.ty,i}});Object.defineProperty(a.prototype,"ADD",{get:function(){return"add"}}),Object.defineProperty(a.prototype,"REMOVE",{get:function(){return"remove"}}),Object.defineProperty(a.prototype,"CHANGE",{get:function(){return"change"}}),Object.defineProperty(a.prototype,"REMOVE_ALL",{get:function(){return"remove_all"}});var l=function(e){var t=e.replace(/^./,e.charAt(0).toLowerCase());Object.defineProperty(a.prototype,e,{get:function(){return Number(this[t])},set:function(e){this[t]=e}})},h=function(e){var t=e.replace(/^./,e.charAt(0).toLowerCase());Object.defineProperty(a.prototype,e,{get:function(){return this[t]},set:function(e){this[t]="string"==typeof e?"true"==e.toLowerCase()?!0:!1:e}})};h("WorldFit"),h("Culling"),h("Clipping"),h("MouseEnabled"),h("MouseBounded"),l("X"),l("Y"),l("Width"),l("Height"),l("OffsetX"),l("OffsetY"),l("ScaleX"),l("ScaleY");var c=function(e){var i=d.call(this,e,!0);return i?{layer:i,newLayer:!1}:{layer:new t(e,this),newLayer:!0}},d=function(e,t){for(var i=0;i<this.layers.length;i++)if(this.layers[i].name==e)return this.layers[i];t||s.printError("Viewport","Layer with id:"+e+" does not exist.")},u=function(e,t){for(var i=0;i<this.layers.length;i++)if(this.layers[i].name==e)return i;t||s.printError("Viewport","Layer with id:"+e+" does not exist.")},p=function(e){if(e.typeId)f(e);else for(var t=0;t<e.length;t++)f(e[t])},f=function(e){e.hasViewport()||i.claim(e)};return a}),define("viewports",["delegate","viewport","error-printer","util"],function(e,t,i,n){var o={},r=[],s=e.extend({init:function(){this._super()},add:function(e){if(!o[e]){var t=a.apply(this,arguments);return o[e]=t,r.push(t),this.execute(this.ADD,t),t}return o[e]},addFromObject:function(e){var t=e.name;if(!o[t]){var i=a(t,e.width,e.height,e.offsetX,e.offsetY,e.scaleX,e.scaleY,e.layers,e.stroke.color,e.stroke.width,e.worldFit,e.culling,e.clipping);return o[t]=i,r.push(i),this.execute(this.ADD,i),i}return o[t]},remove:function(e){o[e]||i.printError("Viewports","Viewport with id:"+e+" does not exist.");var t=o[e];r.splice(r.indexOf(t),1),o[e]=null,delete o[e],this.execute(this.REMOVE,t),t.destroy()},change:function(e,t){var i=o[e],n=r.indexOf(i);r.splice(n,1),r.splice(t,0,i),this.execute(this.CHANGE,i)},after:function(e,t){l.call(this,"after",e,t)},before:function(e,t){l.call(this,"before",e,t)},removeAll:function(){for(var e=r.length-1;e>=0;e--)this.remove(r[e].name)},show:function(e){o[e]||i.printError("Viewports","Viewport with id:"+e+" does not exist."),o[e].show()},hide:function(e){o[e]||i.printError("Viewports","Viewport with id:"+e+" does not exist."),o[e].hide()},get:function(e){return o[e]||i.printError("Viewports","Viewport with id:"+e+" does not exist."),o[e]},exists:function(e){return o[e]},iterate:function(e,t){for(var i=0;i<r.length;i++)t.call(e,r[i])},all:function(){return o},allAsArray:function(){return r}}),a=function(e,i,o,r,s,a,l,h,c,d,u,p,f){var g=new t(e,i,o,r,s,a,l);if(g.setStroke(d,c),n.isBoolean(u)&&(g.WorldFit=u),n.isBoolean(p)&&(g.Culling=p),n.isBoolean(f)&&(g.Clipping=f),h)for(var m=0;m<h.length;m++)g.addLayer(h[m]);return g},l=function(e,t,n){o[t]||i.printError("Viewports","Viewport with id:"+t+" does not exist."),o[n]||i.printError("Viewports","Viewport with id:"+n+" does not exist.");var s,t=o[t],n=o[n],a=r.indexOf(t);"before"==e&&(s=r.indexOf(n)),"after"==e&&(s=r.indexOf(n)+1),r.splice(s,0,r.splice(a,1)[0]),this.execute(this.MOVE,t)};return Object.defineProperty(s.prototype,"ADD",{get:function(){return"add"}}),Object.defineProperty(s.prototype,"REMOVE",{get:function(){return"remove"}}),Object.defineProperty(s.prototype,"CHANGE",{get:function(){return"change"}}),Object.defineProperty(s.prototype,"MOVE",{get:function(){return"move"}}),new s}),define("root",["game-object-container","viewports"],function(e,t){var i=e.extend({init:function(){this._super(),this.allViewports=t.allAsArray(),this.canvas=document.getElementById("game")},draw:function(e){e.clearRect(0,0,this.canvas.width,this.canvas.height);for(var t=0;t<this.allViewports.length;t++){var i=this.allViewports[t];i.isVisible()&&(e.save(),i.Clipping&&(e.beginPath(),i.strokeWidth&&"none"!=i.strokeWidth?e.rect(i.OffsetX-i.strokeWidth,i.OffsetY-i.strokeWidth,i.Width+2*i.strokeWidth,i.Height+2*i.strokeWidth):e.rect(i.OffsetX,i.OffsetY,i.Width,i.Height),e.clip(),e.closePath()),i.transformContext(e),i.draw(e),(i.strokeWidth&&"none"!=i.strokeWidth||i.strokeColor&&i.strokeColor!=i.strokeColor!="none")&&(e.save(),e.setTransform(1,0,0,1,0,0),e.fillStyle=i.strokeColor,e.fillRect(i.OffsetX-i.strokeWidth,i.OffsetY-i.strokeWidth,i.Width+2*i.strokeWidth,i.strokeWidth),e.fillRect(i.OffsetX-i.strokeWidth,i.OffsetY+i.Height,i.Width+2*i.strokeWidth,i.strokeWidth),e.fillRect(i.OffsetX-i.strokeWidth,i.OffsetY-i.strokeWidth,i.strokeWidth,i.Height+2*i.strokeWidth),e.fillRect(i.OffsetX+i.Width,i.OffsetY-i.strokeWidth,i.strokeWidth,i.Height+2*i.strokeWidth),e.restore()),e.restore())}},typeName:function(){return"Root"},isChild:function(){return!1}});return new i}),define("game",["require","delegate","root","reclaimer"],function(e){var t=!1,i=null,n=e("delegate").extend({init:function(){this._super(),this.focus=!0,this.blur=!0,this.initialized=!1,this.lastUpdate=null,this.lastAnimationFrameId=null,this.delta=null,this.mainContainer=null,this.canvas=null,this.context=null,i=this,this.bindedMainLoop=null,this.root=e("root"),this.reclaimer=e("reclaimer")},execute_extensions:function(e,t){for(var i=0;i<this.extensions[e].length;i++){var n=this.extensions[e][i];n.extension.execute(n.args,t)}},add_extension:function(e,t){if(!this.get_extension(e)){var i=new e;this.extensions[i.type()].push({extension:i,args:t}),this.initialized&&i.type()==this.CREATE&&i.execute(t),this.execute(this.EXTENSION_ADDED,i)}},get_extension:function(e){for(var t in this.extensions)for(var i=this.extensions[t],n=i.length-1;n>=0;n--)if(i[n].extension.constructor===e)return i[n].extension},remove_extension:function(e){for(var t in this.extensions)for(var i=this.extensions[t],n=i.length-1;n>=0;n--)i[n].extension.constructor===e&&(i[n].extension.destroy(),i.splice(n,1))},create:function(){this.mainContainer=document.getElementById("main"),this.canvas=document.getElementById("game"),this.context=this.canvas.getContext("2d"),this.blurAction=this.onBlur,this.focusAction=this.onFocus,window.addEventListener("blur",this.onBlur),window.addEventListener("focus",this.onFocus),document.hasFocus()&&this.setupUpdateLoop()},mainLoop:function(e){this.delta=(e-this.lastUpdate)/1e3,this.delta>=0&&this.delta<1&&(this.execute_extensions("update",this.delta),this.root.update(this.delta),this.execute("update",this.delta),this.root.draw(this.context),this.reclaimer.claimMarked()),this.lastUpdate=e,this.lastAnimationFrameId=window.requestAnimationFrame(this.bindedMainLoop)},setupUpdateLoop:function(){this.initialized=!0,this.execute_extensions(this.CREATE),this.execute(this.CREATE);for(var e=["ms","moz","webkit","o"],t=0;t<e.length&&!window.requestAnimationFrame;++t)window.requestAnimationFrame=window[e[t]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[e[t]+"CancelAnimationFrame"]||window[e[t]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(e){return window.setTimeout(e,1e3/60)}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(e){window.clearTimeout(e)}),this.lastUpdate=Date.now(),this.bindedMainLoop=this.mainLoop.bind(this),this.lastAnimationFrameId=window.requestAnimationFrame(this.bindedMainLoop)},onFocus:function(){var e=i.focus;return i.initialized?i.focus&&(i.blur=!0,i.focus=!1,t&&(i.execute_extensions(i.FOCUS),i.execute(i.FOCUS),t=!1,i.lastUpdate=Date.now(),i.lastAnimationFrameId=window.requestAnimationFrame(i.bindedMainLoop))):i.setupUpdateLoop(),e},onBlur:function(){var e=i.blur;return i.blur&&(i.blur=!1,i.focus=!0,t||(i.execute_extensions(i.BLUR),i.execute(i.BLUR),t=!0,window.cancelAnimationFrame(i.lastAnimationFrameId))),e}});Object.defineProperty(n.prototype,"CREATE",{get:function(){return"create"}}),Object.defineProperty(n.prototype,"UPDATE",{get:function(){return"update"}}),Object.defineProperty(n.prototype,"FOCUS",{get:function(){return"focus"}}),Object.defineProperty(n.prototype,"BLUR",{get:function(){return"blur"}}),Object.defineProperty(n.prototype,"EXTENSION_ADDED",{get:function(){return"extension_added"}}),Object.defineProperty(n.prototype,"CHANGE_WIDTH",{get:function(){return"change_width"}}),Object.defineProperty(n.prototype,"CHANGE_HEIGHT",{get:function(){return"change_height"}}),Object.defineProperty(n.prototype,"WIDTH",{get:function(){return this.canvas.width},set:function(e){this.canvas.width=e,this.execute(this.CHANGE_WIDTH,e)}}),Object.defineProperty(n.prototype,"HEIGHT",{get:function(){return this.canvas.height},set:function(e){this.canvas.height=e,this.execute(this.CHANGE_HEIGHT,e)}});var o=new n;return o.prototype=n.prototype,o.extensions={create:[],update:[],focus:[],blur:[]},o}),define("group",["game-object-container","util"],function(e){var t=e.extend({init:function(e){this._super(),this.groupName=e,this.drawAlreadyStopped=!1,this.updateAlreadyStopped=!1},start:function(){this._super(),this.on(this.HIDE,this,function(){this.drawAlreadyStopped=!0}),this.on(this.SHOW,this,function(){this.drawAlreadyStopped=!1}),this.on(this.STOP,this,function(){this.updateAlreadyStopped=!0}),this.on(this.RUN,this,function(){this.updateAlreadyStopped=!1})},add:function(e){this._super(e),e.updateGroup=this.groupName},clear:function(){if(this.childs){for(;this.childs.length;)this.childs.pop().clear();this.childs.length=0,this.childs=null}this.execute("clear",this)},typeName:function(){return"Group"},isChild:function(){return!1}});return t}),define("groups",["delegate","root","group","error-printer"],function(e,t,i,n){var o=e.extend({init:function(){this._super(),this.groups={},this.groupsArray=[]},add:function(e){var n=new i(e);return t.add(n).start(),this.groups[e]=n,this.groupsArray.push(n),this.execute(this.ADD,n),n},remove:function(e){var i=this.groups[e];this.execute(this.REMOVE,i),i.clear(),t.remove(this.groups[e]),this.groupsArray.splice(this.groupsArray.indexOf(i),1),delete this.groups[e]},removeAll:function(){for(var e in this.groups)this.remove(e);this.execute(this.REMOVE_ALL)},clear:function(e){this.groups[e].clear()},get:function(e){return this.groups[e]||n.printError("Groups","group with id:"+e+" does not exist."),this.groups[e]},exists:function(e){return this.groups[e]?!0:!1},change:function(e,t){var i=this.groups[e],n=this.groupsArray.indexOf(i);this.groupsArray.splice(n,1),this.groupsArray.splice(t,0,i),this.execute(this.CHANGE,i)},stop:function(e,t){this.stop_update(e,t),this.stop_draw(e,t)},resume:function(e,t){this.resume_update(e,t),this.resume_draw(e,t)},stop_draw:function(e,t){this.groups[e].hide(t)},resume_draw:function(e,t){this.groups[e].show(t)},stop_update:function(e,t){this.groups[e].stop(t)},resume_update:function(e,t){this.groups[e].run(t)},allGroupNames:function(){for(var e=[],t=0;t<this.groupsArray.length;t++){var i=this.groupsArray[t];for(var n in this.groups)this.groups[n]===i&&e.push(n)}return e},all:function(e,t,i,n){t&&(e=e+"_"+t);for(var o in this.groups)i?i(this.groups[o])&&this[e](o,n):this[e](o,n)}});return Object.defineProperty(o.prototype,"ADD",{get:function(){return"add"}}),Object.defineProperty(o.prototype,"REMOVE",{get:function(){return"remove"}}),Object.defineProperty(o.prototype,"CHANGE",{get:function(){return"change"}}),Object.defineProperty(o.prototype,"REMOVE_ALL",{get:function(){return"removeAll"}}),new o}),define("assembler",["game-object-pool","component-pool","error-printer"],function(e,t,i){var n=function(){},o=-1;return n.prototype.get=function(t,n,r,s){var a=e.getConfiguration(t,r,s),l=e.getPooledObject(a.type);l.reset(),o++,l.uid=o.toString(),l.typeId=t,l.configure(a.hardArguments),l.configure(n);for(var h=0;h<a.components.length;h++)l.addComponent(this.getComponent(a.components[h].componentId,a.components[h].args));for(h=0;h<a.childs.length;h++)l.add||i.printError("Assembler","Game Object with type: "+a.type+" is not a container, can not add childs to it"),l.add(this.get(a.childs[h].childId,a.childs[h].args,!0));return a.renderer&&l.setRenderer(this.getComponent(a.renderer.componentId,a.renderer.args)),l.on(l.RECYCLE,this,function(t){e.returnToPool(t)},!0),l},n.prototype.getComponent=function(e,i){var n=t.getConfiguration(e);if(n){var r=t.getPooledObject(n.componentId);return r.reset(),o++,r.uid=o.toString(),r.typeId=e,r.configure(n.componentArgs),r.configure(i),r.on(r.RECYCLE,this,function(e){t.returnToPool(e)},!0),r}},new n}),define("cache",["require","error-printer","delegate"],function(e){var t=e("error-printer"),i=e("delegate").extend({init:function(){this._super(),this.cacheObject={}},name:function(){t.mustOverrideError("Cache")},cache:function(){t.mustOverrideError("Cache")},get:function(e){return this.cacheObject[e]},getTotalCount:function(){return Object.keys(this.cacheObject).length},clear:function(e){delete this.cacheObject[e],this.execute(this.CLEAR,this.cacheObject[e])},clearAll:function(){for(var e in this.cacheObject)delete this.cacheObject[e];this.execute(this.CLEAR_ALL)},toString:function(){var e={};e.name=this.name(),e.count=this.cacheObject.keys().length,e.objects=[];for(var t in this.cacheObject)e.objects.push(t);return JSON.stringify(e,null,2)}});return Object.defineProperty(i.prototype,"CACHE",{get:function(){return"cache"}}),Object.defineProperty(i.prototype,"CLEAR",{get:function(){return"clear"}}),Object.defineProperty(i.prototype,"CLEAR_ALL",{get:function(){return"clear_all"}}),i}),define("json-cache",["require","cache"],function(e){var t=e("cache").extend({name:function(){return"JSON Cache"},parse:function(e,t){this.cacheObject[e]=JSON.parse(t),this.execute(this.CACHE,this.cacheObject[e])},cache:function(e,t){this.cacheObject[e]=t,this.execute(this.CACHE,this.cacheObject[e])}});return new t}),define("gb",["require","delegate","error-printer","error-printer","error-printer","error-printer","util","asset-map","game","groups","viewports","assembler","reclaimer","game-object-pool","component-pool","json-cache"],function(e){var t=function(e,t){this[t]=e===!1||e===!0?e:!this[t]},i=e("delegate").extend({init:function(){this._super(),this.debug=!1,this.colliderDebug=!1,this.rendererDebug=!1,this.gameObjectDebug=!1,this.viewportsAliases={},this.canvas=document.getElementById("game")},setViewportShortCut:function(e,t){this.viewportsAliases[e]=t},removeViewportShortCut:function(e){delete this.viewportsAliases[e]},getViewportShortCuts:function(){var e=[];for(var t in this.viewportsAliases)e.push(t);return e},add:function(e,t,i,n){var o=this.assembler.get(e,n,!1,!1);return this.groups.get(t).add(o),this.addToViewports(o,i),o.start(),this.execute(this.GAME_OBJECT_ADDED,o),o},create:function(e,t,i,n){var o=this.assembler.get(e,n,!1,!0);return this.groups.get(t).add(o),this.addToViewports(o,i),o.start(),this.execute(this.GAME_OBJECT_ADDED,o),o},getGameObject:function(e,t,i,n,o){var r;return r="create"==o?this.assembler.get(e,n,!1,!0):this.assembler.get(e,n,!1,!1),this.groups.get(t).add(r),this.addToViewports(r,i),r},addChildTo:function(e,t,i,n,o,r){var s;return s="create"==o?this.assembler.get(t,n,!1,!0):this.assembler.get(t,n,!1,!1),e.add(s),i&&(this.addToViewports(s,i),e.setChildOptions(s,{draw:!1})),r=void 0===r?!0:!1,r&&s.start(),this.execute(this.GAME_OBJECT_ADDED,s),s},addToViewports:function(t,i){var n;"string"==typeof i?this.viewportsAliases[i]?n=this.viewportsAliases[i]:e("error-printer").printError("Gb","Viewport shortcut "+i+" does not exist."):"[object Array]"!=Object.prototype.toString.call(i)?e("error-printer").printError("Gb","Viewport argument must be an array"):n=i;for(var o=0;o<n.length;o++)this.viewports.get(n[o].viewport).addGameObject(n[o].layer,t)},removeFromViewports:function(t,i){var n;"string"==typeof i?this.viewportsAliases[i]?n=this.viewportsAliases[i]:e("error-printer").printError("Gb","Viewport shortcut "+i+" does not exist."):"[object Array]"!=Object.prototype.toString.call(i)?e("error-printer").printError("Gb","Viewport argument must be an array"):n=i;for(var o=0;o<n.length;o++)this.viewports.get(n[o].viewport).removeGameObject(n[o].layer,t)},addComponentTo:function(e,t,i){var n=this.assembler.getComponent(t,i);return e.addComponent(n),n.onStarted(e),n},addComponentsTo:function(t,i,n){for(var o=[],r=e("util").isArray(n),s=0;s<i.length;s++)o.push(r?this.addComponentTo(t,i[s],n[s]):this.addComponentTo(t,i[s],n));return o},setRendererTo:function(e,t,i){var n=this.assembler.getComponent(t,i);return e.removeRenderer(),e.setRenderer(n),n.onStarted(e),n},removeComponentFrom:function(e,t){var i=e.findComponents().firstWithType(t);e.removeComponent(i)},findGameObjectsOfType:function(e){for(var t=this.goPool.getActiveObjects(e.poolId),i=[],n=0;n<t.length;n++)t[n].typeId==e.typeId&&i.push(t[n]);return i},addText:function(e,t,i,n){var o=this.assembler.get(e);return this.groups.get(t).add(o),this.addToViewports(o,n),o.renderer.text=i,o.start(),this.execute(this.GAME_OBJECT_ADDED,o),o},assetMap:function(){return e("asset-map").get()},toggleDebug:function(e){t.call(this,e,"debug")},toggleColliderDebug:function(e){t.call(this,e,"colliderDebug")},toggleRendererDebug:function(e){t.call(this,e,"rendererDebug")},toggleGameObjectDebug:function(e){t.call(this,e,"gameObjectDebug")},getEnvironment:function(){var e=window.location.hostname;return"localhost"===e?"dev":""===e?"dev":"prod"}}),n=function(e,t){Object.defineProperty(i.prototype,e,{configurable:!1,enumerable:!1,writable:!1,value:t})};return n("game",e("game")),n("groups",e("groups")),n("viewports",e("viewports")),n("assembler",e("assembler")),n("reclaimer",e("reclaimer")),n("goPool",e("game-object-pool")),n("coPool",e("component-pool")),n("jsonCache",e("json-cache")),n("GAME_OBJECT_ADDED","game-object-added"),new i}),function(e,t){"object"==typeof module&&"object"==typeof module.exports?module.exports=e.document?t(e,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return t(e)}:t(e)}("undefined"!=typeof window?window:this,function(e,t){function i(e){var t=!!e&&"length"in e&&e.length,i=$.type(e);return"function"===i||$.isWindow(e)?!1:"array"===i||0===t||"number"==typeof t&&t>0&&t-1 in e}function n(e,t,i){if($.isFunction(t))return $.grep(e,function(e,n){return!!t.call(e,n,e)!==i});if(t.nodeType)return $.grep(e,function(e){return e===t!==i});if("string"==typeof t){if(ht.test(t))return $.filter(t,e,i);t=$.filter(t,e)}return $.grep(e,function(e){return Y.call(t,e)>-1!==i})}function o(e,t){for(;(e=e[t])&&1!==e.nodeType;);return e}function r(e){var t={};return $.each(e.match(gt)||[],function(e,i){t[i]=!0}),t}function s(){this.expando=$.expando+s.uid++}function a(e,t,i){var n;if(void 0===i&&1===e.nodeType)if(n="data-"+t.replace(wt,"-$&").toLowerCase(),i=e.getAttribute(n),"string"==typeof i){try{i="true"===i?!0:"false"===i?!1:"null"===i?null:+i+""===i?+i:Ct.test(i)?$.parseJSON(i):i}catch(o){}vt.set(e,t,i)}else i=void 0;return i}function l(e,t,i,n){var o,r=1,s=20,a=n?function(){return n.cur()}:function(){return $.css(e,t,"")},l=a(),h=i&&i[3]||($.cssNumber[t]?"":"px"),c=($.cssNumber[t]||"px"!==h&&+l)&&_t.exec($.css(e,t));if(c&&c[3]!==h){h=h||c[3],i=i||[],c=+l||1;do r=r||".5",c/=r,$.style(e,t,c+h);while(r!==(r=a()/l)&&1!==r&&--s)}return i&&(c=+c||+l||0,o=i[1]?c+(i[1]+1)*i[2]:+i[2],n&&(n.unit=h,n.start=c,n.end=o)),o}function h(e,t){var i="undefined"!=typeof e.getElementsByTagName?e.getElementsByTagName(t||"*"):"undefined"!=typeof e.querySelectorAll?e.querySelectorAll(t||"*"):[];return void 0===t||t&&$.nodeName(e,t)?$.merge([e],i):i}function c(e,t){for(var i=0,n=e.length;n>i;i++)bt.set(e[i],"globalEval",!t||bt.get(t[i],"globalEval"))}function d(e,t,i,n,o){for(var r,s,a,l,d,u,p=t.createDocumentFragment(),f=[],g=0,m=e.length;m>g;g++)if(r=e[g],r||0===r)if("object"===$.type(r))$.merge(f,r.nodeType?[r]:r);else if(At.test(r)){for(s=s||p.appendChild(t.createElement("div")),a=(Et.exec(r)||["",""])[1].toLowerCase(),l=It[a]||It._default,s.innerHTML=l[1]+$.htmlPrefilter(r)+l[2],u=l[0];u--;)s=s.lastChild;$.merge(f,s.childNodes),s=p.firstChild,s.textContent=""}else f.push(t.createTextNode(r));for(p.textContent="",g=0;r=f[g++];)if(n&&$.inArray(r,n)>-1)o&&o.push(r);else if(d=$.contains(r.ownerDocument,r),s=h(p.appendChild(r),"script"),d&&c(s),i)for(u=0;r=s[u++];)St.test(r.type||"")&&i.push(r);return p}function u(){return!0}function p(){return!1}function f(){try{return W.activeElement}catch(e){}}function g(e,t,i,n,o,r){var s,a;if("object"==typeof t){"string"!=typeof i&&(n=n||i,i=void 0);for(a in t)g(e,a,i,n,t[a],r);return e}if(null==n&&null==o?(o=i,n=i=void 0):null==o&&("string"==typeof i?(o=n,n=void 0):(o=n,n=i,i=void 0)),o===!1)o=p;else if(!o)return e;return 1===r&&(s=o,o=function(e){return $().off(e),s.apply(this,arguments)},o.guid=s.guid||(s.guid=$.guid++)),e.each(function(){$.event.add(this,t,o,n,i)})}function m(e,t){return $.nodeName(e,"table")&&$.nodeName(11!==t.nodeType?t:t.firstChild,"tr")?e.getElementsByTagName("tbody")[0]||e.appendChild(e.ownerDocument.createElement("tbody")):e}function y(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function b(e){var t=Bt.exec(e.type);return t?e.type=t[1]:e.removeAttribute("type"),e}function v(e,t){var i,n,o,r,s,a,l,h;if(1===t.nodeType){if(bt.hasData(e)&&(r=bt.access(e),s=bt.set(t,r),h=r.events)){delete s.handle,s.events={};for(o in h)for(i=0,n=h[o].length;n>i;i++)$.event.add(t,o,h[o][i])}vt.hasData(e)&&(a=vt.access(e),l=$.extend({},a),vt.set(t,l))}}function C(e,t){var i=t.nodeName.toLowerCase();"input"===i&&Tt.test(e.type)?t.checked=e.checked:("input"===i||"textarea"===i)&&(t.defaultValue=e.defaultValue)}function w(e,t,i,n){t=V.apply([],t);var o,r,s,a,l,c,u=0,p=e.length,f=p-1,g=t[0],m=$.isFunction(g);if(m||p>1&&"string"==typeof g&&!Q.checkClone&&jt.test(g))return e.each(function(o){var r=e.eq(o);m&&(t[0]=g.call(this,o,r.html())),w(r,t,i,n)});if(p&&(o=d(t,e[0].ownerDocument,!1,e,n),r=o.firstChild,1===o.childNodes.length&&(o=r),r||n)){for(s=$.map(h(o,"script"),y),a=s.length;p>u;u++)l=o,u!==f&&(l=$.clone(l,!0,!0),a&&$.merge(s,h(l,"script"))),i.call(e[u],l,u);if(a)for(c=s[s.length-1].ownerDocument,$.map(s,b),u=0;a>u;u++)l=s[u],St.test(l.type||"")&&!bt.access(l,"globalEval")&&$.contains(c,l)&&(l.src?$._evalUrl&&$._evalUrl(l.src):$.globalEval(l.textContent.replace(Nt,"")))}return e}function P(e,t,i){for(var n,o=t?$.filter(t,e):e,r=0;null!=(n=o[r]);r++)i||1!==n.nodeType||$.cleanData(h(n)),n.parentNode&&(i&&$.contains(n.ownerDocument,n)&&c(h(n,"script")),n.parentNode.removeChild(n));return e}function _(e,t){var i=$(t.createElement(e)).appendTo(t.body),n=$.css(i[0],"display");return i.detach(),n}function x(e){var t=W,i=Ft[e];return i||(i=_(e,t),"none"!==i&&i||(Gt=(Gt||$("<iframe frameborder='0' width='0' height='0'/>")).appendTo(t.documentElement),t=Gt[0].contentDocument,t.write(),t.close(),i=_(e,t),Gt.detach()),Ft[e]=i),i}function O(e,t,i){var n,o,r,s,a=e.style;return i=i||Wt(e),s=i?i.getPropertyValue(t)||i[t]:void 0,""!==s&&void 0!==s||$.contains(e.ownerDocument,e)||(s=$.style(e,t)),i&&!Q.pixelMarginRight()&&Ht.test(s)&&zt.test(t)&&(n=a.width,o=a.minWidth,r=a.maxWidth,a.minWidth=a.maxWidth=a.width=s,s=i.width,a.width=n,a.minWidth=o,a.maxWidth=r),void 0!==s?s+"":s}function T(e,t){return{get:function(){return e()?void delete this.get:(this.get=t).apply(this,arguments)}}}function E(e){if(e in Jt)return e;for(var t=e[0].toUpperCase()+e.slice(1),i=Kt.length;i--;)if(e=Kt[i]+t,e in Jt)return e}function S(e,t,i){var n=_t.exec(t);return n?Math.max(0,n[2]-(i||0))+(n[3]||"px"):t}function I(e,t,i,n,o){for(var r=i===(n?"border":"content")?4:"width"===t?1:0,s=0;4>r;r+=2)"margin"===i&&(s+=$.css(e,i+xt[r],!0,o)),n?("content"===i&&(s-=$.css(e,"padding"+xt[r],!0,o)),"margin"!==i&&(s-=$.css(e,"border"+xt[r]+"Width",!0,o))):(s+=$.css(e,"padding"+xt[r],!0,o),"padding"!==i&&(s+=$.css(e,"border"+xt[r]+"Width",!0,o)));return s}function A(e,t,i){var n=!0,o="width"===t?e.offsetWidth:e.offsetHeight,r=Wt(e),s="border-box"===$.css(e,"boxSizing",!1,r);if(0>=o||null==o){if(o=O(e,t,r),(0>o||null==o)&&(o=e.style[t]),Ht.test(o))return o;n=s&&(Q.boxSizingReliable()||o===e.style[t]),o=parseFloat(o)||0}return o+I(e,t,i||(s?"border":"content"),n,r)+"px"}function R(e,t){for(var i,n,o,r=[],s=0,a=e.length;a>s;s++)n=e[s],n.style&&(r[s]=bt.get(n,"olddisplay"),i=n.style.display,t?(r[s]||"none"!==i||(n.style.display=""),""===n.style.display&&Ot(n)&&(r[s]=bt.access(n,"olddisplay",x(n.nodeName)))):(o=Ot(n),"none"===i&&o||bt.set(n,"olddisplay",o?i:$.css(n,"display"))));for(s=0;a>s;s++)n=e[s],n.style&&(t&&"none"!==n.style.display&&""!==n.style.display||(n.style.display=t?r[s]||"":"none"));return e}function M(e,t,i,n,o){return new M.prototype.init(e,t,i,n,o)}function D(){return e.setTimeout(function(){Qt=void 0}),Qt=$.now()}function k(e,t){var i,n=0,o={height:e};for(t=t?1:0;4>n;n+=2-t)i=xt[n],o["margin"+i]=o["padding"+i]=e;return t&&(o.opacity=o.width=e),o}function L(e,t,i){for(var n,o=(N.tweeners[t]||[]).concat(N.tweeners["*"]),r=0,s=o.length;s>r;r++)if(n=o[r].call(i,t,e))return n}function j(e,t,i){var n,o,r,s,a,l,h,c,d=this,u={},p=e.style,f=e.nodeType&&Ot(e),g=bt.get(e,"fxshow");i.queue||(a=$._queueHooks(e,"fx"),null==a.unqueued&&(a.unqueued=0,l=a.empty.fire,a.empty.fire=function(){a.unqueued||l()}),a.unqueued++,d.always(function(){d.always(function(){a.unqueued--,$.queue(e,"fx").length||a.empty.fire()})})),1===e.nodeType&&("height"in t||"width"in t)&&(i.overflow=[p.overflow,p.overflowX,p.overflowY],h=$.css(e,"display"),c="none"===h?bt.get(e,"olddisplay")||x(e.nodeName):h,"inline"===c&&"none"===$.css(e,"float")&&(p.display="inline-block")),i.overflow&&(p.overflow="hidden",d.always(function(){p.overflow=i.overflow[0],p.overflowX=i.overflow[1],p.overflowY=i.overflow[2]}));for(n in t)if(o=t[n],$t.exec(o)){if(delete t[n],r=r||"toggle"===o,o===(f?"hide":"show")){if("show"!==o||!g||void 0===g[n])continue;f=!0}u[n]=g&&g[n]||$.style(e,n)}else h=void 0;if($.isEmptyObject(u))"inline"===("none"===h?x(e.nodeName):h)&&(p.display=h);else{g?"hidden"in g&&(f=g.hidden):g=bt.access(e,"fxshow",{}),r&&(g.hidden=!f),f?$(e).show():d.done(function(){$(e).hide()}),d.done(function(){var t;bt.remove(e,"fxshow");for(t in u)$.style(e,t,u[t])});for(n in u)s=L(f?g[n]:0,n,d),n in g||(g[n]=s.start,f&&(s.end=s.start,s.start="width"===n||"height"===n?1:0))}}function B(e,t){var i,n,o,r,s;for(i in e)if(n=$.camelCase(i),o=t[n],r=e[i],$.isArray(r)&&(o=r[1],r=e[i]=r[0]),i!==n&&(e[n]=r,delete e[i]),s=$.cssHooks[n],s&&"expand"in s){r=s.expand(r),delete e[n];for(i in r)i in e||(e[i]=r[i],t[i]=o)}else t[n]=o}function N(e,t,i){var n,o,r=0,s=N.prefilters.length,a=$.Deferred().always(function(){delete l.elem}),l=function(){if(o)return!1;for(var t=Qt||D(),i=Math.max(0,h.startTime+h.duration-t),n=i/h.duration||0,r=1-n,s=0,l=h.tweens.length;l>s;s++)h.tweens[s].run(r);return a.notifyWith(e,[h,r,i]),1>r&&l?i:(a.resolveWith(e,[h]),!1)},h=a.promise({elem:e,props:$.extend({},t),opts:$.extend(!0,{specialEasing:{},easing:$.easing._default},i),originalProperties:t,originalOptions:i,startTime:Qt||D(),duration:i.duration,tweens:[],createTween:function(t,i){var n=$.Tween(e,h.opts,t,i,h.opts.specialEasing[t]||h.opts.easing);return h.tweens.push(n),n},stop:function(t){var i=0,n=t?h.tweens.length:0;if(o)return this;for(o=!0;n>i;i++)h.tweens[i].run(1);return t?(a.notifyWith(e,[h,1,0]),a.resolveWith(e,[h,t])):a.rejectWith(e,[h,t]),this}}),c=h.props;for(B(c,h.opts.specialEasing);s>r;r++)if(n=N.prefilters[r].call(h,e,c,h.opts))return $.isFunction(n.stop)&&($._queueHooks(h.elem,h.opts.queue).stop=$.proxy(n.stop,n)),n;return $.map(c,L,h),$.isFunction(h.opts.start)&&h.opts.start.call(e,h),$.fx.timer($.extend(l,{elem:e,anim:h,queue:h.opts.queue})),h.progress(h.opts.progress).done(h.opts.done,h.opts.complete).fail(h.opts.fail).always(h.opts.always)}function G(e){return e.getAttribute&&e.getAttribute("class")||""}function F(e,t,i,n){var o;if($.isArray(t))$.each(t,function(t,o){i||ci.test(e)?n(e,o):F(e+"["+("object"==typeof o&&null!=o?t:"")+"]",o,i,n)});else if(i||"object"!==$.type(t))n(e,t);else for(o in t)F(e+"["+o+"]",t[o],i,n)}function z(e){return $.isWindow(e)?e:9===e.nodeType&&e.defaultView}var H=[],W=e.document,U=H.slice,V=H.concat,q=H.push,Y=H.indexOf,X={},K=X.toString,J=X.hasOwnProperty,Q={},Z="2.2.5-pre -ajax,-ajax/jsonp,-ajax/load,-ajax/parseJSON,-ajax/parseXML,-ajax/script,-ajax/var/location,-ajax/var/nonce,-ajax/var/rquery,-ajax/xhr,-manipulation/_evalUrl,-event/ajax,-core/ready",$=function(e,t){return new $.fn.init(e,t)},et=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,tt=/^-ms-/,it=/-([\da-z])/gi,nt=function(e,t){return t.toUpperCase()};$.fn=$.prototype={jquery:Z,constructor:$,selector:"",length:0,toArray:function(){return U.call(this)},get:function(e){return null!=e?0>e?this[e+this.length]:this[e]:U.call(this)},pushStack:function(e){var t=$.merge(this.constructor(),e);return t.prevObject=this,t.context=this.context,t},each:function(e){return $.each(this,e)},map:function(e){return this.pushStack($.map(this,function(t,i){return e.call(t,i,t)}))},slice:function(){return this.pushStack(U.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,i=+e+(0>e?t:0);return this.pushStack(i>=0&&t>i?[this[i]]:[])},end:function(){return this.prevObject||this.constructor()},push:q,sort:H.sort,splice:H.splice},$.extend=$.fn.extend=function(){var e,t,i,n,o,r,s=arguments[0]||{},a=1,l=arguments.length,h=!1;for("boolean"==typeof s&&(h=s,s=arguments[a]||{},a++),"object"==typeof s||$.isFunction(s)||(s={}),a===l&&(s=this,a--);l>a;a++)if(null!=(e=arguments[a]))for(t in e)i=s[t],n=e[t],s!==n&&(h&&n&&($.isPlainObject(n)||(o=$.isArray(n)))?(o?(o=!1,r=i&&$.isArray(i)?i:[]):r=i&&$.isPlainObject(i)?i:{},s[t]=$.extend(h,r,n)):void 0!==n&&(s[t]=n));return s},$.extend({expando:"jQuery"+(Z+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isFunction:function(e){return"function"===$.type(e)},isArray:Array.isArray,isWindow:function(e){return null!=e&&e===e.window},isNumeric:function(e){var t=e&&e.toString();return!$.isArray(e)&&t-parseFloat(t)+1>=0},isPlainObject:function(e){var t;if("object"!==$.type(e)||e.nodeType||$.isWindow(e))return!1;if(e.constructor&&!J.call(e,"constructor")&&!J.call(e.constructor.prototype||{},"isPrototypeOf"))return!1;for(t in e);return void 0===t||J.call(e,t)},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},type:function(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?X[K.call(e)]||"object":typeof e},globalEval:function(e){var t,i=eval;e=$.trim(e),e&&(1===e.indexOf("use strict")?(t=W.createElement("script"),t.text=e,W.head.appendChild(t).parentNode.removeChild(t)):i(e))},camelCase:function(e){return e.replace(tt,"ms-").replace(it,nt)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},each:function(e,t){var n,o=0;if(i(e))for(n=e.length;n>o&&t.call(e[o],o,e[o])!==!1;o++);else for(o in e)if(t.call(e[o],o,e[o])===!1)break;return e},trim:function(e){return null==e?"":(e+"").replace(et,"")},makeArray:function(e,t){var n=t||[];return null!=e&&(i(Object(e))?$.merge(n,"string"==typeof e?[e]:e):q.call(n,e)),n},inArray:function(e,t,i){return null==t?-1:Y.call(t,e,i)},merge:function(e,t){for(var i=+t.length,n=0,o=e.length;i>n;n++)e[o++]=t[n];
return e.length=o,e},grep:function(e,t,i){for(var n,o=[],r=0,s=e.length,a=!i;s>r;r++)n=!t(e[r],r),n!==a&&o.push(e[r]);return o},map:function(e,t,n){var o,r,s=0,a=[];if(i(e))for(o=e.length;o>s;s++)r=t(e[s],s,n),null!=r&&a.push(r);else for(s in e)r=t(e[s],s,n),null!=r&&a.push(r);return V.apply([],a)},guid:1,proxy:function(e,t){var i,n,o;return"string"==typeof t&&(i=e[t],t=e,e=i),$.isFunction(e)?(n=U.call(arguments,2),o=function(){return e.apply(t||this,n.concat(U.call(arguments)))},o.guid=e.guid=e.guid||$.guid++,o):void 0},now:Date.now,support:Q}),"function"==typeof Symbol&&($.fn[Symbol.iterator]=H[Symbol.iterator]),$.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(e,t){X["[object "+t+"]"]=t.toLowerCase()});var ot=function(e){function t(e,t,i,n){var o,r,s,a,l,h,d,p,f=t&&t.ownerDocument,g=t?t.nodeType:9;if(i=i||[],"string"!=typeof e||!e||1!==g&&9!==g&&11!==g)return i;if(!n&&((t?t.ownerDocument||t:F)!==M&&R(t),t=t||M,k)){if(11!==g&&(h=yt.exec(e)))if(o=h[1]){if(9===g){if(!(s=t.getElementById(o)))return i;if(s.id===o)return i.push(s),i}else if(f&&(s=f.getElementById(o))&&N(t,s)&&s.id===o)return i.push(s),i}else{if(h[2])return Z.apply(i,t.getElementsByTagName(e)),i;if((o=h[3])&&w.getElementsByClassName&&t.getElementsByClassName)return Z.apply(i,t.getElementsByClassName(o)),i}if(!(!w.qsa||V[e+" "]||L&&L.test(e))){if(1!==g)f=t,p=e;else if("object"!==t.nodeName.toLowerCase()){for((a=t.getAttribute("id"))?a=a.replace(vt,"\\$&"):t.setAttribute("id",a=G),d=O(e),r=d.length,l=ut.test(a)?"#"+a:"[id='"+a+"']";r--;)d[r]=l+" "+u(d[r]);p=d.join(","),f=bt.test(e)&&c(t.parentNode)||t}if(p)try{return Z.apply(i,f.querySelectorAll(p)),i}catch(m){}finally{a===G&&t.removeAttribute("id")}}}return E(e.replace(at,"$1"),t,i,n)}function i(){function e(i,n){return t.push(i+" ")>P.cacheLength&&delete e[t.shift()],e[i+" "]=n}var t=[];return e}function n(e){return e[G]=!0,e}function o(e){var t=M.createElement("div");try{return!!e(t)}catch(i){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function r(e,t){for(var i=e.split("|"),n=i.length;n--;)P.attrHandle[i[n]]=t}function s(e,t){var i=t&&e,n=i&&1===e.nodeType&&1===t.nodeType&&(~t.sourceIndex||Y)-(~e.sourceIndex||Y);if(n)return n;if(i)for(;i=i.nextSibling;)if(i===t)return-1;return e?1:-1}function a(e){return function(t){var i=t.nodeName.toLowerCase();return"input"===i&&t.type===e}}function l(e){return function(t){var i=t.nodeName.toLowerCase();return("input"===i||"button"===i)&&t.type===e}}function h(e){return n(function(t){return t=+t,n(function(i,n){for(var o,r=e([],i.length,t),s=r.length;s--;)i[o=r[s]]&&(i[o]=!(n[o]=i[o]))})})}function c(e){return e&&"undefined"!=typeof e.getElementsByTagName&&e}function d(){}function u(e){for(var t=0,i=e.length,n="";i>t;t++)n+=e[t].value;return n}function p(e,t,i){var n=t.dir,o=i&&"parentNode"===n,r=H++;return t.first?function(t,i,r){for(;t=t[n];)if(1===t.nodeType||o)return e(t,i,r)}:function(t,i,s){var a,l,h,c=[z,r];if(s){for(;t=t[n];)if((1===t.nodeType||o)&&e(t,i,s))return!0}else for(;t=t[n];)if(1===t.nodeType||o){if(h=t[G]||(t[G]={}),l=h[t.uniqueID]||(h[t.uniqueID]={}),(a=l[n])&&a[0]===z&&a[1]===r)return c[2]=a[2];if(l[n]=c,c[2]=e(t,i,s))return!0}}}function f(e){return e.length>1?function(t,i,n){for(var o=e.length;o--;)if(!e[o](t,i,n))return!1;return!0}:e[0]}function g(e,i,n){for(var o=0,r=i.length;r>o;o++)t(e,i[o],n);return n}function m(e,t,i,n,o){for(var r,s=[],a=0,l=e.length,h=null!=t;l>a;a++)(r=e[a])&&(!i||i(r,n,o))&&(s.push(r),h&&t.push(a));return s}function y(e,t,i,o,r,s){return o&&!o[G]&&(o=y(o)),r&&!r[G]&&(r=y(r,s)),n(function(n,s,a,l){var h,c,d,u=[],p=[],f=s.length,y=n||g(t||"*",a.nodeType?[a]:a,[]),b=!e||!n&&t?y:m(y,u,e,a,l),v=i?r||(n?e:f||o)?[]:s:b;if(i&&i(b,v,a,l),o)for(h=m(v,p),o(h,[],a,l),c=h.length;c--;)(d=h[c])&&(v[p[c]]=!(b[p[c]]=d));if(n){if(r||e){if(r){for(h=[],c=v.length;c--;)(d=v[c])&&h.push(b[c]=d);r(null,v=[],h,l)}for(c=v.length;c--;)(d=v[c])&&(h=r?et(n,d):u[c])>-1&&(n[h]=!(s[h]=d))}}else v=m(v===s?v.splice(f,v.length):v),r?r(null,s,v,l):Z.apply(s,v)})}function b(e){for(var t,i,n,o=e.length,r=P.relative[e[0].type],s=r||P.relative[" "],a=r?1:0,l=p(function(e){return e===t},s,!0),h=p(function(e){return et(t,e)>-1},s,!0),c=[function(e,i,n){var o=!r&&(n||i!==S)||((t=i).nodeType?l(e,i,n):h(e,i,n));return t=null,o}];o>a;a++)if(i=P.relative[e[a].type])c=[p(f(c),i)];else{if(i=P.filter[e[a].type].apply(null,e[a].matches),i[G]){for(n=++a;o>n&&!P.relative[e[n].type];n++);return y(a>1&&f(c),a>1&&u(e.slice(0,a-1).concat({value:" "===e[a-2].type?"*":""})).replace(at,"$1"),i,n>a&&b(e.slice(a,n)),o>n&&b(e=e.slice(n)),o>n&&u(e))}c.push(i)}return f(c)}function v(e,i){var o=i.length>0,r=e.length>0,s=function(n,s,a,l,h){var c,d,u,p=0,f="0",g=n&&[],y=[],b=S,v=n||r&&P.find.TAG("*",h),C=z+=null==b?1:Math.random()||.1,w=v.length;for(h&&(S=s===M||s||h);f!==w&&null!=(c=v[f]);f++){if(r&&c){for(d=0,s||c.ownerDocument===M||(R(c),a=!k);u=e[d++];)if(u(c,s||M,a)){l.push(c);break}h&&(z=C)}o&&((c=!u&&c)&&p--,n&&g.push(c))}if(p+=f,o&&f!==p){for(d=0;u=i[d++];)u(g,y,s,a);if(n){if(p>0)for(;f--;)g[f]||y[f]||(y[f]=J.call(l));y=m(y)}Z.apply(l,y),h&&!n&&y.length>0&&p+i.length>1&&t.uniqueSort(l)}return h&&(z=C,S=b),g};return o?n(s):s}var C,w,P,_,x,O,T,E,S,I,A,R,M,D,k,L,j,B,N,G="sizzle"+1*new Date,F=e.document,z=0,H=0,W=i(),U=i(),V=i(),q=function(e,t){return e===t&&(A=!0),0},Y=1<<31,X={}.hasOwnProperty,K=[],J=K.pop,Q=K.push,Z=K.push,$=K.slice,et=function(e,t){for(var i=0,n=e.length;n>i;i++)if(e[i]===t)return i;return-1},tt="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",it="[\\x20\\t\\r\\n\\f]",nt="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",ot="\\["+it+"*("+nt+")(?:"+it+"*([*^$|!~]?=)"+it+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+nt+"))|)"+it+"*\\]",rt=":("+nt+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+ot+")*)|.*)\\)|)",st=new RegExp(it+"+","g"),at=new RegExp("^"+it+"+|((?:^|[^\\\\])(?:\\\\.)*)"+it+"+$","g"),lt=new RegExp("^"+it+"*,"+it+"*"),ht=new RegExp("^"+it+"*([>+~]|"+it+")"+it+"*"),ct=new RegExp("="+it+"*([^\\]'\"]*?)"+it+"*\\]","g"),dt=new RegExp(rt),ut=new RegExp("^"+nt+"$"),pt={ID:new RegExp("^#("+nt+")"),CLASS:new RegExp("^\\.("+nt+")"),TAG:new RegExp("^("+nt+"|[*])"),ATTR:new RegExp("^"+ot),PSEUDO:new RegExp("^"+rt),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+it+"*(even|odd|(([+-]|)(\\d*)n|)"+it+"*(?:([+-]|)"+it+"*(\\d+)|))"+it+"*\\)|)","i"),bool:new RegExp("^(?:"+tt+")$","i"),needsContext:new RegExp("^"+it+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+it+"*((?:-\\d)?\\d*)"+it+"*\\)|)(?=[^-]|$)","i")},ft=/^(?:input|select|textarea|button)$/i,gt=/^h\d$/i,mt=/^[^{]+\{\s*\[native \w/,yt=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,bt=/[+~]/,vt=/'|\\/g,Ct=new RegExp("\\\\([\\da-f]{1,6}"+it+"?|("+it+")|.)","ig"),wt=function(e,t,i){var n="0x"+t-65536;return n!==n||i?t:0>n?String.fromCharCode(n+65536):String.fromCharCode(n>>10|55296,1023&n|56320)},Pt=function(){R()};try{Z.apply(K=$.call(F.childNodes),F.childNodes),K[F.childNodes.length].nodeType}catch(_t){Z={apply:K.length?function(e,t){Q.apply(e,$.call(t))}:function(e,t){for(var i=e.length,n=0;e[i++]=t[n++];);e.length=i-1}}}w=t.support={},x=t.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return t?"HTML"!==t.nodeName:!1},R=t.setDocument=function(e){var t,i,n=e?e.ownerDocument||e:F;return n!==M&&9===n.nodeType&&n.documentElement?(M=n,D=M.documentElement,k=!x(M),(i=M.defaultView)&&i.top!==i&&(i.addEventListener?i.addEventListener("unload",Pt,!1):i.attachEvent&&i.attachEvent("onunload",Pt)),w.attributes=o(function(e){return e.className="i",!e.getAttribute("className")}),w.getElementsByTagName=o(function(e){return e.appendChild(M.createComment("")),!e.getElementsByTagName("*").length}),w.getElementsByClassName=mt.test(M.getElementsByClassName),w.getById=o(function(e){return D.appendChild(e).id=G,!M.getElementsByName||!M.getElementsByName(G).length}),w.getById?(P.find.ID=function(e,t){if("undefined"!=typeof t.getElementById&&k){var i=t.getElementById(e);return i?[i]:[]}},P.filter.ID=function(e){var t=e.replace(Ct,wt);return function(e){return e.getAttribute("id")===t}}):(delete P.find.ID,P.filter.ID=function(e){var t=e.replace(Ct,wt);return function(e){var i="undefined"!=typeof e.getAttributeNode&&e.getAttributeNode("id");return i&&i.value===t}}),P.find.TAG=w.getElementsByTagName?function(e,t){return"undefined"!=typeof t.getElementsByTagName?t.getElementsByTagName(e):w.qsa?t.querySelectorAll(e):void 0}:function(e,t){var i,n=[],o=0,r=t.getElementsByTagName(e);if("*"===e){for(;i=r[o++];)1===i.nodeType&&n.push(i);return n}return r},P.find.CLASS=w.getElementsByClassName&&function(e,t){return"undefined"!=typeof t.getElementsByClassName&&k?t.getElementsByClassName(e):void 0},j=[],L=[],(w.qsa=mt.test(M.querySelectorAll))&&(o(function(e){D.appendChild(e).innerHTML="<a id='"+G+"'></a><select id='"+G+"-\r\\' msallowcapture=''><option selected=''></option></select>",e.querySelectorAll("[msallowcapture^='']").length&&L.push("[*^$]="+it+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||L.push("\\["+it+"*(?:value|"+tt+")"),e.querySelectorAll("[id~="+G+"-]").length||L.push("~="),e.querySelectorAll(":checked").length||L.push(":checked"),e.querySelectorAll("a#"+G+"+*").length||L.push(".#.+[+~]")}),o(function(e){var t=M.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&L.push("name"+it+"*[*^$|!~]?="),e.querySelectorAll(":enabled").length||L.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),L.push(",.*:")})),(w.matchesSelector=mt.test(B=D.matches||D.webkitMatchesSelector||D.mozMatchesSelector||D.oMatchesSelector||D.msMatchesSelector))&&o(function(e){w.disconnectedMatch=B.call(e,"div"),B.call(e,"[s!='']:x"),j.push("!=",rt)}),L=L.length&&new RegExp(L.join("|")),j=j.length&&new RegExp(j.join("|")),t=mt.test(D.compareDocumentPosition),N=t||mt.test(D.contains)?function(e,t){var i=9===e.nodeType?e.documentElement:e,n=t&&t.parentNode;return e===n||!(!n||1!==n.nodeType||!(i.contains?i.contains(n):e.compareDocumentPosition&&16&e.compareDocumentPosition(n)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},q=t?function(e,t){if(e===t)return A=!0,0;var i=!e.compareDocumentPosition-!t.compareDocumentPosition;return i?i:(i=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1,1&i||!w.sortDetached&&t.compareDocumentPosition(e)===i?e===M||e.ownerDocument===F&&N(F,e)?-1:t===M||t.ownerDocument===F&&N(F,t)?1:I?et(I,e)-et(I,t):0:4&i?-1:1)}:function(e,t){if(e===t)return A=!0,0;var i,n=0,o=e.parentNode,r=t.parentNode,a=[e],l=[t];if(!o||!r)return e===M?-1:t===M?1:o?-1:r?1:I?et(I,e)-et(I,t):0;if(o===r)return s(e,t);for(i=e;i=i.parentNode;)a.unshift(i);for(i=t;i=i.parentNode;)l.unshift(i);for(;a[n]===l[n];)n++;return n?s(a[n],l[n]):a[n]===F?-1:l[n]===F?1:0},M):M},t.matches=function(e,i){return t(e,null,null,i)},t.matchesSelector=function(e,i){if((e.ownerDocument||e)!==M&&R(e),i=i.replace(ct,"='$1']"),!(!w.matchesSelector||!k||V[i+" "]||j&&j.test(i)||L&&L.test(i)))try{var n=B.call(e,i);if(n||w.disconnectedMatch||e.document&&11!==e.document.nodeType)return n}catch(o){}return t(i,M,null,[e]).length>0},t.contains=function(e,t){return(e.ownerDocument||e)!==M&&R(e),N(e,t)},t.attr=function(e,t){(e.ownerDocument||e)!==M&&R(e);var i=P.attrHandle[t.toLowerCase()],n=i&&X.call(P.attrHandle,t.toLowerCase())?i(e,t,!k):void 0;return void 0!==n?n:w.attributes||!k?e.getAttribute(t):(n=e.getAttributeNode(t))&&n.specified?n.value:null},t.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},t.uniqueSort=function(e){var t,i=[],n=0,o=0;if(A=!w.detectDuplicates,I=!w.sortStable&&e.slice(0),e.sort(q),A){for(;t=e[o++];)t===e[o]&&(n=i.push(o));for(;n--;)e.splice(i[n],1)}return I=null,e},_=t.getText=function(e){var t,i="",n=0,o=e.nodeType;if(o){if(1===o||9===o||11===o){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)i+=_(e)}else if(3===o||4===o)return e.nodeValue}else for(;t=e[n++];)i+=_(t);return i},P=t.selectors={cacheLength:50,createPseudo:n,match:pt,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(Ct,wt),e[3]=(e[3]||e[4]||e[5]||"").replace(Ct,wt),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||t.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&t.error(e[0]),e},PSEUDO:function(e){var t,i=!e[6]&&e[2];return pt.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":i&&dt.test(i)&&(t=O(i,!0))&&(t=i.indexOf(")",i.length-t)-i.length)&&(e[0]=e[0].slice(0,t),e[2]=i.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(Ct,wt).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=W[e+" "];return t||(t=new RegExp("(^|"+it+")"+e+"("+it+"|$)"))&&W(e,function(e){return t.test("string"==typeof e.className&&e.className||"undefined"!=typeof e.getAttribute&&e.getAttribute("class")||"")})},ATTR:function(e,i,n){return function(o){var r=t.attr(o,e);return null==r?"!="===i:i?(r+="","="===i?r===n:"!="===i?r!==n:"^="===i?n&&0===r.indexOf(n):"*="===i?n&&r.indexOf(n)>-1:"$="===i?n&&r.slice(-n.length)===n:"~="===i?(" "+r.replace(st," ")+" ").indexOf(n)>-1:"|="===i?r===n||r.slice(0,n.length+1)===n+"-":!1):!0}},CHILD:function(e,t,i,n,o){var r="nth"!==e.slice(0,3),s="last"!==e.slice(-4),a="of-type"===t;return 1===n&&0===o?function(e){return!!e.parentNode}:function(t,i,l){var h,c,d,u,p,f,g=r!==s?"nextSibling":"previousSibling",m=t.parentNode,y=a&&t.nodeName.toLowerCase(),b=!l&&!a,v=!1;if(m){if(r){for(;g;){for(u=t;u=u[g];)if(a?u.nodeName.toLowerCase()===y:1===u.nodeType)return!1;f=g="only"===e&&!f&&"nextSibling"}return!0}if(f=[s?m.firstChild:m.lastChild],s&&b){for(u=m,d=u[G]||(u[G]={}),c=d[u.uniqueID]||(d[u.uniqueID]={}),h=c[e]||[],p=h[0]===z&&h[1],v=p&&h[2],u=p&&m.childNodes[p];u=++p&&u&&u[g]||(v=p=0)||f.pop();)if(1===u.nodeType&&++v&&u===t){c[e]=[z,p,v];break}}else if(b&&(u=t,d=u[G]||(u[G]={}),c=d[u.uniqueID]||(d[u.uniqueID]={}),h=c[e]||[],p=h[0]===z&&h[1],v=p),v===!1)for(;(u=++p&&u&&u[g]||(v=p=0)||f.pop())&&((a?u.nodeName.toLowerCase()!==y:1!==u.nodeType)||!++v||(b&&(d=u[G]||(u[G]={}),c=d[u.uniqueID]||(d[u.uniqueID]={}),c[e]=[z,v]),u!==t)););return v-=o,v===n||v%n===0&&v/n>=0}}},PSEUDO:function(e,i){var o,r=P.pseudos[e]||P.setFilters[e.toLowerCase()]||t.error("unsupported pseudo: "+e);return r[G]?r(i):r.length>1?(o=[e,e,"",i],P.setFilters.hasOwnProperty(e.toLowerCase())?n(function(e,t){for(var n,o=r(e,i),s=o.length;s--;)n=et(e,o[s]),e[n]=!(t[n]=o[s])}):function(e){return r(e,0,o)}):r}},pseudos:{not:n(function(e){var t=[],i=[],o=T(e.replace(at,"$1"));return o[G]?n(function(e,t,i,n){for(var r,s=o(e,null,n,[]),a=e.length;a--;)(r=s[a])&&(e[a]=!(t[a]=r))}):function(e,n,r){return t[0]=e,o(t,null,r,i),t[0]=null,!i.pop()}}),has:n(function(e){return function(i){return t(e,i).length>0}}),contains:n(function(e){return e=e.replace(Ct,wt),function(t){return(t.textContent||t.innerText||_(t)).indexOf(e)>-1}}),lang:n(function(e){return ut.test(e||"")||t.error("unsupported lang: "+e),e=e.replace(Ct,wt).toLowerCase(),function(t){var i;do if(i=k?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return i=i.toLowerCase(),i===e||0===i.indexOf(e+"-");while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var i=e.location&&e.location.hash;return i&&i.slice(1)===t.id},root:function(e){return e===D},focus:function(e){return e===M.activeElement&&(!M.hasFocus||M.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:function(e){return e.disabled===!1},disabled:function(e){return e.disabled===!0},checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,e.selected===!0},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!P.pseudos.empty(e)},header:function(e){return gt.test(e.nodeName)},input:function(e){return ft.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:h(function(){return[0]}),last:h(function(e,t){return[t-1]}),eq:h(function(e,t,i){return[0>i?i+t:i]}),even:h(function(e,t){for(var i=0;t>i;i+=2)e.push(i);return e}),odd:h(function(e,t){for(var i=1;t>i;i+=2)e.push(i);return e}),lt:h(function(e,t,i){for(var n=0>i?i+t:i;--n>=0;)e.push(n);return e}),gt:h(function(e,t,i){for(var n=0>i?i+t:i;++n<t;)e.push(n);return e})}},P.pseudos.nth=P.pseudos.eq;for(C in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})P.pseudos[C]=a(C);for(C in{submit:!0,reset:!0})P.pseudos[C]=l(C);return d.prototype=P.filters=P.pseudos,P.setFilters=new d,O=t.tokenize=function(e,i){var n,o,r,s,a,l,h,c=U[e+" "];if(c)return i?0:c.slice(0);for(a=e,l=[],h=P.preFilter;a;){(!n||(o=lt.exec(a)))&&(o&&(a=a.slice(o[0].length)||a),l.push(r=[])),n=!1,(o=ht.exec(a))&&(n=o.shift(),r.push({value:n,type:o[0].replace(at," ")}),a=a.slice(n.length));for(s in P.filter)!(o=pt[s].exec(a))||h[s]&&!(o=h[s](o))||(n=o.shift(),r.push({value:n,type:s,matches:o}),a=a.slice(n.length));if(!n)break}return i?a.length:a?t.error(e):U(e,l).slice(0)},T=t.compile=function(e,t){var i,n=[],o=[],r=V[e+" "];if(!r){for(t||(t=O(e)),i=t.length;i--;)r=b(t[i]),r[G]?n.push(r):o.push(r);r=V(e,v(o,n)),r.selector=e}return r},E=t.select=function(e,t,i,n){var o,r,s,a,l,h="function"==typeof e&&e,d=!n&&O(e=h.selector||e);if(i=i||[],1===d.length){if(r=d[0]=d[0].slice(0),r.length>2&&"ID"===(s=r[0]).type&&w.getById&&9===t.nodeType&&k&&P.relative[r[1].type]){if(t=(P.find.ID(s.matches[0].replace(Ct,wt),t)||[])[0],!t)return i;h&&(t=t.parentNode),e=e.slice(r.shift().value.length)}for(o=pt.needsContext.test(e)?0:r.length;o--&&(s=r[o],!P.relative[a=s.type]);)if((l=P.find[a])&&(n=l(s.matches[0].replace(Ct,wt),bt.test(r[0].type)&&c(t.parentNode)||t))){if(r.splice(o,1),e=n.length&&u(r),!e)return Z.apply(i,n),i;break}}return(h||T(e,d))(n,t,!k,i,!t||bt.test(e)&&c(t.parentNode)||t),i},w.sortStable=G.split("").sort(q).join("")===G,w.detectDuplicates=!!A,R(),w.sortDetached=o(function(e){return 1&e.compareDocumentPosition(M.createElement("div"))}),o(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||r("type|href|height|width",function(e,t,i){return i?void 0:e.getAttribute(t,"type"===t.toLowerCase()?1:2)}),w.attributes&&o(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||r("value",function(e,t,i){return i||"input"!==e.nodeName.toLowerCase()?void 0:e.defaultValue}),o(function(e){return null==e.getAttribute("disabled")})||r(tt,function(e,t,i){var n;return i?void 0:e[t]===!0?t.toLowerCase():(n=e.getAttributeNode(t))&&n.specified?n.value:null}),t}(e);$.find=ot,$.expr=ot.selectors,$.expr[":"]=$.expr.pseudos,$.uniqueSort=$.unique=ot.uniqueSort,$.text=ot.getText,$.isXMLDoc=ot.isXML,$.contains=ot.contains;var rt=function(e,t,i){for(var n=[],o=void 0!==i;(e=e[t])&&9!==e.nodeType;)if(1===e.nodeType){if(o&&$(e).is(i))break;n.push(e)}return n},st=function(e,t){for(var i=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&i.push(e);return i},at=$.expr.match.needsContext,lt=/^<([\w-]+)\s*\/?>(?:<\/\1>|)$/,ht=/^.[^:#\[\.,]*$/;$.filter=function(e,t,i){var n=t[0];return i&&(e=":not("+e+")"),1===t.length&&1===n.nodeType?$.find.matchesSelector(n,e)?[n]:[]:$.find.matches(e,$.grep(t,function(e){return 1===e.nodeType}))},$.fn.extend({find:function(e){var t,i=this.length,n=[],o=this;if("string"!=typeof e)return this.pushStack($(e).filter(function(){for(t=0;i>t;t++)if($.contains(o[t],this))return!0}));for(t=0;i>t;t++)$.find(e,o[t],n);return n=this.pushStack(i>1?$.unique(n):n),n.selector=this.selector?this.selector+" "+e:e,n},filter:function(e){return this.pushStack(n(this,e||[],!1))},not:function(e){return this.pushStack(n(this,e||[],!0))},is:function(e){return!!n(this,"string"==typeof e&&at.test(e)?$(e):e||[],!1).length}});var ct,dt=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,ut=$.fn.init=function(e,t,i){var n,o;if(!e)return this;if(i=i||ct,"string"==typeof e){if(n="<"===e[0]&&">"===e[e.length-1]&&e.length>=3?[null,e,null]:dt.exec(e),!n||!n[1]&&t)return!t||t.jquery?(t||i).find(e):this.constructor(t).find(e);if(n[1]){if(t=t instanceof $?t[0]:t,$.merge(this,$.parseHTML(n[1],t&&t.nodeType?t.ownerDocument||t:W,!0)),lt.test(n[1])&&$.isPlainObject(t))for(n in t)$.isFunction(this[n])?this[n](t[n]):this.attr(n,t[n]);return this}return o=W.getElementById(n[2]),o&&o.parentNode&&(this.length=1,this[0]=o),this.context=W,this.selector=e,this}return e.nodeType?(this.context=this[0]=e,this.length=1,this):$.isFunction(e)?void 0!==i.ready?i.ready(e):e($):(void 0!==e.selector&&(this.selector=e.selector,this.context=e.context),$.makeArray(e,this))};ut.prototype=$.fn,ct=$(W);var pt=/^(?:parents|prev(?:Until|All))/,ft={children:!0,contents:!0,next:!0,prev:!0};$.fn.extend({has:function(e){var t=$(e,this),i=t.length;return this.filter(function(){for(var e=0;i>e;e++)if($.contains(this,t[e]))return!0})},closest:function(e,t){for(var i,n=0,o=this.length,r=[],s=at.test(e)||"string"!=typeof e?$(e,t||this.context):0;o>n;n++)for(i=this[n];i&&i!==t;i=i.parentNode)if(i.nodeType<11&&(s?s.index(i)>-1:1===i.nodeType&&$.find.matchesSelector(i,e))){r.push(i);break}return this.pushStack(r.length>1?$.uniqueSort(r):r)},index:function(e){return e?"string"==typeof e?Y.call($(e),this[0]):Y.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack($.uniqueSort($.merge(this.get(),$(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),$.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return rt(e,"parentNode")},parentsUntil:function(e,t,i){return rt(e,"parentNode",i)},next:function(e){return o(e,"nextSibling")},prev:function(e){return o(e,"previousSibling")},nextAll:function(e){return rt(e,"nextSibling")},prevAll:function(e){return rt(e,"previousSibling")},nextUntil:function(e,t,i){return rt(e,"nextSibling",i)},prevUntil:function(e,t,i){return rt(e,"previousSibling",i)},siblings:function(e){return st((e.parentNode||{}).firstChild,e)},children:function(e){return st(e.firstChild)},contents:function(e){return e.contentDocument||$.merge([],e.childNodes)}},function(e,t){$.fn[e]=function(i,n){var o=$.map(this,t,i);return"Until"!==e.slice(-5)&&(n=i),n&&"string"==typeof n&&(o=$.filter(n,o)),this.length>1&&(ft[e]||$.uniqueSort(o),pt.test(e)&&o.reverse()),this.pushStack(o)}});var gt=/\S+/g;$.Callbacks=function(e){e="string"==typeof e?r(e):$.extend({},e);var t,i,n,o,s=[],a=[],l=-1,h=function(){for(o=e.once,n=t=!0;a.length;l=-1)for(i=a.shift();++l<s.length;)s[l].apply(i[0],i[1])===!1&&e.stopOnFalse&&(l=s.length,i=!1);e.memory||(i=!1),t=!1,o&&(s=i?[]:"")},c={add:function(){return s&&(i&&!t&&(l=s.length-1,a.push(i)),function n(t){$.each(t,function(t,i){$.isFunction(i)?e.unique&&c.has(i)||s.push(i):i&&i.length&&"string"!==$.type(i)&&n(i)})}(arguments),i&&!t&&h()),this},remove:function(){return $.each(arguments,function(e,t){for(var i;(i=$.inArray(t,s,i))>-1;)s.splice(i,1),l>=i&&l--}),this},has:function(e){return e?$.inArray(e,s)>-1:s.length>0},empty:function(){return s&&(s=[]),this},disable:function(){return o=a=[],s=i="",this},disabled:function(){return!s},lock:function(){return o=a=[],i||(s=i=""),this},locked:function(){return!!o},fireWith:function(e,i){return o||(i=i||[],i=[e,i.slice?i.slice():i],a.push(i),t||h()),this},fire:function(){return c.fireWith(this,arguments),this},fired:function(){return!!n}};return c},$.extend({Deferred:function(e){var t=[["resolve","done",$.Callbacks("once memory"),"resolved"],["reject","fail",$.Callbacks("once memory"),"rejected"],["notify","progress",$.Callbacks("memory")]],i="pending",n={state:function(){return i},always:function(){return o.done(arguments).fail(arguments),this},then:function(){var e=arguments;return $.Deferred(function(i){$.each(t,function(t,r){var s=$.isFunction(e[t])&&e[t];o[r[1]](function(){var e=s&&s.apply(this,arguments);e&&$.isFunction(e.promise)?e.promise().progress(i.notify).done(i.resolve).fail(i.reject):i[r[0]+"With"](this===n?i.promise():this,s?[e]:arguments)})}),e=null}).promise()},promise:function(e){return null!=e?$.extend(e,n):n}},o={};return n.pipe=n.then,$.each(t,function(e,r){var s=r[2],a=r[3];n[r[1]]=s.add,a&&s.add(function(){i=a},t[1^e][2].disable,t[2][2].lock),o[r[0]]=function(){return o[r[0]+"With"](this===o?n:this,arguments),this},o[r[0]+"With"]=s.fireWith}),n.promise(o),e&&e.call(o,o),o},when:function(e){var t,i,n,o=0,r=U.call(arguments),s=r.length,a=1!==s||e&&$.isFunction(e.promise)?s:0,l=1===a?e:$.Deferred(),h=function(e,i,n){return function(o){i[e]=this,n[e]=arguments.length>1?U.call(arguments):o,n===t?l.notifyWith(i,n):--a||l.resolveWith(i,n)}};if(s>1)for(t=new Array(s),i=new Array(s),n=new Array(s);s>o;o++)r[o]&&$.isFunction(r[o].promise)?r[o].promise().progress(h(o,i,t)).done(h(o,n,r)).fail(l.reject):--a;return a||l.resolveWith(n,r),l.promise()}});var mt=function(e,t,i,n,o,r,s){var a=0,l=e.length,h=null==i;if("object"===$.type(i)){o=!0;for(a in i)mt(e,t,a,i[a],!0,r,s)}else if(void 0!==n&&(o=!0,$.isFunction(n)||(s=!0),h&&(s?(t.call(e,n),t=null):(h=t,t=function(e,t,i){return h.call($(e),i)})),t))for(;l>a;a++)t(e[a],i,s?n:n.call(e[a],a,t(e[a],i)));return o?e:h?t.call(e):l?t(e[0],i):r},yt=function(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType};s.uid=1,s.prototype={register:function(e,t){var i=t||{};return e.nodeType?e[this.expando]=i:Object.defineProperty(e,this.expando,{value:i,writable:!0,configurable:!0}),e[this.expando]},cache:function(e){if(!yt(e))return{};var t=e[this.expando];return t||(t={},yt(e)&&(e.nodeType?e[this.expando]=t:Object.defineProperty(e,this.expando,{value:t,configurable:!0}))),t},set:function(e,t,i){var n,o=this.cache(e);if("string"==typeof t)o[t]=i;else for(n in t)o[n]=t[n];return o},get:function(e,t){return void 0===t?this.cache(e):e[this.expando]&&e[this.expando][t]},access:function(e,t,i){var n;return void 0===t||t&&"string"==typeof t&&void 0===i?(n=this.get(e,t),void 0!==n?n:this.get(e,$.camelCase(t))):(this.set(e,t,i),void 0!==i?i:t)},remove:function(e,t){var i,n,o,r=e[this.expando];if(void 0!==r){if(void 0===t)this.register(e);else{$.isArray(t)?n=t.concat(t.map($.camelCase)):(o=$.camelCase(t),t in r?n=[t,o]:(n=o,n=n in r?[n]:n.match(gt)||[])),i=n.length;for(;i--;)delete r[n[i]]}(void 0===t||$.isEmptyObject(r))&&(e.nodeType?e[this.expando]=void 0:delete e[this.expando])}},hasData:function(e){var t=e[this.expando];return void 0!==t&&!$.isEmptyObject(t)}};var bt=new s,vt=new s,Ct=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,wt=/[A-Z]/g;$.extend({hasData:function(e){return vt.hasData(e)||bt.hasData(e)},data:function(e,t,i){return vt.access(e,t,i)},removeData:function(e,t){vt.remove(e,t)},_data:function(e,t,i){return bt.access(e,t,i)},_removeData:function(e,t){bt.remove(e,t)}}),$.fn.extend({data:function(e,t){var i,n,o,r=this[0],s=r&&r.attributes;if(void 0===e){if(this.length&&(o=vt.get(r),1===r.nodeType&&!bt.get(r,"hasDataAttrs"))){for(i=s.length;i--;)s[i]&&(n=s[i].name,0===n.indexOf("data-")&&(n=$.camelCase(n.slice(5)),a(r,n,o[n])));bt.set(r,"hasDataAttrs",!0)}return o}return"object"==typeof e?this.each(function(){vt.set(this,e)}):mt(this,function(t){var i,n;if(r&&void 0===t){if(i=vt.get(r,e)||vt.get(r,e.replace(wt,"-$&").toLowerCase()),void 0!==i)return i;if(n=$.camelCase(e),i=vt.get(r,n),void 0!==i)return i;if(i=a(r,n,void 0),void 0!==i)return i}else n=$.camelCase(e),this.each(function(){var i=vt.get(this,n);vt.set(this,n,t),e.indexOf("-")>-1&&void 0!==i&&vt.set(this,e,t)})},null,t,arguments.length>1,null,!0)},removeData:function(e){return this.each(function(){vt.remove(this,e)})}}),$.extend({queue:function(e,t,i){var n;return e?(t=(t||"fx")+"queue",n=bt.get(e,t),i&&(!n||$.isArray(i)?n=bt.access(e,t,$.makeArray(i)):n.push(i)),n||[]):void 0},dequeue:function(e,t){t=t||"fx";var i=$.queue(e,t),n=i.length,o=i.shift(),r=$._queueHooks(e,t),s=function(){$.dequeue(e,t)};"inprogress"===o&&(o=i.shift(),n--),o&&("fx"===t&&i.unshift("inprogress"),delete r.stop,o.call(e,s,r)),!n&&r&&r.empty.fire()},_queueHooks:function(e,t){var i=t+"queueHooks";return bt.get(e,i)||bt.access(e,i,{empty:$.Callbacks("once memory").add(function(){bt.remove(e,[t+"queue",i])})})}}),$.fn.extend({queue:function(e,t){var i=2;return"string"!=typeof e&&(t=e,e="fx",i--),arguments.length<i?$.queue(this[0],e):void 0===t?this:this.each(function(){var i=$.queue(this,e,t);$._queueHooks(this,e),"fx"===e&&"inprogress"!==i[0]&&$.dequeue(this,e)})},dequeue:function(e){return this.each(function(){$.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var i,n=1,o=$.Deferred(),r=this,s=this.length,a=function(){--n||o.resolveWith(r,[r])};for("string"!=typeof e&&(t=e,e=void 0),e=e||"fx";s--;)i=bt.get(r[s],e+"queueHooks"),i&&i.empty&&(n++,i.empty.add(a));return a(),o.promise(t)}});var Pt=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,_t=new RegExp("^(?:([+-])=|)("+Pt+")([a-z%]*)$","i"),xt=["Top","Right","Bottom","Left"],Ot=function(e,t){return e=t||e,"none"===$.css(e,"display")||!$.contains(e.ownerDocument,e)},Tt=/^(?:checkbox|radio)$/i,Et=/<([\w:-]+)/,St=/^$|\/(?:java|ecma)script/i,It={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};It.optgroup=It.option,It.tbody=It.tfoot=It.colgroup=It.caption=It.thead,It.th=It.td;var At=/<|&#?\w+;/;!function(){var e=W.createDocumentFragment(),t=e.appendChild(W.createElement("div")),i=W.createElement("input");i.setAttribute("type","radio"),i.setAttribute("checked","checked"),i.setAttribute("name","t"),t.appendChild(i),Q.checkClone=t.cloneNode(!0).cloneNode(!0).lastChild.checked,t.innerHTML="<textarea>x</textarea>",Q.noCloneChecked=!!t.cloneNode(!0).lastChild.defaultValue}();var Rt=/^key/,Mt=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,Dt=/^([^.]*)(?:\.(.+)|)/;$.event={global:{},add:function(e,t,i,n,o){var r,s,a,l,h,c,d,u,p,f,g,m=bt.get(e);if(m)for(i.handler&&(r=i,i=r.handler,o=r.selector),i.guid||(i.guid=$.guid++),(l=m.events)||(l=m.events={}),(s=m.handle)||(s=m.handle=function(t){return"undefined"!=typeof $&&$.event.triggered!==t.type?$.event.dispatch.apply(e,arguments):void 0}),t=(t||"").match(gt)||[""],h=t.length;h--;)a=Dt.exec(t[h])||[],p=g=a[1],f=(a[2]||"").split(".").sort(),p&&(d=$.event.special[p]||{},p=(o?d.delegateType:d.bindType)||p,d=$.event.special[p]||{},c=$.extend({type:p,origType:g,data:n,handler:i,guid:i.guid,selector:o,needsContext:o&&$.expr.match.needsContext.test(o),namespace:f.join(".")},r),(u=l[p])||(u=l[p]=[],u.delegateCount=0,d.setup&&d.setup.call(e,n,f,s)!==!1||e.addEventListener&&e.addEventListener(p,s)),d.add&&(d.add.call(e,c),c.handler.guid||(c.handler.guid=i.guid)),o?u.splice(u.delegateCount++,0,c):u.push(c),$.event.global[p]=!0)},remove:function(e,t,i,n,o){var r,s,a,l,h,c,d,u,p,f,g,m=bt.hasData(e)&&bt.get(e);if(m&&(l=m.events)){for(t=(t||"").match(gt)||[""],h=t.length;h--;)if(a=Dt.exec(t[h])||[],p=g=a[1],f=(a[2]||"").split(".").sort(),p){for(d=$.event.special[p]||{},p=(n?d.delegateType:d.bindType)||p,u=l[p]||[],a=a[2]&&new RegExp("(^|\\.)"+f.join("\\.(?:.*\\.|)")+"(\\.|$)"),s=r=u.length;r--;)c=u[r],!o&&g!==c.origType||i&&i.guid!==c.guid||a&&!a.test(c.namespace)||n&&n!==c.selector&&("**"!==n||!c.selector)||(u.splice(r,1),c.selector&&u.delegateCount--,d.remove&&d.remove.call(e,c));
s&&!u.length&&(d.teardown&&d.teardown.call(e,f,m.handle)!==!1||$.removeEvent(e,p,m.handle),delete l[p])}else for(p in l)$.event.remove(e,p+t[h],i,n,!0);$.isEmptyObject(l)&&bt.remove(e,"handle events")}},dispatch:function(e){e=$.event.fix(e);var t,i,n,o,r,s=[],a=U.call(arguments),l=(bt.get(this,"events")||{})[e.type]||[],h=$.event.special[e.type]||{};if(a[0]=e,e.delegateTarget=this,!h.preDispatch||h.preDispatch.call(this,e)!==!1){for(s=$.event.handlers.call(this,e,l),t=0;(o=s[t++])&&!e.isPropagationStopped();)for(e.currentTarget=o.elem,i=0;(r=o.handlers[i++])&&!e.isImmediatePropagationStopped();)(!e.rnamespace||e.rnamespace.test(r.namespace))&&(e.handleObj=r,e.data=r.data,n=(($.event.special[r.origType]||{}).handle||r.handler).apply(o.elem,a),void 0!==n&&(e.result=n)===!1&&(e.preventDefault(),e.stopPropagation()));return h.postDispatch&&h.postDispatch.call(this,e),e.result}},handlers:function(e,t){var i,n,o,r,s=[],a=t.delegateCount,l=e.target;if(a&&l.nodeType&&("click"!==e.type||isNaN(e.button)||e.button<1))for(;l!==this;l=l.parentNode||this)if(1===l.nodeType&&(l.disabled!==!0||"click"!==e.type)){for(n=[],i=0;a>i;i++)r=t[i],o=r.selector+" ",void 0===n[o]&&(n[o]=r.needsContext?$(o,this).index(l)>-1:$.find(o,this,null,[l]).length),n[o]&&n.push(r);n.length&&s.push({elem:l,handlers:n})}return a<t.length&&s.push({elem:this,handlers:t.slice(a)}),s},props:"altKey bubbles cancelable ctrlKey currentTarget detail eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){return null==e.which&&(e.which=null!=t.charCode?t.charCode:t.keyCode),e}},mouseHooks:{props:"button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(e,t){var i,n,o,r=t.button;return null==e.pageX&&null!=t.clientX&&(i=e.target.ownerDocument||W,n=i.documentElement,o=i.body,e.pageX=t.clientX+(n&&n.scrollLeft||o&&o.scrollLeft||0)-(n&&n.clientLeft||o&&o.clientLeft||0),e.pageY=t.clientY+(n&&n.scrollTop||o&&o.scrollTop||0)-(n&&n.clientTop||o&&o.clientTop||0)),e.which||void 0===r||(e.which=1&r?1:2&r?3:4&r?2:0),e}},fix:function(e){if(e[$.expando])return e;var t,i,n,o=e.type,r=e,s=this.fixHooks[o];for(s||(this.fixHooks[o]=s=Mt.test(o)?this.mouseHooks:Rt.test(o)?this.keyHooks:{}),n=s.props?this.props.concat(s.props):this.props,e=new $.Event(r),t=n.length;t--;)i=n[t],e[i]=r[i];return e.target||(e.target=W),3===e.target.nodeType&&(e.target=e.target.parentNode),s.filter?s.filter(e,r):e},special:{load:{noBubble:!0},focus:{trigger:function(){return this!==f()&&this.focus?(this.focus(),!1):void 0},delegateType:"focusin"},blur:{trigger:function(){return this===f()&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},click:{trigger:function(){return"checkbox"===this.type&&this.click&&$.nodeName(this,"input")?(this.click(),!1):void 0},_default:function(e){return $.nodeName(e.target,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}}},$.removeEvent=function(e,t,i){e.removeEventListener&&e.removeEventListener(t,i)},$.Event=function(e,t){return this instanceof $.Event?(e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&e.returnValue===!1?u:p):this.type=e,t&&$.extend(this,t),this.timeStamp=e&&e.timeStamp||$.now(),void(this[$.expando]=!0)):new $.Event(e,t)},$.Event.prototype={constructor:$.Event,isDefaultPrevented:p,isPropagationStopped:p,isImmediatePropagationStopped:p,isSimulated:!1,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=u,e&&!this.isSimulated&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=u,e&&!this.isSimulated&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=u,e&&!this.isSimulated&&e.stopImmediatePropagation(),this.stopPropagation()}},$.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(e,t){$.event.special[e]={delegateType:t,bindType:t,handle:function(e){var i,n=this,o=e.relatedTarget,r=e.handleObj;return(!o||o!==n&&!$.contains(n,o))&&(e.type=r.origType,i=r.handler.apply(this,arguments),e.type=t),i}}}),$.fn.extend({on:function(e,t,i,n){return g(this,e,t,i,n)},one:function(e,t,i,n){return g(this,e,t,i,n,1)},off:function(e,t,i){var n,o;if(e&&e.preventDefault&&e.handleObj)return n=e.handleObj,$(e.delegateTarget).off(n.namespace?n.origType+"."+n.namespace:n.origType,n.selector,n.handler),this;if("object"==typeof e){for(o in e)this.off(o,t,e[o]);return this}return(t===!1||"function"==typeof t)&&(i=t,t=void 0),i===!1&&(i=p),this.each(function(){$.event.remove(this,e,i,t)})}});var kt=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:-]+)[^>]*)\/>/gi,Lt=/<script|<style|<link/i,jt=/checked\s*(?:[^=]|=\s*.checked.)/i,Bt=/^true\/(.*)/,Nt=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;$.extend({htmlPrefilter:function(e){return e.replace(kt,"<$1></$2>")},clone:function(e,t,i){var n,o,r,s,a=e.cloneNode(!0),l=$.contains(e.ownerDocument,e);if(!(Q.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||$.isXMLDoc(e)))for(s=h(a),r=h(e),n=0,o=r.length;o>n;n++)C(r[n],s[n]);if(t)if(i)for(r=r||h(e),s=s||h(a),n=0,o=r.length;o>n;n++)v(r[n],s[n]);else v(e,a);return s=h(a,"script"),s.length>0&&c(s,!l&&h(e,"script")),a},cleanData:function(e){for(var t,i,n,o=$.event.special,r=0;void 0!==(i=e[r]);r++)if(yt(i)){if(t=i[bt.expando]){if(t.events)for(n in t.events)o[n]?$.event.remove(i,n):$.removeEvent(i,n,t.handle);i[bt.expando]=void 0}i[vt.expando]&&(i[vt.expando]=void 0)}}}),$.fn.extend({domManip:w,detach:function(e){return P(this,e,!0)},remove:function(e){return P(this,e)},text:function(e){return mt(this,function(e){return void 0===e?$.text(this):this.empty().each(function(){(1===this.nodeType||11===this.nodeType||9===this.nodeType)&&(this.textContent=e)})},null,e,arguments.length)},append:function(){return w(this,arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=m(this,e);t.appendChild(e)}})},prepend:function(){return w(this,arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=m(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return w(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return w(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&($.cleanData(h(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null==e?!1:e,t=null==t?e:t,this.map(function(){return $.clone(this,e,t)})},html:function(e){return mt(this,function(e){var t=this[0]||{},i=0,n=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if("string"==typeof e&&!Lt.test(e)&&!It[(Et.exec(e)||["",""])[1].toLowerCase()]){e=$.htmlPrefilter(e);try{for(;n>i;i++)t=this[i]||{},1===t.nodeType&&($.cleanData(h(t,!1)),t.innerHTML=e);t=0}catch(o){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var e=[];return w(this,arguments,function(t){var i=this.parentNode;$.inArray(this,e)<0&&($.cleanData(h(this)),i&&i.replaceChild(t,this))},e)}}),$.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){$.fn[e]=function(e){for(var i,n=[],o=$(e),r=o.length-1,s=0;r>=s;s++)i=s===r?this:this.clone(!0),$(o[s])[t](i),q.apply(n,i.get());return this.pushStack(n)}});var Gt,Ft={HTML:"block",BODY:"block"},zt=/^margin/,Ht=new RegExp("^("+Pt+")(?!px)[a-z%]+$","i"),Wt=function(t){var i=t.ownerDocument.defaultView;return i&&i.opener||(i=e),i.getComputedStyle(t)},Ut=function(e,t,i,n){var o,r,s={};for(r in t)s[r]=e.style[r],e.style[r]=t[r];o=i.apply(e,n||[]);for(r in t)e.style[r]=s[r];return o},Vt=W.documentElement;!function(){function t(){a.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;position:relative;display:block;margin:auto;border:1px;padding:1px;top:1%;width:50%",a.innerHTML="",Vt.appendChild(s);var t=e.getComputedStyle(a);i="1%"!==t.top,r="2px"===t.marginLeft,n="4px"===t.width,a.style.marginRight="50%",o="4px"===t.marginRight,Vt.removeChild(s)}var i,n,o,r,s=W.createElement("div"),a=W.createElement("div");a.style&&(a.style.backgroundClip="content-box",a.cloneNode(!0).style.backgroundClip="",Q.clearCloneStyle="content-box"===a.style.backgroundClip,s.style.cssText="border:0;width:8px;height:0;top:0;left:-9999px;padding:0;margin-top:1px;position:absolute",s.appendChild(a),$.extend(Q,{pixelPosition:function(){return t(),i},boxSizingReliable:function(){return null==n&&t(),n},pixelMarginRight:function(){return null==n&&t(),o},reliableMarginLeft:function(){return null==n&&t(),r},reliableMarginRight:function(){var t,i=a.appendChild(W.createElement("div"));return i.style.cssText=a.style.cssText="-webkit-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",i.style.marginRight=i.style.width="0",a.style.width="1px",Vt.appendChild(s),t=!parseFloat(e.getComputedStyle(i).marginRight),Vt.removeChild(s),a.removeChild(i),t}}))}();var qt=/^(none|table(?!-c[ea]).+)/,Yt={position:"absolute",visibility:"hidden",display:"block"},Xt={letterSpacing:"0",fontWeight:"400"},Kt=["Webkit","O","Moz","ms"],Jt=W.createElement("div").style;$.extend({cssHooks:{opacity:{get:function(e,t){if(t){var i=O(e,"opacity");return""===i?"1":i}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":"cssFloat"},style:function(e,t,i,n){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var o,r,s,a=$.camelCase(t),h=e.style;return t=$.cssProps[a]||($.cssProps[a]=E(a)||a),s=$.cssHooks[t]||$.cssHooks[a],void 0===i?s&&"get"in s&&void 0!==(o=s.get(e,!1,n))?o:h[t]:(r=typeof i,"string"===r&&(o=_t.exec(i))&&o[1]&&(i=l(e,t,o),r="number"),null!=i&&i===i&&("number"===r&&(i+=o&&o[3]||($.cssNumber[a]?"":"px")),Q.clearCloneStyle||""!==i||0!==t.indexOf("background")||(h[t]="inherit"),s&&"set"in s&&void 0===(i=s.set(e,i,n))||(h[t]=i)),void 0)}},css:function(e,t,i,n){var o,r,s,a=$.camelCase(t);return t=$.cssProps[a]||($.cssProps[a]=E(a)||a),s=$.cssHooks[t]||$.cssHooks[a],s&&"get"in s&&(o=s.get(e,!0,i)),void 0===o&&(o=O(e,t,n)),"normal"===o&&t in Xt&&(o=Xt[t]),""===i||i?(r=parseFloat(o),i===!0||isFinite(r)?r||0:o):o}}),$.each(["height","width"],function(e,t){$.cssHooks[t]={get:function(e,i,n){return i?qt.test($.css(e,"display"))&&0===e.offsetWidth?Ut(e,Yt,function(){return A(e,t,n)}):A(e,t,n):void 0},set:function(e,i,n){var o,r=n&&Wt(e),s=n&&I(e,t,n,"border-box"===$.css(e,"boxSizing",!1,r),r);return s&&(o=_t.exec(i))&&"px"!==(o[3]||"px")&&(e.style[t]=i,i=$.css(e,t)),S(e,i,s)}}}),$.cssHooks.marginLeft=T(Q.reliableMarginLeft,function(e,t){return t?(parseFloat(O(e,"marginLeft"))||e.getBoundingClientRect().left-Ut(e,{marginLeft:0},function(){return e.getBoundingClientRect().left}))+"px":void 0}),$.cssHooks.marginRight=T(Q.reliableMarginRight,function(e,t){return t?Ut(e,{display:"inline-block"},O,[e,"marginRight"]):void 0}),$.each({margin:"",padding:"",border:"Width"},function(e,t){$.cssHooks[e+t]={expand:function(i){for(var n=0,o={},r="string"==typeof i?i.split(" "):[i];4>n;n++)o[e+xt[n]+t]=r[n]||r[n-2]||r[0];return o}},zt.test(e)||($.cssHooks[e+t].set=S)}),$.fn.extend({css:function(e,t){return mt(this,function(e,t,i){var n,o,r={},s=0;if($.isArray(t)){for(n=Wt(e),o=t.length;o>s;s++)r[t[s]]=$.css(e,t[s],!1,n);return r}return void 0!==i?$.style(e,t,i):$.css(e,t)},e,t,arguments.length>1)},show:function(){return R(this,!0)},hide:function(){return R(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){Ot(this)?$(this).show():$(this).hide()})}}),$.Tween=M,M.prototype={constructor:M,init:function(e,t,i,n,o,r){this.elem=e,this.prop=i,this.easing=o||$.easing._default,this.options=t,this.start=this.now=this.cur(),this.end=n,this.unit=r||($.cssNumber[i]?"":"px")},cur:function(){var e=M.propHooks[this.prop];return e&&e.get?e.get(this):M.propHooks._default.get(this)},run:function(e){var t,i=M.propHooks[this.prop];return this.pos=t=this.options.duration?$.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),i&&i.set?i.set(this):M.propHooks._default.set(this),this}},M.prototype.init.prototype=M.prototype,M.propHooks={_default:{get:function(e){var t;return 1!==e.elem.nodeType||null!=e.elem[e.prop]&&null==e.elem.style[e.prop]?e.elem[e.prop]:(t=$.css(e.elem,e.prop,""),t&&"auto"!==t?t:0)},set:function(e){$.fx.step[e.prop]?$.fx.step[e.prop](e):1!==e.elem.nodeType||null==e.elem.style[$.cssProps[e.prop]]&&!$.cssHooks[e.prop]?e.elem[e.prop]=e.now:$.style(e.elem,e.prop,e.now+e.unit)}}},M.propHooks.scrollTop=M.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},$.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2},_default:"swing"},$.fx=M.prototype.init,$.fx.step={};var Qt,Zt,$t=/^(?:toggle|show|hide)$/,ei=/queueHooks$/;$.Animation=$.extend(N,{tweeners:{"*":[function(e,t){var i=this.createTween(e,t);return l(i.elem,e,_t.exec(t),i),i}]},tweener:function(e,t){$.isFunction(e)?(t=e,e=["*"]):e=e.match(gt);for(var i,n=0,o=e.length;o>n;n++)i=e[n],N.tweeners[i]=N.tweeners[i]||[],N.tweeners[i].unshift(t)},prefilters:[j],prefilter:function(e,t){t?N.prefilters.unshift(e):N.prefilters.push(e)}}),$.speed=function(e,t,i){var n=e&&"object"==typeof e?$.extend({},e):{complete:i||!i&&t||$.isFunction(e)&&e,duration:e,easing:i&&t||t&&!$.isFunction(t)&&t};return n.duration=$.fx.off?0:"number"==typeof n.duration?n.duration:n.duration in $.fx.speeds?$.fx.speeds[n.duration]:$.fx.speeds._default,(null==n.queue||n.queue===!0)&&(n.queue="fx"),n.old=n.complete,n.complete=function(){$.isFunction(n.old)&&n.old.call(this),n.queue&&$.dequeue(this,n.queue)},n},$.fn.extend({fadeTo:function(e,t,i,n){return this.filter(Ot).css("opacity",0).show().end().animate({opacity:t},e,i,n)},animate:function(e,t,i,n){var o=$.isEmptyObject(e),r=$.speed(t,i,n),s=function(){var t=N(this,$.extend({},e),r);(o||bt.get(this,"finish"))&&t.stop(!0)};return s.finish=s,o||r.queue===!1?this.each(s):this.queue(r.queue,s)},stop:function(e,t,i){var n=function(e){var t=e.stop;delete e.stop,t(i)};return"string"!=typeof e&&(i=t,t=e,e=void 0),t&&e!==!1&&this.queue(e||"fx",[]),this.each(function(){var t=!0,o=null!=e&&e+"queueHooks",r=$.timers,s=bt.get(this);if(o)s[o]&&s[o].stop&&n(s[o]);else for(o in s)s[o]&&s[o].stop&&ei.test(o)&&n(s[o]);for(o=r.length;o--;)r[o].elem!==this||null!=e&&r[o].queue!==e||(r[o].anim.stop(i),t=!1,r.splice(o,1));(t||!i)&&$.dequeue(this,e)})},finish:function(e){return e!==!1&&(e=e||"fx"),this.each(function(){var t,i=bt.get(this),n=i[e+"queue"],o=i[e+"queueHooks"],r=$.timers,s=n?n.length:0;for(i.finish=!0,$.queue(this,e,[]),o&&o.stop&&o.stop.call(this,!0),t=r.length;t--;)r[t].elem===this&&r[t].queue===e&&(r[t].anim.stop(!0),r.splice(t,1));for(t=0;s>t;t++)n[t]&&n[t].finish&&n[t].finish.call(this);delete i.finish})}}),$.each(["toggle","show","hide"],function(e,t){var i=$.fn[t];$.fn[t]=function(e,n,o){return null==e||"boolean"==typeof e?i.apply(this,arguments):this.animate(k(t,!0),e,n,o)}}),$.each({slideDown:k("show"),slideUp:k("hide"),slideToggle:k("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){$.fn[e]=function(e,i,n){return this.animate(t,e,i,n)}}),$.timers=[],$.fx.tick=function(){var e,t=0,i=$.timers;for(Qt=$.now();t<i.length;t++)e=i[t],e()||i[t]!==e||i.splice(t--,1);i.length||$.fx.stop(),Qt=void 0},$.fx.timer=function(e){$.timers.push(e),e()?$.fx.start():$.timers.pop()},$.fx.interval=13,$.fx.start=function(){Zt||(Zt=e.setInterval($.fx.tick,$.fx.interval))},$.fx.stop=function(){e.clearInterval(Zt),Zt=null},$.fx.speeds={slow:600,fast:200,_default:400},$.fn.delay=function(t,i){return t=$.fx?$.fx.speeds[t]||t:t,i=i||"fx",this.queue(i,function(i,n){var o=e.setTimeout(i,t);n.stop=function(){e.clearTimeout(o)}})},function(){var e=W.createElement("input"),t=W.createElement("select"),i=t.appendChild(W.createElement("option"));e.type="checkbox",Q.checkOn=""!==e.value,Q.optSelected=i.selected,t.disabled=!0,Q.optDisabled=!i.disabled,e=W.createElement("input"),e.value="t",e.type="radio",Q.radioValue="t"===e.value}();var ti,ii=$.expr.attrHandle;$.fn.extend({attr:function(e,t){return mt(this,$.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){$.removeAttr(this,e)})}}),$.extend({attr:function(e,t,i){var n,o,r=e.nodeType;if(3!==r&&8!==r&&2!==r)return"undefined"==typeof e.getAttribute?$.prop(e,t,i):(1===r&&$.isXMLDoc(e)||(t=t.toLowerCase(),o=$.attrHooks[t]||($.expr.match.bool.test(t)?ti:void 0)),void 0!==i?null===i?void $.removeAttr(e,t):o&&"set"in o&&void 0!==(n=o.set(e,i,t))?n:(e.setAttribute(t,i+""),i):o&&"get"in o&&null!==(n=o.get(e,t))?n:(n=$.find.attr(e,t),null==n?void 0:n))},attrHooks:{type:{set:function(e,t){if(!Q.radioValue&&"radio"===t&&$.nodeName(e,"input")){var i=e.value;return e.setAttribute("type",t),i&&(e.value=i),t}}}},removeAttr:function(e,t){var i,n,o=0,r=t&&t.match(gt);if(r&&1===e.nodeType)for(;i=r[o++];)n=$.propFix[i]||i,$.expr.match.bool.test(i)&&(e[n]=!1),e.removeAttribute(i)}}),ti={set:function(e,t,i){return t===!1?$.removeAttr(e,i):e.setAttribute(i,i),i}},$.each($.expr.match.bool.source.match(/\w+/g),function(e,t){var i=ii[t]||$.find.attr;ii[t]=function(e,t,n){var o,r;return n||(r=ii[t],ii[t]=o,o=null!=i(e,t,n)?t.toLowerCase():null,ii[t]=r),o}});var ni=/^(?:input|select|textarea|button)$/i,oi=/^(?:a|area)$/i;$.fn.extend({prop:function(e,t){return mt(this,$.prop,e,t,arguments.length>1)},removeProp:function(e){return this.each(function(){delete this[$.propFix[e]||e]})}}),$.extend({prop:function(e,t,i){var n,o,r=e.nodeType;if(3!==r&&8!==r&&2!==r)return 1===r&&$.isXMLDoc(e)||(t=$.propFix[t]||t,o=$.propHooks[t]),void 0!==i?o&&"set"in o&&void 0!==(n=o.set(e,i,t))?n:e[t]=i:o&&"get"in o&&null!==(n=o.get(e,t))?n:e[t]},propHooks:{tabIndex:{get:function(e){var t=$.find.attr(e,"tabindex");return t?parseInt(t,10):ni.test(e.nodeName)||oi.test(e.nodeName)&&e.href?0:-1}}},propFix:{"for":"htmlFor","class":"className"}}),Q.optSelected||($.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null},set:function(e){var t=e.parentNode;t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex)}}),$.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){$.propFix[this.toLowerCase()]=this});var ri=/[\t\r\n\f]/g;$.fn.extend({addClass:function(e){var t,i,n,o,r,s,a,l=0;if($.isFunction(e))return this.each(function(t){$(this).addClass(e.call(this,t,G(this)))});if("string"==typeof e&&e)for(t=e.match(gt)||[];i=this[l++];)if(o=G(i),n=1===i.nodeType&&(" "+o+" ").replace(ri," ")){for(s=0;r=t[s++];)n.indexOf(" "+r+" ")<0&&(n+=r+" ");a=$.trim(n),o!==a&&i.setAttribute("class",a)}return this},removeClass:function(e){var t,i,n,o,r,s,a,l=0;if($.isFunction(e))return this.each(function(t){$(this).removeClass(e.call(this,t,G(this)))});if(!arguments.length)return this.attr("class","");if("string"==typeof e&&e)for(t=e.match(gt)||[];i=this[l++];)if(o=G(i),n=1===i.nodeType&&(" "+o+" ").replace(ri," ")){for(s=0;r=t[s++];)for(;n.indexOf(" "+r+" ")>-1;)n=n.replace(" "+r+" "," ");a=$.trim(n),o!==a&&i.setAttribute("class",a)}return this},toggleClass:function(e,t){var i=typeof e;return"boolean"==typeof t&&"string"===i?t?this.addClass(e):this.removeClass(e):this.each($.isFunction(e)?function(i){$(this).toggleClass(e.call(this,i,G(this),t),t)}:function(){var t,n,o,r;if("string"===i)for(n=0,o=$(this),r=e.match(gt)||[];t=r[n++];)o.hasClass(t)?o.removeClass(t):o.addClass(t);else(void 0===e||"boolean"===i)&&(t=G(this),t&&bt.set(this,"__className__",t),this.setAttribute&&this.setAttribute("class",t||e===!1?"":bt.get(this,"__className__")||""))})},hasClass:function(e){var t,i,n=0;for(t=" "+e+" ";i=this[n++];)if(1===i.nodeType&&(" "+G(i)+" ").replace(ri," ").indexOf(t)>-1)return!0;return!1}});var si=/\r/g,ai=/[\x20\t\r\n\f]+/g;$.fn.extend({val:function(e){var t,i,n,o=this[0];{if(arguments.length)return n=$.isFunction(e),this.each(function(i){var o;1===this.nodeType&&(o=n?e.call(this,i,$(this).val()):e,null==o?o="":"number"==typeof o?o+="":$.isArray(o)&&(o=$.map(o,function(e){return null==e?"":e+""})),t=$.valHooks[this.type]||$.valHooks[this.nodeName.toLowerCase()],t&&"set"in t&&void 0!==t.set(this,o,"value")||(this.value=o))});if(o)return t=$.valHooks[o.type]||$.valHooks[o.nodeName.toLowerCase()],t&&"get"in t&&void 0!==(i=t.get(o,"value"))?i:(i=o.value,"string"==typeof i?i.replace(si,""):null==i?"":i)}}}),$.extend({valHooks:{option:{get:function(e){var t=$.find.attr(e,"value");return null!=t?t:$.trim($.text(e)).replace(ai," ")}},select:{get:function(e){for(var t,i,n=e.options,o=e.selectedIndex,r="select-one"===e.type||0>o,s=r?null:[],a=r?o+1:n.length,l=0>o?a:r?o:0;a>l;l++)if(i=n[l],!(!i.selected&&l!==o||(Q.optDisabled?i.disabled:null!==i.getAttribute("disabled"))||i.parentNode.disabled&&$.nodeName(i.parentNode,"optgroup"))){if(t=$(i).val(),r)return t;s.push(t)}return s},set:function(e,t){for(var i,n,o=e.options,r=$.makeArray(t),s=o.length;s--;)n=o[s],(n.selected=$.inArray($.valHooks.option.get(n),r)>-1)&&(i=!0);return i||(e.selectedIndex=-1),r}}}}),$.each(["radio","checkbox"],function(){$.valHooks[this]={set:function(e,t){return $.isArray(t)?e.checked=$.inArray($(e).val(),t)>-1:void 0}},Q.checkOn||($.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})});var li=/^(?:focusinfocus|focusoutblur)$/;$.extend($.event,{trigger:function(t,i,n,o){var r,s,a,l,h,c,d,u=[n||W],p=J.call(t,"type")?t.type:t,f=J.call(t,"namespace")?t.namespace.split("."):[];if(s=a=n=n||W,3!==n.nodeType&&8!==n.nodeType&&!li.test(p+$.event.triggered)&&(p.indexOf(".")>-1&&(f=p.split("."),p=f.shift(),f.sort()),h=p.indexOf(":")<0&&"on"+p,t=t[$.expando]?t:new $.Event(p,"object"==typeof t&&t),t.isTrigger=o?2:3,t.namespace=f.join("."),t.rnamespace=t.namespace?new RegExp("(^|\\.)"+f.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,t.result=void 0,t.target||(t.target=n),i=null==i?[t]:$.makeArray(i,[t]),d=$.event.special[p]||{},o||!d.trigger||d.trigger.apply(n,i)!==!1)){if(!o&&!d.noBubble&&!$.isWindow(n)){for(l=d.delegateType||p,li.test(l+p)||(s=s.parentNode);s;s=s.parentNode)u.push(s),a=s;a===(n.ownerDocument||W)&&u.push(a.defaultView||a.parentWindow||e)}for(r=0;(s=u[r++])&&!t.isPropagationStopped();)t.type=r>1?l:d.bindType||p,c=(bt.get(s,"events")||{})[t.type]&&bt.get(s,"handle"),c&&c.apply(s,i),c=h&&s[h],c&&c.apply&&yt(s)&&(t.result=c.apply(s,i),t.result===!1&&t.preventDefault());return t.type=p,o||t.isDefaultPrevented()||d._default&&d._default.apply(u.pop(),i)!==!1||!yt(n)||h&&$.isFunction(n[p])&&!$.isWindow(n)&&(a=n[h],a&&(n[h]=null),$.event.triggered=p,n[p](),$.event.triggered=void 0,a&&(n[h]=a)),t.result}},simulate:function(e,t,i){var n=$.extend(new $.Event,i,{type:e,isSimulated:!0});$.event.trigger(n,null,t)}}),$.fn.extend({trigger:function(e,t){return this.each(function(){$.event.trigger(e,t,this)})},triggerHandler:function(e,t){var i=this[0];return i?$.event.trigger(e,t,i,!0):void 0}}),$.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(e,t){$.fn[t]=function(e,i){return arguments.length>0?this.on(t,null,e,i):this.trigger(t)}}),$.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}}),Q.focusin="onfocusin"in e,Q.focusin||$.each({focus:"focusin",blur:"focusout"},function(e,t){var i=function(e){$.event.simulate(t,e.target,$.event.fix(e))};$.event.special[t]={setup:function(){var n=this.ownerDocument||this,o=bt.access(n,t);o||n.addEventListener(e,i,!0),bt.access(n,t,(o||0)+1)},teardown:function(){var n=this.ownerDocument||this,o=bt.access(n,t)-1;o?bt.access(n,t,o):(n.removeEventListener(e,i,!0),bt.remove(n,t))}}}),$.fn.extend({wrapAll:function(e){var t;return $.isFunction(e)?this.each(function(t){$(this).wrapAll(e.call(this,t))}):(this[0]&&(t=$(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){for(var e=this;e.firstElementChild;)e=e.firstElementChild;return e}).append(this)),this)},wrapInner:function(e){return this.each($.isFunction(e)?function(t){$(this).wrapInner(e.call(this,t))}:function(){var t=$(this),i=t.contents();i.length?i.wrapAll(e):t.append(e)})},wrap:function(e){var t=$.isFunction(e);return this.each(function(i){$(this).wrapAll(t?e.call(this,i):e)})},unwrap:function(){return this.parent().each(function(){$.nodeName(this,"body")||$(this).replaceWith(this.childNodes)}).end()}}),$.expr.filters.hidden=function(e){return!$.expr.filters.visible(e)},$.expr.filters.visible=function(e){return e.offsetWidth>0||e.offsetHeight>0||e.getClientRects().length>0};var hi=/%20/g,ci=/\[\]$/,di=/\r?\n/g,ui=/^(?:submit|button|image|reset|file)$/i,pi=/^(?:input|select|textarea|keygen)/i;$.param=function(e,t){var i,n=[],o=function(e,t){t=$.isFunction(t)?t():null==t?"":t,n[n.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)};if(void 0===t&&(t=$.ajaxSettings&&$.ajaxSettings.traditional),$.isArray(e)||e.jquery&&!$.isPlainObject(e))$.each(e,function(){o(this.name,this.value)});else for(i in e)F(i,e[i],t,o);return n.join("&").replace(hi,"+")},$.fn.extend({serialize:function(){return $.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=$.prop(this,"elements");return e?$.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!$(this).is(":disabled")&&pi.test(this.nodeName)&&!ui.test(e)&&(this.checked||!Tt.test(e))}).map(function(e,t){var i=$(this).val();return null==i?null:$.isArray(i)?$.map(i,function(e){return{name:t.name,value:e.replace(di,"\r\n")}}):{name:t.name,value:i.replace(di,"\r\n")}}).get()}}),$.parseHTML=function(e,t,i){if(!e||"string"!=typeof e)return null;"boolean"==typeof t&&(i=t,t=!1),t=t||W;var n=lt.exec(e),o=!i&&[];return n?[t.createElement(n[1])]:(n=d([e],t,o),o&&o.length&&$(o).remove(),$.merge([],n.childNodes))},$.expr.filters.animated=function(e){return $.grep($.timers,function(t){return e===t.elem}).length},$.offset={setOffset:function(e,t,i){var n,o,r,s,a,l,h,c=$.css(e,"position"),d=$(e),u={};"static"===c&&(e.style.position="relative"),a=d.offset(),r=$.css(e,"top"),l=$.css(e,"left"),h=("absolute"===c||"fixed"===c)&&(r+l).indexOf("auto")>-1,h?(n=d.position(),s=n.top,o=n.left):(s=parseFloat(r)||0,o=parseFloat(l)||0),$.isFunction(t)&&(t=t.call(e,i,$.extend({},a))),null!=t.top&&(u.top=t.top-a.top+s),null!=t.left&&(u.left=t.left-a.left+o),"using"in t?t.using.call(e,u):d.css(u)}},$.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each(function(t){$.offset.setOffset(this,e,t)});var t,i,n=this[0],o={top:0,left:0},r=n&&n.ownerDocument;if(r)return t=r.documentElement,$.contains(t,n)?(o=n.getBoundingClientRect(),i=z(r),{top:o.top+i.pageYOffset-t.clientTop,left:o.left+i.pageXOffset-t.clientLeft}):o},position:function(){if(this[0]){var e,t,i=this[0],n={top:0,left:0};return"fixed"===$.css(i,"position")?t=i.getBoundingClientRect():(e=this.offsetParent(),t=this.offset(),$.nodeName(e[0],"html")||(n=e.offset()),n.top+=$.css(e[0],"borderTopWidth",!0),n.left+=$.css(e[0],"borderLeftWidth",!0)),{top:t.top-n.top-$.css(i,"marginTop",!0),left:t.left-n.left-$.css(i,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent;e&&"static"===$.css(e,"position");)e=e.offsetParent;return e||Vt})}}),$.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,t){var i="pageYOffset"===t;$.fn[e]=function(n){return mt(this,function(e,n,o){var r=z(e);return void 0===o?r?r[t]:e[n]:void(r?r.scrollTo(i?r.pageXOffset:o,i?o:r.pageYOffset):e[n]=o)},e,n,arguments.length)}}),$.each(["top","left"],function(e,t){$.cssHooks[t]=T(Q.pixelPosition,function(e,i){return i?(i=O(e,t),Ht.test(i)?$(e).position()[t]+"px":i):void 0})}),$.each({Height:"height",Width:"width"},function(e,t){$.each({padding:"inner"+e,content:t,"":"outer"+e},function(i,n){$.fn[n]=function(n,o){var r=arguments.length&&(i||"boolean"!=typeof n),s=i||(n===!0||o===!0?"margin":"border");return mt(this,function(t,i,n){var o;return $.isWindow(t)?t.document.documentElement["client"+e]:9===t.nodeType?(o=t.documentElement,Math.max(t.body["scroll"+e],o["scroll"+e],t.body["offset"+e],o["offset"+e],o["client"+e])):void 0===n?$.css(t,i,s):$.style(t,i,n,s)},t,r?n:void 0,r,null)}})}),$.fn.extend({bind:function(e,t,i){return this.on(e,null,t,i)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,i,n){return this.on(t,e,i,n)},undelegate:function(e,t,i){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",i)},size:function(){return this.length}}),$.fn.andSelf=$.fn.addBack,"function"==typeof define&&define.amd&&define("jquery",[],function(){return $});var fi=e.jQuery,gi=e.$;return $.noConflict=function(t){return e.$===$&&(e.$=gi),t&&e.jQuery===$&&(e.jQuery=fi),$},t||(e.jQuery=e.$=$),$}),function(e,t){"function"==typeof define&&define.amd?define("jquery-transit",["jquery"],t):"object"==typeof exports?module.exports=t(require("jquery")):t(e.jQuery)}(this,function(e){function t(e){if(e in d.style)return e;for(var t=["Moz","Webkit","O","ms"],i=e.charAt(0).toUpperCase()+e.substr(1),n=0;n<t.length;++n){var o=t[n]+i;if(o in d.style)return o}}function i(){return d.style[u.transform]="",d.style[u.transform]="rotateY(90deg)",""!==d.style[u.transform]}function n(e){return"string"==typeof e&&this.parse(e),this}function o(e,t,i){t===!0?e.queue(i):t?e.queue(t,i):e.each(function(){i.call(this)})}function r(t){var i=[];return e.each(t,function(t){t=e.camelCase(t),t=e.transit.propertyMap[t]||e.cssProps[t]||t,t=l(t),u[t]&&(t=l(u[t])),-1===e.inArray(t,i)&&i.push(t)}),i}function s(t,i,n,o){var s=r(t);e.cssEase[n]&&(n=e.cssEase[n]);var a=""+c(i)+" "+n;parseInt(o,10)>0&&(a+=" "+c(o));var l=[];return e.each(s,function(e,t){l.push(t+" "+a)}),l.join(", ")}function a(t,i){i||(e.cssNumber[t]=!0),e.transit.propertyMap[t]=u.transform,e.cssHooks[t]={get:function(i){var n=e(i).css("transit:transform");return n.get(t)},set:function(i,n){var o=e(i).css("transit:transform");o.setFromString(t,n),e(i).css({"transit:transform":o})}}}function l(e){return e.replace(/([A-Z])/g,function(e){return"-"+e.toLowerCase()})}function h(e,t){return"string"!=typeof e||e.match(/^[\-0-9\.]+$/)?""+e+t:e}function c(t){var i=t;return"string"!=typeof i||i.match(/^[\-0-9\.]+/)||(i=e.fx.speeds[i]||e.fx.speeds._default),h(i,"ms")}e.transit={version:"0.9.12",propertyMap:{marginLeft:"margin",marginRight:"margin",marginBottom:"margin",marginTop:"margin",paddingLeft:"padding",paddingRight:"padding",paddingBottom:"padding",paddingTop:"padding"},enabled:!0,useTransitionEnd:!1};var d=document.createElement("div"),u={},p=navigator.userAgent.toLowerCase().indexOf("chrome")>-1;u.transition=t("transition"),u.transitionDelay=t("transitionDelay"),u.transform=t("transform"),u.transformOrigin=t("transformOrigin"),u.filter=t("Filter"),u.transform3d=i();var f={transition:"transitionend",MozTransition:"transitionend",OTransition:"oTransitionEnd",WebkitTransition:"webkitTransitionEnd",msTransition:"MSTransitionEnd"},g=u.transitionEnd=f[u.transition]||null;for(var m in u)u.hasOwnProperty(m)&&"undefined"==typeof e.support[m]&&(e.support[m]=u[m]);return d=null,e.cssEase={_default:"ease","in":"ease-in",out:"ease-out","in-out":"ease-in-out",snap:"cubic-bezier(0,1,.5,1)",easeInCubic:"cubic-bezier(.550,.055,.675,.190)",easeOutCubic:"cubic-bezier(.215,.61,.355,1)",easeInOutCubic:"cubic-bezier(.645,.045,.355,1)",easeInCirc:"cubic-bezier(.6,.04,.98,.335)",easeOutCirc:"cubic-bezier(.075,.82,.165,1)",easeInOutCirc:"cubic-bezier(.785,.135,.15,.86)",easeInExpo:"cubic-bezier(.95,.05,.795,.035)",easeOutExpo:"cubic-bezier(.19,1,.22,1)",easeInOutExpo:"cubic-bezier(1,0,0,1)",easeInQuad:"cubic-bezier(.55,.085,.68,.53)",easeOutQuad:"cubic-bezier(.25,.46,.45,.94)",easeInOutQuad:"cubic-bezier(.455,.03,.515,.955)",easeInQuart:"cubic-bezier(.895,.03,.685,.22)",easeOutQuart:"cubic-bezier(.165,.84,.44,1)",easeInOutQuart:"cubic-bezier(.77,0,.175,1)",easeInQuint:"cubic-bezier(.755,.05,.855,.06)",easeOutQuint:"cubic-bezier(.23,1,.32,1)",easeInOutQuint:"cubic-bezier(.86,0,.07,1)",easeInSine:"cubic-bezier(.47,0,.745,.715)",easeOutSine:"cubic-bezier(.39,.575,.565,1)",easeInOutSine:"cubic-bezier(.445,.05,.55,.95)",easeInBack:"cubic-bezier(.6,-.28,.735,.045)",easeOutBack:"cubic-bezier(.175, .885,.32,1.275)",easeInOutBack:"cubic-bezier(.68,-.55,.265,1.55)"},e.cssHooks["transit:transform"]={get:function(t){return e(t).data("transform")||new n
},set:function(t,i){var o=i;o instanceof n||(o=new n(o)),t.style[u.transform]="WebkitTransform"!==u.transform||p?o.toString():o.toString(!0),e(t).data("transform",o)}},e.cssHooks.transform={set:e.cssHooks["transit:transform"].set},e.cssHooks.filter={get:function(e){return e.style[u.filter]},set:function(e,t){e.style[u.filter]=t}},e.fn.jquery<"1.8"&&(e.cssHooks.transformOrigin={get:function(e){return e.style[u.transformOrigin]},set:function(e,t){e.style[u.transformOrigin]=t}},e.cssHooks.transition={get:function(e){return e.style[u.transition]},set:function(e,t){e.style[u.transition]=t}}),a("scale"),a("scaleX"),a("scaleY"),a("translate"),a("rotate"),a("rotateX"),a("rotateY"),a("rotate3d"),a("perspective"),a("skewX"),a("skewY"),a("x",!0),a("y",!0),n.prototype={setFromString:function(e,t){var i="string"==typeof t?t.split(","):t.constructor===Array?t:[t];i.unshift(e),n.prototype.set.apply(this,i)},set:function(e){var t=Array.prototype.slice.apply(arguments,[1]);this.setter[e]?this.setter[e].apply(this,t):this[e]=t.join(",")},get:function(e){return this.getter[e]?this.getter[e].apply(this):this[e]||0},setter:{rotate:function(e){this.rotate=h(e,"deg")},rotateX:function(e){this.rotateX=h(e,"deg")},rotateY:function(e){this.rotateY=h(e,"deg")},scale:function(e,t){void 0===t&&(t=e),this.scale=e+","+t},skewX:function(e){this.skewX=h(e,"deg")},skewY:function(e){this.skewY=h(e,"deg")},perspective:function(e){this.perspective=h(e,"px")},x:function(e){this.set("translate",e,null)},y:function(e){this.set("translate",null,e)},translate:function(e,t){void 0===this._translateX&&(this._translateX=0),void 0===this._translateY&&(this._translateY=0),null!==e&&void 0!==e&&(this._translateX=h(e,"px")),null!==t&&void 0!==t&&(this._translateY=h(t,"px")),this.translate=this._translateX+","+this._translateY}},getter:{x:function(){return this._translateX||0},y:function(){return this._translateY||0},scale:function(){var e=(this.scale||"1,1").split(",");return e[0]&&(e[0]=parseFloat(e[0])),e[1]&&(e[1]=parseFloat(e[1])),e[0]===e[1]?e[0]:e},rotate3d:function(){for(var e=(this.rotate3d||"0,0,0,0deg").split(","),t=0;3>=t;++t)e[t]&&(e[t]=parseFloat(e[t]));return e[3]&&(e[3]=h(e[3],"deg")),e}},parse:function(e){var t=this;e.replace(/([a-zA-Z0-9]+)\((.*?)\)/g,function(e,i,n){t.setFromString(i,n)})},toString:function(e){var t=[];for(var i in this)if(this.hasOwnProperty(i)){if(!u.transform3d&&("rotateX"===i||"rotateY"===i||"perspective"===i||"transformOrigin"===i))continue;"_"!==i[0]&&t.push(e&&"scale"===i?i+"3d("+this[i]+",1)":e&&"translate"===i?i+"3d("+this[i]+",0)":i+"("+this[i]+")")}return t.join(" ")}},e.fn.transition=e.fn.transit=function(t,i,n,r){var a=this,l=0,h=!0,d=e.extend(!0,{},t);"function"==typeof i&&(r=i,i=void 0),"object"==typeof i&&(n=i.easing,l=i.delay||0,h="undefined"==typeof i.queue?!0:i.queue,r=i.complete,i=i.duration),"function"==typeof n&&(r=n,n=void 0),"undefined"!=typeof d.easing&&(n=d.easing,delete d.easing),"undefined"!=typeof d.duration&&(i=d.duration,delete d.duration),"undefined"!=typeof d.complete&&(r=d.complete,delete d.complete),"undefined"!=typeof d.queue&&(h=d.queue,delete d.queue),"undefined"!=typeof d.delay&&(l=d.delay,delete d.delay),"undefined"==typeof i&&(i=e.fx.speeds._default),"undefined"==typeof n&&(n=e.cssEase._default),i=c(i);var p=s(d,i,n,l),f=e.transit.enabled&&u.transition,m=f?parseInt(i,10)+parseInt(l,10):0;if(0===m){var y=function(e){a.css(d),r&&r.apply(a),e&&e()};return o(a,h,y),a}var b={},v=function(t){var i=!1,n=function(){i&&a.unbind(g,n),m>0&&a.each(function(){this.style[u.transition]=b[this]||null}),"function"==typeof r&&r.apply(a),"function"==typeof t&&t()};m>0&&g&&e.transit.useTransitionEnd?(i=!0,a.bind(g,n)):window.setTimeout(n,m),a.each(function(){m>0&&(this.style[u.transition]=p),e(this).css(d)})},C=function(e){this.offsetWidth,v(e)};return o(a,h,C),this},e.transit.getTransitionValue=s,e}),function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define("pako",[],e);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,t.pako=e()}}(function(){return function e(t,i,n){function o(s,a){if(!i[s]){if(!t[s]){var l="function"==typeof require&&require;if(!a&&l)return l(s,!0);if(r)return r(s,!0);var h=new Error("Cannot find module '"+s+"'");throw h.code="MODULE_NOT_FOUND",h}var c=i[s]={exports:{}};t[s][0].call(c.exports,function(e){var i=t[s][1][e];return o(i?i:e)},c,c.exports,e,t,i,n)}return i[s].exports}for(var r="function"==typeof require&&require,s=0;s<n.length;s++)o(n[s]);return o}({1:[function(e,t,i){function n(e,t){var i=new C(t);if(i.push(e,!0),i.err)throw i.msg;return i.result}function o(e,t){return t=t||{},t.raw=!0,n(e,t)}function r(e,t){return t=t||{},t.gzip=!0,n(e,t)}var s=e("./zlib/deflate.js"),a=e("./utils/common"),l=e("./utils/strings"),h=e("./zlib/messages"),c=e("./zlib/zstream"),d=Object.prototype.toString,u=0,p=4,f=0,g=1,m=2,y=-1,b=0,v=8,C=function(e){this.options=a.assign({level:y,method:v,chunkSize:16384,windowBits:15,memLevel:8,strategy:b,to:""},e||{});var t=this.options;t.raw&&t.windowBits>0?t.windowBits=-t.windowBits:t.gzip&&t.windowBits>0&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new c,this.strm.avail_out=0;var i=s.deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(i!==f)throw new Error(h[i]);t.header&&s.deflateSetHeader(this.strm,t.header)};C.prototype.push=function(e,t){var i,n,o=this.strm,r=this.options.chunkSize;if(this.ended)return!1;n=t===~~t?t:t===!0?p:u,o.input="string"==typeof e?l.string2buf(e):"[object ArrayBuffer]"===d.call(e)?new Uint8Array(e):e,o.next_in=0,o.avail_in=o.input.length;do{if(0===o.avail_out&&(o.output=new a.Buf8(r),o.next_out=0,o.avail_out=r),i=s.deflate(o,n),i!==g&&i!==f)return this.onEnd(i),this.ended=!0,!1;(0===o.avail_out||0===o.avail_in&&(n===p||n===m))&&this.onData("string"===this.options.to?l.buf2binstring(a.shrinkBuf(o.output,o.next_out)):a.shrinkBuf(o.output,o.next_out))}while((o.avail_in>0||0===o.avail_out)&&i!==g);return n===p?(i=s.deflateEnd(this.strm),this.onEnd(i),this.ended=!0,i===f):n===m?(this.onEnd(f),o.avail_out=0,!0):!0},C.prototype.onData=function(e){this.chunks.push(e)},C.prototype.onEnd=function(e){e===f&&(this.result="string"===this.options.to?this.chunks.join(""):a.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg},i.Deflate=C,i.deflate=n,i.deflateRaw=o,i.gzip=r},{"./utils/common":3,"./utils/strings":4,"./zlib/deflate.js":8,"./zlib/messages":13,"./zlib/zstream":15}],2:[function(e,t,i){function n(e,t){var i=new p(t);if(i.push(e,!0),i.err)throw i.msg;return i.result}function o(e,t){return t=t||{},t.raw=!0,n(e,t)}var r=e("./zlib/inflate.js"),s=e("./utils/common"),a=e("./utils/strings"),l=e("./zlib/constants"),h=e("./zlib/messages"),c=e("./zlib/zstream"),d=e("./zlib/gzheader"),u=Object.prototype.toString,p=function(e){this.options=s.assign({chunkSize:16384,windowBits:0,to:""},e||{});var t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,0===t.windowBits&&(t.windowBits=-15)),!(t.windowBits>=0&&t.windowBits<16)||e&&e.windowBits||(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&0===(15&t.windowBits)&&(t.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new c,this.strm.avail_out=0;var i=r.inflateInit2(this.strm,t.windowBits);if(i!==l.Z_OK)throw new Error(h[i]);this.header=new d,r.inflateGetHeader(this.strm,this.header)};p.prototype.push=function(e,t){var i,n,o,h,c,d=this.strm,p=this.options.chunkSize,f=!1;if(this.ended)return!1;n=t===~~t?t:t===!0?l.Z_FINISH:l.Z_NO_FLUSH,d.input="string"==typeof e?a.binstring2buf(e):"[object ArrayBuffer]"===u.call(e)?new Uint8Array(e):e,d.next_in=0,d.avail_in=d.input.length;do{if(0===d.avail_out&&(d.output=new s.Buf8(p),d.next_out=0,d.avail_out=p),i=r.inflate(d,l.Z_NO_FLUSH),i===l.Z_BUF_ERROR&&f===!0&&(i=l.Z_OK,f=!1),i!==l.Z_STREAM_END&&i!==l.Z_OK)return this.onEnd(i),this.ended=!0,!1;d.next_out&&(0===d.avail_out||i===l.Z_STREAM_END||0===d.avail_in&&(n===l.Z_FINISH||n===l.Z_SYNC_FLUSH))&&("string"===this.options.to?(o=a.utf8border(d.output,d.next_out),h=d.next_out-o,c=a.buf2string(d.output,o),d.next_out=h,d.avail_out=p-h,h&&s.arraySet(d.output,d.output,o,h,0),this.onData(c)):this.onData(s.shrinkBuf(d.output,d.next_out))),0===d.avail_in&&0===d.avail_out&&(f=!0)}while((d.avail_in>0||0===d.avail_out)&&i!==l.Z_STREAM_END);return i===l.Z_STREAM_END&&(n=l.Z_FINISH),n===l.Z_FINISH?(i=r.inflateEnd(this.strm),this.onEnd(i),this.ended=!0,i===l.Z_OK):n===l.Z_SYNC_FLUSH?(this.onEnd(l.Z_OK),d.avail_out=0,!0):!0},p.prototype.onData=function(e){this.chunks.push(e)},p.prototype.onEnd=function(e){e===l.Z_OK&&(this.result="string"===this.options.to?this.chunks.join(""):s.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg},i.Inflate=p,i.inflate=n,i.inflateRaw=o,i.ungzip=n},{"./utils/common":3,"./utils/strings":4,"./zlib/constants":6,"./zlib/gzheader":9,"./zlib/inflate.js":11,"./zlib/messages":13,"./zlib/zstream":15}],3:[function(e,t,i){var n="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;i.assign=function(e){for(var t=Array.prototype.slice.call(arguments,1);t.length;){var i=t.shift();if(i){if("object"!=typeof i)throw new TypeError(i+"must be non-object");for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])}}return e},i.shrinkBuf=function(e,t){return e.length===t?e:e.subarray?e.subarray(0,t):(e.length=t,e)};var o={arraySet:function(e,t,i,n,o){if(t.subarray&&e.subarray)return void e.set(t.subarray(i,i+n),o);for(var r=0;n>r;r++)e[o+r]=t[i+r]},flattenChunks:function(e){var t,i,n,o,r,s;for(n=0,t=0,i=e.length;i>t;t++)n+=e[t].length;for(s=new Uint8Array(n),o=0,t=0,i=e.length;i>t;t++)r=e[t],s.set(r,o),o+=r.length;return s}},r={arraySet:function(e,t,i,n,o){for(var r=0;n>r;r++)e[o+r]=t[i+r]},flattenChunks:function(e){return[].concat.apply([],e)}};i.setTyped=function(e){e?(i.Buf8=Uint8Array,i.Buf16=Uint16Array,i.Buf32=Int32Array,i.assign(i,o)):(i.Buf8=Array,i.Buf16=Array,i.Buf32=Array,i.assign(i,r))},i.setTyped(n)},{}],4:[function(e,t,i){function n(e,t){if(65537>t&&(e.subarray&&s||!e.subarray&&r))return String.fromCharCode.apply(null,o.shrinkBuf(e,t));for(var i="",n=0;t>n;n++)i+=String.fromCharCode(e[n]);return i}var o=e("./common"),r=!0,s=!0;try{String.fromCharCode.apply(null,[0])}catch(a){r=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(a){s=!1}for(var l=new o.Buf8(256),h=0;256>h;h++)l[h]=h>=252?6:h>=248?5:h>=240?4:h>=224?3:h>=192?2:1;l[254]=l[254]=1,i.string2buf=function(e){var t,i,n,r,s,a=e.length,l=0;for(r=0;a>r;r++)i=e.charCodeAt(r),55296===(64512&i)&&a>r+1&&(n=e.charCodeAt(r+1),56320===(64512&n)&&(i=65536+(i-55296<<10)+(n-56320),r++)),l+=128>i?1:2048>i?2:65536>i?3:4;for(t=new o.Buf8(l),s=0,r=0;l>s;r++)i=e.charCodeAt(r),55296===(64512&i)&&a>r+1&&(n=e.charCodeAt(r+1),56320===(64512&n)&&(i=65536+(i-55296<<10)+(n-56320),r++)),128>i?t[s++]=i:2048>i?(t[s++]=192|i>>>6,t[s++]=128|63&i):65536>i?(t[s++]=224|i>>>12,t[s++]=128|i>>>6&63,t[s++]=128|63&i):(t[s++]=240|i>>>18,t[s++]=128|i>>>12&63,t[s++]=128|i>>>6&63,t[s++]=128|63&i);return t},i.buf2binstring=function(e){return n(e,e.length)},i.binstring2buf=function(e){for(var t=new o.Buf8(e.length),i=0,n=t.length;n>i;i++)t[i]=e.charCodeAt(i);return t},i.buf2string=function(e,t){var i,o,r,s,a=t||e.length,h=new Array(2*a);for(o=0,i=0;a>i;)if(r=e[i++],128>r)h[o++]=r;else if(s=l[r],s>4)h[o++]=65533,i+=s-1;else{for(r&=2===s?31:3===s?15:7;s>1&&a>i;)r=r<<6|63&e[i++],s--;s>1?h[o++]=65533:65536>r?h[o++]=r:(r-=65536,h[o++]=55296|r>>10&1023,h[o++]=56320|1023&r)}return n(h,o)},i.utf8border=function(e,t){var i;for(t=t||e.length,t>e.length&&(t=e.length),i=t-1;i>=0&&128===(192&e[i]);)i--;return 0>i?t:0===i?t:i+l[e[i]]>t?i:t}},{"./common":3}],5:[function(e,t){function i(e,t,i,n){for(var o=65535&e|0,r=e>>>16&65535|0,s=0;0!==i;){s=i>2e3?2e3:i,i-=s;do o=o+t[n++]|0,r=r+o|0;while(--s);o%=65521,r%=65521}return o|r<<16|0}t.exports=i},{}],6:[function(e,t){t.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],7:[function(e,t){function i(){for(var e,t=[],i=0;256>i;i++){e=i;for(var n=0;8>n;n++)e=1&e?3988292384^e>>>1:e>>>1;t[i]=e}return t}function n(e,t,i,n){var r=o,s=n+i;e=-1^e;for(var a=n;s>a;a++)e=e>>>8^r[255&(e^t[a])];return-1^e}var o=i();t.exports=n},{}],8:[function(e,t,i){function n(e,t){return e.msg=M[t],t}function o(e){return(e<<1)-(e>4?9:0)}function r(e){for(var t=e.length;--t>=0;)e[t]=0}function s(e){var t=e.state,i=t.pending;i>e.avail_out&&(i=e.avail_out),0!==i&&(S.arraySet(e.output,t.pending_buf,t.pending_out,i,e.next_out),e.next_out+=i,t.pending_out+=i,e.total_out+=i,e.avail_out-=i,t.pending-=i,0===t.pending&&(t.pending_out=0))}function a(e,t){I._tr_flush_block(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,s(e.strm)}function l(e,t){e.pending_buf[e.pending++]=t}function h(e,t){e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=255&t}function c(e,t,i,n){var o=e.avail_in;return o>n&&(o=n),0===o?0:(e.avail_in-=o,S.arraySet(t,e.input,e.next_in,o,i),1===e.state.wrap?e.adler=A(e.adler,t,o,i):2===e.state.wrap&&(e.adler=R(e.adler,t,o,i)),e.next_in+=o,e.total_in+=o,o)}function d(e,t){var i,n,o=e.max_chain_length,r=e.strstart,s=e.prev_length,a=e.nice_match,l=e.strstart>e.w_size-ht?e.strstart-(e.w_size-ht):0,h=e.window,c=e.w_mask,d=e.prev,u=e.strstart+lt,p=h[r+s-1],f=h[r+s];e.prev_length>=e.good_match&&(o>>=2),a>e.lookahead&&(a=e.lookahead);do if(i=t,h[i+s]===f&&h[i+s-1]===p&&h[i]===h[r]&&h[++i]===h[r+1]){r+=2,i++;do;while(h[++r]===h[++i]&&h[++r]===h[++i]&&h[++r]===h[++i]&&h[++r]===h[++i]&&h[++r]===h[++i]&&h[++r]===h[++i]&&h[++r]===h[++i]&&h[++r]===h[++i]&&u>r);if(n=lt-(u-r),r=u-lt,n>s){if(e.match_start=t,s=n,n>=a)break;p=h[r+s-1],f=h[r+s]}}while((t=d[t&c])>l&&0!==--o);return s<=e.lookahead?s:e.lookahead}function u(e){var t,i,n,o,r,s=e.w_size;do{if(o=e.window_size-e.lookahead-e.strstart,e.strstart>=s+(s-ht)){S.arraySet(e.window,e.window,s,s,0),e.match_start-=s,e.strstart-=s,e.block_start-=s,i=e.hash_size,t=i;do n=e.head[--t],e.head[t]=n>=s?n-s:0;while(--i);i=s,t=i;do n=e.prev[--t],e.prev[t]=n>=s?n-s:0;while(--i);o+=s}if(0===e.strm.avail_in)break;if(i=c(e.strm,e.window,e.strstart+e.lookahead,o),e.lookahead+=i,e.lookahead+e.insert>=at)for(r=e.strstart-e.insert,e.ins_h=e.window[r],e.ins_h=(e.ins_h<<e.hash_shift^e.window[r+1])&e.hash_mask;e.insert&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[r+at-1])&e.hash_mask,e.prev[r&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=r,r++,e.insert--,!(e.lookahead+e.insert<at)););}while(e.lookahead<ht&&0!==e.strm.avail_in)}function p(e,t){var i=65535;for(i>e.pending_buf_size-5&&(i=e.pending_buf_size-5);;){if(e.lookahead<=1){if(u(e),0===e.lookahead&&t===D)return bt;if(0===e.lookahead)break}e.strstart+=e.lookahead,e.lookahead=0;var n=e.block_start+i;if((0===e.strstart||e.strstart>=n)&&(e.lookahead=e.strstart-n,e.strstart=n,a(e,!1),0===e.strm.avail_out))return bt;if(e.strstart-e.block_start>=e.w_size-ht&&(a(e,!1),0===e.strm.avail_out))return bt}return e.insert=0,t===j?(a(e,!0),0===e.strm.avail_out?Ct:wt):e.strstart>e.block_start&&(a(e,!1),0===e.strm.avail_out)?bt:bt}function f(e,t){for(var i,n;;){if(e.lookahead<ht){if(u(e),e.lookahead<ht&&t===D)return bt;if(0===e.lookahead)break}if(i=0,e.lookahead>=at&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+at-1])&e.hash_mask,i=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!==i&&e.strstart-i<=e.w_size-ht&&(e.match_length=d(e,i)),e.match_length>=at)if(n=I._tr_tally(e,e.strstart-e.match_start,e.match_length-at),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=at){e.match_length--;do e.strstart++,e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+at-1])&e.hash_mask,i=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart;while(0!==--e.match_length);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+1])&e.hash_mask;else n=I._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(n&&(a(e,!1),0===e.strm.avail_out))return bt}return e.insert=e.strstart<at-1?e.strstart:at-1,t===j?(a(e,!0),0===e.strm.avail_out?Ct:wt):e.last_lit&&(a(e,!1),0===e.strm.avail_out)?bt:vt}function g(e,t){for(var i,n,o;;){if(e.lookahead<ht){if(u(e),e.lookahead<ht&&t===D)return bt;if(0===e.lookahead)break}if(i=0,e.lookahead>=at&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+at-1])&e.hash_mask,i=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=at-1,0!==i&&e.prev_length<e.max_lazy_match&&e.strstart-i<=e.w_size-ht&&(e.match_length=d(e,i),e.match_length<=5&&(e.strategy===U||e.match_length===at&&e.strstart-e.match_start>4096)&&(e.match_length=at-1)),e.prev_length>=at&&e.match_length<=e.prev_length){o=e.strstart+e.lookahead-at,n=I._tr_tally(e,e.strstart-1-e.prev_match,e.prev_length-at),e.lookahead-=e.prev_length-1,e.prev_length-=2;do++e.strstart<=o&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+at-1])&e.hash_mask,i=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart);while(0!==--e.prev_length);if(e.match_available=0,e.match_length=at-1,e.strstart++,n&&(a(e,!1),0===e.strm.avail_out))return bt}else if(e.match_available){if(n=I._tr_tally(e,0,e.window[e.strstart-1]),n&&a(e,!1),e.strstart++,e.lookahead--,0===e.strm.avail_out)return bt}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(n=I._tr_tally(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<at-1?e.strstart:at-1,t===j?(a(e,!0),0===e.strm.avail_out?Ct:wt):e.last_lit&&(a(e,!1),0===e.strm.avail_out)?bt:vt}function m(e,t){for(var i,n,o,r,s=e.window;;){if(e.lookahead<=lt){if(u(e),e.lookahead<=lt&&t===D)return bt;if(0===e.lookahead)break}if(e.match_length=0,e.lookahead>=at&&e.strstart>0&&(o=e.strstart-1,n=s[o],n===s[++o]&&n===s[++o]&&n===s[++o])){r=e.strstart+lt;do;while(n===s[++o]&&n===s[++o]&&n===s[++o]&&n===s[++o]&&n===s[++o]&&n===s[++o]&&n===s[++o]&&n===s[++o]&&r>o);e.match_length=lt-(r-o),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=at?(i=I._tr_tally(e,1,e.match_length-at),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(i=I._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),i&&(a(e,!1),0===e.strm.avail_out))return bt}return e.insert=0,t===j?(a(e,!0),0===e.strm.avail_out?Ct:wt):e.last_lit&&(a(e,!1),0===e.strm.avail_out)?bt:vt}function y(e,t){for(var i;;){if(0===e.lookahead&&(u(e),0===e.lookahead)){if(t===D)return bt;break}if(e.match_length=0,i=I._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,i&&(a(e,!1),0===e.strm.avail_out))return bt}return e.insert=0,t===j?(a(e,!0),0===e.strm.avail_out?Ct:wt):e.last_lit&&(a(e,!1),0===e.strm.avail_out)?bt:vt}function b(e){e.window_size=2*e.w_size,r(e.head),e.max_lazy_match=E[e.level].max_lazy,e.good_match=E[e.level].good_length,e.nice_match=E[e.level].nice_length,e.max_chain_length=E[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=at-1,e.match_available=0,e.ins_h=0}function v(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=J,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new S.Buf16(2*rt),this.dyn_dtree=new S.Buf16(2*(2*nt+1)),this.bl_tree=new S.Buf16(2*(2*ot+1)),r(this.dyn_ltree),r(this.dyn_dtree),r(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new S.Buf16(st+1),this.heap=new S.Buf16(2*it+1),r(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new S.Buf16(2*it+1),r(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function C(e){var t;return e&&e.state?(e.total_in=e.total_out=0,e.data_type=K,t=e.state,t.pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=t.wrap?dt:mt,e.adler=2===t.wrap?0:1,t.last_flush=D,I._tr_init(t),N):n(e,F)}function w(e){var t=C(e);return t===N&&b(e.state),t}function P(e,t){return e&&e.state?2!==e.state.wrap?F:(e.state.gzhead=t,N):F}function _(e,t,i,o,r,s){if(!e)return F;var a=1;if(t===W&&(t=6),0>o?(a=0,o=-o):o>15&&(a=2,o-=16),1>r||r>Q||i!==J||8>o||o>15||0>t||t>9||0>s||s>Y)return n(e,F);8===o&&(o=9);var l=new v;return e.state=l,l.strm=e,l.wrap=a,l.gzhead=null,l.w_bits=o,l.w_size=1<<l.w_bits,l.w_mask=l.w_size-1,l.hash_bits=r+7,l.hash_size=1<<l.hash_bits,l.hash_mask=l.hash_size-1,l.hash_shift=~~((l.hash_bits+at-1)/at),l.window=new S.Buf8(2*l.w_size),l.head=new S.Buf16(l.hash_size),l.prev=new S.Buf16(l.w_size),l.lit_bufsize=1<<r+6,l.pending_buf_size=4*l.lit_bufsize,l.pending_buf=new S.Buf8(l.pending_buf_size),l.d_buf=l.lit_bufsize>>1,l.l_buf=3*l.lit_bufsize,l.level=t,l.strategy=s,l.method=i,w(e)}function x(e,t){return _(e,t,J,Z,$,X)}function O(e,t){var i,a,c,d;if(!e||!e.state||t>B||0>t)return e?n(e,F):F;if(a=e.state,!e.output||!e.input&&0!==e.avail_in||a.status===yt&&t!==j)return n(e,0===e.avail_out?H:F);if(a.strm=e,i=a.last_flush,a.last_flush=t,a.status===dt)if(2===a.wrap)e.adler=0,l(a,31),l(a,139),l(a,8),a.gzhead?(l(a,(a.gzhead.text?1:0)+(a.gzhead.hcrc?2:0)+(a.gzhead.extra?4:0)+(a.gzhead.name?8:0)+(a.gzhead.comment?16:0)),l(a,255&a.gzhead.time),l(a,a.gzhead.time>>8&255),l(a,a.gzhead.time>>16&255),l(a,a.gzhead.time>>24&255),l(a,9===a.level?2:a.strategy>=V||a.level<2?4:0),l(a,255&a.gzhead.os),a.gzhead.extra&&a.gzhead.extra.length&&(l(a,255&a.gzhead.extra.length),l(a,a.gzhead.extra.length>>8&255)),a.gzhead.hcrc&&(e.adler=R(e.adler,a.pending_buf,a.pending,0)),a.gzindex=0,a.status=ut):(l(a,0),l(a,0),l(a,0),l(a,0),l(a,0),l(a,9===a.level?2:a.strategy>=V||a.level<2?4:0),l(a,Pt),a.status=mt);else{var u=J+(a.w_bits-8<<4)<<8,p=-1;p=a.strategy>=V||a.level<2?0:a.level<6?1:6===a.level?2:3,u|=p<<6,0!==a.strstart&&(u|=ct),u+=31-u%31,a.status=mt,h(a,u),0!==a.strstart&&(h(a,e.adler>>>16),h(a,65535&e.adler)),e.adler=1}if(a.status===ut)if(a.gzhead.extra){for(c=a.pending;a.gzindex<(65535&a.gzhead.extra.length)&&(a.pending!==a.pending_buf_size||(a.gzhead.hcrc&&a.pending>c&&(e.adler=R(e.adler,a.pending_buf,a.pending-c,c)),s(e),c=a.pending,a.pending!==a.pending_buf_size));)l(a,255&a.gzhead.extra[a.gzindex]),a.gzindex++;a.gzhead.hcrc&&a.pending>c&&(e.adler=R(e.adler,a.pending_buf,a.pending-c,c)),a.gzindex===a.gzhead.extra.length&&(a.gzindex=0,a.status=pt)}else a.status=pt;if(a.status===pt)if(a.gzhead.name){c=a.pending;do{if(a.pending===a.pending_buf_size&&(a.gzhead.hcrc&&a.pending>c&&(e.adler=R(e.adler,a.pending_buf,a.pending-c,c)),s(e),c=a.pending,a.pending===a.pending_buf_size)){d=1;break}d=a.gzindex<a.gzhead.name.length?255&a.gzhead.name.charCodeAt(a.gzindex++):0,l(a,d)}while(0!==d);a.gzhead.hcrc&&a.pending>c&&(e.adler=R(e.adler,a.pending_buf,a.pending-c,c)),0===d&&(a.gzindex=0,a.status=ft)}else a.status=ft;if(a.status===ft)if(a.gzhead.comment){c=a.pending;do{if(a.pending===a.pending_buf_size&&(a.gzhead.hcrc&&a.pending>c&&(e.adler=R(e.adler,a.pending_buf,a.pending-c,c)),s(e),c=a.pending,a.pending===a.pending_buf_size)){d=1;break}d=a.gzindex<a.gzhead.comment.length?255&a.gzhead.comment.charCodeAt(a.gzindex++):0,l(a,d)}while(0!==d);a.gzhead.hcrc&&a.pending>c&&(e.adler=R(e.adler,a.pending_buf,a.pending-c,c)),0===d&&(a.status=gt)}else a.status=gt;if(a.status===gt&&(a.gzhead.hcrc?(a.pending+2>a.pending_buf_size&&s(e),a.pending+2<=a.pending_buf_size&&(l(a,255&e.adler),l(a,e.adler>>8&255),e.adler=0,a.status=mt)):a.status=mt),0!==a.pending){if(s(e),0===e.avail_out)return a.last_flush=-1,N}else if(0===e.avail_in&&o(t)<=o(i)&&t!==j)return n(e,H);if(a.status===yt&&0!==e.avail_in)return n(e,H);if(0!==e.avail_in||0!==a.lookahead||t!==D&&a.status!==yt){var f=a.strategy===V?y(a,t):a.strategy===q?m(a,t):E[a.level].func(a,t);if((f===Ct||f===wt)&&(a.status=yt),f===bt||f===Ct)return 0===e.avail_out&&(a.last_flush=-1),N;if(f===vt&&(t===k?I._tr_align(a):t!==B&&(I._tr_stored_block(a,0,0,!1),t===L&&(r(a.head),0===a.lookahead&&(a.strstart=0,a.block_start=0,a.insert=0))),s(e),0===e.avail_out))return a.last_flush=-1,N}return t!==j?N:a.wrap<=0?G:(2===a.wrap?(l(a,255&e.adler),l(a,e.adler>>8&255),l(a,e.adler>>16&255),l(a,e.adler>>24&255),l(a,255&e.total_in),l(a,e.total_in>>8&255),l(a,e.total_in>>16&255),l(a,e.total_in>>24&255)):(h(a,e.adler>>>16),h(a,65535&e.adler)),s(e),a.wrap>0&&(a.wrap=-a.wrap),0!==a.pending?N:G)}function T(e){var t;return e&&e.state?(t=e.state.status,t!==dt&&t!==ut&&t!==pt&&t!==ft&&t!==gt&&t!==mt&&t!==yt?n(e,F):(e.state=null,t===mt?n(e,z):N)):F}var E,S=e("../utils/common"),I=e("./trees"),A=e("./adler32"),R=e("./crc32"),M=e("./messages"),D=0,k=1,L=3,j=4,B=5,N=0,G=1,F=-2,z=-3,H=-5,W=-1,U=1,V=2,q=3,Y=4,X=0,K=2,J=8,Q=9,Z=15,$=8,et=29,tt=256,it=tt+1+et,nt=30,ot=19,rt=2*it+1,st=15,at=3,lt=258,ht=lt+at+1,ct=32,dt=42,ut=69,pt=73,ft=91,gt=103,mt=113,yt=666,bt=1,vt=2,Ct=3,wt=4,Pt=3,_t=function(e,t,i,n,o){this.good_length=e,this.max_lazy=t,this.nice_length=i,this.max_chain=n,this.func=o};E=[new _t(0,0,0,0,p),new _t(4,4,8,4,f),new _t(4,5,16,8,f),new _t(4,6,32,32,f),new _t(4,4,16,16,g),new _t(8,16,32,32,g),new _t(8,16,128,128,g),new _t(8,32,128,256,g),new _t(32,128,258,1024,g),new _t(32,258,258,4096,g)],i.deflateInit=x,i.deflateInit2=_,i.deflateReset=w,i.deflateResetKeep=C,i.deflateSetHeader=P,i.deflate=O,i.deflateEnd=T,i.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":3,"./adler32":5,"./crc32":7,"./messages":13,"./trees":14}],9:[function(e,t){function i(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}t.exports=i},{}],10:[function(e,t){var i=30,n=12;t.exports=function(e,t){var o,r,s,a,l,h,c,d,u,p,f,g,m,y,b,v,C,w,P,_,x,O,T,E,S;o=e.state,r=e.next_in,E=e.input,s=r+(e.avail_in-5),a=e.next_out,S=e.output,l=a-(t-e.avail_out),h=a+(e.avail_out-257),c=o.dmax,d=o.wsize,u=o.whave,p=o.wnext,f=o.window,g=o.hold,m=o.bits,y=o.lencode,b=o.distcode,v=(1<<o.lenbits)-1,C=(1<<o.distbits)-1;e:do{15>m&&(g+=E[r++]<<m,m+=8,g+=E[r++]<<m,m+=8),w=y[g&v];t:for(;;){if(P=w>>>24,g>>>=P,m-=P,P=w>>>16&255,0===P)S[a++]=65535&w;else{if(!(16&P)){if(0===(64&P)){w=y[(65535&w)+(g&(1<<P)-1)];continue t}if(32&P){o.mode=n;break e}e.msg="invalid literal/length code",o.mode=i;break e}_=65535&w,P&=15,P&&(P>m&&(g+=E[r++]<<m,m+=8),_+=g&(1<<P)-1,g>>>=P,m-=P),15>m&&(g+=E[r++]<<m,m+=8,g+=E[r++]<<m,m+=8),w=b[g&C];i:for(;;){if(P=w>>>24,g>>>=P,m-=P,P=w>>>16&255,!(16&P)){if(0===(64&P)){w=b[(65535&w)+(g&(1<<P)-1)];continue i}e.msg="invalid distance code",o.mode=i;break e}if(x=65535&w,P&=15,P>m&&(g+=E[r++]<<m,m+=8,P>m&&(g+=E[r++]<<m,m+=8)),x+=g&(1<<P)-1,x>c){e.msg="invalid distance too far back",o.mode=i;break e}if(g>>>=P,m-=P,P=a-l,x>P){if(P=x-P,P>u&&o.sane){e.msg="invalid distance too far back",o.mode=i;break e}if(O=0,T=f,0===p){if(O+=d-P,_>P){_-=P;do S[a++]=f[O++];while(--P);O=a-x,T=S}}else if(P>p){if(O+=d+p-P,P-=p,_>P){_-=P;do S[a++]=f[O++];while(--P);if(O=0,_>p){P=p,_-=P;do S[a++]=f[O++];while(--P);O=a-x,T=S}}}else if(O+=p-P,_>P){_-=P;do S[a++]=f[O++];while(--P);O=a-x,T=S}for(;_>2;)S[a++]=T[O++],S[a++]=T[O++],S[a++]=T[O++],_-=3;_&&(S[a++]=T[O++],_>1&&(S[a++]=T[O++]))}else{O=a-x;do S[a++]=S[O++],S[a++]=S[O++],S[a++]=S[O++],_-=3;while(_>2);_&&(S[a++]=S[O++],_>1&&(S[a++]=S[O++]))}break}}break}}while(s>r&&h>a);_=m>>3,r-=_,m-=_<<3,g&=(1<<m)-1,e.next_in=r,e.next_out=a,e.avail_in=s>r?5+(s-r):5-(r-s),e.avail_out=h>a?257+(h-a):257-(a-h),o.hold=g,o.bits=m}},{}],11:[function(e,t,i){function n(e){return(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24)}function o(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new y.Buf16(320),this.work=new y.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function r(e){var t;return e&&e.state?(t=e.state,e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=1&t.wrap),t.mode=j,t.last=0,t.havedict=0,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new y.Buf32(ft),t.distcode=t.distdyn=new y.Buf32(gt),t.sane=1,t.back=-1,S):R}function s(e){var t;return e&&e.state?(t=e.state,t.wsize=0,t.whave=0,t.wnext=0,r(e)):R}function a(e,t){var i,n;return e&&e.state?(n=e.state,0>t?(i=0,t=-t):(i=(t>>4)+1,48>t&&(t&=15)),t&&(8>t||t>15)?R:(null!==n.window&&n.wbits!==t&&(n.window=null),n.wrap=i,n.wbits=t,s(e))):R}function l(e,t){var i,n;return e?(n=new o,e.state=n,n.window=null,i=a(e,t),i!==S&&(e.state=null),i):R}function h(e){return l(e,yt)}function c(e){if(bt){var t;for(g=new y.Buf32(512),m=new y.Buf32(32),t=0;144>t;)e.lens[t++]=8;for(;256>t;)e.lens[t++]=9;for(;280>t;)e.lens[t++]=7;for(;288>t;)e.lens[t++]=8;for(w(_,e.lens,0,288,g,0,e.work,{bits:9}),t=0;32>t;)e.lens[t++]=5;w(x,e.lens,0,32,m,0,e.work,{bits:5}),bt=!1}e.lencode=g,e.lenbits=9,e.distcode=m,e.distbits=5}function d(e,t,i,n){var o,r=e.state;return null===r.window&&(r.wsize=1<<r.wbits,r.wnext=0,r.whave=0,r.window=new y.Buf8(r.wsize)),n>=r.wsize?(y.arraySet(r.window,t,i-r.wsize,r.wsize,0),r.wnext=0,r.whave=r.wsize):(o=r.wsize-r.wnext,o>n&&(o=n),y.arraySet(r.window,t,i-n,o,r.wnext),n-=o,n?(y.arraySet(r.window,t,i-n,n,0),r.wnext=n,r.whave=r.wsize):(r.wnext+=o,r.wnext===r.wsize&&(r.wnext=0),r.whave<r.wsize&&(r.whave+=o))),0}function u(e,t){var i,o,r,s,a,l,h,u,p,f,g,m,ft,gt,mt,yt,bt,vt,Ct,wt,Pt,_t,xt,Ot,Tt=0,Et=new y.Buf8(4),St=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!e||!e.state||!e.output||!e.input&&0!==e.avail_in)return R;i=e.state,i.mode===Y&&(i.mode=X),a=e.next_out,r=e.output,h=e.avail_out,s=e.next_in,o=e.input,l=e.avail_in,u=i.hold,p=i.bits,f=l,g=h,_t=S;e:for(;;)switch(i.mode){case j:if(0===i.wrap){i.mode=X;break}for(;16>p;){if(0===l)break e;l--,u+=o[s++]<<p,p+=8}if(2&i.wrap&&35615===u){i.check=0,Et[0]=255&u,Et[1]=u>>>8&255,i.check=v(i.check,Et,2,0),u=0,p=0,i.mode=B;break}if(i.flags=0,i.head&&(i.head.done=!1),!(1&i.wrap)||(((255&u)<<8)+(u>>8))%31){e.msg="incorrect header check",i.mode=dt;break}if((15&u)!==L){e.msg="unknown compression method",i.mode=dt;break}if(u>>>=4,p-=4,Pt=(15&u)+8,0===i.wbits)i.wbits=Pt;else if(Pt>i.wbits){e.msg="invalid window size",i.mode=dt;break}i.dmax=1<<Pt,e.adler=i.check=1,i.mode=512&u?V:Y,u=0,p=0;break;case B:for(;16>p;){if(0===l)break e;l--,u+=o[s++]<<p,p+=8}if(i.flags=u,(255&i.flags)!==L){e.msg="unknown compression method",i.mode=dt;break}if(57344&i.flags){e.msg="unknown header flags set",i.mode=dt;break}i.head&&(i.head.text=u>>8&1),512&i.flags&&(Et[0]=255&u,Et[1]=u>>>8&255,i.check=v(i.check,Et,2,0)),u=0,p=0,i.mode=N;case N:for(;32>p;){if(0===l)break e;l--,u+=o[s++]<<p,p+=8}i.head&&(i.head.time=u),512&i.flags&&(Et[0]=255&u,Et[1]=u>>>8&255,Et[2]=u>>>16&255,Et[3]=u>>>24&255,i.check=v(i.check,Et,4,0)),u=0,p=0,i.mode=G;case G:for(;16>p;){if(0===l)break e;l--,u+=o[s++]<<p,p+=8}i.head&&(i.head.xflags=255&u,i.head.os=u>>8),512&i.flags&&(Et[0]=255&u,Et[1]=u>>>8&255,i.check=v(i.check,Et,2,0)),u=0,p=0,i.mode=F;
case F:if(1024&i.flags){for(;16>p;){if(0===l)break e;l--,u+=o[s++]<<p,p+=8}i.length=u,i.head&&(i.head.extra_len=u),512&i.flags&&(Et[0]=255&u,Et[1]=u>>>8&255,i.check=v(i.check,Et,2,0)),u=0,p=0}else i.head&&(i.head.extra=null);i.mode=z;case z:if(1024&i.flags&&(m=i.length,m>l&&(m=l),m&&(i.head&&(Pt=i.head.extra_len-i.length,i.head.extra||(i.head.extra=new Array(i.head.extra_len)),y.arraySet(i.head.extra,o,s,m,Pt)),512&i.flags&&(i.check=v(i.check,o,m,s)),l-=m,s+=m,i.length-=m),i.length))break e;i.length=0,i.mode=H;case H:if(2048&i.flags){if(0===l)break e;m=0;do Pt=o[s+m++],i.head&&Pt&&i.length<65536&&(i.head.name+=String.fromCharCode(Pt));while(Pt&&l>m);if(512&i.flags&&(i.check=v(i.check,o,m,s)),l-=m,s+=m,Pt)break e}else i.head&&(i.head.name=null);i.length=0,i.mode=W;case W:if(4096&i.flags){if(0===l)break e;m=0;do Pt=o[s+m++],i.head&&Pt&&i.length<65536&&(i.head.comment+=String.fromCharCode(Pt));while(Pt&&l>m);if(512&i.flags&&(i.check=v(i.check,o,m,s)),l-=m,s+=m,Pt)break e}else i.head&&(i.head.comment=null);i.mode=U;case U:if(512&i.flags){for(;16>p;){if(0===l)break e;l--,u+=o[s++]<<p,p+=8}if(u!==(65535&i.check)){e.msg="header crc mismatch",i.mode=dt;break}u=0,p=0}i.head&&(i.head.hcrc=i.flags>>9&1,i.head.done=!0),e.adler=i.check=0,i.mode=Y;break;case V:for(;32>p;){if(0===l)break e;l--,u+=o[s++]<<p,p+=8}e.adler=i.check=n(u),u=0,p=0,i.mode=q;case q:if(0===i.havedict)return e.next_out=a,e.avail_out=h,e.next_in=s,e.avail_in=l,i.hold=u,i.bits=p,A;e.adler=i.check=1,i.mode=Y;case Y:if(t===T||t===E)break e;case X:if(i.last){u>>>=7&p,p-=7&p,i.mode=lt;break}for(;3>p;){if(0===l)break e;l--,u+=o[s++]<<p,p+=8}switch(i.last=1&u,u>>>=1,p-=1,3&u){case 0:i.mode=K;break;case 1:if(c(i),i.mode=tt,t===E){u>>>=2,p-=2;break e}break;case 2:i.mode=Z;break;case 3:e.msg="invalid block type",i.mode=dt}u>>>=2,p-=2;break;case K:for(u>>>=7&p,p-=7&p;32>p;){if(0===l)break e;l--,u+=o[s++]<<p,p+=8}if((65535&u)!==(u>>>16^65535)){e.msg="invalid stored block lengths",i.mode=dt;break}if(i.length=65535&u,u=0,p=0,i.mode=J,t===E)break e;case J:i.mode=Q;case Q:if(m=i.length){if(m>l&&(m=l),m>h&&(m=h),0===m)break e;y.arraySet(r,o,s,m,a),l-=m,s+=m,h-=m,a+=m,i.length-=m;break}i.mode=Y;break;case Z:for(;14>p;){if(0===l)break e;l--,u+=o[s++]<<p,p+=8}if(i.nlen=(31&u)+257,u>>>=5,p-=5,i.ndist=(31&u)+1,u>>>=5,p-=5,i.ncode=(15&u)+4,u>>>=4,p-=4,i.nlen>286||i.ndist>30){e.msg="too many length or distance symbols",i.mode=dt;break}i.have=0,i.mode=$;case $:for(;i.have<i.ncode;){for(;3>p;){if(0===l)break e;l--,u+=o[s++]<<p,p+=8}i.lens[St[i.have++]]=7&u,u>>>=3,p-=3}for(;i.have<19;)i.lens[St[i.have++]]=0;if(i.lencode=i.lendyn,i.lenbits=7,xt={bits:i.lenbits},_t=w(P,i.lens,0,19,i.lencode,0,i.work,xt),i.lenbits=xt.bits,_t){e.msg="invalid code lengths set",i.mode=dt;break}i.have=0,i.mode=et;case et:for(;i.have<i.nlen+i.ndist;){for(;Tt=i.lencode[u&(1<<i.lenbits)-1],mt=Tt>>>24,yt=Tt>>>16&255,bt=65535&Tt,!(p>=mt);){if(0===l)break e;l--,u+=o[s++]<<p,p+=8}if(16>bt)u>>>=mt,p-=mt,i.lens[i.have++]=bt;else{if(16===bt){for(Ot=mt+2;Ot>p;){if(0===l)break e;l--,u+=o[s++]<<p,p+=8}if(u>>>=mt,p-=mt,0===i.have){e.msg="invalid bit length repeat",i.mode=dt;break}Pt=i.lens[i.have-1],m=3+(3&u),u>>>=2,p-=2}else if(17===bt){for(Ot=mt+3;Ot>p;){if(0===l)break e;l--,u+=o[s++]<<p,p+=8}u>>>=mt,p-=mt,Pt=0,m=3+(7&u),u>>>=3,p-=3}else{for(Ot=mt+7;Ot>p;){if(0===l)break e;l--,u+=o[s++]<<p,p+=8}u>>>=mt,p-=mt,Pt=0,m=11+(127&u),u>>>=7,p-=7}if(i.have+m>i.nlen+i.ndist){e.msg="invalid bit length repeat",i.mode=dt;break}for(;m--;)i.lens[i.have++]=Pt}}if(i.mode===dt)break;if(0===i.lens[256]){e.msg="invalid code -- missing end-of-block",i.mode=dt;break}if(i.lenbits=9,xt={bits:i.lenbits},_t=w(_,i.lens,0,i.nlen,i.lencode,0,i.work,xt),i.lenbits=xt.bits,_t){e.msg="invalid literal/lengths set",i.mode=dt;break}if(i.distbits=6,i.distcode=i.distdyn,xt={bits:i.distbits},_t=w(x,i.lens,i.nlen,i.ndist,i.distcode,0,i.work,xt),i.distbits=xt.bits,_t){e.msg="invalid distances set",i.mode=dt;break}if(i.mode=tt,t===E)break e;case tt:i.mode=it;case it:if(l>=6&&h>=258){e.next_out=a,e.avail_out=h,e.next_in=s,e.avail_in=l,i.hold=u,i.bits=p,C(e,g),a=e.next_out,r=e.output,h=e.avail_out,s=e.next_in,o=e.input,l=e.avail_in,u=i.hold,p=i.bits,i.mode===Y&&(i.back=-1);break}for(i.back=0;Tt=i.lencode[u&(1<<i.lenbits)-1],mt=Tt>>>24,yt=Tt>>>16&255,bt=65535&Tt,!(p>=mt);){if(0===l)break e;l--,u+=o[s++]<<p,p+=8}if(yt&&0===(240&yt)){for(vt=mt,Ct=yt,wt=bt;Tt=i.lencode[wt+((u&(1<<vt+Ct)-1)>>vt)],mt=Tt>>>24,yt=Tt>>>16&255,bt=65535&Tt,!(p>=vt+mt);){if(0===l)break e;l--,u+=o[s++]<<p,p+=8}u>>>=vt,p-=vt,i.back+=vt}if(u>>>=mt,p-=mt,i.back+=mt,i.length=bt,0===yt){i.mode=at;break}if(32&yt){i.back=-1,i.mode=Y;break}if(64&yt){e.msg="invalid literal/length code",i.mode=dt;break}i.extra=15&yt,i.mode=nt;case nt:if(i.extra){for(Ot=i.extra;Ot>p;){if(0===l)break e;l--,u+=o[s++]<<p,p+=8}i.length+=u&(1<<i.extra)-1,u>>>=i.extra,p-=i.extra,i.back+=i.extra}i.was=i.length,i.mode=ot;case ot:for(;Tt=i.distcode[u&(1<<i.distbits)-1],mt=Tt>>>24,yt=Tt>>>16&255,bt=65535&Tt,!(p>=mt);){if(0===l)break e;l--,u+=o[s++]<<p,p+=8}if(0===(240&yt)){for(vt=mt,Ct=yt,wt=bt;Tt=i.distcode[wt+((u&(1<<vt+Ct)-1)>>vt)],mt=Tt>>>24,yt=Tt>>>16&255,bt=65535&Tt,!(p>=vt+mt);){if(0===l)break e;l--,u+=o[s++]<<p,p+=8}u>>>=vt,p-=vt,i.back+=vt}if(u>>>=mt,p-=mt,i.back+=mt,64&yt){e.msg="invalid distance code",i.mode=dt;break}i.offset=bt,i.extra=15&yt,i.mode=rt;case rt:if(i.extra){for(Ot=i.extra;Ot>p;){if(0===l)break e;l--,u+=o[s++]<<p,p+=8}i.offset+=u&(1<<i.extra)-1,u>>>=i.extra,p-=i.extra,i.back+=i.extra}if(i.offset>i.dmax){e.msg="invalid distance too far back",i.mode=dt;break}i.mode=st;case st:if(0===h)break e;if(m=g-h,i.offset>m){if(m=i.offset-m,m>i.whave&&i.sane){e.msg="invalid distance too far back",i.mode=dt;break}m>i.wnext?(m-=i.wnext,ft=i.wsize-m):ft=i.wnext-m,m>i.length&&(m=i.length),gt=i.window}else gt=r,ft=a-i.offset,m=i.length;m>h&&(m=h),h-=m,i.length-=m;do r[a++]=gt[ft++];while(--m);0===i.length&&(i.mode=it);break;case at:if(0===h)break e;r[a++]=i.length,h--,i.mode=it;break;case lt:if(i.wrap){for(;32>p;){if(0===l)break e;l--,u|=o[s++]<<p,p+=8}if(g-=h,e.total_out+=g,i.total+=g,g&&(e.adler=i.check=i.flags?v(i.check,r,g,a-g):b(i.check,r,g,a-g)),g=h,(i.flags?u:n(u))!==i.check){e.msg="incorrect data check",i.mode=dt;break}u=0,p=0}i.mode=ht;case ht:if(i.wrap&&i.flags){for(;32>p;){if(0===l)break e;l--,u+=o[s++]<<p,p+=8}if(u!==(4294967295&i.total)){e.msg="incorrect length check",i.mode=dt;break}u=0,p=0}i.mode=ct;case ct:_t=I;break e;case dt:_t=M;break e;case ut:return D;case pt:default:return R}return e.next_out=a,e.avail_out=h,e.next_in=s,e.avail_in=l,i.hold=u,i.bits=p,(i.wsize||g!==e.avail_out&&i.mode<dt&&(i.mode<lt||t!==O))&&d(e,e.output,e.next_out,g-e.avail_out)?(i.mode=ut,D):(f-=e.avail_in,g-=e.avail_out,e.total_in+=f,e.total_out+=g,i.total+=g,i.wrap&&g&&(e.adler=i.check=i.flags?v(i.check,r,g,e.next_out-g):b(i.check,r,g,e.next_out-g)),e.data_type=i.bits+(i.last?64:0)+(i.mode===Y?128:0)+(i.mode===tt||i.mode===J?256:0),(0===f&&0===g||t===O)&&_t===S&&(_t=k),_t)}function p(e){if(!e||!e.state)return R;var t=e.state;return t.window&&(t.window=null),e.state=null,S}function f(e,t){var i;return e&&e.state?(i=e.state,0===(2&i.wrap)?R:(i.head=t,t.done=!1,S)):R}var g,m,y=e("../utils/common"),b=e("./adler32"),v=e("./crc32"),C=e("./inffast"),w=e("./inftrees"),P=0,_=1,x=2,O=4,T=5,E=6,S=0,I=1,A=2,R=-2,M=-3,D=-4,k=-5,L=8,j=1,B=2,N=3,G=4,F=5,z=6,H=7,W=8,U=9,V=10,q=11,Y=12,X=13,K=14,J=15,Q=16,Z=17,$=18,et=19,tt=20,it=21,nt=22,ot=23,rt=24,st=25,at=26,lt=27,ht=28,ct=29,dt=30,ut=31,pt=32,ft=852,gt=592,mt=15,yt=mt,bt=!0;i.inflateReset=s,i.inflateReset2=a,i.inflateResetKeep=r,i.inflateInit=h,i.inflateInit2=l,i.inflate=u,i.inflateEnd=p,i.inflateGetHeader=f,i.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":3,"./adler32":5,"./crc32":7,"./inffast":10,"./inftrees":12}],12:[function(e,t){var i=e("../utils/common"),n=15,o=852,r=592,s=0,a=1,l=2,h=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],c=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],d=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],u=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];t.exports=function(e,t,p,f,g,m,y,b){var v,C,w,P,_,x,O,T,E,S=b.bits,I=0,A=0,R=0,M=0,D=0,k=0,L=0,j=0,B=0,N=0,G=null,F=0,z=new i.Buf16(n+1),H=new i.Buf16(n+1),W=null,U=0;for(I=0;n>=I;I++)z[I]=0;for(A=0;f>A;A++)z[t[p+A]]++;for(D=S,M=n;M>=1&&0===z[M];M--);if(D>M&&(D=M),0===M)return g[m++]=20971520,g[m++]=20971520,b.bits=1,0;for(R=1;M>R&&0===z[R];R++);for(R>D&&(D=R),j=1,I=1;n>=I;I++)if(j<<=1,j-=z[I],0>j)return-1;if(j>0&&(e===s||1!==M))return-1;for(H[1]=0,I=1;n>I;I++)H[I+1]=H[I]+z[I];for(A=0;f>A;A++)0!==t[p+A]&&(y[H[t[p+A]]++]=A);if(e===s?(G=W=y,x=19):e===a?(G=h,F-=257,W=c,U-=257,x=256):(G=d,W=u,x=-1),N=0,A=0,I=R,_=m,k=D,L=0,w=-1,B=1<<D,P=B-1,e===a&&B>o||e===l&&B>r)return 1;for(var V=0;;){V++,O=I-L,y[A]<x?(T=0,E=y[A]):y[A]>x?(T=W[U+y[A]],E=G[F+y[A]]):(T=96,E=0),v=1<<I-L,C=1<<k,R=C;do C-=v,g[_+(N>>L)+C]=O<<24|T<<16|E|0;while(0!==C);for(v=1<<I-1;N&v;)v>>=1;if(0!==v?(N&=v-1,N+=v):N=0,A++,0===--z[I]){if(I===M)break;I=t[p+y[A]]}if(I>D&&(N&P)!==w){for(0===L&&(L=D),_+=R,k=I-L,j=1<<k;M>k+L&&(j-=z[k+L],!(0>=j));)k++,j<<=1;if(B+=1<<k,e===a&&B>o||e===l&&B>r)return 1;w=N&P,g[w]=D<<24|k<<16|_-m|0}}return 0!==N&&(g[_+N]=I-L<<24|64<<16|0),b.bits=D,0}},{"../utils/common":3}],13:[function(e,t){t.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],14:[function(e,t,i){function n(e){for(var t=e.length;--t>=0;)e[t]=0}function o(e){return 256>e?st[e]:st[256+(e>>>7)]}function r(e,t){e.pending_buf[e.pending++]=255&t,e.pending_buf[e.pending++]=t>>>8&255}function s(e,t,i){e.bi_valid>Y-i?(e.bi_buf|=t<<e.bi_valid&65535,r(e,e.bi_buf),e.bi_buf=t>>Y-e.bi_valid,e.bi_valid+=i-Y):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=i)}function a(e,t,i){s(e,i[2*t],i[2*t+1])}function l(e,t){var i=0;do i|=1&e,e>>>=1,i<<=1;while(--t>0);return i>>>1}function h(e){16===e.bi_valid?(r(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):e.bi_valid>=8&&(e.pending_buf[e.pending++]=255&e.bi_buf,e.bi_buf>>=8,e.bi_valid-=8)}function c(e,t){var i,n,o,r,s,a,l=t.dyn_tree,h=t.max_code,c=t.stat_desc.static_tree,d=t.stat_desc.has_stree,u=t.stat_desc.extra_bits,p=t.stat_desc.extra_base,f=t.stat_desc.max_length,g=0;for(r=0;q>=r;r++)e.bl_count[r]=0;for(l[2*e.heap[e.heap_max]+1]=0,i=e.heap_max+1;V>i;i++)n=e.heap[i],r=l[2*l[2*n+1]+1]+1,r>f&&(r=f,g++),l[2*n+1]=r,n>h||(e.bl_count[r]++,s=0,n>=p&&(s=u[n-p]),a=l[2*n],e.opt_len+=a*(r+s),d&&(e.static_len+=a*(c[2*n+1]+s)));if(0!==g){do{for(r=f-1;0===e.bl_count[r];)r--;e.bl_count[r]--,e.bl_count[r+1]+=2,e.bl_count[f]--,g-=2}while(g>0);for(r=f;0!==r;r--)for(n=e.bl_count[r];0!==n;)o=e.heap[--i],o>h||(l[2*o+1]!==r&&(e.opt_len+=(r-l[2*o+1])*l[2*o],l[2*o+1]=r),n--)}}function d(e,t,i){var n,o,r=new Array(q+1),s=0;for(n=1;q>=n;n++)r[n]=s=s+i[n-1]<<1;for(o=0;t>=o;o++){var a=e[2*o+1];0!==a&&(e[2*o]=l(r[a]++,a))}}function u(){var e,t,i,n,o,r=new Array(q+1);for(i=0,n=0;F-1>n;n++)for(lt[n]=i,e=0;e<1<<$[n];e++)at[i++]=n;for(at[i-1]=n,o=0,n=0;16>n;n++)for(ht[n]=o,e=0;e<1<<et[n];e++)st[o++]=n;for(o>>=7;W>n;n++)for(ht[n]=o<<7,e=0;e<1<<et[n]-7;e++)st[256+o++]=n;for(t=0;q>=t;t++)r[t]=0;for(e=0;143>=e;)ot[2*e+1]=8,e++,r[8]++;for(;255>=e;)ot[2*e+1]=9,e++,r[9]++;for(;279>=e;)ot[2*e+1]=7,e++,r[7]++;for(;287>=e;)ot[2*e+1]=8,e++,r[8]++;for(d(ot,H+1,r),e=0;W>e;e++)rt[2*e+1]=5,rt[2*e]=l(e,5);ct=new pt(ot,$,z+1,H,q),dt=new pt(rt,et,0,W,q),ut=new pt(new Array(0),tt,0,U,X)}function p(e){var t;for(t=0;H>t;t++)e.dyn_ltree[2*t]=0;for(t=0;W>t;t++)e.dyn_dtree[2*t]=0;for(t=0;U>t;t++)e.bl_tree[2*t]=0;e.dyn_ltree[2*K]=1,e.opt_len=e.static_len=0,e.last_lit=e.matches=0}function f(e){e.bi_valid>8?r(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0}function g(e,t,i,n){f(e),n&&(r(e,i),r(e,~i)),A.arraySet(e.pending_buf,e.window,t,i,e.pending),e.pending+=i}function m(e,t,i,n){var o=2*t,r=2*i;return e[o]<e[r]||e[o]===e[r]&&n[t]<=n[i]}function y(e,t,i){for(var n=e.heap[i],o=i<<1;o<=e.heap_len&&(o<e.heap_len&&m(t,e.heap[o+1],e.heap[o],e.depth)&&o++,!m(t,n,e.heap[o],e.depth));)e.heap[i]=e.heap[o],i=o,o<<=1;e.heap[i]=n}function b(e,t,i){var n,r,l,h,c=0;if(0!==e.last_lit)do n=e.pending_buf[e.d_buf+2*c]<<8|e.pending_buf[e.d_buf+2*c+1],r=e.pending_buf[e.l_buf+c],c++,0===n?a(e,r,t):(l=at[r],a(e,l+z+1,t),h=$[l],0!==h&&(r-=lt[l],s(e,r,h)),n--,l=o(n),a(e,l,i),h=et[l],0!==h&&(n-=ht[l],s(e,n,h)));while(c<e.last_lit);a(e,K,t)}function v(e,t){var i,n,o,r=t.dyn_tree,s=t.stat_desc.static_tree,a=t.stat_desc.has_stree,l=t.stat_desc.elems,h=-1;for(e.heap_len=0,e.heap_max=V,i=0;l>i;i++)0!==r[2*i]?(e.heap[++e.heap_len]=h=i,e.depth[i]=0):r[2*i+1]=0;for(;e.heap_len<2;)o=e.heap[++e.heap_len]=2>h?++h:0,r[2*o]=1,e.depth[o]=0,e.opt_len--,a&&(e.static_len-=s[2*o+1]);for(t.max_code=h,i=e.heap_len>>1;i>=1;i--)y(e,r,i);o=l;do i=e.heap[1],e.heap[1]=e.heap[e.heap_len--],y(e,r,1),n=e.heap[1],e.heap[--e.heap_max]=i,e.heap[--e.heap_max]=n,r[2*o]=r[2*i]+r[2*n],e.depth[o]=(e.depth[i]>=e.depth[n]?e.depth[i]:e.depth[n])+1,r[2*i+1]=r[2*n+1]=o,e.heap[1]=o++,y(e,r,1);while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],c(e,t),d(r,h,e.bl_count)}function C(e,t,i){var n,o,r=-1,s=t[1],a=0,l=7,h=4;for(0===s&&(l=138,h=3),t[2*(i+1)+1]=65535,n=0;i>=n;n++)o=s,s=t[2*(n+1)+1],++a<l&&o===s||(h>a?e.bl_tree[2*o]+=a:0!==o?(o!==r&&e.bl_tree[2*o]++,e.bl_tree[2*J]++):10>=a?e.bl_tree[2*Q]++:e.bl_tree[2*Z]++,a=0,r=o,0===s?(l=138,h=3):o===s?(l=6,h=3):(l=7,h=4))}function w(e,t,i){var n,o,r=-1,l=t[1],h=0,c=7,d=4;for(0===l&&(c=138,d=3),n=0;i>=n;n++)if(o=l,l=t[2*(n+1)+1],!(++h<c&&o===l)){if(d>h){do a(e,o,e.bl_tree);while(0!==--h)}else 0!==o?(o!==r&&(a(e,o,e.bl_tree),h--),a(e,J,e.bl_tree),s(e,h-3,2)):10>=h?(a(e,Q,e.bl_tree),s(e,h-3,3)):(a(e,Z,e.bl_tree),s(e,h-11,7));h=0,r=o,0===l?(c=138,d=3):o===l?(c=6,d=3):(c=7,d=4)}}function P(e){var t;for(C(e,e.dyn_ltree,e.l_desc.max_code),C(e,e.dyn_dtree,e.d_desc.max_code),v(e,e.bl_desc),t=U-1;t>=3&&0===e.bl_tree[2*it[t]+1];t--);return e.opt_len+=3*(t+1)+5+5+4,t}function _(e,t,i,n){var o;for(s(e,t-257,5),s(e,i-1,5),s(e,n-4,4),o=0;n>o;o++)s(e,e.bl_tree[2*it[o]+1],3);w(e,e.dyn_ltree,t-1),w(e,e.dyn_dtree,i-1)}function x(e){var t,i=4093624447;for(t=0;31>=t;t++,i>>>=1)if(1&i&&0!==e.dyn_ltree[2*t])return M;if(0!==e.dyn_ltree[18]||0!==e.dyn_ltree[20]||0!==e.dyn_ltree[26])return D;for(t=32;z>t;t++)if(0!==e.dyn_ltree[2*t])return D;return M}function O(e){gt||(u(),gt=!0),e.l_desc=new ft(e.dyn_ltree,ct),e.d_desc=new ft(e.dyn_dtree,dt),e.bl_desc=new ft(e.bl_tree,ut),e.bi_buf=0,e.bi_valid=0,p(e)}function T(e,t,i,n){s(e,(L<<1)+(n?1:0),3),g(e,t,i,!0)}function E(e){s(e,j<<1,3),a(e,K,ot),h(e)}function S(e,t,i,n){var o,r,a=0;e.level>0?(e.strm.data_type===k&&(e.strm.data_type=x(e)),v(e,e.l_desc),v(e,e.d_desc),a=P(e),o=e.opt_len+3+7>>>3,r=e.static_len+3+7>>>3,o>=r&&(o=r)):o=r=i+5,o>=i+4&&-1!==t?T(e,t,i,n):e.strategy===R||r===o?(s(e,(j<<1)+(n?1:0),3),b(e,ot,rt)):(s(e,(B<<1)+(n?1:0),3),_(e,e.l_desc.max_code+1,e.d_desc.max_code+1,a+1),b(e,e.dyn_ltree,e.dyn_dtree)),p(e),n&&f(e)}function I(e,t,i){return e.pending_buf[e.d_buf+2*e.last_lit]=t>>>8&255,e.pending_buf[e.d_buf+2*e.last_lit+1]=255&t,e.pending_buf[e.l_buf+e.last_lit]=255&i,e.last_lit++,0===t?e.dyn_ltree[2*i]++:(e.matches++,t--,e.dyn_ltree[2*(at[i]+z+1)]++,e.dyn_dtree[2*o(t)]++),e.last_lit===e.lit_bufsize-1}var A=e("../utils/common"),R=4,M=0,D=1,k=2,L=0,j=1,B=2,N=3,G=258,F=29,z=256,H=z+1+F,W=30,U=19,V=2*H+1,q=15,Y=16,X=7,K=256,J=16,Q=17,Z=18,$=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],et=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],tt=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],it=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],nt=512,ot=new Array(2*(H+2));n(ot);var rt=new Array(2*W);n(rt);var st=new Array(nt);n(st);var at=new Array(G-N+1);n(at);var lt=new Array(F);n(lt);var ht=new Array(W);n(ht);var ct,dt,ut,pt=function(e,t,i,n,o){this.static_tree=e,this.extra_bits=t,this.extra_base=i,this.elems=n,this.max_length=o,this.has_stree=e&&e.length},ft=function(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t},gt=!1;i._tr_init=O,i._tr_stored_block=T,i._tr_flush_block=S,i._tr_tally=I,i._tr_align=E},{"../utils/common":3}],15:[function(e,t){function i(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}t.exports=i},{}],"/":[function(e,t){var i=e("./lib/utils/common").assign,n=e("./lib/deflate"),o=e("./lib/inflate"),r=e("./lib/zlib/constants"),s={};i(s,n,o,r),t.exports=s},{"./lib/deflate":1,"./lib/inflate":2,"./lib/utils/common":3,"./lib/zlib/constants":6}]},{},[])("/")}),define("level-compressor",["pako"],function(e){var t=function(){};return t.prototype.compress=function(t){if(!t)return null;var i=e.deflate(t,{to:"string"});return window.btoa(i)},t.prototype.decompress=function(t){if(!t)return null;var i=window.atob(t);return e.inflate(i,{to:"string"})},new t}),define("level-requester",["require","level-compressor"],function(e){var t=e("level-compressor"),i=function(){};return i.prototype.pingRemote=function(e){var t=!1,i=new XMLHttpRequest;i.onload=function(){4===i.readyState&&(t=200===i.status&&"spacemaze-scene-store-available"===i.responseText?!0:!1)},i.onerror=function(){t=!1};try{i.open("GET",e,!1),i.send()}catch(n){return!1}return t},i.prototype.pingRemoteAsync=function(e,t,i){var n=new XMLHttpRequest;n.onload=function(){4===n.readyState&&(200===n.status&&"spacemaze-scene-store-available"===n.responseText?t():i())},n.onerror=function(){i()};try{n.open("GET",e,!0),n.send()}catch(o){i()}},i.prototype.get=function(e,t,i){var n=new XMLHttpRequest;n.onload=function(){4===n.readyState&&(200===n.status?t(n.responseText):i())},n.onerror=function(){i()};try{n.open("GET",e,!0),n.send()}catch(o){i()}},i.prototype.getLevel=function(e,i,n){this.get(e,function(e){i(t.decompress(e))},n)},i.prototype.post=function(e,i,n,o){var r=t.compress(e),s=new XMLHttpRequest;s.onload=function(){4===s.readyState&&(200===s.status?n(s.responseText):o())},s.onerror=function(){o()};var a="---------"+parseInt(1e8*Math.random()).toString(),l="--"+a+'\r\nContent-Disposition: form-data; name="data""\r\n\r\n'+r+"\r\n--"+a+"--";try{s.open("POST",i,!0),s.setRequestHeader("Content-Type","multipart/form-data; boundary="+a),s.send(l)}catch(h){o()}},new i}),define("query-string",["require","level-requester"],function(e){var t=e("level-requester"),i=!0,n=!0;return{skipLoader:function(){return window.location.search?window.location.search.match(/[?&]?editor=basic/)||window.location.search.match(/[?&]?editor=advanced/)?!0:window.location.search.match(/[?&]?skipLoader/):!1},startInEditorBasic:function(){return i?(i=!1,window.location.search?window.location.search.match(/[?&]?editor=basic/):!1):!1},startInEditorAdvanced:function(){return n?(n=!1,window.location.search?window.location.search.match(/[?&]?editor=advanced/):!1):!1},hasScene:function(e,i){if(!window.location.search)return void i();var n=window.location.search.match(/[?&]?url=(.*?)@(.*?)$/);if(!n)return void i();var o=n[1],r=n[2];if(!o)return void i();if(!r)return void i();var s=r;-1===r.search(/^http:\/\//)&&(s="http://"+r);var a=s+"/data/"+o;t.pingRemoteAsync(s,function(){t.getLevel(a,e,i)},i)}}}),define("loader-container",["require","jquery","jquery-transit","query-string","delegate"],function(e){e("jquery"),e("jquery-transit");var t=1e3,i=2e3,n=2500;e("query-string").skipLoader()&&(t=1,i=1,n=1);var o=e("delegate").extend({init:function(){this._super(),this.state=this.CLOSED,this.loader=$("#loader-wrapper")},detachLoader:function(){this.loader.remove()},attachLoader:function(){this.loader.parent().length>=1||$("body").prepend(this.loader)},open:function(e,i){var o=e||this.OPEN,r=i||n;$("#loader").transition({delay:r,opacity:0,complete:function(){$(".section-left").transition({delay:0,left:"0px",x:"-100%"},t),$(".section-right").transition({delay:0,right:"0px",x:"100%",complete:function(){this.detachLoader(),this.state=this.OPEN,this.execute(o)}.bind(this)},t)}.bind(this)},t/2)},close:function(){this.attachLoader(),$(".section-left").transition({left:"-50%",x:"100%"},t),$(".section-right").transition({right:"-50%",x:"-100%",complete:function(){this.state=this.CLOSED,this.execute(this.CLOSE),$("#loader").transition({opacity:1},i)}.bind(this)},t)},transition:function(){this.attachLoader(),$(".section-left").transition({left:"-50%",x:"100%"},t),$(".section-right").transition({right:"-50%",x:"-100%",complete:function(){this.state=this.CLOSED,this.execute(this.CLOSE),$("#loader").transition({opacity:1,complete:function(){this.open(this.TRANSITION,1)}.bind(this)},i)}.bind(this)},t)},show:function(){this.loader.show()},hide:function(){this.loader.hide()},isClosed:function(){return this.state==this.CLOSED},isOpen:function(){return this.state==this.OPEN}});return Object.defineProperty(o.prototype,"CLOSE",{get:function(){return"close"}}),Object.defineProperty(o.prototype,"TRANSITION",{get:function(){return"transition"}}),Object.defineProperty(o.prototype,"CLOSED",{get:function(){return"closed"}}),Object.defineProperty(o.prototype,"OPEN",{get:function(){return"open"}}),new o}),define("timer",["require","error-printer","delegate"],function(e){var t=e("error-printer"),i=e("delegate").extend({init:function(e,t,i){this._super(),this.owner=e,this.name=t,this.propertyName=i,this._delay=1e3,this.initDelay=this._delay,this.repeateCount=1,this.initRepeatCount=this.repeateCount,this.removeOnComplete=!0,this.repeates=0,this.id=-1,this.startTime=-1,this.pauseTime=-1,this.isRunning=!1,this.isPaused=!1},on:function(e,t,i,n){this._super(e,this.owner,t,i,!1,n)},configure:function(e){e.hasOwnProperty("delay")||(e.delay=this._delay),e.hasOwnProperty("repeatCount")||(e.repeatCount=this.repeateCount),e.hasOwnProperty("removeOnComplete")||(e.removeOnComplete=this.removeOnComplete),this.Delay(e.delay),this.RepeateCount(e.repeatCount),this.RemoveOnComplete(e.removeOnComplete)},start:function(e){if(!this.isRunning&&!this.isPaused){this.startTime=Date.now(),this.isRunning=!0,this.isPaused=!1;var t=e?e:this.initDelay,i=this;this.execute(this.START),this.id=setTimeout(function(){i.Running&&(i.execute(i.REPEATE,i.repeates),i.repeates++,i.repeateCount<0?(i.isRunning=!1,i._delay=i.initDelay,i.start()):(i.repeateCount--,i.repeateCount>0?(i.isRunning=!1,i._delay=i.initDelay,i.start()):(i.stop(),i.execute(i.COMPLETE),i.removeOnComplete&&i.remove())))},t)}},stop:function(){clearTimeout(this.id),this.isRunning=!1,this.isPaused=!1,this.repeateCount=this.initRepeatCount,this._delay=this.initDelay,this.repeates=0,this.execute(this.STOP)},reset:function(){this.stop(),this.start(),this.execute(this.RESET)},pause:function(){this.Stopped||this.Paused||(clearTimeout(this.id),this.pauseTime=Date.now(),this.isRunning=!1,this.isPaused=!0,this.execute(this.PAUSE))},resume:function(){this.Stopped||this.Running||(this.isPaused=!1,this._delay-=this.pauseTime-this.startTime,this.start(this._delay),this.execute(this.RESUME))},rest:function(){return this.Stopped?this._delay:this.Paused?this._delay-(this.pauseTime-this.startTime):this.Running?this.startTime+this._delay-Date.now():void 0},remove:function(){this.stop(),this.owner[this.propertyName]=null,delete this.owner[this.propertyName],this.owner=null,this.execute(this.REMOVE),this.removeAll(),this.destroy()},Delay:function(e){return n(),this._delay=e,this.initDelay=e,this},RepeateCount:function(e){return n(),this.repeateCount=e,this.initRepeatCount=e,this},RemoveOnComplete:function(e){return n(),this.removeOnComplete=e,this}}),n=function(){(this.isRunning||this.isPaused)&&t.printError("Timer","Can't modify timer while it is running")};return Object.defineProperty(i.prototype,"Stopped",{get:function(){return!this.isRunning&&!this.isPaused}}),Object.defineProperty(i.prototype,"Paused",{get:function(){return!this.isRunning&&this.isPaused}}),Object.defineProperty(i.prototype,"Running",{get:function(){return this.isRunning&&!this.isPaused}}),Object.defineProperty(i.prototype,"delay",{get:function(){return this.initDelay},set:function(e){this._delay=e,this.initDelay=e}}),Object.defineProperty(i.prototype,"START",{get:function(){return"start"}}),Object.defineProperty(i.prototype,"REPEATE",{get:function(){return"repeate"}}),Object.defineProperty(i.prototype,"COMPLETE",{get:function(){return"complete"}}),Object.defineProperty(i.prototype,"STOP",{get:function(){return"stop"}}),Object.defineProperty(i.prototype,"PAUSE",{get:function(){return"pause"}}),Object.defineProperty(i.prototype,"RESUME",{get:function(){return"resume"}}),Object.defineProperty(i.prototype,"REMOVE",{get:function(){return"remove"}}),i}),define("timer-factory",["require","error-printer","delegate","timer"],function(e){var t=e("error-printer"),i=e("delegate").extend({init:function(){this._super(),this.timeOuts=[]},get:function(i,n,o){if(i.hasOwnProperty(o))t.printError("Timer Factory","This owner is already using this property, assigning it again with a timer might cause your program to go ape shit.");else{i||t.printError("Timer Factory",'Timer must have an owner, if unsure just send in "this"'),n||t.printError("Timer Factory","Timer must have an name to identify it later"),o||t.printError("Timer Factory","Timer must have a propertyName to be refered with from its owners scope");var r=e("timer"),s=new r(i,n,o);this.timeOuts.push(s),i[o]=s,this.execute(this.CREATE,s);var a=this;s.on(s.REMOVE,function(){index=a.timeOuts.indexOf(this),a.timeOuts.splice(index,1),a.execute(a.REMOVE,this)}),s.on(s.START,function(){a.execute(a.START,this)}),s.on(s.COMPLETE,function(){a.execute(a.COMPLETE,this)}),s.on(s.REPEATE,function(){a.execute(a.REPEATE,this)}),s.on(s.PAUSE,function(){a.execute(a.PAUSE,this)}),s.on(s.RESUME,function(){a.execute(a.RESUME,this)}),s.on(s.RESET,function(){a.execute(a.RESET,this)}),s.on(s.STOP,function(){a.execute(a.STOP,this)})}},getTotalCount:function(){return this.timeOuts.length},getRunningCount:function(){return n.call(this,"Running")},getPausedCount:function(){return n.call(this,"Paused")},getStoppedCount:function(){return n.call(this,"Stopped")},startAll:function(){return a.call(this,"start")},resetAll:function(){return a.call(this,"reset")},stopAll:function(){return a.call(this,"stop")},pauseAll:function(){return a.call(this,"pause")},resumeAll:function(){return a.call(this,"resume")},removeAll:function(){return a.call(this,"remove")},setProperty:function(e,t,i){this.timeOuts.forEach(function(n,o,r){i(n,o,r)&&(n[e]=t)})},toMins:function(e){return parseInt(e/6e4)},toSecs:function(e){return parseInt(e/1e3)},toMillisFraction:function(e){return parseInt(e%1e3/100)},formatMinutes:function(e){var t=this.toMins(e)%60;return 10>t?"0"+t:t},formatSeconds:function(e){var t=this.toMillisFraction(e),i=this.toSecs(e)%60;return(10>i?"0"+i:i)+"."+t},formatMinutesSeconds:function(e){return this.formatMinutes(e)+":"+this.formatSeconds(e)}});Object.defineProperty(i.prototype,"CREATE",{get:function(){return"create"}}),Object.defineProperty(i.prototype,"REMOVE",{get:function(){return"remove"}}),Object.defineProperty(i.prototype,"COMPLETE",{get:function(){return"complete"}}),Object.defineProperty(i.prototype,"REPEATE",{get:function(){return"repeate"}}),Object.defineProperty(i.prototype,"START",{get:function(){return"start"}}),Object.defineProperty(i.prototype,"PAUSE",{get:function(){return"pause"}}),Object.defineProperty(i.prototype,"RESUME",{get:function(){return"resume"}}),Object.defineProperty(i.prototype,"RESET",{get:function(){return"reset"}}),Object.defineProperty(i.prototype,"STOP",{get:function(){return"stop"}});var n=function(e){for(var t=0,i=0;i<this.timeOuts.length;i++)this.timeOuts[i][e]&&t++;return t},o=function(e,t){for(var i=null,n=this.length-1;n>=0;n--)i=this[n],t(i,n,this)&&i[e]()},r=function(e,t,i){for(var n=null,o=this.length-1;o>=0;o--)n=this[o],n[t]===i&&n[e]()},s=function(e){for(var t=this.length-1;t>=0;t--)timer=this[t],timer[e]()},a=function(e){var t=this;return{withName:function(i){r.call(t.timeOuts,e,"name",i)},withOwner:function(i){r.call(t.timeOuts,e,"owner",i)},which:function(i){o.call(t.timeOuts,e,i)},now:function(){s.call(t.timeOuts,e)}}};return new i}),define("sound-player",["delegate","timer-factory","error-printer"],function(e,t,i){var n=e.extend({init:function(){this._super(),this.audioAssetPaths={},this.audioAssetInfo={},this.audioTags={},this.audioTagsLoading={},this.pooledChannels=[],this.activeChannels=[],this.preAssignedChannels={},this.idsToPreAssignOnceLoaded={},this.audioBuffers={},this.audioBuffersLoading={},this.activeBufferNodes={},this.maximumAmountOfBuffers=0,this.preAssignedBuffers={},this.activePreAssignedBuffers={},this.activeNoneAssignedBuffers=0,this.currentTime=new Date,this.isLoading=!1,window.AudioContext=window.AudioContext||window.webkitAudioContext,this.audioContext=null,window.AudioContext&&(this.audioContext=new window.AudioContext)},createChannels:function(e){if(this.audioContext)this.maximumAmountOfBuffers=e;else for(var i=0;e>i;i++){var n=new Audio;t.get(n,"sound_"+i,"timer"),n.Paused=function(){return this.timer.Paused},n.Playing=function(){return this.timer.Running},n.Stopped=function(){return this.timer.Stopped},n.waitingToPlay=!1,n.stopRequested=!1,n.pauseRequested=!1,this.pooledChannels.push(n)}},getPooledCount:function(){return this.audioContext?0:this.pooledChannels.length},getActiveCount:function(){if(this.audioContext){var e=0;for(var t in this.activeBufferNodes)e+=this.activeBufferNodes[t].length;return e}return this.activeChannels.length},getAssignedCount:function(){if(this.audioContext){var e=0;for(var t in this.preAssignedBuffers)e+=this.preAssignedBuffers[t];return e}var e=0;for(var t in this.preAssignedChannels)e+=this.preAssignedChannels[t].length;return e},add:function(e,t,i){this.audioAssetPaths[e]=t;var n="";n=this.audioContext?"web-audio":"audio-tag",this.audioAssetInfo[e]={type:n,dynamic:!!i}},hasId:function(e){return!!this.audioAssetPaths[e]},getResourcePath:function(e){return this.audioAssetPaths[e]},assignChannels:function(e,t){this.audioContext?(this.preAssignedBuffers[e]||(this.preAssignedBuffers[e]=t,this.activePreAssignedBuffers[e]=0),this.preAssignedBuffers[e]=t,this.activePreAssignedBuffers[e]=0):(this.idsToPreAssignOnceLoaded[e]||(this.idsToPreAssignOnceLoaded[e]=t),this.idsToPreAssignOnceLoaded[e]=t)},clearAssignedChannels:function(e){if(this.audioContext)this.preAssignedBuffers[e]&&(this.preAssignedBuffers[e]=0,this.activePreAssignedBuffers[e]=0);else{if(this.idsToPreAssignOnceLoaded[e]&&(this.idsToPreAssignOnceLoaded[e]=0),!this.preAssignedChannels[e])return;this.pooledChannels=this.pooledChannels.concat(this.preAssignedChannels[e]),this.preAssignedChannels[e]=null}},loadAll:function(){this.isLoading&&i.printError("Sound Player","Still loading resources. Wait till everything is complete, before loading more"),this.isLoading=!0;var e=Object.keys(this.audioAssetPaths).length;if(0===e)return this.execute(this.ON_LOAD_ALL_COMPLETE),void(this.isLoading=!1);var t=function(){e--,0>=e&&(this.execute(this.ON_LOAD_ALL_COMPLETE),this.isLoading=!1)}.bind(this);for(var n in this.audioAssetPaths)if(this.audioTags[n])i.printError("Sound Player","Id: "+n+" is already in use"),e--;else{var o=this.audioAssetPaths[n],r=this.audioAssetInfo[n].type,s=this.audioAssetInfo[n].dynamic;s?t():("audio-tag"===r&&g.call(this,n,o,function(){if(this.idsToPreAssignOnceLoaded[n]){for(var e=(this.idsToPreAssignOnceLoaded[n],this.pooledChannels.splice(0,amount)),i=e.length,o=0;o<e.length;o++)m.call(this,n,e[o],function(){i--,0>=i&&t()});this.preAssignedChannels[n]||(this.preAssignedChannels[n]=[]),this.preAssignedChannels[n]=this.preAssignedChannels[n].concat(e)}else t()}),"web-audio"===r&&p.call(this,n,o,function(){t()}))}},playSingle:function(e){var t=this.audioAssetPaths[e],i=this.audioAssetInfo[e].type;
if("audio-tag"===i)if(this.audioTags[e]){var n=this.preAssignedChannels[e]?this.preAssignedChannels[e]:this.pooledChannels;if(0==n.length)return;var o=f.call(this,n);if(this.preAssignedChannels[e]&&o&&o.loaded)y.call(this,e,o);else if(this.preAssignedChannels[e]&&o&&!o.loaded){var r=function(){o.removeEventListener("loadedmetadata",r),y.call(this,e,o)}.bind(this);o.addEventListener("loadedmetadata",r)}else m.call(this,e,o,function(t){y.call(this,e,t)}.bind(this))}else u.call(this,e,t,function(e){this.playSingle(e)});if("web-audio"===i)if(this.audioBuffers[e]){if(this.preAssignedBuffers[e]){var s=this.preAssignedBuffers[e];if(!(this.activePreAssignedBuffers[e]<s))return;this.activePreAssignedBuffers[e]++}else{var s=this.maximumAmountOfBuffers;if(!(this.activeNoneAssignedBuffers<s))return;this.activeNoneAssignedBuffers++}var a=C(this.audioBuffers[e],this.audioContext);this.activeBufferNodes[e]||(this.activeBufferNodes[e]=[]),this.activeBufferNodes[e].push(a),a.onEnded=function(){var t=this.activeBufferNodes[e].indexOf(a);-1!==t&&this.activeBufferNodes[e].splice(t,1),this.preAssignedBuffers[e]?this.activePreAssignedBuffers[e]--:this.activeNoneAssignedBuffers--,this.execute(this.SINGLE_COMPLETE,e)}.bind(this),a.play(),this.execute(this.PLAY_SINGLE,e)}else p.call(this,e,t,function(e){this.playSingle(e)})},playLoop:function(e){var t=this.audioAssetPaths[e],i=this.audioAssetInfo[e].type;if("audio-tag"===i)if(this.audioTags[e]){var n=this.preAssignedChannels[e]?this.preAssignedChannels[e]:this.pooledChannels;if(0==n.length)return;var o=f.call(this,n);if(this.preAssignedChannels[e]&&o&&o.loaded)b.call(this,e,o);else if(this.preAssignedChannels[e]&&o&&!o.loaded){var r=function(){o.removeEventListener("loadedmetadata",r),b.call(this,e,o)}.bind(this);o.addEventListener("loadedmetadata",r)}else m.call(this,e,o,function(t){b.call(this,e,t)}.bind(this))}else u.call(this,e,t,function(e){this.playLoop(e)});if("web-audio"===i)if(this.audioBuffers[e]){var s=C(this.audioBuffers[e],this.audioContext,!0);if(this.preAssignedBuffers[e]){var a=this.preAssignedBuffers[e];if(!(this.activePreAssignedBuffers[e]<a))return;this.activePreAssignedBuffers[e]++}else{var a=this.maximumAmountOfBuffers;if(!(this.activeNoneAssignedBuffers<a))return;this.activeNoneAssignedBuffers++}this.activeBufferNodes[e]||(this.activeBufferNodes[e]=[]),this.activeBufferNodes[e].push(s),s.onEnded=function(){var t=this.activeBufferNodes[e].indexOf(s);-1!==t&&this.activeBufferNodes[e].splice(t,1),this.preAssignedBuffers[e]?this.activePreAssignedBuffers[e]--:this.activeNoneAssignedBuffers--}.bind(this),s.onLoop=function(){this.execute(this.PLAY_LOOP,e)}.bind(this),s.play(),this.execute(this.PLAY_LOOP,e)}else p.call(this,e,t,function(e){this.playLoop(e)})},pause:function(e){if(this.audioAssetInfo[e]){var t=this.audioAssetInfo[e].type;if("audio-tag"===t)for(var i=0;i<this.activeChannels.length;i++){var n=this.activeChannels[i];n.id==e&&l.call(this,n)}if("web-audio"===t){var o=this.activeBufferNodes[e];if(!o)return;for(var i=0;i<o.length;i++)o[i].pause()}}},stop:function(e){if(this.audioAssetInfo[e]){var t=this.audioAssetInfo[e].type;if("audio-tag"===t)for(var i=this.activeChannels.length-1;i>=0;i--){var n=this.activeChannels[i];n.id==e&&h.call(this,n,i)}if("web-audio"===t){var o=this.activeBufferNodes[e];if(!o)return;for(var i=0;i<o.length;i++)o[i].stop()}}},resume:function(e){if(this.audioAssetInfo[e]){var t=this.audioAssetInfo[e].type;if("audio-tag"===t)for(var i=0;i<this.activeChannels.length;i++){var n=this.activeChannels[i];n.id==e&&c.call(this,n)}if("web-audio"===t){var o=this.activeBufferNodes[e];if(!o)return;for(var i=0;i<o.length;i++)o[i].resume()}}},pauseAll:function(){return o.call(this,"pause")},stopAll:function(){return o.call(this,"stop")},resumeAll:function(){return o.call(this,"resume")},setPropertyToAll:function(e,t){return o.call(this,"setproperty",e,t)}});Object.defineProperty(n.prototype,"ON_LOAD_ALL_COMPLETE",{get:function(){return"load_all_complete"}}),Object.defineProperty(n.prototype,"ON_LOAD_COMPLETE",{get:function(){return"load_complete"}}),Object.defineProperty(n.prototype,"CHANNELS_ASSIGN",{get:function(){return"channel_assign"}}),Object.defineProperty(n.prototype,"CHANNELS_REVOKE",{get:function(){return"channel_revoke"}}),Object.defineProperty(n.prototype,"SINGLE_COMPLETE",{get:function(){return"single_complete"}}),Object.defineProperty(n.prototype,"PLAY_SINGLE",{get:function(){return"play_single"}}),Object.defineProperty(n.prototype,"PLAY_LOOP",{get:function(){return"play_loop"}}),Object.defineProperty(n.prototype,"PAUSE",{get:function(){return"pause"}}),Object.defineProperty(n.prototype,"RESUME",{get:function(){return"resume"}}),Object.defineProperty(n.prototype,"STOP",{get:function(){return"stop"}});var o=function(e){var t=Array.prototype.slice.call(arguments).splice(1);return{which:function(i){for(var n=this.activeChannels.length-1;n>=0;n--){var o=this.activeChannels[n];if(i(o.id,o))switch(e){case"pause":l.call(this,o,n,t);break;case"resume":c.call(this,o,n,t);break;case"stop":h.call(this,o,n,t);break;case"setproperty":d.call(this,o,n,t)}}for(var u in this.activeBufferNodes)for(var p=this.activeBufferNodes[u],n=p.length-1;n>=0;n--){var f=p[n];if(i(u,f))switch(e){case"pause":r.call(this,f,n,t);break;case"resume":a.call(this,f,n,t);break;case"stop":s.call(this,f,n,t);break;case"setproperty":d.call(this,f,n,t)}}}.bind(this),now:function(){for(var i=this.activeChannels.length-1;i>=0;i--){var n=this.activeChannels[i];switch(e){case"pause":l.call(this,n,i,t);break;case"resume":c.call(this,n,i,t);break;case"stop":h.call(this,n,i,t);break;case"setproperty":d.call(this,n,i,t)}}for(var o in this.activeBufferNodes)for(var u=this.activeBufferNodes[o],i=u.length-1;i>=0;i--){var p=u[i];switch(e){case"pause":r.call(this,p,i,t);break;case"resume":a.call(this,p,i,t);break;case"stop":s.call(this,p,i,t);break;case"setproperty":d.call(this,p,i,t)}}}.bind(this)}},r=function(e){e.pause(),this.execute(this.PAUSE)},s=function(e){e.stop(),this.execute(this.STOP)},a=function(e){e.resume(),this.execute(this.RESUME)},l=function(e){return e.waitingToPlay?void(e.pauseRequested=!0):(e.pauseRequested=!1,e.timer.pause(),e.pause(),void this.execute(this.PAUSE))},h=function(e,t){return e.waitingToPlay?void(e.stopRequested=!0):(e.stopRequested=!1,this.preAssignedChannels[e.id]?this.preAssignedChannels[e.id].push(e):(this.pooledChannels.push(e),e.id="none"),this.activeChannels.splice(t,1),e.currentTime=0,e.pause(),e.timer.stop(),e.timer.hardCleanUp(),void this.execute(this.STOP))},c=function(e){e.waitingToPlay=!0,e.play().then(function(){return e.waitingToPlay=!1,e.stopRequested?void h.call(this,e,this.activeChannels.indexOf(e)):e.pauseRequested?void l.call(this,e,this.activeChannels.indexOf(e)):(e.timer.resume(),void this.execute(this.RESUME))}.bind(this))},d=function(e,t,i){e[i[0]]=i[1]},u=function(e,t,n){this.audioTags[e]&&i.printError("Sound Player","Id: "+e+" is already in use"),g.call(this,e,t,function(){n&&n(e),this.execute(this.ON_LOAD_COMPLETE,e)})},p=function(e,t,n){if(this.audioBuffers[e]&&i.printError("Sound Player","Id: "+e+" is already in use"),!this.audioBuffersLoading[e]){var o=new XMLHttpRequest;"file:"===window.location.protocol?o.open("GET","http://localhost:5000/"+t):o.open("GET",t),o.responseType="arraybuffer",o.onload=function(){this.audioContext.decodeAudioData(o.response,function(t){this.audioBuffers[e]=t,this.audioBuffersLoading[e]=!1,n&&n(e)}.bind(this))}.bind(this),this.audioBuffersLoading[e]=!0,o.send()}},f=function(e){return 0!=e.length?e.pop():void 0},g=function(e,t,i){if(!this.audioTagsLoading[e]){var n=document.createElement("audio");n.setAttribute("src",t),n.setAttribute("preload","auto"),n.addEventListener("canplaythrough",function(){this.audioTagsLoading[e]=!1,i.call(this)}.bind(this)),this.audioTags[e]=n,this.audioTagsLoading[e]=!0,document.body.appendChild(n)}},m=function(e,t,i){var n=this.audioTags[e];if(n){t.loaded=!1;var o=function(){t.removeEventListener("loadedmetadata",o),t.loaded=!0,i&&i(t)},r=function(){t.addEventListener("loadedmetadata",o),t.id=e,t.src=n.src,t.time=n.duration,t.load(),n.removeEventListener("canplaythrough",r)};4!=n.readyState?n.addEventListener("canplaythrough",r):r()}},y=function(e,t){var i=this.preAssignedChannels[e]?this.preAssignedChannels[e]:this.pooledChannels;v.call(this,t,i)&&(t.timer.on("complete",function(){var i=t;i.currentTime=0,i.pause(),this.preAssignedChannels[e]?this.preAssignedChannels[e].push(i):this.pooledChannels.push(i),this.activeChannels.splice(this.activeChannels.indexOf(i),1),this.execute(this.SINGLE_COMPLETE,i.id)}.bind(this),!0),t.waitingToPlay=!0,t.play().then(function(){return t.waitingToPlay=!1,t.stopRequested?void h.call(this,t,i.indexOf(t)):t.pauseRequested?void l.call(this,t,i.indexOf(t)):(t.timer.Delay(1e3*t.time).RepeateCount(1).RemoveOnComplete(!1).reset(),void this.execute(this.PLAY_SINGLE,t.id))}.bind(this)))},b=function(e,t){var i=this.preAssignedChannels[e]?this.preAssignedChannels[e]:this.pooledChannels;v.call(this,t,i)&&(t.timer.on("repeate",function(){var e=t;e.currentTime=0,e.waitingToPlay=!0,e.play().then(function(){return e.waitingToPlay=!1,e.stopRequested?void h.call(this,e,i.indexOf(e)):e.pauseRequested?void l.call(this,e,i.indexOf(t)):void this.execute(this.PLAY_LOOP,e.id)}.bind(this))}.bind(this)),t.waitingToPlay=!0,t.play().then(function(){return t.waitingToPlay=!1,t.stopRequested?void h.call(this,t,i.indexOf(t)):t.pauseRequested?void l.call(this,t,i.indexOf(t)):(t.timer.Delay(1e3*t.time).RepeateCount(-1).RemoveOnComplete(!1).reset(),void this.execute(this.PLAY_LOOP,t.id))}.bind(this)))},v=function(e,t){return e.loaded?(this.activeChannels.push(e),!0):(t.push(e),!1)},C=function(e,t,i){function n(){if(!u&&!p){var o=d;h=t.createBufferSource(),h.connect(t.destination),h.buffer=e,h.onended=function(){i?(h&&(h.disconnect(),h.stop(0),h=null),d=0,c=0,u=!1,p=!1,f.onLoop&&f.onLoop(),n()):f.onEnded&&!p&&f.onEnded()},h.start(t.currentTime,o),c=t.currentTime-o,d=0,u=!0,p=!1}}function o(){p&&(p=!1,n())}function r(){if(u){var e=t.currentTime-c;p=!0,s(),p=!0,d=e}}function s(){u&&(h&&(h.disconnect(),h.stop(0),h=null,f.onEnded&&!p&&f.onEnded()),d=0,c=0,u=!1,p=!1)}function a(){return d?d:c?t.currentTime-c:0}function l(){return e.duration}var h=null,c=0,d=0,u=!1,p=!1,f={currentTime:a,duration:l,play:n,pause:r,resume:o,stop:s,onEnded:null,onLoop:null,Playing:function(){return u},Paused:function(){return p},Stopped:function(){return!!h}};return f};return new n}),define("asset-preloader",["delegate","error-printer"],function(e,t){var i=e.extend({init:function(){this._super(),this.imagesToLoad=[],this.audioToLoad=[]},addAsset:function(e){var i=e.match(/^.+\.(.+?)(?=\?|$)/);i||t.printError("Asset Preloader: path is not a url");var n=i[1];return"png"===n||"gif"===n||"jpeg"===n?void(-1===this.imagesToLoad.indexOf(e)&&this.imagesToLoad.push(e)):"opus"===n||"weba"===n||"ogg"===n?void(-1===this.audioToLoad.indexOf(e)&&this.audioToLoad.push(e)):void t.printError("Asset Preloader: file type is not supported")},loadAll:function(){var e=this.imagesToLoad.length,t=this.audioToLoad.length;if(e+t===0)return void this.execute(this.ON_LOAD_ALL_COMPLETE);for(var i=0;i<this.imagesToLoad.length;i++){var n=this.imagesToLoad[i],o=document.createElement("img");o.addEventListener("load",function(){e--,0===e&&0===t&&(this.imagesToLoad.length=0,this.audioToLoad.length=0,this.execute(this.ON_LOAD_ALL_COMPLETE))}.bind(this)),o.crossOrigin="Anonymous",o.src="file:"===window.location.protocol?"http://localhost:5000/"+n:n}for(var i=0;i<this.audioToLoad.length;i++){var n=this.audioToLoad[i],r=document.createElement("audio");r.addEventListener("canplaythrough",function(){t--,0===e&&0===t&&(this.imagesToLoad.length=0,this.audioToLoad.length=0,this.execute(this.ON_LOAD_ALL_COMPLETE))}.bind(this)),r.preload="auto",r.src="file:"===window.location.protocol?"http://localhost:5000/"+n:n}}});return Object.defineProperty(i.prototype,"ON_LOAD_ALL_COMPLETE",{get:function(){return"load_all_complete"}}),new i}),define("component",["delegate","util"],function(e,t){var i=e.extend({init:function(){this._super(),this.uid=null,this.poolId=null,this.typeId=null,this.parent=null,this.enabled=!1},configure:function(e){if(e){for(var i in e)if(t.isObject(e[i])){var n=e[i]._get,o=e[i]._set;n||o?(t.isFunction(n)&&t.defineGetter(this,i,n),t.isFunction(o)&&t.defineSetter(this,i,o)):this[i]=e[i]}else this[i]=e[i];this.args=e}},reset:function(){this.uid=null,this.parent=null,this.enabled=!0},onStarted:function(e){this.start(e),this.execute(this.START,this)},onAdded:function(e){this.parent=e,this.added(e),this.execute(this.ADD,this)},onRemoved:function(e){this.removed(e),this.execute(this.REMOVE,this),this.parent=null},onRecycled:function(e){this.enabled=!1,this.recycle(e),this.execute(this.RECYCLE,this),this.hardCleanUp()},added:function(){},removed:function(){},start:function(){},update:function(){},recycle:function(){},enable:function(){this.enabled=!0},disable:function(){this.enabled=!1},isEnabled:function(){return this.enabled},debug_draw:function(){}});return Object.defineProperty(i.prototype,"START",{get:function(){return"started"}}),Object.defineProperty(i.prototype,"ADD",{get:function(){return"added"}}),Object.defineProperty(i.prototype,"REMOVE",{get:function(){return"removed"}}),Object.defineProperty(i.prototype,"RECYCLE",{get:function(){return"recycled"}}),i}),define("collision-resolver",["sat"],function(e){var t=function(){this.collisionLists={},this.toCollideCache={},this.response=new e.Response,this.invertedResponse=new e.Response};return t.prototype.addToCollisionList=function(e){var t=this.toCollideCache[e.id];if(null!=t&&t.length>0)for(var i=0;i<t.length;i++)this.collisionLists[t[i]].push(e)},t.prototype.removeFromCollisionList=function(e){var t=this.toCollideCache[e.id];if(null!=t&&t.length>0)for(m=t.length-1;m>=0;m--)this.collisionLists[t[m]].splice(this.collisionLists[t[m]].indexOf(e),1)},t.prototype.addCollisionPair=function(e,t){null==this.collisionLists[e]&&(this.collisionLists[e]=[]),null==this.toCollideCache[t]&&(this.toCollideCache[t]=[]),this.toCollideCache[t].push(e)},t.prototype.removeCollisionPair=function(e,t){this.collisionLists[e]=null,this.toCollideCache[t]=null},t.prototype.areColliding=function(e,t){if(null==e.collider||null==t.collider)return!1;var i=e.colliderType+t.colliderType;return e.getResponse||t.getResponse?(this.invertedResponse.clear(),this.response.clear(),this.collisionMethodPairs[i](e.collider,t.collider,this.response)):this.collisionMethodPairs[i](e.collider,t.collider)},t.prototype.getLastResponse=function(){return this.response},t.prototype.getLastInvertedResponse=function(){return this.invertedResponse.copy(this.response),this.invertedResponse.invert(),this.invertedResponse},t.prototype.circleCollider="circle",t.prototype.polygonCollider="polygon",t.prototype.fixedPolygonCollider="fixed",t.prototype.collisionMethodPairs={circlecircle:e.testCircleCircle,circlepolygon:e.testCirclePolygon,circlefixed:e.testCirclePolygon,polygoncircle:e.testPolygonCircle,polygonpolygon:e.testPolygonPolygon,polygonfixed:e.testPolygonPolygon,fixedcircle:e.testPolygonCircle,fixedpolygon:e.testPolygonPolygon,fixedfixed:e.testPolygonPolygon},new t}),define("collision-component",["component","collision-resolver","error-printer","game-object"],function(e,t,i,n){var o=e.extend({init:function(){this._super(),this.collisionResolver=t,this.onCollideArguments=[null,null]},start:function(){this.debugColor="#00FF00",this.checkingCollisions=!0,this.collisionResolver.addToCollisionList(this),this.parent.onCollide||i.printError("Collision Component","GameObject with typeId: "+this.parent.typeId+", needs to define an onCollide method, yo.")},update:function(){var e=this.collisionResolver.collisionLists[this.id];if(null!=e)for(k=0;k<e.length;k++){var t=e[k];if(t.checkingCollisions&&this.collisionResolver.areColliding(this,t)){if(!this.checkingCollisions)break;var i,n;if(t.getResponse||this.getResponse?(i=this.collisionResolver.getLastResponse(),n=this.collisionResolver.getLastInvertedResponse()):(i=null,n=null),t.parent&&this.parent&&(this.onCollide(t,i),t.parent&&this.parent&&(this.onCollideArguments[0]=t.parent,this.onCollideArguments[1]=i,this.parent.execute("collide",this.onCollideArguments,"apply")),t.parent&&this.parent&&this.parent.onCollide(t.parent,i)),!this.checkingCollisions)break;t.parent&&this.parent&&(t.onCollide(this,n),t.parent&&this.parent&&(this.onCollideArguments[0]=this.parent,this.onCollideArguments[1]=n,t.parent.execute("collide",this.onCollideArguments,"apply")),t.parent&&this.parent&&t.parent.onCollide(this.parent,n))}}},onCollide:function(){this.debugColor="#FF0000"},removed:function(){this.checkingCollisions=!1,this.collisionResolver.removeFromCollisionList(this)},debug_draw:function(){this.debugColor="#00FF00"},enable:function(){this._super(),this.checkingCollisions=!0},disable:function(){this._super(),this.checkingCollisions=!1}});return Object.defineProperty(n.prototype,"COLLIDE",{get:function(){return"collide"}}),o}),define("circle-collider",["collision-component","sat","collision-resolver","vector-2D"],function(e,t,i,n){var o=e.extend({init:function(){this._super(),this.p=new n,this.collider=new t.Circle(new n(0,0),this.radius),this.colliderType=i.circleCollider},start:function(){this._super(),this.collider.pos.x=0,this.collider.pos.y=0,this.collider.r=this.radius},update:function(){var e=this.parent.matrix.transformPoint(0,0,this.p);this.collider.pos.x=e.x,this.collider.pos.y=e.y,this._super()},debug_draw:function(e,t,i,n){if(n.colliderDebug){var o=this.parent.matrix.transformPoint(0,0,this.p);i.circle(e,o.x,o.y,this.collider.r,null,this.debugColor,2),this._super()}}});return o}),define("polygon-collider",["collision-component","sat","collision-resolver","vector-2D"],function(e,t,i,n){var o=e.extend({init:function(){this._super(),this.p=new n,this.collider=new t.FixedSizePolygon(new n(0,0)),this.colliderType=i.fixedPolygonCollider},configure:function(e){this._super(e);for(var t=JSON.parse(JSON.stringify(this.points)),i=[],o=0;o<this.points.length;o++)i.push(new n(t[o].x,t[o].y));this.points=i},start:function(){this._super(),this.pointCount=this.points.length,this.pointsCopy?this.pointsCopy.length=0:this.pointsCopy=[];for(var e=JSON.parse(JSON.stringify(this.points)),t=[],i=0;i<this.pointCount;i++)this.pointsCopy.push(new n(e[i].x,e[i].y)),t.push(new n(e[i].x,e[i].y));this.collider.pos.x=0,this.collider.pos.y=0,this.collider.update(t)},update:function(){for(var e=this.parent.getMatrix(),t=0;t<this.pointCount;t++){var i=e.transformPoint(this.pointsCopy[t].x,this.pointsCopy[t].y,this.p);this.collider.points[t].x=i.x,this.collider.points[t].y=i.y}this.collider.recalc(),this._super()},debug_draw:function(e,t,i,n){if(n.colliderDebug){var o=this.parent.matrix;e.save(),e.setTransform(1,0,0,1,0,0),t.transformContext(e),e.transform(o.a,o.b,o.c,o.d,o.tx,o.ty),i.polygon(e,0,0,this.pointsCopy,null,this.debugColor,2),e.restore(),this._super()}}});return o}),define("fixed-polygon-collider",["collision-component","sat","collision-resolver","vector-2D"],function(e,t,i,n){var o=e.extend({init:function(){this._super(),this.p=new n,this.collider=new t.FixedSizePolygon(new n(0,0)),this.colliderType=i.fixedPolygonCollider},configure:function(e){this._super(e);for(var t=JSON.parse(JSON.stringify(this.points)),i=[],o=0;o<this.points.length;o++)i.push(new n(t[o].x,t[o].y));this.points=i},start:function(){this._super(),this.pointCount=this.points.length,this.pointsCopy?this.pointsCopy.length=0:this.pointsCopy=[];for(var e=JSON.parse(JSON.stringify(this.points)),t=[],i=0;i<this.pointCount;i++)this.pointsCopy.push(new n(e[i].x,e[i].y)),t.push(new n(e[i].x,e[i].y));this.collider.pos.x=0,this.collider.pos.y=0,this.collider.update(t)},update:function(){var e=this.parent.getMatrix().transformPoint(0,0,this.p);this.collider.pos.x=e.x,this.collider.pos.y=e.y,this._super()},debug_draw:function(e,t,i,n){if(n.colliderDebug){var o=this.parent.getMatrix().transformPoint(0,0,this.p);e.save(),e.setTransform(1,0,0,1,0,0),e.translate(o.x,o.y),i.polygon(e,0,0,this.pointsCopy,null,this.debugColor,2),e.restore(),this._super()}}});return o}),define("extension",["class","error-printer"],function(e,t){var i=e.extend({type:function(){t.mustOverrideError("Extension")},execute:function(){t.mustOverrideError("Extension")},destroy:function(){t.mustOverrideError("Extension")}});return i}),define("patch-collider-components",["require","gb","circle-collider","polygon-collider","fixed-polygon-collider","extension"],function(e){var t=e("gb"),i=e("circle-collider"),n=e("polygon-collider"),o=e("fixed-polygon-collider"),r=e("extension").extend({init:function(){},type:function(){return t.game.CREATE},execute:function(){Object.defineProperty(i.prototype,"Attributes",{configurable:!0,get:function(){return{radius:this.Radius}},set:function(e){this.Radius=e.radius}}),Object.defineProperty(i.prototype,"Radius",{configurable:!0,get:function(){return this.collider.r},set:function(e){this.collider.r=e,this.execute(this.CHANGE_RADIUS,e)}}),Object.defineProperty(n.prototype,"Attributes",{configurable:!0,get:function(){return{points:this.Points}},set:function(e){e.points&&(this.Points=e.points)}}),Object.defineProperty(n.prototype,"Points",{configurable:!0,get:function(){return this.pointsCopy},set:function(e){e&&(this.pointsCopy=e,this.execute(this.CHANGE_POINTS,e))}}),Object.defineProperty(o.prototype,"Attributes",{configurable:!0,get:function(){return{points:this.Points}},set:function(e){e.points&&(this.Points=e.points)}}),Object.defineProperty(o.prototype,"Points",{configurable:!0,get:function(){return this.pointsCopy},set:function(e){e&&(this.pointsCopy=e,this.execute(this.CHANGE_POINTS,e))}}),Object.defineProperty(i.prototype,"CHANGE_RADIUS",{configurable:!0,get:function(){return"change_radius"}}),Object.defineProperty(n.prototype,"CHANGE_POINTS",{configurable:!0,get:function(){return"change_points"}}),Object.defineProperty(o.prototype,"CHANGE_POINTS",{configurable:!0,get:function(){return"change_points"}})},destroy:function(){delete i.prototype.Attributes,delete i.prototype.Radius,delete n.prototype.Attributes,delete n.prototype.Points,delete o.prototype.Attributes,delete o.prototype.Points,delete i.prototype.CHANGE_RADIUS,delete n.prototype.CHANGE_POINTS,delete o.prototype.CHANGE_POINTS}});return r}),define("patch-game-object-configuration",["require","gb","game-object-configuration","component-configuration","extension"],function(e){var t=e("gb"),i=e("game-object-configuration"),n=e("component-configuration"),o=e("extension").extend({init:function(){},type:function(){return t.game.CREATE},execute:function(){Object.defineProperty(i.prototype,"childConfig",{configurable:!0,enumerable:!0,writable:!0,value:!1}),i.prototype.childOnly=function(){return this.childConfig=!0,this},i.prototype.isChild=function(){return this.childConfig},Object.defineProperty(i.prototype,"customConfig",{configurable:!0,enumerable:!0,writable:!0,value:!1}),i.prototype.custom=function(){return this.customConfig=!0,this},i.prototype.isCustom=function(){return this.customConfig},Object.defineProperty(i.prototype,"mouseSupport",{configurable:!0,enumerable:!0,writable:!0,value:!0}),i.prototype.disableMouseSupport=function(){return this.mouseSupport=!1,this},i.prototype.hasMouseSupport=function(){return this.mouseSupport},Object.defineProperty(i.prototype,"objectCategory",{configurable:!0,enumerable:!0,writable:!0,value:"default"}),i.prototype.obstacleCategory=function(){return this.objectCategory="obstacle",this},i.prototype.isObstacle=function(){return"obstacle"==this.objectCategory},i.prototype.enemyCategory=function(){return this.objectCategory="enemy",this},i.prototype.isEnemy=function(){return"enemy"==this.objectCategory},i.prototype.itemCategory=function(){return this.objectCategory="item",this},i.prototype.isItem=function(){return"item"==this.objectCategory},Object.defineProperty(i.prototype,"enemyTier",{configurable:!0,enumerable:!0,writable:!0,value:""}),i.prototype.weakEnemyTier=function(){return this.enemyTier="weak",this},i.prototype.isWeakEnemyTier=function(){return"weak"==this.enemyTier},i.prototype.strongEnemyTier=function(){return this.enemyTier="strong",this},i.prototype.isStrongEnemyTier=function(){return"strong"==this.enemyTier},i.prototype.bossEnemyTier=function(){return this.enemyTier="boss",this},i.prototype.isBossEnemyTier=function(){return"boss"==this.enemyTier},i.prototype.weakBossHelperEnemyTier=function(){return this.enemyTier="weak-boss-helper",this},i.prototype.isWeakBossHelperEnemyTier=function(){return"weak-boss-helper"==this.enemyTier},i.prototype.strongBossHelperEnemyTier=function(){return this.enemyTier="strong-boss-helper",this},i.prototype.isStrongBossHelperEnemyTier=function(){return"strong-boss-helper"==this.enemyTier},Object.defineProperty(n.prototype,"childConfig",{configurable:!0,value:!1}),n.prototype.isChild=function(){return!1},Object.defineProperty(n.prototype,"customConfig",{configurable:!0,value:!1}),n.prototype.isCustom=function(){return!1}},destroy:function(){delete i.prototype.childConfig,delete i.prototype.childOnly,delete i.prototype.isChild,delete i.prototype.customConfig,delete i.prototype.custom,delete i.prototype.isCustom,delete i.prototype.mouseSupport,delete i.prototype.disableMouseSupport,delete i.prototype.hasMouseSupport,delete i.prototype.objectCategory,delete i.prototype.obstacleCategory,delete i.prototype.isObstacle,delete i.prototype.enemyCategory,delete i.prototype.isEnemy,delete i.prototype.itemCategory,delete i.prototype.isItem,delete i.prototype.enemyTier,delete i.prototype.weakEnemyTier,delete i.prototype.isWeakEnemyTier,delete i.prototype.strongEnemyTier,delete i.prototype.isStrongEnemyTier,delete i.prototype.bossEnemyTier,delete i.prototype.isBossEnemyTier,delete i.prototype.weakBossHelperEnemyTier,delete i.prototype.isWeakBossHelperEnemyTier,delete i.prototype.strongBossHelperEnemyTier,delete i.prototype.isStrongBossHelperEnemyTier,delete n.prototype.childConfig,delete n.prototype.isChild,delete n.prototype.customConfig,delete n.prototype.isCustom}});return o}),define("patch-game-object-pool",["require","gb","extension"],function(e){var t=e("gb"),i=e("extension").extend({init:function(){this.goPoolbeforePatch=null,this.coPoolbeforePatch=null},type:function(){return t.game.CREATE},execute:function(){this.goPoolbeforePatch=t.goPool.constructor.prototype.getConfigurationTypes,this.coPoolbeforePatch=t.coPool.constructor.prototype.getConfigurationTypes,t.goPool.constructor.prototype.getConfigurationTypes=function(e){e=e||{};var t=[];for(var i in this.configurations){if(e.objectCategory){if("obstacle"==e.objectCategory){this.configurations[i].isObstacle()&&t.push(i);continue}if("enemy"==e.objectCategory){if(this.configurations[i].isEnemy()){if(e.enemyTier){if("weak"==e.enemyTier){this.configurations[i].isWeakEnemyTier()&&t.push(i);continue}if("strong"==e.enemyTier){this.configurations[i].isStrongEnemyTier()&&t.push(i);continue}if("boss"==e.enemyTier){this.configurations[i].isBossEnemyTier()&&t.push(i);continue}if("weak-boss-helper"==e.enemyTier){this.configurations[i].isWeakBossHelperEnemyTier()&&t.push(i);continue}if("strong-boss-helper"==e.enemyTier){this.configurations[i].isStrongBossHelperEnemyTier()&&t.push(i);continue}}t.push(i)}continue}if("item"==e.objectCategory){this.configurations[i].isItem()&&t.push(i);continue}}e.filterChilds?this.configurations[i].isChild()||t.push(i):e.customOnly?this.configurations[i].isCustom()&&t.push(i):t.push(i)}return t},t.goPool.constructor.prototype.isConfigurationCustom=function(e){return this.configurations[e].isCustom()},t.coPool.constructor.prototype.getConfigurationTypes=function(e){e=e||{};var t=[];for(var i in this.configurations)e.filterChilds?this.configurations[i].isChild()||t.push(i):e.customOnly?this.configurations[i].isCustom()&&t.push(i):t.push(i);return t},t.coPool.constructor.prototype.isConfigurationCustom=function(e){return this.configurations[e].isCustom()}},destroy:function(){t.goPool.constructor.prototype.getConfigurationTypes=this.goPoolbeforePatch,t.coPool.constructor.prototype.getConfigurationTypes=this.coPoolbeforePatch,delete t.goPool.constructor.prototype.isConfigurationCustom,delete t.coPool.constructor.prototype.isConfigurationCustom}});return i}),define("pause",["groups","viewports","gb","extension"],function(e,t,i,n){var o=i.game,r=n.extend({init:function(){Object.defineProperty(o.prototype,"PAUSE",{configurable:!0,get:function(){return"pause"}}),o.pause=function(){o.blurAction()&&(o.execute(o.PAUSE),window.removeEventListener("blur",o.blurAction),window.removeEventListener("focus",o.focusAction))}},type:function(){return o.BLUR},execute:function(){e.all("stop","update",function(e){return!e.updateAlreadyStopped},!0)},destroy:function(){delete o.prototype.PAUSE,delete o.pause}});return r}),define("resume",["groups","viewports","gb","extension"],function(e,t,i,n){var o=i.game,r=n.extend({init:function(){Object.defineProperty(o.prototype,"RESUME",{get:function(){return"resume"}}),o.constructor.prototype.resume=function(){o.focusAction()&&(o.execute(o.RESUME),window.addEventListener("blur",o.blurAction),window.addEventListener("focus",o.focusAction))}},type:function(){return i.game.FOCUS},execute:function(){e.all("resume","update",function(e){return!e.updateAlreadyStopped})},destroy:function(){delete o.prototype.RESUME,delete o.resume,window.removeEventListener("blur",o.blurAction),window.removeEventListener("focus",o.focusAction)}});return r}),define("sound-control",["sound-player","gb","extension"],function(e,t,i){var n=t.game,o=i.extend({type:function(){return t.game.CREATE},execute:function(){n.on(n.BLUR,this,function(){e.setPropertyToAll("alreadyPaused",!0).which(function(e,t){return t.Paused()}),e.pauseAll().now()},!1,!1,!1,"sound-control"),n.on(n.FOCUS,this,function(){e.resumeAll().which(function(e,t){return!t.alreadyPaused}),e.setPropertyToAll("alreadyPaused",null).now()},!1,!1,!1,"sound-control")},destroy:function(){n.levelCleanUp("sound-control")}});return o}),define("timers-control",["timer-factory","gb","extension"],function(e,t,i){var n=t.game,o=i.extend({type:function(){return t.game.CREATE},execute:function(){n.on(n.BLUR,this,function(){e.setProperty("alreadyPaused",!0,function(e){return e.Paused}),e.pauseAll().now()},!1,!1,!1,"timers-control"),n.on(n.FOCUS,this,function(){e.resumeAll().which(function(e){return!e.alreadyPaused}),e.setProperty("alreadyPaused",null,function(){return!0})},!1,!1,!1,"timers-control")},destroy:function(){n.levelCleanUp("timers-control")}});return o}),function(e,t){var i=e.GreenSockGlobals=e.GreenSockGlobals||e;if(!i.TweenLite){var n,o,r,s,a,l=function(e){var t,n=e.split("."),o=i;for(t=0;t<n.length;t++)o[n[t]]=o=o[n[t]]||{};return o},h=l("com.greensock"),c=1e-10,d=function(e){var t,i=[],n=e.length;for(t=0;t!==n;i.push(e[t++]));return i},u=function(){},p=function(){var e=Object.prototype.toString,t=e.call([]);return function(i){return null!=i&&(i instanceof Array||"object"==typeof i&&!!i.push&&e.call(i)===t)}}(),f={},g=function(n,o,r,s){this.sc=f[n]?f[n].sc:[],f[n]=this,this.gsClass=null,this.func=r;var a=[];this.check=function(h){for(var c,d,u,p,m=o.length,y=m;--m>-1;)(c=f[o[m]]||new g(o[m],[])).gsClass?(a[m]=c.gsClass,y--):h&&c.sc.push(this);if(0===y&&r)for(d=("com.greensock."+n).split("."),u=d.pop(),p=l(d.join("."))[u]=this.gsClass=r.apply(r,a),s&&(i[u]=p,"function"==typeof define&&define.amd?define((e.GreenSockAMDPath?e.GreenSockAMDPath+"/":"")+n.split(".").pop(),[],function(){return p}):n===t&&"undefined"!=typeof module&&module.exports&&(module.exports=p)),m=0;m<this.sc.length;m++)this.sc[m].check()},this.check(!0)},m=e._gsDefine=function(e,t,i,n){return new g(e,t,i,n)},y=h._class=function(e,t,i){return t=t||function(){},m(e,[],function(){return t},i),t};m.globals=i;var b=[0,0,1,1],v=[],C=y("easing.Ease",function(e,t,i,n){this._func=e,this._type=i||0,this._power=n||0,this._params=t?b.concat(t):b
},!0),w=C.map={},P=C.register=function(e,t,i,n){for(var o,r,s,a,l=t.split(","),c=l.length,d=(i||"easeIn,easeOut,easeInOut").split(",");--c>-1;)for(r=l[c],o=n?y("easing."+r,null,!0):h.easing[r]||{},s=d.length;--s>-1;)a=d[s],w[r+"."+a]=w[a+r]=o[a]=e.getRatio?e:e[a]||new e};for(r=C.prototype,r._calcEnd=!1,r.getRatio=function(e){if(this._func)return this._params[0]=e,this._func.apply(null,this._params);var t=this._type,i=this._power,n=1===t?1-e:2===t?e:.5>e?2*e:2*(1-e);return 1===i?n*=n:2===i?n*=n*n:3===i?n*=n*n*n:4===i&&(n*=n*n*n*n),1===t?1-n:2===t?n:.5>e?n/2:1-n/2},n=["Linear","Quad","Cubic","Quart","Quint,Strong"],o=n.length;--o>-1;)r=n[o]+",Power"+o,P(new C(null,null,1,o),r,"easeOut",!0),P(new C(null,null,2,o),r,"easeIn"+(0===o?",easeNone":"")),P(new C(null,null,3,o),r,"easeInOut");w.linear=h.easing.Linear.easeIn,w.swing=h.easing.Quad.easeInOut;var _=y("events.EventDispatcher",function(e){this._listeners={},this._eventTarget=e||this});r=_.prototype,r.addEventListener=function(e,t,i,n,o){o=o||0;var r,l,h=this._listeners[e],c=0;for(null==h&&(this._listeners[e]=h=[]),l=h.length;--l>-1;)r=h[l],r.c===t&&r.s===i?h.splice(l,1):0===c&&r.pr<o&&(c=l+1);h.splice(c,0,{c:t,s:i,up:n,pr:o}),this!==s||a||s.wake()},r.removeEventListener=function(e,t){var i,n=this._listeners[e];if(n)for(i=n.length;--i>-1;)if(n[i].c===t)return void n.splice(i,1)},r.dispatchEvent=function(e){var t,i,n,o=this._listeners[e];if(o)for(t=o.length,i=this._eventTarget;--t>-1;)n=o[t],n&&(n.up?n.c.call(n.s||i,{type:e,target:i}):n.c.call(n.s||i))};var x=e.requestAnimationFrame,O=e.cancelAnimationFrame,T=Date.now||function(){return(new Date).getTime()},E=T();for(n=["ms","moz","webkit","o"],o=n.length;--o>-1&&!x;)x=e[n[o]+"RequestAnimationFrame"],O=e[n[o]+"CancelAnimationFrame"]||e[n[o]+"CancelRequestAnimationFrame"];y("Ticker",function(e,t){var i,n,o,r,l,h=this,d=T(),p=t!==!1&&x,f=500,g=33,m="tick",y=function(e){var t,s,a=T()-E;a>f&&(d+=a-g),E+=a,h.time=(E-d)/1e3,t=h.time-l,(!i||t>0||e===!0)&&(h.frame++,l+=t+(t>=r?.004:r-t),s=!0),e!==!0&&(o=n(y)),s&&h.dispatchEvent(m)};_.call(h),h.time=h.frame=0,h.tick=function(){y(!0)},h.lagSmoothing=function(e,t){f=e||1/c,g=Math.min(t,f,0)},h.sleep=function(){null!=o&&(p&&O?O(o):clearTimeout(o),n=u,o=null,h===s&&(a=!1))},h.wake=function(){null!==o?h.sleep():h.frame>10&&(E=T()-f+5),n=0===i?u:p&&x?x:function(e){return setTimeout(e,1e3*(l-h.time)+1|0)},h===s&&(a=!0),y(2)},h.fps=function(e){return arguments.length?(i=e,r=1/(i||60),l=this.time+r,void h.wake()):i},h.useRAF=function(e){return arguments.length?(h.sleep(),p=e,void h.fps(i)):p},h.fps(e),setTimeout(function(){p&&(!o||h.frame<5)&&h.useRAF(!1)},1500)}),r=h.Ticker.prototype=new h.events.EventDispatcher,r.constructor=h.Ticker;var S=y("core.Animation",function(e,t){if(this.vars=t=t||{},this._duration=this._totalDuration=e||0,this._delay=Number(t.delay)||0,this._timeScale=1,this._active=t.immediateRender===!0,this.data=t.data,this._reversed=t.reversed===!0,W){a||s.wake();var i=this.vars.useFrames?H:W;i.add(this,i._time),this.vars.paused&&this.paused(!0)}});s=S.ticker=new h.Ticker,r=S.prototype,r._dirty=r._gc=r._initted=r._paused=!1,r._totalTime=r._time=0,r._rawPrevTime=-1,r._next=r._last=r._onUpdate=r._timeline=r.timeline=null,r._paused=!1;var I=function(){a&&T()-E>2e3&&s.wake(),setTimeout(I,2e3)};I(),r.play=function(e,t){return null!=e&&this.seek(e,t),this.reversed(!1).paused(!1)},r.pause=function(e,t){return null!=e&&this.seek(e,t),this.paused(!0)},r.resume=function(e,t){return null!=e&&this.seek(e,t),this.paused(!1)},r.seek=function(e,t){return this.totalTime(Number(e),t!==!1)},r.restart=function(e,t){return this.reversed(!1).paused(!1).totalTime(e?-this._delay:0,t!==!1,!0)},r.reverse=function(e,t){return null!=e&&this.seek(e||this.totalDuration(),t),this.reversed(!0).paused(!1)},r.render=function(){},r.invalidate=function(){return this._time=this._totalTime=0,this._initted=this._gc=!1,this._rawPrevTime=-1,(this._gc||!this.timeline)&&this._enabled(!0),this},r.isActive=function(){var e,t=this._timeline,i=this._startTime;return!t||!this._gc&&!this._paused&&t.isActive()&&(e=t.rawTime())>=i&&e<i+this.totalDuration()/this._timeScale},r._enabled=function(e,t){return a||s.wake(),this._gc=!e,this._active=this.isActive(),t!==!0&&(e&&!this.timeline?this._timeline.add(this,this._startTime-this._delay):!e&&this.timeline&&this._timeline._remove(this,!0)),!1},r._kill=function(){return this._enabled(!1,!1)},r.kill=function(e,t){return this._kill(e,t),this},r._uncache=function(e){for(var t=e?this:this.timeline;t;)t._dirty=!0,t=t.timeline;return this},r._swapSelfInParams=function(e){for(var t=e.length,i=e.concat();--t>-1;)"{self}"===e[t]&&(i[t]=this);return i},r.eventCallback=function(e,t,i,n){if("on"===(e||"").substr(0,2)){var o=this.vars;if(1===arguments.length)return o[e];null==t?delete o[e]:(o[e]=t,o[e+"Params"]=p(i)&&-1!==i.join("").indexOf("{self}")?this._swapSelfInParams(i):i,o[e+"Scope"]=n),"onUpdate"===e&&(this._onUpdate=t)}return this},r.delay=function(e){return arguments.length?(this._timeline.smoothChildTiming&&this.startTime(this._startTime+e-this._delay),this._delay=e,this):this._delay},r.duration=function(e){return arguments.length?(this._duration=this._totalDuration=e,this._uncache(!0),this._timeline.smoothChildTiming&&this._time>0&&this._time<this._duration&&0!==e&&this.totalTime(this._totalTime*(e/this._duration),!0),this):(this._dirty=!1,this._duration)},r.totalDuration=function(e){return this._dirty=!1,arguments.length?this.duration(e):this._totalDuration},r.time=function(e,t){return arguments.length?(this._dirty&&this.totalDuration(),this.totalTime(e>this._duration?this._duration:e,t)):this._time},r.totalTime=function(e,t,i){if(a||s.wake(),!arguments.length)return this._totalTime;if(this._timeline){if(0>e&&!i&&(e+=this.totalDuration()),this._timeline.smoothChildTiming){this._dirty&&this.totalDuration();var n=this._totalDuration,o=this._timeline;if(e>n&&!i&&(e=n),this._startTime=(this._paused?this._pauseTime:o._time)-(this._reversed?n-e:e)/this._timeScale,o._dirty||this._uncache(!1),o._timeline)for(;o._timeline;)o._timeline._time!==(o._startTime+o._totalTime)/o._timeScale&&o.totalTime(o._totalTime,!0),o=o._timeline}this._gc&&this._enabled(!0,!1),(this._totalTime!==e||0===this._duration)&&(this.render(e,t,!1),k.length&&U())}return this},r.progress=r.totalProgress=function(e,t){return arguments.length?this.totalTime(this.duration()*e,t):this._time/this.duration()},r.startTime=function(e){return arguments.length?(e!==this._startTime&&(this._startTime=e,this.timeline&&this.timeline._sortChildren&&this.timeline.add(this,e-this._delay)),this):this._startTime},r.endTime=function(e){return this._startTime+(0!=e?this.totalDuration():this.duration())/this._timeScale},r.timeScale=function(e){if(!arguments.length)return this._timeScale;if(e=e||c,this._timeline&&this._timeline.smoothChildTiming){var t=this._pauseTime,i=t||0===t?t:this._timeline.totalTime();this._startTime=i-(i-this._startTime)*this._timeScale/e}return this._timeScale=e,this._uncache(!1)},r.reversed=function(e){return arguments.length?(e!=this._reversed&&(this._reversed=e,this.totalTime(this._timeline&&!this._timeline.smoothChildTiming?this.totalDuration()-this._totalTime:this._totalTime,!0)),this):this._reversed},r.paused=function(e){if(!arguments.length)return this._paused;if(e!=this._paused&&this._timeline){a||e||s.wake();var t=this._timeline,i=t.rawTime(),n=i-this._pauseTime;!e&&t.smoothChildTiming&&(this._startTime+=n,this._uncache(!1)),this._pauseTime=e?i:null,this._paused=e,this._active=this.isActive(),!e&&0!==n&&this._initted&&this.duration()&&this.render(t.smoothChildTiming?this._totalTime:(i-this._startTime)/this._timeScale,!0,!0)}return this._gc&&!e&&this._enabled(!0,!1),this};var A=y("core.SimpleTimeline",function(e){S.call(this,0,e),this.autoRemoveChildren=this.smoothChildTiming=!0});r=A.prototype=new S,r.constructor=A,r.kill()._gc=!1,r._first=r._last=r._recent=null,r._sortChildren=!1,r.add=r.insert=function(e,t){var i,n;if(e._startTime=Number(t||0)+e._delay,e._paused&&this!==e._timeline&&(e._pauseTime=e._startTime+(this.rawTime()-e._startTime)/e._timeScale),e.timeline&&e.timeline._remove(e,!0),e.timeline=e._timeline=this,e._gc&&e._enabled(!0,!0),i=this._last,this._sortChildren)for(n=e._startTime;i&&i._startTime>n;)i=i._prev;return i?(e._next=i._next,i._next=e):(e._next=this._first,this._first=e),e._next?e._next._prev=e:this._last=e,e._prev=i,this._recent=e,this._timeline&&this._uncache(!0),this},r._remove=function(e,t){return e.timeline===this&&(t||e._enabled(!1,!0),e._prev?e._prev._next=e._next:this._first===e&&(this._first=e._next),e._next?e._next._prev=e._prev:this._last===e&&(this._last=e._prev),e._next=e._prev=e.timeline=null,e===this._recent&&(this._recent=this._last),this._timeline&&this._uncache(!0)),this},r.render=function(e,t,i){var n,o=this._first;for(this._totalTime=this._time=this._rawPrevTime=e;o;)n=o._next,(o._active||e>=o._startTime&&!o._paused)&&(o._reversed?o.render((o._dirty?o.totalDuration():o._totalDuration)-(e-o._startTime)*o._timeScale,t,i):o.render((e-o._startTime)*o._timeScale,t,i)),o=n},r.rawTime=function(){return a||s.wake(),this._totalTime};var R=y("TweenLite",function(t,i,n){if(S.call(this,i,n),this.render=R.prototype.render,null==t)throw"Cannot tween a null target.";this.target=t="string"!=typeof t?t:R.selector(t)||t;var o,r,s,a=t.jquery||t.length&&t!==e&&t[0]&&(t[0]===e||t[0].nodeType&&t[0].style&&!t.nodeType),l=this.vars.overwrite;if(this._overwrite=l=null==l?z[R.defaultOverwrite]:"number"==typeof l?l>>0:z[l],(a||t instanceof Array||t.push&&p(t))&&"number"!=typeof t[0])for(this._targets=s=d(t),this._propLookup=[],this._siblings=[],o=0;o<s.length;o++)r=s[o],r?"string"!=typeof r?r.length&&r!==e&&r[0]&&(r[0]===e||r[0].nodeType&&r[0].style&&!r.nodeType)?(s.splice(o--,1),this._targets=s=s.concat(d(r))):(this._siblings[o]=V(r,this,!1),1===l&&this._siblings[o].length>1&&Y(r,this,null,1,this._siblings[o])):(r=s[o--]=R.selector(r),"string"==typeof r&&s.splice(o+1,1)):s.splice(o--,1);else this._propLookup={},this._siblings=V(t,this,!1),1===l&&this._siblings.length>1&&Y(t,this,null,1,this._siblings);(this.vars.immediateRender||0===i&&0===this._delay&&this.vars.immediateRender!==!1)&&(this._time=-c,this.render(-this._delay))},!0),M=function(t){return t&&t.length&&t!==e&&t[0]&&(t[0]===e||t[0].nodeType&&t[0].style&&!t.nodeType)},D=function(e,t){var i,n={};for(i in e)F[i]||i in t&&"transform"!==i&&"x"!==i&&"y"!==i&&"width"!==i&&"height"!==i&&"className"!==i&&"border"!==i||!(!B[i]||B[i]&&B[i]._autoCSS)||(n[i]=e[i],delete e[i]);e.css=n};r=R.prototype=new S,r.constructor=R,r.kill()._gc=!1,r.ratio=0,r._firstPT=r._targets=r._overwrittenProps=r._startAt=null,r._notifyPluginsOfEnabled=r._lazy=!1,R.version="1.15.1",R.defaultEase=r._ease=new C(null,null,1,1),R.defaultOverwrite="auto",R.ticker=s,R.autoSleep=!0,R.lagSmoothing=function(e,t){s.lagSmoothing(e,t)},R.selector=e.$||e.jQuery||function(t){var i=e.$||e.jQuery;return i?(R.selector=i,i(t)):"undefined"==typeof document?t:document.querySelectorAll?document.querySelectorAll(t):document.getElementById("#"===t.charAt(0)?t.substr(1):t)};var k=[],L={},j=R._internals={isArray:p,isSelector:M,lazyTweens:k},B=R._plugins={},N=j.tweenLookup={},G=0,F=j.reservedProps={ease:1,delay:1,overwrite:1,onComplete:1,onCompleteParams:1,onCompleteScope:1,useFrames:1,runBackwards:1,startAt:1,onUpdate:1,onUpdateParams:1,onUpdateScope:1,onStart:1,onStartParams:1,onStartScope:1,onReverseComplete:1,onReverseCompleteParams:1,onReverseCompleteScope:1,onRepeat:1,onRepeatParams:1,onRepeatScope:1,easeParams:1,yoyo:1,immediateRender:1,repeat:1,repeatDelay:1,data:1,paused:1,reversed:1,autoCSS:1,lazy:1,onOverwrite:1},z={none:0,all:1,auto:2,concurrent:3,allOnStart:4,preexisting:5,"true":1,"false":0},H=S._rootFramesTimeline=new A,W=S._rootTimeline=new A,U=j.lazyRender=function(){var e,t=k.length;for(L={};--t>-1;)e=k[t],e&&e._lazy!==!1&&(e.render(e._lazy[0],e._lazy[1],!0),e._lazy=!1);k.length=0};W._startTime=s.time,H._startTime=s.frame,W._active=H._active=!0,setTimeout(U,1),S._updateRoot=R.render=function(){var e,t,i;if(k.length&&U(),W.render((s.time-W._startTime)*W._timeScale,!1,!1),H.render((s.frame-H._startTime)*H._timeScale,!1,!1),k.length&&U(),!(s.frame%120)){for(i in N){for(t=N[i].tweens,e=t.length;--e>-1;)t[e]._gc&&t.splice(e,1);0===t.length&&delete N[i]}if(i=W._first,(!i||i._paused)&&R.autoSleep&&!H._first&&1===s._listeners.tick.length){for(;i&&i._paused;)i=i._next;i||s.sleep()}}},s.addEventListener("tick",S._updateRoot);var V=function(e,t,i){var n,o,r=e._gsTweenID;if(N[r||(e._gsTweenID=r="t"+G++)]||(N[r]={target:e,tweens:[]}),t&&(n=N[r].tweens,n[o=n.length]=t,i))for(;--o>-1;)n[o]===t&&n.splice(o,1);return N[r].tweens},q=function(e,t,i,n){var o,r,s=e.vars.onOverwrite;return s&&(o=s(e,t,i,n)),s=R.onOverwrite,s&&(r=s(e,t,i,n)),o!==!1&&r!==!1},Y=function(e,t,i,n,o){var r,s,a,l;if(1===n||n>=4){for(l=o.length,r=0;l>r;r++)if((a=o[r])!==t)a._gc||q(a,t)&&a._enabled(!1,!1)&&(s=!0);else if(5===n)break;return s}var h,d=t._startTime+c,u=[],p=0,f=0===t._duration;for(r=o.length;--r>-1;)(a=o[r])===t||a._gc||a._paused||(a._timeline!==t._timeline?(h=h||X(t,0,f),0===X(a,h,f)&&(u[p++]=a)):a._startTime<=d&&a._startTime+a.totalDuration()/a._timeScale>d&&((f||!a._initted)&&d-a._startTime<=2e-10||(u[p++]=a)));for(r=p;--r>-1;)if(a=u[r],2===n&&a._kill(i,e,t)&&(s=!0),2!==n||!a._firstPT&&a._initted){if(2!==n&&!q(a,t))continue;a._enabled(!1,!1)&&(s=!0)}return s},X=function(e,t,i){for(var n=e._timeline,o=n._timeScale,r=e._startTime;n._timeline;){if(r+=n._startTime,o*=n._timeScale,n._paused)return-100;n=n._timeline}return r/=o,r>t?r-t:i&&r===t||!e._initted&&2*c>r-t?c:(r+=e.totalDuration()/e._timeScale/o)>t+c?0:r-t-c};r._init=function(){var e,t,i,n,o,r=this.vars,s=this._overwrittenProps,a=this._duration,l=!!r.immediateRender,h=r.ease;if(r.startAt){this._startAt&&(this._startAt.render(-1,!0),this._startAt.kill()),o={};for(n in r.startAt)o[n]=r.startAt[n];if(o.overwrite=!1,o.immediateRender=!0,o.lazy=l&&r.lazy!==!1,o.startAt=o.delay=null,this._startAt=R.to(this.target,0,o),l)if(this._time>0)this._startAt=null;else if(0!==a)return}else if(r.runBackwards&&0!==a)if(this._startAt)this._startAt.render(-1,!0),this._startAt.kill(),this._startAt=null;else{0!==this._time&&(l=!1),i={};for(n in r)F[n]&&"autoCSS"!==n||(i[n]=r[n]);if(i.overwrite=0,i.data="isFromStart",i.lazy=l&&r.lazy!==!1,i.immediateRender=l,this._startAt=R.to(this.target,0,i),l){if(0===this._time)return}else this._startAt._init(),this._startAt._enabled(!1),this.vars.immediateRender&&(this._startAt=null)}if(this._ease=h=h?h instanceof C?h:"function"==typeof h?new C(h,r.easeParams):w[h]||R.defaultEase:R.defaultEase,r.easeParams instanceof Array&&h.config&&(this._ease=h.config.apply(h,r.easeParams)),this._easeType=this._ease._type,this._easePower=this._ease._power,this._firstPT=null,this._targets)for(e=this._targets.length;--e>-1;)this._initProps(this._targets[e],this._propLookup[e]={},this._siblings[e],s?s[e]:null)&&(t=!0);else t=this._initProps(this.target,this._propLookup,this._siblings,s);if(t&&R._onPluginEvent("_onInitAllProps",this),s&&(this._firstPT||"function"!=typeof this.target&&this._enabled(!1,!1)),r.runBackwards)for(i=this._firstPT;i;)i.s+=i.c,i.c=-i.c,i=i._next;this._onUpdate=r.onUpdate,this._initted=!0},r._initProps=function(t,i,n,o){var r,s,a,l,h,c;if(null==t)return!1;L[t._gsTweenID]&&U(),this.vars.css||t.style&&t!==e&&t.nodeType&&B.css&&this.vars.autoCSS!==!1&&D(this.vars,t);for(r in this.vars){if(c=this.vars[r],F[r])c&&(c instanceof Array||c.push&&p(c))&&-1!==c.join("").indexOf("{self}")&&(this.vars[r]=c=this._swapSelfInParams(c,this));else if(B[r]&&(l=new B[r])._onInitTween(t,this.vars[r],this)){for(this._firstPT=h={_next:this._firstPT,t:l,p:"setRatio",s:0,c:1,f:!0,n:r,pg:!0,pr:l._priority},s=l._overwriteProps.length;--s>-1;)i[l._overwriteProps[s]]=this._firstPT;(l._priority||l._onInitAllProps)&&(a=!0),(l._onDisable||l._onEnable)&&(this._notifyPluginsOfEnabled=!0)}else this._firstPT=i[r]=h={_next:this._firstPT,t:t,p:r,f:"function"==typeof t[r],n:r,pg:!1,pr:0},h.s=h.f?t[r.indexOf("set")||"function"!=typeof t["get"+r.substr(3)]?r:"get"+r.substr(3)]():parseFloat(t[r]),h.c="string"==typeof c&&"="===c.charAt(1)?parseInt(c.charAt(0)+"1",10)*Number(c.substr(2)):Number(c)-h.s||0;h&&h._next&&(h._next._prev=h)}return o&&this._kill(o,t)?this._initProps(t,i,n,o):this._overwrite>1&&this._firstPT&&n.length>1&&Y(t,this,i,this._overwrite,n)?(this._kill(i,t),this._initProps(t,i,n,o)):(this._firstPT&&(this.vars.lazy!==!1&&this._duration||this.vars.lazy&&!this._duration)&&(L[t._gsTweenID]=!0),a)},r.render=function(e,t,i){var n,o,r,s,a=this._time,l=this._duration,h=this._rawPrevTime;if(e>=l)this._totalTime=this._time=l,this.ratio=this._ease._calcEnd?this._ease.getRatio(1):1,this._reversed||(n=!0,o="onComplete"),0===l&&(this._initted||!this.vars.lazy||i)&&(this._startTime===this._timeline._duration&&(e=0),(0===e||0>h||h===c&&"isPause"!==this.data)&&h!==e&&(i=!0,h>c&&(o="onReverseComplete")),this._rawPrevTime=s=!t||e||h===e?e:c);else if(1e-7>e)this._totalTime=this._time=0,this.ratio=this._ease._calcEnd?this._ease.getRatio(0):0,(0!==a||0===l&&h>0&&h!==c)&&(o="onReverseComplete",n=this._reversed),0>e&&(this._active=!1,0===l&&(this._initted||!this.vars.lazy||i)&&(h>=0&&(h!==c||"isPause"!==this.data)&&(i=!0),this._rawPrevTime=s=!t||e||h===e?e:c)),this._initted||(i=!0);else if(this._totalTime=this._time=e,this._easeType){var d=e/l,u=this._easeType,p=this._easePower;(1===u||3===u&&d>=.5)&&(d=1-d),3===u&&(d*=2),1===p?d*=d:2===p?d*=d*d:3===p?d*=d*d*d:4===p&&(d*=d*d*d*d),this.ratio=1===u?1-d:2===u?d:.5>e/l?d/2:1-d/2}else this.ratio=this._ease.getRatio(e/l);if(this._time!==a||i){if(!this._initted){if(this._init(),!this._initted||this._gc)return;if(!i&&this._firstPT&&(this.vars.lazy!==!1&&this._duration||this.vars.lazy&&!this._duration))return this._time=this._totalTime=a,this._rawPrevTime=h,k.push(this),void(this._lazy=[e,t]);this._time&&!n?this.ratio=this._ease.getRatio(this._time/l):n&&this._ease._calcEnd&&(this.ratio=this._ease.getRatio(0===this._time?0:1))}for(this._lazy!==!1&&(this._lazy=!1),this._active||!this._paused&&this._time!==a&&e>=0&&(this._active=!0),0===a&&(this._startAt&&(e>=0?this._startAt.render(e,t,i):o||(o="_dummyGS")),this.vars.onStart&&(0!==this._time||0===l)&&(t||this.vars.onStart.apply(this.vars.onStartScope||this,this.vars.onStartParams||v))),r=this._firstPT;r;)r.f?r.t[r.p](r.c*this.ratio+r.s):r.t[r.p]=r.c*this.ratio+r.s,r=r._next;this._onUpdate&&(0>e&&this._startAt&&e!==-1e-4&&this._startAt.render(e,t,i),t||(this._time!==a||n)&&this._onUpdate.apply(this.vars.onUpdateScope||this,this.vars.onUpdateParams||v)),o&&(!this._gc||i)&&(0>e&&this._startAt&&!this._onUpdate&&e!==-1e-4&&this._startAt.render(e,t,i),n&&(this._timeline.autoRemoveChildren&&this._enabled(!1,!1),this._active=!1),!t&&this.vars[o]&&this.vars[o].apply(this.vars[o+"Scope"]||this,this.vars[o+"Params"]||v),0===l&&this._rawPrevTime===c&&s!==c&&(this._rawPrevTime=0))}},r._kill=function(e,t,i){if("all"===e&&(e=null),null==e&&(null==t||t===this.target))return this._lazy=!1,this._enabled(!1,!1);t="string"!=typeof t?t||this._targets||this.target:R.selector(t)||t;var n,o,r,s,a,l,h,c,d;if((p(t)||M(t))&&"number"!=typeof t[0])for(n=t.length;--n>-1;)this._kill(e,t[n])&&(l=!0);else{if(this._targets){for(n=this._targets.length;--n>-1;)if(t===this._targets[n]){a=this._propLookup[n]||{},this._overwrittenProps=this._overwrittenProps||[],o=this._overwrittenProps[n]=e?this._overwrittenProps[n]||{}:"all";break}}else{if(t!==this.target)return!1;a=this._propLookup,o=this._overwrittenProps=e?this._overwrittenProps||{}:"all"}if(a){if(h=e||a,c=e!==o&&"all"!==o&&e!==a&&("object"!=typeof e||!e._tempKill),i&&(R.onOverwrite||this.vars.onOverwrite)){for(r in h)a[r]&&(d||(d=[]),d.push(r));if(!q(this,i,t,d))return!1}for(r in h)(s=a[r])&&(s.pg&&s.t._kill(h)&&(l=!0),s.pg&&0!==s.t._overwriteProps.length||(s._prev?s._prev._next=s._next:s===this._firstPT&&(this._firstPT=s._next),s._next&&(s._next._prev=s._prev),s._next=s._prev=null),delete a[r]),c&&(o[r]=1);!this._firstPT&&this._initted&&this._enabled(!1,!1)}}return l},r.invalidate=function(){return this._notifyPluginsOfEnabled&&R._onPluginEvent("_onDisable",this),this._firstPT=this._overwrittenProps=this._startAt=this._onUpdate=null,this._notifyPluginsOfEnabled=this._active=this._lazy=!1,this._propLookup=this._targets?{}:[],S.prototype.invalidate.call(this),this.vars.immediateRender&&(this._time=-c,this.render(-this._delay)),this},r._enabled=function(e,t){if(a||s.wake(),e&&this._gc){var i,n=this._targets;if(n)for(i=n.length;--i>-1;)this._siblings[i]=V(n[i],this,!0);else this._siblings=V(this.target,this,!0)}return S.prototype._enabled.call(this,e,t),this._notifyPluginsOfEnabled&&this._firstPT?R._onPluginEvent(e?"_onEnable":"_onDisable",this):!1},R.to=function(e,t,i){return new R(e,t,i)},R.from=function(e,t,i){return i.runBackwards=!0,i.immediateRender=0!=i.immediateRender,new R(e,t,i)},R.fromTo=function(e,t,i,n){return n.startAt=i,n.immediateRender=0!=n.immediateRender&&0!=i.immediateRender,new R(e,t,n)},R.delayedCall=function(e,t,i,n,o){return new R(t,0,{delay:e,onComplete:t,onCompleteParams:i,onCompleteScope:n,onReverseComplete:t,onReverseCompleteParams:i,onReverseCompleteScope:n,immediateRender:!1,lazy:!1,useFrames:o,overwrite:0})},R.set=function(e,t){return new R(e,0,t)},R.getTweensOf=function(e,t){if(null==e)return[];e="string"!=typeof e?e:R.selector(e)||e;var i,n,o,r;if((p(e)||M(e))&&"number"!=typeof e[0]){for(i=e.length,n=[];--i>-1;)n=n.concat(R.getTweensOf(e[i],t));for(i=n.length;--i>-1;)for(r=n[i],o=i;--o>-1;)r===n[o]&&n.splice(i,1)}else for(n=V(e).concat(),i=n.length;--i>-1;)(n[i]._gc||t&&!n[i].isActive())&&n.splice(i,1);return n},R.killTweensOf=R.killDelayedCallsTo=function(e,t,i){"object"==typeof t&&(i=t,t=!1);for(var n=R.getTweensOf(e,t),o=n.length;--o>-1;)n[o]._kill(i,e)};var K=y("plugins.TweenPlugin",function(e,t){this._overwriteProps=(e||"").split(","),this._propName=this._overwriteProps[0],this._priority=t||0,this._super=K.prototype},!0);if(r=K.prototype,K.version="1.10.1",K.API=2,r._firstPT=null,r._addTween=function(e,t,i,n,o,r){var s,a;return null!=n&&(s="number"==typeof n||"="!==n.charAt(1)?Number(n)-i:parseInt(n.charAt(0)+"1",10)*Number(n.substr(2)))?(this._firstPT=a={_next:this._firstPT,t:e,p:t,s:i,c:s,f:"function"==typeof e[t],n:o||t,r:r},a._next&&(a._next._prev=a),a):void 0},r.setRatio=function(e){for(var t,i=this._firstPT,n=1e-6;i;)t=i.c*e+i.s,i.r?t=Math.round(t):n>t&&t>-n&&(t=0),i.f?i.t[i.p](t):i.t[i.p]=t,i=i._next},r._kill=function(e){var t,i=this._overwriteProps,n=this._firstPT;if(null!=e[this._propName])this._overwriteProps=[];else for(t=i.length;--t>-1;)null!=e[i[t]]&&i.splice(t,1);for(;n;)null!=e[n.n]&&(n._next&&(n._next._prev=n._prev),n._prev?(n._prev._next=n._next,n._prev=null):this._firstPT===n&&(this._firstPT=n._next)),n=n._next;return!1},r._roundProps=function(e,t){for(var i=this._firstPT;i;)(e[this._propName]||null!=i.n&&e[i.n.split(this._propName+"_").join("")])&&(i.r=t),i=i._next},R._onPluginEvent=function(e,t){var i,n,o,r,s,a=t._firstPT;if("_onInitAllProps"===e){for(;a;){for(s=a._next,n=o;n&&n.pr>a.pr;)n=n._next;(a._prev=n?n._prev:r)?a._prev._next=a:o=a,(a._next=n)?n._prev=a:r=a,a=s}a=t._firstPT=o}for(;a;)a.pg&&"function"==typeof a.t[e]&&a.t[e]()&&(i=!0),a=a._next;return i},K.activate=function(e){for(var t=e.length;--t>-1;)e[t].API===K.API&&(B[(new e[t])._propName]=e[t]);return!0},m.plugin=function(e){if(!(e&&e.propName&&e.init&&e.API))throw"illegal plugin definition.";var t,i=e.propName,n=e.priority||0,o=e.overwriteProps,r={init:"_onInitTween",set:"setRatio",kill:"_kill",round:"_roundProps",initAll:"_onInitAllProps"},s=y("plugins."+i.charAt(0).toUpperCase()+i.substr(1)+"Plugin",function(){K.call(this,i,n),this._overwriteProps=o||[]},e.global===!0),a=s.prototype=new K(i);a.constructor=s,s.API=e.API;for(t in r)"function"==typeof e[t]&&(a[r[t]]=e[t]);return s.version=e.version,K.activate([s]),s},n=e._gsQueue){for(o=0;o<n.length;o++)n[o]();for(r in f)f[r].func||e.console.log("GSAP encountered missing dependency: com.greensock."+r)}a=!1}}("undefined"!=typeof module&&module.exports&&"undefined"!=typeof global?global:this||window,"TweenLite"),define("TweenLite",function(){});var _gsScope="undefined"!=typeof module&&module.exports&&"undefined"!=typeof global?global:this||window;(_gsScope._gsQueue||(_gsScope._gsQueue=[])).push(function(){_gsScope._gsDefine("TimelineLite",["core.Animation","core.SimpleTimeline","TweenLite"],function(e,t,i){var n=function(e){t.call(this,e),this._labels={},this.autoRemoveChildren=this.vars.autoRemoveChildren===!0,this.smoothChildTiming=this.vars.smoothChildTiming===!0,this._sortChildren=!0,this._onUpdate=this.vars.onUpdate;var i,n,o=this.vars;for(n in o)i=o[n],l(i)&&-1!==i.join("").indexOf("{self}")&&(o[n]=this._swapSelfInParams(i));l(o.tweens)&&this.add(o.tweens,0,o.align,o.stagger)},o=1e-10,r=i._internals,s=n._internals={},a=r.isSelector,l=r.isArray,h=r.lazyTweens,c=r.lazyRender,d=[],u=_gsScope._gsDefine.globals,p=function(e){var t,i={};for(t in e)i[t]=e[t];return i},f=s.pauseCallback=function(e,t,i,n){var o=e._timeline,r=o._totalTime;!t&&this._forcingPlayhead||o._rawPrevTime===e._startTime||(o.pause(e._startTime),t&&t.apply(n||o,i||d),this._forcingPlayhead&&o.seek(r))},g=function(e){var t,i=[],n=e.length;for(t=0;t!==n;i.push(e[t++]));return i},m=n.prototype=new t;return n.version="1.15.1",m.constructor=n,m.kill()._gc=m._forcingPlayhead=!1,m.to=function(e,t,n,o){var r=n.repeat&&u.TweenMax||i;return t?this.add(new r(e,t,n),o):this.set(e,n,o)},m.from=function(e,t,n,o){return this.add((n.repeat&&u.TweenMax||i).from(e,t,n),o)},m.fromTo=function(e,t,n,o,r){var s=o.repeat&&u.TweenMax||i;return t?this.add(s.fromTo(e,t,n,o),r):this.set(e,o,r)},m.staggerTo=function(e,t,o,r,s,l,h,c){var d,u=new n({onComplete:l,onCompleteParams:h,onCompleteScope:c,smoothChildTiming:this.smoothChildTiming});for("string"==typeof e&&(e=i.selector(e)||e),e=e||[],a(e)&&(e=g(e)),r=r||0,0>r&&(e=g(e),e.reverse(),r*=-1),d=0;d<e.length;d++)o.startAt&&(o.startAt=p(o.startAt)),u.to(e[d],t,p(o),d*r);return this.add(u,s)},m.staggerFrom=function(e,t,i,n,o,r,s,a){return i.immediateRender=0!=i.immediateRender,i.runBackwards=!0,this.staggerTo(e,t,i,n,o,r,s,a)},m.staggerFromTo=function(e,t,i,n,o,r,s,a,l){return n.startAt=i,n.immediateRender=0!=n.immediateRender&&0!=i.immediateRender,this.staggerTo(e,t,n,o,r,s,a,l)},m.call=function(e,t,n,o){return this.add(i.delayedCall(0,e,t,n),o)},m.set=function(e,t,n){return n=this._parseTimeOrLabel(n,0,!0),null==t.immediateRender&&(t.immediateRender=n===this._time&&!this._paused),this.add(new i(e,0,t),n)},n.exportRoot=function(e,t){e=e||{},null==e.smoothChildTiming&&(e.smoothChildTiming=!0);var o,r,s=new n(e),a=s._timeline;for(null==t&&(t=!0),a._remove(s,!0),s._startTime=0,s._rawPrevTime=s._time=s._totalTime=a._time,o=a._first;o;)r=o._next,t&&o instanceof i&&o.target===o.vars.onComplete||s.add(o,o._startTime-o._delay),o=r;return a.add(s,0),s},m.add=function(o,r,s,a){var h,c,d,u,p,f;if("number"!=typeof r&&(r=this._parseTimeOrLabel(r,0,!0,o)),!(o instanceof e)){if(o instanceof Array||o&&o.push&&l(o)){for(s=s||"normal",a=a||0,h=r,c=o.length,d=0;c>d;d++)l(u=o[d])&&(u=new n({tweens:u})),this.add(u,h),"string"!=typeof u&&"function"!=typeof u&&("sequence"===s?h=u._startTime+u.totalDuration()/u._timeScale:"start"===s&&(u._startTime-=u.delay())),h+=a;return this._uncache(!0)}if("string"==typeof o)return this.addLabel(o,r);if("function"!=typeof o)throw"Cannot add "+o+" into the timeline; it is not a tween, timeline, function, or string.";o=i.delayedCall(0,o)}if(t.prototype.add.call(this,o,r),(this._gc||this._time===this._duration)&&!this._paused&&this._duration<this.duration())for(p=this,f=p.rawTime()>o._startTime;p._timeline;)f&&p._timeline.smoothChildTiming?p.totalTime(p._totalTime,!0):p._gc&&p._enabled(!0,!1),p=p._timeline;return this},m.remove=function(t){if(t instanceof e)return this._remove(t,!1);if(t instanceof Array||t&&t.push&&l(t)){for(var i=t.length;--i>-1;)this.remove(t[i]);return this}return"string"==typeof t?this.removeLabel(t):this.kill(null,t)},m._remove=function(e,i){t.prototype._remove.call(this,e,i);var n=this._last;return n?this._time>n._startTime+n._totalDuration/n._timeScale&&(this._time=this.duration(),this._totalTime=this._totalDuration):this._time=this._totalTime=this._duration=this._totalDuration=0,this},m.append=function(e,t){return this.add(e,this._parseTimeOrLabel(null,t,!0,e))},m.insert=m.insertMultiple=function(e,t,i,n){return this.add(e,t||0,i,n)},m.appendMultiple=function(e,t,i,n){return this.add(e,this._parseTimeOrLabel(null,t,!0,e),i,n)},m.addLabel=function(e,t){return this._labels[e]=this._parseTimeOrLabel(t),this},m.addPause=function(e,t,n,o){var r=i.delayedCall(0,f,["{self}",t,n,o],this);return r.data="isPause",this.add(r,e)},m.removeLabel=function(e){return delete this._labels[e],this},m.getLabelTime=function(e){return null!=this._labels[e]?this._labels[e]:-1},m._parseTimeOrLabel=function(t,i,n,o){var r;if(o instanceof e&&o.timeline===this)this.remove(o);else if(o&&(o instanceof Array||o.push&&l(o)))for(r=o.length;--r>-1;)o[r]instanceof e&&o[r].timeline===this&&this.remove(o[r]);if("string"==typeof i)return this._parseTimeOrLabel(i,n&&"number"==typeof t&&null==this._labels[i]?t-this.duration():0,n);if(i=i||0,"string"!=typeof t||!isNaN(t)&&null==this._labels[t])null==t&&(t=this.duration());else{if(r=t.indexOf("="),-1===r)return null==this._labels[t]?n?this._labels[t]=this.duration()+i:i:this._labels[t]+i;i=parseInt(t.charAt(r-1)+"1",10)*Number(t.substr(r+1)),t=r>1?this._parseTimeOrLabel(t.substr(0,r-1),0,n):this.duration()}return Number(t)+i},m.seek=function(e,t){return this.totalTime("number"==typeof e?e:this._parseTimeOrLabel(e),t!==!1)},m.stop=function(){return this.paused(!0)},m.gotoAndPlay=function(e,t){return this.play(e,t)},m.gotoAndStop=function(e,t){return this.pause(e,t)},m.render=function(e,t,i){this._gc&&this._enabled(!0,!1);var n,r,s,a,l,u=this._dirty?this.totalDuration():this._totalDuration,p=this._time,f=this._startTime,g=this._timeScale,m=this._paused;if(e>=u?(this._totalTime=this._time=u,this._reversed||this._hasPausedChild()||(r=!0,a="onComplete",0===this._duration&&(0===e||this._rawPrevTime<0||this._rawPrevTime===o)&&this._rawPrevTime!==e&&this._first&&(l=!0,this._rawPrevTime>o&&(a="onReverseComplete"))),this._rawPrevTime=this._duration||!t||e||this._rawPrevTime===e?e:o,e=u+1e-4):1e-7>e?(this._totalTime=this._time=0,(0!==p||0===this._duration&&this._rawPrevTime!==o&&(this._rawPrevTime>0||0>e&&this._rawPrevTime>=0))&&(a="onReverseComplete",r=this._reversed),0>e?(this._active=!1,this._rawPrevTime>=0&&this._first&&(l=!0),this._rawPrevTime=e):(this._rawPrevTime=this._duration||!t||e||this._rawPrevTime===e?e:o,e=0,this._initted||(l=!0))):this._totalTime=this._time=this._rawPrevTime=e,this._time!==p&&this._first||i||l){if(this._initted||(this._initted=!0),this._active||!this._paused&&this._time!==p&&e>0&&(this._active=!0),0===p&&this.vars.onStart&&0!==this._time&&(t||this.vars.onStart.apply(this.vars.onStartScope||this,this.vars.onStartParams||d)),this._time>=p)for(n=this._first;n&&(s=n._next,!this._paused||m);)(n._active||n._startTime<=this._time&&!n._paused&&!n._gc)&&(n._reversed?n.render((n._dirty?n.totalDuration():n._totalDuration)-(e-n._startTime)*n._timeScale,t,i):n.render((e-n._startTime)*n._timeScale,t,i)),n=s;else for(n=this._last;n&&(s=n._prev,!this._paused||m);)(n._active||n._startTime<=p&&!n._paused&&!n._gc)&&(n._reversed?n.render((n._dirty?n.totalDuration():n._totalDuration)-(e-n._startTime)*n._timeScale,t,i):n.render((e-n._startTime)*n._timeScale,t,i)),n=s;this._onUpdate&&(t||(h.length&&c(),this._onUpdate.apply(this.vars.onUpdateScope||this,this.vars.onUpdateParams||d))),a&&(this._gc||(f===this._startTime||g!==this._timeScale)&&(0===this._time||u>=this.totalDuration())&&(r&&(h.length&&c(),this._timeline.autoRemoveChildren&&this._enabled(!1,!1),this._active=!1),!t&&this.vars[a]&&this.vars[a].apply(this.vars[a+"Scope"]||this,this.vars[a+"Params"]||d)))
}},m._hasPausedChild=function(){for(var e=this._first;e;){if(e._paused||e instanceof n&&e._hasPausedChild())return!0;e=e._next}return!1},m.getChildren=function(e,t,n,o){o=o||-9999999999;for(var r=[],s=this._first,a=0;s;)s._startTime<o||(s instanceof i?t!==!1&&(r[a++]=s):(n!==!1&&(r[a++]=s),e!==!1&&(r=r.concat(s.getChildren(!0,t,n)),a=r.length))),s=s._next;return r},m.getTweensOf=function(e,t){var n,o,r=this._gc,s=[],a=0;for(r&&this._enabled(!0,!0),n=i.getTweensOf(e),o=n.length;--o>-1;)(n[o].timeline===this||t&&this._contains(n[o]))&&(s[a++]=n[o]);return r&&this._enabled(!1,!0),s},m.recent=function(){return this._recent},m._contains=function(e){for(var t=e.timeline;t;){if(t===this)return!0;t=t.timeline}return!1},m.shiftChildren=function(e,t,i){i=i||0;for(var n,o=this._first,r=this._labels;o;)o._startTime>=i&&(o._startTime+=e),o=o._next;if(t)for(n in r)r[n]>=i&&(r[n]+=e);return this._uncache(!0)},m._kill=function(e,t){if(!e&&!t)return this._enabled(!1,!1);for(var i=t?this.getTweensOf(t):this.getChildren(!0,!0,!1),n=i.length,o=!1;--n>-1;)i[n]._kill(e,t)&&(o=!0);return o},m.clear=function(e){var t=this.getChildren(!1,!0,!0),i=t.length;for(this._time=this._totalTime=0;--i>-1;)t[i]._enabled(!1,!1);return e!==!1&&(this._labels={}),this._uncache(!0)},m.invalidate=function(){for(var t=this._first;t;)t.invalidate(),t=t._next;return e.prototype.invalidate.call(this)},m._enabled=function(e,i){if(e===this._gc)for(var n=this._first;n;)n._enabled(e,!0),n=n._next;return t.prototype._enabled.call(this,e,i)},m.totalTime=function(){this._forcingPlayhead=!0;var t=e.prototype.totalTime.apply(this,arguments);return this._forcingPlayhead=!1,t},m.duration=function(e){return arguments.length?(0!==this.duration()&&0!==e&&this.timeScale(this._duration/e),this):(this._dirty&&this.totalDuration(),this._duration)},m.totalDuration=function(e){if(!arguments.length){if(this._dirty){for(var t,i,n=0,o=this._last,r=999999999999;o;)t=o._prev,o._dirty&&o.totalDuration(),o._startTime>r&&this._sortChildren&&!o._paused?this.add(o,o._startTime-o._delay):r=o._startTime,o._startTime<0&&!o._paused&&(n-=o._startTime,this._timeline.smoothChildTiming&&(this._startTime+=o._startTime/this._timeScale),this.shiftChildren(-o._startTime,!1,-9999999999),r=0),i=o._startTime+o._totalDuration/o._timeScale,i>n&&(n=i),o=t;this._duration=this._totalDuration=n,this._dirty=!1}return this._totalDuration}return 0!==this.totalDuration()&&0!==e&&this.timeScale(this._totalDuration/e),this},m.usesFrames=function(){for(var t=this._timeline;t._timeline;)t=t._timeline;return t===e._rootFramesTimeline},m.rawTime=function(){return this._paused?this._totalTime:(this._timeline.rawTime()-this._startTime)*this._timeScale},n},!0)}),_gsScope._gsDefine&&_gsScope._gsQueue.pop()(),function(e){var t=function(){return(_gsScope.GreenSockGlobals||_gsScope)[e]};"function"==typeof define&&define.amd?define("TimelineLite",["TweenLite"],t):"undefined"!=typeof module&&module.exports&&(require("./TweenLite.js"),module.exports=t())}("TimelineLite");var _gsScope="undefined"!=typeof module&&module.exports&&"undefined"!=typeof global?global:this||window;(_gsScope._gsQueue||(_gsScope._gsQueue=[])).push(function(){_gsScope._gsDefine("easing.Back",["easing.Ease"],function(e){var t,i,n,o=_gsScope.GreenSockGlobals||_gsScope,r=o.com.greensock,s=2*Math.PI,a=Math.PI/2,l=r._class,h=function(t,i){var n=l("easing."+t,function(){},!0),o=n.prototype=new e;return o.constructor=n,o.getRatio=i,n},c=e.register||function(){},d=function(e,t,i,n){var o=l("easing."+e,{easeOut:new t,easeIn:new i,easeInOut:new n},!0);return c(o,e),o},u=function(e,t,i){this.t=e,this.v=t,i&&(this.next=i,i.prev=this,this.c=i.v-t,this.gap=i.t-e)},p=function(t,i){var n=l("easing."+t,function(e){this._p1=e||0===e?e:1.70158,this._p2=1.525*this._p1},!0),o=n.prototype=new e;return o.constructor=n,o.getRatio=i,o.config=function(e){return new n(e)},n},f=d("Back",p("BackOut",function(e){return(e-=1)*e*((this._p1+1)*e+this._p1)+1}),p("BackIn",function(e){return e*e*((this._p1+1)*e-this._p1)}),p("BackInOut",function(e){return(e*=2)<1?.5*e*e*((this._p2+1)*e-this._p2):.5*((e-=2)*e*((this._p2+1)*e+this._p2)+2)})),g=l("easing.SlowMo",function(e,t,i){t=t||0===t?t:.7,null==e?e=.7:e>1&&(e=1),this._p=1!==e?t:0,this._p1=(1-e)/2,this._p2=e,this._p3=this._p1+this._p2,this._calcEnd=i===!0},!0),m=g.prototype=new e;return m.constructor=g,m.getRatio=function(e){var t=e+(.5-e)*this._p;return e<this._p1?this._calcEnd?1-(e=1-e/this._p1)*e:t-(e=1-e/this._p1)*e*e*e*t:e>this._p3?this._calcEnd?1-(e=(e-this._p3)/this._p1)*e:t+(e-t)*(e=(e-this._p3)/this._p1)*e*e*e:this._calcEnd?1:t},g.ease=new g(.7,.7),m.config=g.config=function(e,t,i){return new g(e,t,i)},t=l("easing.SteppedEase",function(e){e=e||1,this._p1=1/e,this._p2=e+1},!0),m=t.prototype=new e,m.constructor=t,m.getRatio=function(e){return 0>e?e=0:e>=1&&(e=.999999999),(this._p2*e>>0)*this._p1},m.config=t.config=function(e){return new t(e)},i=l("easing.RoughEase",function(t){t=t||{};for(var i,n,o,r,s,a,l=t.taper||"none",h=[],c=0,d=0|(t.points||20),p=d,f=t.randomize!==!1,g=t.clamp===!0,m=t.template instanceof e?t.template:null,y="number"==typeof t.strength?.4*t.strength:.4;--p>-1;)i=f?Math.random():1/d*p,n=m?m.getRatio(i):i,"none"===l?o=y:"out"===l?(r=1-i,o=r*r*y):"in"===l?o=i*i*y:.5>i?(r=2*i,o=r*r*.5*y):(r=2*(1-i),o=r*r*.5*y),f?n+=Math.random()*o-.5*o:p%2?n+=.5*o:n-=.5*o,g&&(n>1?n=1:0>n&&(n=0)),h[c++]={x:i,y:n};for(h.sort(function(e,t){return e.x-t.x}),a=new u(1,1,null),p=d;--p>-1;)s=h[p],a=new u(s.x,s.y,a);this._prev=new u(0,0,0!==a.t?a:a.next)},!0),m=i.prototype=new e,m.constructor=i,m.getRatio=function(e){var t=this._prev;if(e>t.t){for(;t.next&&e>=t.t;)t=t.next;t=t.prev}else for(;t.prev&&e<=t.t;)t=t.prev;return this._prev=t,t.v+(e-t.t)/t.gap*t.c},m.config=function(e){return new i(e)},i.ease=new i,d("Bounce",h("BounceOut",function(e){return 1/2.75>e?7.5625*e*e:2/2.75>e?7.5625*(e-=1.5/2.75)*e+.75:2.5/2.75>e?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375}),h("BounceIn",function(e){return(e=1-e)<1/2.75?1-7.5625*e*e:2/2.75>e?1-(7.5625*(e-=1.5/2.75)*e+.75):2.5/2.75>e?1-(7.5625*(e-=2.25/2.75)*e+.9375):1-(7.5625*(e-=2.625/2.75)*e+.984375)}),h("BounceInOut",function(e){var t=.5>e;return e=t?1-2*e:2*e-1,e=1/2.75>e?7.5625*e*e:2/2.75>e?7.5625*(e-=1.5/2.75)*e+.75:2.5/2.75>e?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375,t?.5*(1-e):.5*e+.5})),d("Circ",h("CircOut",function(e){return Math.sqrt(1-(e-=1)*e)}),h("CircIn",function(e){return-(Math.sqrt(1-e*e)-1)}),h("CircInOut",function(e){return(e*=2)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1)})),n=function(t,i,n){var o=l("easing."+t,function(e,t){this._p1=e||1,this._p2=t||n,this._p3=this._p2/s*(Math.asin(1/this._p1)||0)},!0),r=o.prototype=new e;return r.constructor=o,r.getRatio=i,r.config=function(e,t){return new o(e,t)},o},d("Elastic",n("ElasticOut",function(e){return this._p1*Math.pow(2,-10*e)*Math.sin((e-this._p3)*s/this._p2)+1},.3),n("ElasticIn",function(e){return-(this._p1*Math.pow(2,10*(e-=1))*Math.sin((e-this._p3)*s/this._p2))},.3),n("ElasticInOut",function(e){return(e*=2)<1?-.5*this._p1*Math.pow(2,10*(e-=1))*Math.sin((e-this._p3)*s/this._p2):this._p1*Math.pow(2,-10*(e-=1))*Math.sin((e-this._p3)*s/this._p2)*.5+1},.45)),d("Expo",h("ExpoOut",function(e){return 1-Math.pow(2,-10*e)}),h("ExpoIn",function(e){return Math.pow(2,10*(e-1))-.001}),h("ExpoInOut",function(e){return(e*=2)<1?.5*Math.pow(2,10*(e-1)):.5*(2-Math.pow(2,-10*(e-1)))})),d("Sine",h("SineOut",function(e){return Math.sin(e*a)}),h("SineIn",function(e){return-Math.cos(e*a)+1}),h("SineInOut",function(e){return-.5*(Math.cos(Math.PI*e)-1)})),l("easing.EaseLookup",{find:function(t){return e.map[t]}},!0),c(o.SlowMo,"SlowMo","ease,"),c(i,"RoughEase","ease,"),c(t,"SteppedEase","ease,"),f},!0)}),_gsScope._gsDefine&&_gsScope._gsQueue.pop()(),define("EasePack",function(){}),define("tweens-control",["extension","gb","TimelineLite","TweenLite","EasePack"],function(e,t,i){var n=t.game,o=e.extend({type:function(){return t.game.CREATE},execute:function(){n.on(n.BLUR,this,function(){this.tweensTimeline=i.exportRoot(),this.tweensTimeline.pause()},!1,!1,!1,"tweens"),n.on(n.FOCUS,this,function(){this.tweensTimeline.resume()},!1,!1,!1,"tweens")},destroy:function(){n.levelCleanUp("tweens")}});return o}),define("state",["delegate"],function(e){var t=e.extend({init:function(e,t){this._super(),this.scope=e,this.name=t},addStartAction:function(e){this.on("start",this.scope,e)},addUpdateAction:function(e){this.on("update",this.scope,e)},addCompleteAction:function(e){this.on("complete",this.scope,e)},removeStartAction:function(e){this.remove("start",this.scope,e)},removeUpdateAction:function(e){this.remove("update",this.scope,e)},removeCompleteAction:function(e){this.remove("complete",this.scope,e)},start:function(e){this.execute("start",e)},update:function(e){this.execute("update",e)},complete:function(e){this.execute("complete",e)}});return Object.defineProperty(t.prototype,"NEXT",{get:function(){return"next"}}),Object.defineProperty(t.prototype,"PREVIOUS",{get:function(){return"previous"}}),Object.defineProperty(t.prototype,"CHANGE",{get:function(){return"change"}}),t}),define("state-machine",["class","state","error-printer"],function(e,t){var i=e.extend({init:function(){this.stateIds={},this.states=[],this.currentStateId=-1,this.block()},start:function(e,t){this.unblock(),s.call(this,t?t:0,"start",e)},finish:function(e){s.call(this,this.currentStateId,"complete",e)},add:function(e){var t=this.states.push(e)-1;this.stateIds[e.name]=t,this.stateIds[t.toString()]=t},get:function(e){return this.states[a.call(this,e)]},block:function(){this.isBlocked=!0},unblock:function(){this.isBlocked=!1},update:function(){var e=this.states[this.currentStateId];e.update.apply(e,arguments)},destroy:function(){for(var e=0;e<this.states.length;e++)this.states[e].destroy();this.states.length=0,this.states=null}}),n=i.extend({init:function(){this._super()},add:function(e){e.on(e.CHANGE,this,function(t){l.call(this,e)||(s.call(this,this.currentStateId,"complete",t.lastCompleteArgs),s.call(this,a.call(this,t.next),"start",t.nextInitArgs))}),this._super(e)}}),o=i.extend({init:function(){this._super()},add:function(e){return e.on(e.NEXT,this,function(t){l.call(this,e)||(s.call(this,this.currentStateId,"complete",t.lastCompleteArgs),this.currentStateId<this.states.length&&this.currentStateId++,this.currentStateId==this.states.length&&(this.currentStateId=0),s.call(this,this.currentStateId,"start",t.nextInitArgs))}),e.on(e.PREVIOUS,this,function(t){l.call(this,e)||(s.call(this,this.currentStateId,"complete",t.lastCompleteArgs),this.currentStateId>=0&&this.currentStateId--,this.currentStateId<0&&(this.currentStateId=this.states.length-1),s.call(this,this.currentStateId,"start",t.nextInitArgs))}),this._super(e)}}),r={createLooseStateMachine:function(){return new n},createFixedStateMachine:function(){return new o},createState:function(e,i){return new t(e,i)}},s=function(e,t,i){this.isBlocked||null==this.states||(this.states[e][t](i),this.currentStateId=e)},a=function(e){return this.stateIds[e.toString()]},l=function(e){var t=a.call(this,e.name);return this.currentStateId!=t?!0:this.isBlocked||null==this.states?!0:!1};return r}),define("canvas-container",["require","jquery","class"],function(e){e("jquery");var t=e("class").extend({init:function(){this.canvasContainer=$("#main")},detachCanvas:function(){this.canvasContainer.detach(),this.canvasContainer.find(":not(canvas,#activity-display,#activity-display *)").remove()},getCanvasContainer:function(){return this.canvasContainer[0]}});return new t}),define("bundle",["require","class","gb","error-printer"],function(e){var t=e("class").extend({init:function(){var t=e("gb");this.gameObjectPool=t.goPool,this.componentPool=t.coPool,this.canvas=t.canvas,this.assetMap=t.assetMap()},create:function(){e("error-printer").mustOverrideError("Bundle")},createComponentPool:function(e){var t=i(e);this.componentPool.createPool(t,e())},createGameObjectPool:function(e,t){var o=i(e);this.gameObjectPool.createPool(o,e(),t),n.call(this,o)},createDynamicGameObjectPool:function(e){var t=i(e);this.gameObjectPool.createDynamicPool(t,e()),n.call(this,t)},createComponentConfiguration:function(e,t){var i=this.componentPool.createConfiguration(e,t);return o.call(this,e),i},createGameObjectConfiguration:function(e,t){var i=this.gameObjectPool.createConfiguration(e,t);return o.call(this,e),i}}),i=function(e){return e.toString().match(/\(['|"](.*?)['|"]\)/)[1]},n=function(e){var t=e.split("-").map(function(e){return e.charAt(0).toUpperCase()+e.slice(1)}).join(""),i="get"+t+"PoolId";this.constructor.prototype[i]=function(){return e}},o=function(e){var t="get"+e+"ConfigurationId";this.constructor.prototype[t]=function(){return e}};return t}),define("rgb-canvas-cache",["require","cache"],function(e){var t=e("cache").extend({name:function(){return"Rgb Canvas Cache"},cache:function(e,t){if(!this.cacheObject[e]){this.cacheObject[e]=[null,null,null,null];var i=t.width,n=t.height,o=document.createElement("canvas");o.width=i,o.height=n;var r=o.getContext("2d");r.drawImage(t,0,0);for(var s=r.getImageData(0,0,i,n).data,a=0;4>a;a++){var l=document.createElement("canvas");l.width=i,l.height=n;var h=l.getContext("2d");h.drawImage(o,0,0);for(var c=h.getImageData(0,0,i,n),d=c.data,u=s.length,p=0;u>p;p+=4)d[p]=0===a?s[p]:0,d[p+1]=1===a?s[p+1]:0,d[p+2]=2===a?s[p+2]:0,d[p+3]=s[p+3];h.putImageData(c,0,0),this.cacheObject[e][a]=l}this.execute(this.CACHE,this.cacheObject[e])}}});return new t}),define("renderer",["component","vector-2D","error-printer","rgb-canvas-cache"],function(e,t,i,n){var o=document.createElement("canvas"),r=o.getContext("2d"),s=e.extend({init:function(){this._super(),this.width=0,this.height=0,this.offsetX=0,this.offsetY=0,this.offset="",this.tinted=!1,this.tintRed=0,this.tintGreen=0,this.tintBlue=0,this.debugColor="#FFFF00",this.reset(),this.workVector=new t,this.tmpCanvas=o,this.tmpContext=r,this.rgbCanvasCache=n},reset:function(){this._super(),this.offsetX=0,this.offsetY=0,this.offset="",this.tinted=!1,this.tintRed=0,this.tintGreen=0,this.tintBlue=0,this.debugColor="#FFFF00"},draw:function(){i.mustOverrideError("Renderer")},tint:function(e,t,i){this.tinted=!0,this.tintRed=e,this.tintGreen=t,this.tintBlue=i},disableTint:function(){this.tinted=!1},tintImage:function(e,t){this.rgbCanvasCache.cache(e,t);var i=this.rgbCanvasCache.get(e),n=this.tmpCanvas,o=this.tmpContext;return n.width=t.width,n.height=t.height,o.globalAlpha=1,o.globalCompositeOperation="copy",o.drawImage(i[3],0,0),o.globalCompositeOperation="lighter",this.tintRed>0&&(o.globalAlpha=this.tintRed/255,o.drawImage(i[0],0,0)),this.tintGreen>0&&(o.globalAlpha=this.tintGreen/255,o.drawImage(i[1],0,0)),this.tintBlue>0&&(o.globalAlpha=this.tintBlue/255,o.drawImage(i[2],0,0)),n},rendererWidth:function(){return this.width||i.missingArgumentError("Renderer","width"),this.width},rendererHeight:function(){return this.height||i.missingArgumentError("Renderer","height"),this.height},rendererOffsetX:function(){return this.offsetX},rendererOffsetY:function(){return this.offsetY},rendererLeft:function(){return this.rendererOffsetX()},rendererTop:function(){return this.rendererOffsetY()},rendererRight:function(){return this.rendererOffsetX()+this.rendererWidth()},rendererBottom:function(){return this.rendererOffsetY()+this.rendererHeight()},debug_draw:function(e,t,i,n){if(n.rendererDebug){e.save(),e.beginPath(),e.strokeStyle=this.debugColor,e.lineWidth=1,e.translate(-.5,-.5);var o=this.parent.getMatrix();this.workVector=o.transformPoint(this.rendererLeft(),this.rendererTop(),this.workVector),e.moveTo(Math.round(this.workVector.x),Math.round(this.workVector.y)),this.workVector=o.transformPoint(this.rendererRight(),this.rendererTop(),this.workVector),e.lineTo(Math.round(this.workVector.x),Math.round(this.workVector.y)),this.workVector=o.transformPoint(this.rendererRight(),this.rendererBottom(),this.workVector),e.lineTo(Math.round(this.workVector.x),Math.round(this.workVector.y)),this.workVector=o.transformPoint(this.rendererLeft(),this.rendererBottom(),this.workVector),e.lineTo(Math.round(this.workVector.x),Math.round(this.workVector.y)),e.closePath(),e.stroke(),e.restore()}}});return s}),define("path-cache",["require","cache"],function(e){var t=e("cache").extend({name:function(){return"Path Cache"},cache:function(e,t,i,n){var o=this.cacheObject[e];o||(o=document.createElement("canvas")),o.width=t,o.height=i;var r=o.getContext("2d");r.clearRect(0,0,o.width,o.height),n(r),this.cacheObject[e]=o,this.execute(this.CACHE,this.cacheObject[e])},draw:function(e,t){var i=this.cacheObject[e];i&&(t(i.getContext("2d")),this.execute(this.CACHE,this.cacheObject[e]))}});return new t}),define("path-renderer",["renderer","path-cache","error-printer"],function(e,t,i){var n=e.extend({init:function(){this._super(),this.cache=t},start:function(){this.skipCache||(this.width||this.height||i.missingArgumentError("Path Renderer","width","height"),this.name||i.missingArgumentError("Path Renderer","name"),this.cache.cache(this.name,this.width,this.height,function(e){this.drawPath(e)}.bind(this)))},drawPath:function(){i.mustOverrideError("Path Renderer")},draw:function(e,t){if(this.skipCache)this.drawPath(e,t);else{var i=this.cache.get(this.name);if(!i)return;if(this.tinted){var n=this.tintImage(this.name,i);e.drawImage(n,Math.floor(this.rendererOffsetX()),Math.floor(this.rendererOffsetY()),Math.floor(this.rendererWidth()),Math.floor(this.rendererHeight()))}else e.drawImage(i,Math.floor(this.rendererOffsetX()),Math.floor(this.rendererOffsetY()),Math.floor(this.rendererWidth()),Math.floor(this.rendererHeight()))}},rendererOffsetX:function(){return"center"===this.offset?-this.rendererWidth()/2:this.offsetX},rendererOffsetY:function(){return"center"===this.offset?-this.rendererHeight()/2:this.offsetY}});return n}),define("image-cache",["require","cache","util"],function(e){var t=e("cache").extend({name:function(){return"Image Cache"},cache:function(e){if(!this.cacheObject[e]){var t=document.createElement("img");t.crossOrigin="Anonymous",t.src="file:"===window.location.protocol?"http://localhost:5000/"+e:e,this.cacheObject[e]=t,this.execute(this.CACHE,this.cacheObject[e])}},cacheStrip:function(t,i,n,o,r){if(this.cacheObject[t]){if(e("util").isArray(this.cacheObject[t]))return void this.cacheObject[t].push(r);r(this.cacheObject[t])}this.cacheObject[t]=[],this.cacheObject[t].push(r);var s=this,a=function(){for(var e=o||l.width/l.height,r=0;e>r;r++){var h=document.createElement("canvas");h.width=i,h.height=n,h.getContext("2d").mozImageSmoothingEnabled=!1,h.getContext("2d").imageSmoothingEnabled=!1,h.getContext("2d").drawImage(l,i*r,0,i,n,0,0,i,n),s.cacheObject[t+"_"+r]=h}s.execute(s.CACHE,s.cacheObject[t]),l.removeEventListener("load",a);for(var r=0;r<s.cacheObject[t].length;r++)s.cacheObject[t][r](e);s.cacheObject[t]=e},l=document.createElement("img");l.crossOrigin="Anonymous",l.addEventListener("load",a),l.src="file:"===window.location.protocol?"http://localhost:5000/"+t:t}});return new t}),define("bitmap-renderer",["renderer","image-cache","error-printer"],function(e,t,i){var n=e.extend({init:function(){this._super(),this.cache=t},start:function(){this.path||i.missingArgumentError("Bitmap Renderer","path"),this.cache.cache(this.path)},draw:function(e){var t=this.cache.get(this.path);if(t)if(this.tinted){var i=this.tintImage(this.path,t);e.drawImage(i,Math.floor(this.rendererOffsetX()),Math.floor(this.rendererOffsetY()),Math.floor(this.rendererWidth()),Math.floor(this.rendererHeight()))}else e.drawImage(t,Math.floor(this.rendererOffsetX()),Math.floor(this.rendererOffsetY()),Math.floor(this.rendererWidth()),Math.floor(this.rendererHeight()))},rendererOffsetX:function(){return"center"==this.offset?-this.rendererWidth()/2:this.offsetX},rendererOffsetY:function(){return"center"==this.offset?-this.rendererHeight()/2:this.offsetY},rendererWidth:function(){return this.cache.get(this.path).width},rendererHeight:function(){return this.cache.get(this.path).height}});return n}),define("text-cache",["require","cache"],function(e){var t=e("cache").extend({name:function(){return"Text Cache"},cache:function(e,t){var i=this.cacheObject[e];i||(i=document.createElement("canvas")),t.font=t.size+"px "+t.fontFamily;var n=document.createElement("div");n.style.visibility="hidden",n.style.font=t.font,n.style.position="absolute",n.style.width="auto",n.style.height="auto",n.style.margin=0,n.innerHTML=t.text,document.body.appendChild(n);var o=t.padding||0;i.width=n.getBoundingClientRect().width+o,i.height=n.getBoundingClientRect().height+o,document.body.removeChild(n);var r=i.getContext("2d");r.clearRect(0,0,i.width,i.height),r.fillStyle=t.background,r.fillRect(0,0,i.width,i.height),r.textBaseline="top",r.textAlign=t.align,r.lineWidth=t.lineWidth,r.fillStyle=t.fill,r.strokeStyle=t.stroke,r.font=t.font,r.fillText(t.text,0,0),r.strokeText(t.text,0,0),this.cacheObject[e]=i,this.execute(this.CACHE,this.cacheObject[e])}});return new t}),define("text-renderer",["renderer","text-cache"],function(e,t){var i=e.extend({init:function(){this._super(),this.cache=t},start:function(){this.align=this.align||"start",this.lineWidth=this.lineWidth||1,this.fill=this.fillColor||"#000000",this.stroke=this.strokeColor||"#FFFFFF",this.size=this.size||10,this.fontFamily=this.font||"Arial",this.background=this.backgroundColor||"rgba(100%, 100%, 100%, 0)",this.cache.cache(this.name,this)},draw:function(e){var t=this.cache.get(this.name);if(t)if(this.tinted){var i=this.tintImage(this.name,t);e.drawImage(i,Math.floor(this.rendererOffsetX()),Math.floor(this.rendererOffsetY()),Math.floor(this.rendererWidth()),Math.floor(this.rendererHeight()))}else e.drawImage(t,Math.floor(this.rendererOffsetX()),Math.floor(this.rendererOffsetY()),Math.floor(this.rendererWidth()),Math.floor(this.rendererHeight()))},rendererOffsetX:function(){return"center"==this.offset?-this.rendererWidth()/2:this.offsetX},rendererOffsetY:function(){return"center"==this.offset?-this.rendererHeight()/2:this.offsetY},rendererWidth:function(){return this.cache.get(this.name).width},rendererHeight:function(){return this.cache.get(this.name).height}});return Object.defineProperty(i.prototype,"Align",{set:function(e){this.align=e,this.cache.cache(this.name,this)}}),Object.defineProperty(i.prototype,"LineWidth",{set:function(e){this.lineWidth=e,this.cache.cache(this.name,this)}}),Object.defineProperty(i.prototype,"FillColor",{set:function(e){this.fillColor=e,this.cache.cache(this.name,this)}}),Object.defineProperty(i.prototype,"StrokeColor",{set:function(e){this.strokeColor=e,this.cache.cache(this.name,this)}}),Object.defineProperty(i.prototype,"Font",{set:function(e){this.fontFamily=e,this.cache.cache(this.name,this)}}),Object.defineProperty(i.prototype,"Size",{set:function(e){this.size=e,this.cache.cache(this.name,this)}}),Object.defineProperty(i.prototype,"Text",{set:function(e){this.text=e,this.cache.cache(this.name,this)}}),Object.defineProperty(i.prototype,"Background",{set:function(e){this.background=e,this.cache.cache(this.name,this)}}),i}),define("animation-path-renderer",["renderer","path-cache","error-printer","util"],function(e,t,i,n){var o=e.extend({init:function(){this._super(),this.loop=!1,this.width=null,this.height=null,this.name=null,this.frameDelay=null,this.framePaths=null,this.cache=t},start:function(){this.width||this.height||i.missingArgumentError("Animation Path Renderer","width","height"),this.name||i.missingArgumentError("Animation Path Renderer","name"),this.frameDelay||i.missingArgumentError("Animation Path Renderer","frameDelay"),this.framePaths?n.isArray(this.framePaths)||i.wrongTypeArgumentError("Animation Path Renderer","framePaths","Array"):i.missingArgumentError("Animation Path Renderer","framePaths");for(var e=0;e<this.framePaths.length;e++)this.cache.cache(this.name+"_"+e.toString(),this.width,this.height,function(e){return function(t){this.framePaths[e].call(this,t)}.bind(this)}.bind(this)(e));this.stop()},update:function(e){this.isPlaying&&(this.delayTotal+=e,this.delayTotal>this.frameDelay&&(this.delayTotal-=this.frameDelay,this.frameIndex<this.framePaths.length-1?this.frameIndex++:(this.loop?this.frameIndex=0:this.pause(),this.execute(this.COMPLETE)),this.currentFrameName=this.name+"_"+this.frameIndex.toString()))},draw:function(e){var t=this.cache.get(this.currentFrameName);if(t)if(this.tinted){var i=this.tintImage(this.currentFrameName,t);e.drawImage(i,Math.floor(this.rendererOffsetX()),Math.floor(this.rendererOffsetY()),Math.floor(this.rendererWidth()),Math.floor(this.rendererHeight()))}else e.drawImage(t,Math.floor(this.rendererOffsetX()),Math.floor(this.rendererOffsetY()),Math.floor(this.rendererWidth()),Math.floor(this.rendererHeight()))},rendererOffsetX:function(){return"center"==this.offset?-this.rendererWidth()/2:this.offsetX},rendererOffsetY:function(){return"center"==this.offset?-this.rendererHeight()/2:this.offsetY},play:function(){this.isPlaying=!0},stop:function(){this.isPlaying=!1,this.delayTotal=0,this.frameIndex=0,this.currentFrameName=this.name+"_"+this.frameIndex.toString()},pause:function(){this.isPlaying=!1}});return Object.defineProperty(o.prototype,"COMPLETE",{get:function(){return"complete"}}),o}),define("animations-path-renderer",["animation-path-renderer","error-printer"],function(e,t){var i=e.extend({start:function(){this.labels||t.missingArgumentError("Animation Path Renderer","labels"),this.startingLabel||t.missingArgumentError("Animation Path Renderer","startingLabel"),this.currentFrames=null,this.currentLabel=null,this._super()},update:function(e){this.isPlaying&&this.currentFrames.length>1&&(this.delayTotal+=e,this.delayTotal>this.frameDelay&&(this.delayTotal-=this.frameDelay,this.frameIndex<this.currentFrames.length-1?this.frameIndex++:this.loop?(this.frameIndex=0,this.execute(this.LOOP,this.currentLabel)):(this.execute(this.COMPLETE,this.currentLabel),this.pause()),this.currentFrameName=this.name+"_"+this.currentFrames[this.frameIndex].toString()))},play:function(e){e=e||this.startingLabel;var t=this.labels[e];this.currentLabel=t,this.currentFrames=t.frames,this.loop=t.loop,this.delayTotal=0,this.frameIndex=0,this.currentFrameName=this.name+"_"+this.currentFrames[0].toString(),this.isPlaying=!0},loop:function(e){e=e||this.startingLabel,this.currentLabel=label,this.currentFrames=label.frames,this.loop=!0,this.delayTotal=0,this.frameIndex=0,this.currentFrameName=this.name+"_"+this.currentFrames[0].toString(),this.isPlaying=!0},stop:function(e){e=e||this.startingLabel;var t=this.labels[e];this.currentLabel=t,this.currentFrames=t.frames,this.delayTotal=0,this.frameIndex=0,this.currentFrameName=this.name+"_"+this.currentFrames[0].toString(),this.isPlaying=!1},pause:function(){this.isPlaying=!1}});return Object.defineProperty(i.prototype,"LOOP",{get:function(){return"loop"}}),i}),define("animation-bitmap-renderer",["renderer","image-cache","error-printer"],function(e,t,i){var n=e.extend({init:function(){this._super(),this.loop=!1,this.pingPong=!1,this.frameWidth=0,this.frameHeight=0,this.frameDelay=0,this.frameCount=0,this.path="",this.finishLoading=!1,this.frameIndex=0,this.delayTotal=0,this.direction=1,this.cache=t},start:function(e){this._super(e),this.frameWidth||this.frameHeight||i.missingArgumentError("Animation Bitmap Renderer","frameWidth","frameHeight"),this.frameDelay||i.missingArgumentError("Animation Bitmap Renderer","frameDelay"),this.path||i.missingArgumentError("Animation Bitmap Renderer","path");var t=this;this.cache.cacheStrip(this.path,this.frameWidth,this.frameHeight,this.frameCount,function(e){t.finishLoading=!0,t.frameCount=e}),this.stop()},update:function(e){if(this.isPlaying&&this.finishLoading&&(this.delayTotal+=e,this.delayTotal>this.frameDelay)){if(this.delayTotal-=this.frameDelay,1==this.direction)return this.frameIndex<this.frameCount-1?this.frameIndex++:(this.loop?this.frameIndex=0:this.pingPong?this.direction=-1:this.pause(),this.execute(this.COMPLETE)),void(this.currentFrameName=this.path+"_"+this.frameIndex.toString());if(-1==this.direction)return this.frameIndex>0?this.frameIndex--:(this.direction=1,this.execute(this.COMPLETE_BACK)),void(this.currentFrameName=this.path+"_"+this.frameIndex.toString())}},draw:function(e){var t=this.cache.get(this.currentFrameName);if(t)if(this.tinted){var i=this.tintImage(this.currentFrameName,t);e.drawImage(i,Math.floor(this.rendererOffsetX()),Math.floor(this.rendererOffsetY()),Math.floor(this.rendererWidth()),Math.floor(this.rendererHeight()))}else e.drawImage(t,Math.floor(this.rendererOffsetX()),Math.floor(this.rendererOffsetY()),Math.floor(this.rendererWidth()),Math.floor(this.rendererHeight()))},recycle:function(e){this.loop=!1,this.pingPong=!1,this.frameWidth=0,this.frameHeight=0,this.frameDelay=0,this.frameCount=0,this.path="",this.finishLoading=!1,this.frameIndex=0,this.delayTotal=0,this.direction=1,this._super(e)},play:function(){this.isPlaying=!0},stop:function(){this.isPlaying=!1,this.delayTotal=0,this.frameIndex=0,this.direction=1,this.currentFrameName=this.path+"_"+this.frameIndex.toString()},pause:function(){this.isPlaying=!1},rendererOffsetX:function(){return"center"==this.offset?-this.rendererWidth()/2:this.offsetX},rendererOffsetY:function(){return"center"==this.offset?-this.rendererHeight()/2:this.offsetY},rendererWidth:function(){return this.frameWidth},rendererHeight:function(){return this.frameHeight}});return Object.defineProperty(n.prototype,"COMPLETE",{get:function(){return"complete"}}),Object.defineProperty(n.prototype,"COMPLETE_BACK",{get:function(){return"complete_back"}}),n}),define("animations-bitmap-renderer",["renderer","image-cache","error-printer"],function(e,t,i){var n=e.extend({init:function(){this._super(),this.loop=!1,this.pingPong=!1,this.frameWidth=0,this.frameHeight=0,this.frameDelay=0,this.frameCount=0,this.path="",this.finishLoading=!1,this.frameIndex=0,this.delayTotal=0,this.direction=1,this.currentFrames=null,this.currentLabel=null,this.labels=null,this.startingLabel="",this.isPlaying=!1,this.cache=t},start:function(){this.frameWidth||this.frameHeight||i.missingArgumentError("Animations Bitmap Renderer","frameWidth","frameHeight"),this.frameDelay||i.missingArgumentError("Animations Bitmap Renderer","frameDelay"),this.path||i.missingArgumentError("Animations Bitmap Renderer","path"),this.labels||i.missingArgumentError("Animations Bitmap Renderer","labels"),this.startingLabel||i.missingArgumentError("Animations Bitmap Renderer","startingLabel");var e=this;this.cache.cacheStrip(this.path,this.frameWidth,this.frameHeight,this.frameCount,function(t){e.finishLoading=!0,e.frameCount=t}),this.stop()},update:function(e){if(this.isPlaying&&this.finishLoading){if(1===this.currentFrames.length)return void(this.currentFrameName=this.path+"_"+this.currentFrames[0].toString());if(this.delayTotal+=e,this.delayTotal>this.frameDelay){if(this.delayTotal-=this.frameDelay,1===this.direction)return this.frameIndex<this.currentFrames.length-1?this.frameIndex++:(this.loop?this.frameIndex=0:this.pingPong?this.direction=-1:this.pause(),this.execute(this.COMPLETE)),void(this.currentFrameName=this.path+"_"+this.currentFrames[this.frameIndex].toString());if(-1===this.direction)return this.frameIndex>0?this.frameIndex--:(this.direction=1,this.execute(this.COMPLETE_BACK)),void(this.currentFrameName=this.path+"_"+this.currentFrames[this.frameIndex].toString());if(-2===this.direction)return this.frameIndex>0?this.frameIndex--:(this.loop?this.frameIndex=this.currentFrames.length-1:this.pingPong?this.direction=1:this.pause(),this.execute(this.COMPLETE_BACK)),void(this.currentFrameName=this.path+"_"+this.currentFrames[this.frameIndex].toString())}}},draw:function(e){var t=this.cache.get(this.currentFrameName);if(t)if(this.tinted){var i=this.tintImage(this.currentFrameName,t);e.drawImage(i,Math.floor(this.rendererOffsetX()),Math.floor(this.rendererOffsetY()),Math.floor(this.rendererWidth()),Math.floor(this.rendererHeight()))}else e.drawImage(t,Math.floor(this.rendererOffsetX()),Math.floor(this.rendererOffsetY()),Math.floor(this.rendererWidth()),Math.floor(this.rendererHeight()))
},recycle:function(e){this.loop=!1,this.pingPong=!1,this.frameWidth=0,this.frameHeight=0,this.frameDelay=0,this.frameCount=0,this.path="",this.finishLoading=!1,this.frameIndex=0,this.delayTotal=0,this.direction=1,this.currentFrames=null,this.currentLabel=null,this.labels=null,this.startingLabel="",this.isPlaying=!1,this._super(e)},isAtLabel:function(e){return this.labels[e]===this.currentLabel},play:function(e){e=e||this.startingLabel;var t=this.labels[e];this.currentLabel=t,this.currentFrames=t.frames,this.loop=t.loop||!1,this.pingPong=t.pingPong||!1,this.delayTotal=0,this.frameIndex=0,this.currentFrameName=this.path+"_"+this.currentFrames[0].toString(),this.direction=1,this.isPlaying=!0},reverse:function(){this.direction=-2,this.isPlaying=!0},loop:function(e){e=e||this.startingLabel,this.currentLabel=label,this.currentFrames=label.frames,this.loop=!0,this.pingPong=!1,this.delayTotal=0,this.frameIndex=0,this.currentFrameName=this.path+"_"+this.currentFrames[0].toString(),this.direction=1,this.isPlaying=!0},stop:function(e){e=e||this.startingLabel;var t=this.labels[e];this.currentLabel=t,this.currentFrames=t.frames,this.delayTotal=0,this.frameIndex=0,this.currentFrameName=this.path+"_"+this.currentFrames[0].toString(),this.direction=1,this.isPlaying=!1},pause:function(){this.isPlaying=!1},resume:function(){this.isPlaying=!0},rendererOffsetX:function(){return"center"==this.offset?-this.rendererWidth()/2:this.offsetX},rendererOffsetY:function(){return"center"==this.offset?-this.rendererHeight()/2:this.offsetY},rendererWidth:function(){return this.frameWidth},rendererHeight:function(){return this.frameHeight}});return Object.defineProperty(n.prototype,"COMPLETE",{get:function(){return"complete"}}),Object.defineProperty(n.prototype,"COMPLETE_BACK",{get:function(){return"complete_back"}}),n}),define("sound-component",["component","sound-player","error-printer"],function(e,t,i){var n=e.extend({init:function(){this._super(),this.soundId="",this.parentEvent="",this.playMode="",this.soundPlayer=t,this.reset()},reset:function(){this._super(),this.soundId="",this.parentEvent="",this.playMode=""},start:function(e){this.soundId||i.missingArgumentError("SoundComponent","soundId"),this.parentEvent||i.missingArgumentError("SoundComponent","parentEvent"),this.playMode||i.missingArgumentError("SoundComponent","playMode"),e.on(this.parentEvent,this,function(){return"single"===this.playMode?void this.soundPlayer.playSingle(this.soundId):"loop"===this.playMode?void this.soundPlayer.playLoop(this.soundId):void 0},!1,!1,!1,"sound-player-delegate")},recycle:function(e){e.levelCleanUp("sound-player-delegate")}});return n}),define("add-component",["component","gb","error-printer"],function(e,t,i){var n=e.extend({init:function(){this._super(),this.componentId="",this.parentEvent="",this.executeOnce=!0,this.componentArgs=null,this.gb=t,this.reset()},reset:function(){this._super(),this.componentId="",this.parentEvent="",this.executeOnce=!0,this.componentArgs=null},start:function(e){this.componentId||i.missingArgumentError("AddComponent","componentId"),this.parentEvent||i.missingArgumentError("AddComponent","parentEvent"),this.executeOnce?e.once(this.parentEvent,this,function(){this.gb.addComponentTo(this.parent,this.componentId,this.componentArgs)},"add-component-delegate"):e.on(this.parentEvent,this,function(){this.gb.addComponentTo(this.parent,this.componentId,this.componentArgs)},!1,!1,!1,"add-component-delegate")},recycle:function(e){e.levelCleanUp("add-component-delegate")}});return n}),define("add-game-object",["component","gb","error-printer"],function(e,t,i){var n=e.extend({init:function(){this._super(),this.goId="",this.parentEvent="",this.executeOnce=!0,this.group="",this.viewports=null,this.goArgs=null,this.gb=t,this.reset()},reset:function(){this._super(),this.goId="",this.parentEvent="",this.executeOnce=!0,this.group="",this.viewports=null,this.goArgs=null},start:function(e){this.goId||i.missingArgumentError("AddGameObject","goId"),this.parentEvent||i.missingArgumentError("AddGameObject","parentEvent"),this.group||i.missingArgumentError("AddGameObject","group"),this.viewports||i.missingArgumentError("AddGameObject","viewports"),this.executeOnce?e.once(this.parentEvent,this,function(){this.gb.create(this.goId,this.group,this.viewports,this.goArgs)},"add-game-object-delegate"):e.on(this.parentEvent,this,function(){this.gb.create(this.goId,this.group,this.viewports,this.goArgs)},!1,!1,!1,"add-game-object-delegate")},recycle:function(e){e.levelCleanUp("add-game-object-delegate")}});return n}),define("editor-component",["component"],function(e){var t=e.extend({init:function(){this._super()},start:function(e){this._super(),this.editorStart(e)},added:function(e){this._super(e),this.editorAdded(e)},update:function(e){this._super(e),this.editorUpdate(e)},editorStart:function(){},editorAdded:function(){},editorUpdate:function(){}});return t}),define("player-getter",["require","gb","delegate","gb"],function(e){var t=(e("gb"),e("delegate").extend({init:function(){this._super()},getAsync:function(e){this.player?e(this.player):this.once("player_created",this,function(){e(this.player)})},get:function(t,i){return this.player||(this.player=e("gb").create("player-ship","First",[{viewport:"Main",layer:"Front"}],{viewportOffsetX:t,viewportOffsetY:i}),this.player.once(this.player.RECYCLE,this,function(){this.player=null}),this.execute("player_created")),this.player},exists:function(){return!!this.player}}));return new t}),define("activate-on-view",["editor-component","player-getter"],function(e,t){var i=function(){this.parent.editorStart=this.parent.saveEditorStart,this.parent.editorUpdate=this.parent.saveEditorUpdate,this.parent.activatedOnView=!0,this.parent.saveEditorStart=null,this.parent.saveEditorUpdate=null,r.call(this)},n=function(){this.parent.saveEditorStart||(this.parent.saveEditorStart=this.parent.editorStart,this.parent.editorStart=function(){}),this.parent.saveEditorUpdate||(this.parent.saveEditorUpdate=this.parent.editorUpdate,this.parent.editorUpdate=function(){}),this.parent.activatedOnView=!1,o.call(this)},o=function(){var e=this.parent.findComponents().not().all(function(e){return e.poolId==require("common-bundle").getActivateOnViewPoolId()||"ConnectSimilar"==e.poolId});if(e)for(var t=0;t<e.length;t++)e[t].disable()},r=function(){var e=this.parent.findComponents().not().all(function(e){return e.poolId==require("common-bundle").getActivateOnViewPoolId()||"ConnectSimilar"==e.poolId});if(e)for(var t=0;t<e.length;t++)e[t].enable()},s=e.extend({init:function(){this._super(),this.onPlayerUnblock=function(){!this.parent.activatedOnView&&this.parent.getViewportVisibility("Main")&&(i.call(this),this.parent.editorStart())}},editorStart:function(){},editorAdded:function(){n.call(this),t.getAsync(function(e){e.on(e.UNBLOCK,this,this.onPlayerUnblock)}.bind(this)),this.parent.once(this.parent.START,this,function(){o.call(this)})},editorUpdate:function(){if(!this.parent.activatedOnView&&this.parent.getViewportVisibility("Main")){if(t.get().isBlocked())return;i.call(this),this.parent.editorStart()}this.parent.activatedOnView&&!this.parent.getViewportVisibility("Main")&&(n.call(this),this.parent.deActivate())},recycle:function(e){t.getAsync(function(e){e.removeDelegate(e.UNBLOCK,this,this.onPlayerUnblock)}.bind(this)),this._super(e)}});return s}),define("twitch",["component"],function(e){var t=e.extend({start:function(){this.startPos=!1,this.lastX,this.lastY},update:function(){this.startPos?(this.parent.x=this.lastX,this.parent.y=this.lastY):(this.lastX=this.parent.x,this.lastY=this.parent.y,this.amount*=-1,this.parent.x+=Math.random()*this.amount,this.parent.y+=Math.random()*this.amount),this.startPos=!this.startPos}});return t}),define("tween",["component","TweenLite","EasePack"],function(e,t){var i=e.extend({start:function(e){if(this._super(e),!this.properties)throw new Error("Missing properties to tween object");for(var i in this.properties)if("number"!=typeof e[i])throw new Error("Parent does not have property to to tween");if(!this.tweenProperties)throw new Error("Missing tween properties object");if(!this.tweenProperties.time)throw new Error("Missing time property");if(!this.tweenProperties.tweenStartProperties)throw new Error("Missing tweenStartProperties property");if(!this.tweenProperties.tweenEndProperties)throw new Error("Missing tweenEndProperties property");var n=this.tweenProperties.tweenStartProperties,o=this.tweenProperties.tweenEndProperties;t.fromTo(this.parent,this.tweenProperties.time,n,o)},recycle:function(e){t.killTweensOf(e),this._super(e)}});return i}),define("damage-flash",["editor-component","gb"],function(e){var t=e.extend({init:function(){this._super(),this.flashTime=0},editorStart:function(e){e.renderer.tint(255,0,0),e.findChildren().recurse().all(function(e){return e.hasRenderer()}).forEach(function(e){e.renderer.tint(255,0,0)}),setTimeout(function(){e.renderer.disableTint(),e.findChildren().recurse().all(function(e){return e.hasRenderer()}).forEach(function(e){e.renderer.disableTint()}),e.removeComponent(this)}.bind(this),this.flashTime)}});return t}),define("common-bundle",["require","bundle","circle-collider","polygon-collider","fixed-polygon-collider","renderer","path-renderer","bitmap-renderer","text-renderer","animation-path-renderer","animations-path-renderer","animation-bitmap-renderer","animations-bitmap-renderer","sound-component","add-component","add-game-object","activate-on-view","twitch","tween","damage-flash","game-object","game-object-container"],function(e){var t=e("bundle").extend({create:function(){n.call(this,function(){return e("circle-collider")}),n.call(this,function(){return e("polygon-collider")}),n.call(this,function(){return e("fixed-polygon-collider")}),n.call(this,function(){return e("renderer")}),n.call(this,function(){return e("path-renderer")}),n.call(this,function(){return e("bitmap-renderer")}),n.call(this,function(){return e("text-renderer")}),n.call(this,function(){return e("animation-path-renderer")}),n.call(this,function(){return e("animations-path-renderer")}),n.call(this,function(){return e("animation-bitmap-renderer")}),n.call(this,function(){return e("animations-bitmap-renderer")}),n.call(this,function(){return e("sound-component")}),n.call(this,function(){return e("add-component")}),n.call(this,function(){return e("add-game-object")}),n.call(this,function(){return e("activate-on-view")}),n.call(this,function(){return e("twitch")}),n.call(this,function(){return e("tween")}),n.call(this,function(){return e("damage-flash")}),o.call(this,function(){return e("game-object")}),o.call(this,function(){return e("game-object-container")})}}),i=function(e){var t=e.toString().match(/\(['|"](.*?)['|"]\)/)[1];return t},n=function(e){var t=i(e);this.componentPool.createPool(t,e()),r(t)},o=function(e){var t=i(e);this.gameObjectPool.createDynamicPool(t,e()),r(t)},r=function(e){var i=e.split("-").map(function(e){return e.charAt(0).toUpperCase()+e.slice(1)}).join(""),n="get"+i+"PoolId";t.prototype[n]=function(){return e}};return new t}),define("arrow-renderer",["path-renderer","path-cache","draw","timer-factory"],function(e,t,i,n){var o=e.extend({init:function(){this._super(),this.width=20,this.height=20,this.name="arrow-renderer",this.offset="center"},start:function(e){this._super(e),n.get(this,"colorTimer","colorTimer"),this.colorTimer.configure({delay:500,repeatCount:-1,removeOnComplete:!1}),this.colorTimer.start(),this.offset="center",this.color1="#ec751e",this.color2=null,this.color=this.color2,this.colorTimer.on("repeate",function(e){this.color=e%2==0?this.color1:this.color2,t.cache(this.name,this.width,this.height,function(e){this.drawPath(e)}.bind(this))},!1,!1)},drawPath:function(e){e.save(),i.relativePolygon(e,2,2,[{x:0,y:0},{x:16,y:0},{x:-8,y:16}],this.color,"#FFFFFF",2,1,!0),e.restore()},recycle:function(){this.colorTimer.remove()}});return o}),define("keyboard",["require","delegate"],function(e){var t={},i=!1,n=null,o=e("delegate").extend({init:function(){this._super(),this.LEFT=37,this.UP=38,this.RIGHT=39,this.DOWN=40,this.CTRL=17,this.ALT=18,this.ESC=27,this.SPACE=32,this.W=87,this.A=65,this.S=83,this.D=68,this.Z=90,this.X=88,this.C=67,this.P=80,this.O=79,this.I=73,this.NUM_0=48,this.NUM_1=49,this.NUM_2=50,this.NUM_3=51,this.NUM_4=52,this.NUM_5=53,this.GAME_LEFT=this.LEFT,this.GAME_RIGHT=this.RIGHT,this.GAME_UP=this.UP,this.GAME_DOWN=this.DOWN,this.GAME_BUTTON_1=this.A,this.GAME_BUTTON_2=this.S,this.GAME_BUTTON_PAUSE=this.P,this.skipDefaultBehaviour=[]},config:function(e){if(e.gameKeys)for(var t in e.gameKeys)this[t]=e.gameKeys[t];e.skipDefaultBehaviour&&(this.skipDefaultBehaviour=e.skipDefaultBehaviour)},onKeyDown:function(e,t,i,n){this.on("keydown"+e.toString(),t,i,!1,!1,!1,n)},onKeyUp:function(e,t,i,n){this.on("keyup"+e.toString(),t,i,!1,!1,!1,n)},removeKeyDown:function(e,t,i){this.remove("keydown"+e.toString(),t,i)},removeKeyUp:function(e,t,i){this.remove("keyup"+e.toString(),t,i)},isKeyDown:function(e){return t[e]},setBlock:function(e,t){i=e,n=t||null}}),r=new o,s=function(e){if(i){if(!n)return!0;if(-1==n.indexOf(e))return!0}return!1};return window.addEventListener("keyup",function(e){delete t[e.keyCode],s(e.keyCode)||r.execute("keyup"+e.keyCode.toString(),e)},!1),window.addEventListener("keydown",function(e){t[e.keyCode]||s(e.keyCode)||(t[e.keyCode]=!0,r.execute("keydown"+e.keyCode.toString(),e))},!1),window.addEventListener("blur",function(){for(var e in t)delete t[e]},!1),document.onkeydown=function(e){-1!=r.skipDefaultBehaviour.indexOf(e.keyCode)&&e.preventDefault()},document.onkeypress=function(e){-1!=r.skipDefaultBehaviour.indexOf(e.keyCode)&&e.preventDefault()},r}),define("local-storage",["require","level-compressor","delegate"],function(e){var t=null,i=null,n=e("level-compressor"),o=e("delegate").extend({init:function(){try{localStorage.setItem("testEntry","testValue"),localStorage.removeItem("testEntry"),this.available=!0}catch(e){this.execute(this.LOCAL_STORAGE_NOT_AVAILABLE),this.available=!1}},setScene:function(e,t){var i=n.compress(t);return s.call(this,"scene_"+e,i)},getScene:function(e){var t=l.call(this,"scene_"+e.replace(/^scene_/,""));return n.decompress(t)},setPreviewScene:function(e){t=e},getPreviewScene:function(){return t},setBackUpScene:function(e){backUpScene=e},getBackUpScene:function(){return backUpScene},setUrlScene:function(e){i=e},getUrlScene:function(){return i},removeScene:function(e){a.call(this,"scene_"+e.replace(/^scene_/,""))},getAllScenes:function(){return r.call(this),Object.keys(localStorage).filter(function(e){return-1!=e.search(/^scene_/)}).map(function(e){return e.replace(/^scene_/,"")})},getScenesCount:function(){return r.call(this),this.getAllScenes().length},clearScenes:function(){r.call(this);for(var e=this.getAllScenes(),t=0;t<e.length;t++)this.removeScene.call(this,e[t])},clear:function(){r.call(this),localStorage.clear()},completeLevel:function(e){s.call(this,e+"-complete-flag",!0)},resetCompletedLevels:function(){r.call(this),Object.keys(localStorage).filter(function(e){return-1!=e.search(/-complete-flag$/)}.bind(this)).forEach(function(e){s.call(this,e,!1)}.bind(this))},isLevelComplete:function(e){return"true"===l.call(this,e+"-complete-flag")},setRemoteId:function(e,t,i){var n=e+"@@"+t;s.call(this,n+"@@remote-id",i)},getRemoteIdRemote:function(e,t){r.call(this);var t=Object.keys(localStorage).filter(function(i){var n=new RegExp(e+"@@"+t+"@@remote-id");return-1!=i.search(n)});return"http://"+l.call(this,t[0])},getRemoteIdNames:function(){return r.call(this),Object.keys(localStorage).filter(function(e){return-1!=e.search(/@@remote-id/)}).map(function(e){var t=e.match(/(.+)@@(.+)@@remote-id/);return t[1]+" => "+t[2]})},removeRemoteId:function(e,t){var i=e+"@@"+t;a.call(this,i+"@@remote-id")},removeAllRemoteIds:function(){var e=this;return Object.keys(localStorage).filter(function(e){return-1!=e.search(/@@remote-id/)}).forEach(function(t){a.call(e,t)})}}),r=function(){if(!this.available)throw new Error("Local Storage Not Available")},s=function(e,t){r.call(this);try{return localStorage.setItem(e,t),!0}catch(i){return this.execute(this.STORAGE_LIMIT_REACHED,{key:e,value:t}),!1}},a=function(e){r.call(this),localStorage.removeItem(e)},l=function(e){return r.call(this),localStorage.getItem(e)};return Object.defineProperty(o.prototype,"LOCAL_STORAGE_NOT_AVAILABLE",{get:function(){return"local_storage_not_available"}}),Object.defineProperty(o.prototype,"LOCAL_STORAGE_LIMIT_REACHED",{get:function(){return"local_storage_limit_reached"}}),new o}),define("splash-title-animation",["game-object","gb","TimelineLite","keyboard","local-storage","TweenLite","EasePack"],function(e,t,i,n){var o=e.extend({init:function(){this._super()},start:function(){var e=[{viewport:"Main",layer:"Front"}];this.options=[],this.fly=t.create("Fly","First",e,{x:-1e3,y:50}),this.shoot=t.create("Shoot","First",e,{x:-1e3,y:230}),this.controls_1=t.create("Controls_1","First",e,{x:-1e3,y:350}),this.controls_2=t.create("Controls_2","First",e,{x:-1e3,y:390}),this.addOption("play","Play",e,{x:t.canvas.width/2,y:t.canvas.height+60}),this.addOption("edit","Edit",e,{x:t.canvas.width/2,y:t.canvas.height+110}),this.addOption("custom","PlayCustom",e,{x:t.canvas.width/2,y:t.canvas.height+160}),this.tl=new i({onComplete:function(){n.onKeyDown(n.GAME_UP,this,this.onUpPress),n.onKeyDown(n.GAME_DOWN,this,this.onDownPress),n.onKeyDown(n.GAME_BUTTON_1,this,this.onOptionSelected),this.execute(this.ENTER)}.bind(this),onReverseComplete:function(){this.play.selected?this.execute(this.PLAY):this.custom.selected&&this.execute(this.CUSTOM)}.bind(this)}),this.tl.to(this.fly,.5,{x:100},"title"),this.tl.to(this.shoot,.5,{x:t.canvas.width/2},"title"),this.tl.to(this.controls_1,.5,{x:t.canvas.width/2},"controls"),this.tl.to(this.controls_2,.5,{x:t.canvas.width/2},"controls"),this.tl.to(this.play,.3,{y:"-=200"},"options"),this.tl.to(this.edit,.3,{y:"-=200"},"options"),this.tl.to(this.custom,.3,{y:"-=200"},"options"),this.tl.play(),this.currentOption=0,r.call(this,this.currentOption),this._super()},addOption:function(e,i,n,o){this[e]=t.create(i,"First",n,o),this.options.push(e)},reverse:function(){n.removeKeyDown(n.GAME_UP,this,this.onLeftPress),n.removeKeyDown(n.GAME_DOWN,this,this.onRightPress),n.removeKeyDown(n.GAME_BUTTON_1,this,this.onOptionSelected),this.tl.reverse()},onUpPress:function(){this.currentOption>0&&(this.currentOption--,this.execute("option")),r.call(this,this.currentOption)},onDownPress:function(){this.currentOption<this.options.length-1&&(this.currentOption++,this.execute("option")),r.call(this,this.currentOption)},onOptionSelected:function(){this.play.selected&&this.reverse(),this.edit.selected&&(n.isKeyDown(n.P)&&n.isKeyDown(n.O)&&n.isKeyDown(n.I)?this.execute(this.EDIT,!0):this.execute(this.EDIT,!1)),this.custom&&this.custom.selected&&this.reverse(),this.execute("select")},recycle:function(){this._super(),n.removeKeyDown(n.GAME_UP,this,this.onUpPress),n.removeKeyDown(n.GAME_DOWN,this,this.onDownPress),n.removeKeyDown(n.GAME_BUTTON_1,this,this.onOptionSelected),this.tl.kill(),this.tl=null,this.fly=null,this.shoot=null,this.play=null,this.edit=null,this.custom=null}}),r=function(e){s.call(this);var t=this[this.options[e]],i=t.findChildren().allWithType("MarkerArrow");t.selected=!0;for(var n=0;n<i.length;n++)i[n].show()},s=function(){for(var e=0;e<this.options.length;e++){var t=this[this.options[e]];t.selected=!1;for(var i=t.findChildren().allWithType("MarkerArrow"),n=0;n<i.length;n++)i[n].hide()}};return Object.defineProperty(o.prototype,"ENTER",{get:function(){return"enter"}}),Object.defineProperty(o.prototype,"PLAY",{get:function(){return"play"}}),Object.defineProperty(o.prototype,"CUSTOM",{get:function(){return"custom"}}),Object.defineProperty(o.prototype,"EDIT",{get:function(){return"edit"}}),o}),define("splash-bundle",["require","common-bundle","bundle","arrow-renderer","splash-title-animation"],function(e){var t=e("common-bundle"),i=e("bundle").extend({create:function(){this.componentPool.createPool("MarkerArrowRenderer",e("arrow-renderer")),this.gameObjectPool.createDynamicPool("Title",e("splash-title-animation")),this.componentPool.createConfiguration("TextRenderer",t.getTextRendererPoolId()),this.componentPool.createConfiguration("ArrowRenderer","ArrowRenderer"),this.componentPool.createConfiguration("MarkerArrowRenderer","MarkerArrowRenderer"),this.gameObjectPool.createConfiguration("MarkerArrow",t.getGameObjectPoolId()).setRenderer("MarkerArrowRenderer"),this.gameObjectPool.createConfiguration("Fly",t.getGameObjectPoolId()).setRenderer("TextRenderer",{name:"splash-line-1",text:"Enter the ...",fillColor:"none",strokeColor:"#FFFFFF",font:"Russo One",padding:3,size:30}),this.gameObjectPool.createConfiguration("Shoot",t.getGameObjectPoolId()).setRenderer("TextRenderer",{name:"splash-line-2",fillColor:"none",strokeColor:"#FFFFFF",text:"Space Maze",font:"Russo One",offset:"center",size:120}),this.gameObjectPool.createConfiguration("Controls_1",t.getGameObjectPoolId()).setRenderer("TextRenderer",{name:"splash-controls-1",fillColor:"none",strokeColor:"#ec751e",text:'Press "← ↑ → ↓" to Move',font:"Russo One",offset:"center",size:25}),this.gameObjectPool.createConfiguration("Controls_2",t.getGameObjectPoolId()).setRenderer("TextRenderer",{name:"splash-controls-2",fillColor:"none",strokeColor:"#ec751e",text:'Press "A" to Shoot',font:"Russo One",offset:"center",size:25}),this.gameObjectPool.createConfiguration("Play",t.getGameObjectContainerPoolId()).addChild("MarkerArrow",{rotation:90,x:200,y:0}).addChild("MarkerArrow",{rotation:270,x:-200,y:0}).setRenderer("TextRenderer",{name:"play-button",fillColor:"none",strokeColor:"#FFFFFF",text:"Enter the Maze",font:"Russo One",padding:5,size:45,offset:"center"}),this.gameObjectPool.createConfiguration("Edit",t.getGameObjectContainerPoolId()).addChild("MarkerArrow",{rotation:90,x:200,y:0}).addChild("MarkerArrow",{rotation:270,x:-200,y:0}).setRenderer("TextRenderer",{name:"edit-button",fillColor:"none",strokeColor:"#FFFFFF",text:"Make a Maze",font:"Russo One",padding:5,size:45,offset:"center"}),this.gameObjectPool.createConfiguration("PlayCustom",t.getGameObjectContainerPoolId()).addChild("MarkerArrow",{rotation:90,x:200,y:0}).addChild("MarkerArrow",{rotation:270,x:-200,y:0}).setRenderer("TextRenderer",{name:"play-custom-button",fillColor:"none",strokeColor:"#FFFFFF",text:"Custom Mazes",font:"Russo One",padding:5,size:45,offset:"center"}),this.gameObjectPool.createConfiguration("Title","Title").addComponent("OptionHighlight").addComponent("OptionSelect")}});return new i}),define("sound-bundle",["require","common-bundle","bundle"],function(e){var t=e("common-bundle"),i=e("bundle").extend({create:function(){this.componentPool.createConfiguration("CannonExplosion1",t.getSoundComponentPoolId()).args({soundId:"EXPLOSION_1",parentEvent:"damage",playMode:"single"}),this.componentPool.createConfiguration("EnemyShipExplosion1",t.getSoundComponentPoolId()).args({soundId:"EXPLOSION_3",parentEvent:"destroyed",playMode:"single"}),this.componentPool.createConfiguration("EnemyShipExplosion2",t.getSoundComponentPoolId()).args({soundId:"EXPLOSION_4",parentEvent:"destroyed",playMode:"single"}),this.componentPool.createConfiguration("EnemyShipExplosion3",t.getSoundComponentPoolId()).args({soundId:"EXPLOSION_5",parentEvent:"destroyed",playMode:"single"}),this.componentPool.createConfiguration("SpiderExplosion1",t.getSoundComponentPoolId()).args({soundId:"BUG",parentEvent:"destroyed",playMode:"single"}),this.componentPool.createConfiguration("GeneratorExplosion1",t.getSoundComponentPoolId()).args({soundId:"EXPLOSION_2",parentEvent:"destroyed",playMode:"single"}),this.componentPool.createConfiguration("GeneratorExplosion2",t.getSoundComponentPoolId()).args({soundId:"EXPLOSION_2",parentEvent:"damaged",playMode:"single"}),this.componentPool.createConfiguration("GeneratorExplosion3",t.getSoundComponentPoolId()).args({soundId:"EXPLOSION_2",parentEvent:"damage",playMode:"single"}),this.componentPool.createConfiguration("PowerUp1",t.getSoundComponentPoolId()).args({soundId:"POWER_UP",parentEvent:"pick-up",playMode:"single"}),this.componentPool.createConfiguration("MissileLaunch1",t.getSoundComponentPoolId()).args({soundId:"SMALL_LAUNCH",parentEvent:"launch",playMode:"single"}),this.componentPool.createConfiguration("MissileExplosion1",t.getSoundComponentPoolId()).args({soundId:"EXPLOSION_6",parentEvent:"destroyed",playMode:"single"}),this.componentPool.createConfiguration("BossStartExplosion",t.getSoundComponentPoolId()).args({soundId:"EXPLOSION_5",parentEvent:"destroyed",playMode:"single"}),this.componentPool.createConfiguration("BossEndExplosion",t.getSoundComponentPoolId()).args({soundId:"EXPLOSION_2",parentEvent:"stop_creation",playMode:"single"}),this.componentPool.createConfiguration("BossSmallExplosion",t.getSoundComponentPoolId()).args({soundId:"EXPLOSION_7",parentEvent:"spray",playMode:"single"}),this.componentPool.createConfiguration("Boss2Mines",t.getSoundComponentPoolId()).args({soundId:"BLOOP",parentEvent:"mine-attack",playMode:"single"}),this.componentPool.createConfiguration("Boss2Open",t.getSoundComponentPoolId()).args({soundId:"OPEN_HATCH",parentEvent:"opening",playMode:"single"}),this.componentPool.createConfiguration("Boss2Close",t.getSoundComponentPoolId()).args({soundId:"OPEN_HATCH",parentEvent:"closing",playMode:"single"}),this.componentPool.createConfiguration("Boss4Move",t.getSoundComponentPoolId()).args({soundId:"LARGE_BUG",parentEvent:"move",playMode:"single"}),this.componentPool.createConfiguration("ShotSound",t.getSoundComponentPoolId()).args({soundId:"PLAYER_SHOT",parentEvent:"shot",playMode:"single"}),this.componentPool.createConfiguration("PlayerBulletHit",t.getSoundComponentPoolId()).args({soundId:"HIT",parentEvent:"hit",playMode:"single"}),this.componentPool.createConfiguration("PlayerBulletDeflect",t.getSoundComponentPoolId()).args({soundId:"DEFLECT",parentEvent:"deflect",playMode:"single"}),this.componentPool.createConfiguration("PlayerDamage",t.getSoundComponentPoolId()).args({soundId:"PLAYER_DAMAGE",parentEvent:"damage",playMode:"single"}),this.componentPool.createConfiguration("PlayerSmallExplosion",t.getSoundComponentPoolId()).args({soundId:"EXPLOSION_1",parentEvent:"spray",playMode:"single"}),this.componentPool.createConfiguration("PlayerDestroyed",t.getSoundComponentPoolId()).args({soundId:"PLAYER_DAMAGE",parentEvent:"destroyed",playMode:"single"}),this.componentPool.createConfiguration("OptionHighlight",t.getSoundComponentPoolId()).args({soundId:"SELECT",parentEvent:"option",playMode:"single"}),this.componentPool.createConfiguration("OptionSelect",t.getSoundComponentPoolId()).args({soundId:"OK",parentEvent:"select",playMode:"single"}),this.componentPool.createConfiguration("OptionBack",t.getSoundComponentPoolId()).args({soundId:"BACK",parentEvent:"back",playMode:"single"}),this.componentPool.createConfiguration("WarningSound",t.getSoundComponentPoolId()).args({soundId:"WARNING",parentEvent:"warning",playMode:"single"}),this.componentPool.createConfiguration("WinSound",t.getSoundComponentPoolId()).args({soundId:"WIN",parentEvent:"pick-up",playMode:"single"})}});return new i}),define("center-canvas",["gb","extension"],function(e,t){var i=t.extend({type:function(){return e.game.CREATE},execute:function(){this.container=e.game.mainContainer,this.canvas=e.game.canvas;var t=window.getComputedStyle(this.container,null),i=window.getComputedStyle(this.canvas,null);this.initContainerTop=t.getPropertyValue("top"),this.initContainerLeft=t.getPropertyValue("left"),this.initContainerMarginTop=t.getPropertyValue("margin-top"),this.initContainerMarginLeft=t.getPropertyValue("margin-left"),this.initContainerPosition=t.getPropertyValue("position"),this.initCanvasPaddingLeft=i.getPropertyValue("padding-left"),this.initCanvasPaddingRight=i.getPropertyValue("padding-right"),this.initCanvasMarginLeft=i.getPropertyValue("margin-left"),this.initCanvasMarginRight=i.getPropertyValue("margin-right"),this.container.style.top="50%",this.container.style.left="50%",this.container.style.marginLeft="-"+e.game.canvas.width/2+"px",this.container.style.marginTop="-"+e.game.canvas.height/2+"px",this.container.style.position="fixed",this.canvas.style.paddingLeft=0,this.canvas.style.paddingRight=0,this.canvas.style.marginLeft="auto",this.canvas.style.marginRight="auto",window.addEventListener("resize",this.resizeListener,!1)},destroy:function(){this.container.style.top=this.initContainerTop,this.container.style.left=this.initContainerLeft,this.container.style.marginTop=this.initContainerMarginTop,this.container.style.marginLeft=this.initContainerMarginLeft,this.container.style.position=this.initContainerPosition,this.canvas.style.paddingLeft=this.initCanvasPaddingLeft,this.canvas.style.paddingRight=this.initCanvasPaddingRight,this.canvas.style.marginLeft=this.initCanvasMarginLeft,this.canvas.style.marginRight=this.initCanvasMarginRight,delete this.container,delete this.canvas,delete this.initContainerTop,delete this.initContainerLeft,delete this.initContainerMarginTop,delete this.initContainerMarginLeft,delete this.initContainerPosition,delete this.initCanvasPaddingLeft,delete this.initCanvasPaddingRight,delete this.initCanvasMarginLeft,delete this.initCanvasMarginRight,delete this.resizeListener}});return i}),define("activity-display",["require","gb","util","game-object-pool","component-pool","json-cache","image-cache","path-cache","text-cache","sound-player","timer-factory","extension"],function(e){var t,i=e("gb"),n=(e("util"),e("game-object-pool")),o=e("component-pool"),r=e("json-cache"),s=e("image-cache"),a=e("path-cache"),l=e("text-cache"),h=e("sound-player"),c=e("timer-factory"),d=[],u=function(e,t,i,n){return{object:e,listener:t,trigger:i,events:n}},p=function(e,t){var i=document.createElement("div");i.setAttribute("id",e),i.style.fontSize="small",i.style.color="#fff",i.style.margin="1px",i.style.padding="1px",i.style.fontVariant="small-caps",t.appendChild(i)},f=function(e){var n=5,o=i.canvas.clientTop+i.canvas.clientHeight-e.clientHeight-5;t.style.top=o+"px",t.style.left=n+"px"},g=function(e,t,i){return function(){var n=document.getElementById(i),o=e+" => ",r=[t.getTotalActiveObjectsCount(),t.getTotalPooledObjectsCount()];n.innerText=o+r.join(" / ")}},m=function(e,t,i){return function(){var n=document.getElementById(i),o=e+" => ",r=t.getTotalCount();n.innerText=o+r}},y=function(){var e=document.getElementById("soundPlayerDisplay"),t="Sound Player => ",i=[h.getPooledCount(),h.getActiveCount(),h.getAssignedCount(),h.getPooledCount()+h.getActiveCount()+h.getAssignedCount()];e.innerText=t+i.join("/")},b=function(){var e=document.getElementById("timerFactoryDisplay"),t="Timer Factory => ",i=[c.getRunningCount(),c.getPausedCount(),c.getStoppedCount(),c.getTotalCount()];e.innerText=t+i.join("/")},v=function(){var e=5+i.game.mainContainer.scrollLeft,n=i.canvas.clientTop+i.canvas.clientHeight-t.clientHeight-5+i.game.mainContainer.scrollTop;t.style.top=n+"px",t.style.left=e+"px"};d.push(u(n,g("Game Object Pool",n,"goPoolDisplay"),"init",["INIT","GET","RETURN","CLEAR","CLEAR_OBJECTS","CLEAR_CONFIGURATION","CLEAR_CONFIGURATIONS"])),d.push(u(o,g("Component Pool",o,"coPoolDisplay"),"init",["INIT","GET","RETURN","CLEAR","CLEAR_OBJECTS","CLEAR_CONFIGURATION","CLEAR_CONFIGURATIONS"])),d.push(u(r,m("Json Cache",r,"jsonCacheDisplay"),"cache",["CACHE","CLEAR","CLEAR_ALL"])),d.push(u(s,m("Image Cache",s,"imageCacheDisplay"),"cache",["CACHE","CLEAR","CLEAR_ALL"])),d.push(u(a,m("Path Cache",a,"pathCacheDisplay"),"cache",["CACHE","CLEAR","CLEAR_ALL"])),d.push(u(l,m("Text Cache",l,"textCacheDisplay"),"cache",["CACHE","CLEAR","CLEAR_ALL"])),d.push(u(h,y,"play_single",["ON_LOAD_ALL_COMPLETE","ON_LOAD_COMPLETE","CHANNELS_ASSIGN","CHANNELS_REVOKE","SINGLE_COMPLETE","PLAY_SINGLE","PLAY_LOOP","PAUSE","RESUME","STOP"])),d.push(u(c,b,"create",["CREATE","REMOVE","COMPLETE","REPEATE","START","PAUSE","RESUME","RESET","STOP"]));var C=e("extension").extend({init:function(){},type:function(){return i.game.CREATE
},execute:function(e){var n=!1;e&&(n=e.hide||!1),t=document.createElement("div"),t.id="activity-display",t.style.pointerEvents="none",t.style.whiteSpace="nowrap";var o=document.createElement("div");o.id="activity-display-info-container";var r=document.createElement("button");r.id="activity-display-button",r.innerText="Show Info",r.style.visibility=n?"hidden":"visible",r.addEventListener("click",function(){"Show Info"==this.innerText?(this.innerText="Hide Info",o.style.display="block"):(this.innerText="Show Info",o.style.display="none"),f(t)}),p("goPoolDisplay",o),p("coPoolDisplay",o),p("jsonCacheDisplay",o),p("imageCacheDisplay",o),p("pathCacheDisplay",o),p("textCacheDisplay",o),p("soundPlayerDisplay",o),p("timerFactoryDisplay",o),t.appendChild(r),t.appendChild(o),o.style.display="none",t.style.position="absolute",i.game.mainContainer.appendChild(t),f(t);for(var s=0;s<d.length;s++){for(var a=d[s],l=a.events,h=0;h<l.length;h++)a.object.single(a.object[l[h]],this,a.listener,"activity-display");a.object.execute(a.trigger)}},destroy:function(){i.game.mainContainer.removeEventListener("scroll",v),i.game.mainContainer.removeChild(t),n.levelCleanUp("activity-display"),o.levelCleanUp("activity-display"),r.levelCleanUp("activity-display"),s.levelCleanUp("activity-display"),a.levelCleanUp("activity-display"),l.levelCleanUp("activity-display"),h.levelCleanUp("activity-display"),c.levelCleanUp("activity-display")},toggle:function(){var e=document.getElementById("activity-display-info-container");"block"==e.style.display?(e.style.display="none",i.game.mainContainer.removeEventListener("scroll",v)):(e.style.display="block",i.game.mainContainer.addEventListener("scroll",v)),v()}});return C}),define("logger",["require","gb","extension"],function(e){var t=e("gb"),i=document.createElement("div"),n=0,o=null,r=function(){var e=5+t.game.mainContainer.scrollLeft,n=t.canvas.clientTop+5+t.game.mainContainer.scrollTop;i.style.top=n+"px",i.style.left=e+"px"},s=e("extension").extend({init:function(){},type:function(){return t.game.CREATE},execute:function(e){var r=!1;n=0,e&&(r=e.hide||!1),i.id="logger",i.style.position="absolute",i.style.top=(t.canvas.clientTop+5).toString()+"px",i.style.left="5px",i.style.pointerEvents="none",i.style.whiteSpace="nowrap";var s=document.createElement("div");s.id="logger-info-container",s.style.display="none",i.appendChild(s),t.game.mainContainer.appendChild(i),o=this},destroy:function(){t.game.mainContainer.removeChild(i)},toggle:function(){"block"==document.getElementById("logger-info-container").style.display?this.hide(!0):this.show(!0)},show:function(e){e=!e,n++,1===n&&(document.getElementById("logger-info-container").style.display="block",t.game.mainContainer.addEventListener("scroll",r),e&&o.onShow()),r()},hide:function(e){e=!e,n--,0>n&&(n=0),"none"!==document.getElementById("logger-info-container").style.display&&0===n&&(document.getElementById("logger-info-container").style.display="none",t.game.mainContainer.removeEventListener("scroll",r),e&&o.onHide())},success:function(e){var t=document.getElementById("logger-info-container"),i=document.createElement("div"),n=document.createElement("span");i.style.color="#00FF00",i.innerHTML=" "+e,$(n).addClass("glyphicon glyphicon-ok-sign"),$(i).prepend(n),$(t).prepend(i),$(t).children().length>5&&$(t).children().last().remove()},info:function(e){var t=document.getElementById("logger-info-container"),i=document.createElement("div"),n=document.createElement("span");i.style.color="#FFFF00",i.innerHTML=" "+e,$(n).addClass("glyphicon glyphicon-info-sign"),$(i).prepend(n),$(t).prepend(i),$(t).children().length>5&&$(t).children().last().remove()},error:function(e){var t=document.getElementById("logger-info-container"),i=document.createElement("div"),n=document.createElement("span");i.style.color="#FF0000",i.innerHTML=" "+e,$(n).addClass("glyphicon glyphicon-remove-sign"),$(i).prepend(n),$(t).prepend(i),$(t).children().length>5&&$(t).children().last().remove()},onShow:function(){},onHide:function(){}});return s}),define("mouse-events",["extension","viewports","sat","vector-2D","gb","game-object","delegate","matrix-3x3"],function(e,t,i,n,o,r,s){var a=new n,l=new n,h=new n,c=new n,d={},u={},p={},f=null,g=new i.FixedSizePolygon(new n,[new n,new n,new n,new n]),m=new n,y=(new n,s.extend({init:function(){this._super()}}));Object.defineProperty(y.prototype,"NOTHING_CLICKED_ON_CANVAS",{get:function(){return"nothing_clicked_on_canvas"}}),Object.defineProperty(y.prototype,"CLICKED_OUTSIDE_CANVAS",{get:function(){return"clicked_outside_canvas"}}),Object.defineProperty(y.prototype,"CANVAS_CONTEXT_MENU",{get:function(){return"canvas_context_menu"}}),Object.defineProperty(y.prototype,"GAME_OBJECT_CONTEXT_MENU",{get:function(){return"game_object_context_menu"}});var b,v,C,w,P=e.extend({init:function(){this.onContextMenu=null,this.onMouseDown=null,this.onMouseUp=null,this.onMouseOut=null,this.documentMouseUp=null},type:function(){return o.game.CREATE},execute:function(){var e=null;this.onContextMenu=function(t){t.preventDefault(),e?(e.go.execute(e.go.CONTEXT_MENU,e),o.Mouse.execute(o.Mouse.GAME_OBJECT_CONTEXT_MENU,e.go),T(t,e),e=null):o.Mouse.execute(o.Mouse.CANVAS_CONTEXT_MENU,t)},this.onMouseDown=function(t){var i=M(t);i&&(e=i,i.go.execute(i.go.MOUSE_DOWN,i),O(t,i,function(t,i){T(t,i),e=null}))},this.onMouseUp=function(t){var i=M(t);i&&e?(i.go.execute(i.go.MOUSE_UP,i),_(i,e)&&i.go.execute(i.go.CLICK,i)):o.Mouse.execute(o.Mouse.NOTHING_CLICKED_ON_CANVAS,t),T(t,e),2!=t.button&&(e=null)},this.onMouseOut=function(t){T(t,e),e=null},this.documentMouseUp=function(e){if(e.target!==o.canvas){R(e);var t=o.canvas.getBoundingClientRect();(C<t.left||C>t.right||w<t.top||w>t.bottom)&&o.Mouse.execute(o.Mouse.CLICKED_OUTSIDE_CANVAS,e)}},o.canvas.addEventListener("contextmenu",this.onContextMenu),o.canvas.addEventListener("mousedown",this.onMouseDown,!1),o.canvas.addEventListener("mouseup",this.onMouseUp,!1),o.canvas.addEventListener("mouseout",this.onMouseOut),document.body.addEventListener("mouseup",this.documentMouseUp),o.Mouse=new y},destroy:function(){o.canvas.removeEventListener("contextmenu",this.onContextMenu),o.canvas.removeEventListener("mousedown",this.onMouseDown),o.canvas.removeEventListener("mouseup",this.onMouseUp),o.canvas.removeEventListener("mouseout",this.onMouseOut),document.body.removeEventListener("mouseup",this.documentMouseUp),this.onContextMenu=null,this.onMouseDown=null,this.onMouseUp=null,this.onMouseOut=null,this.documentMouseUp=null,o.Mouse=null,delete this.onContextMenu,delete this.onMouseDown,delete this.onMouseUp,delete this.onMouseOut,delete this.documentMouseUp,delete o.Mouse}}),_=function(e,t){return e.go===t.go&&e.viewport===t.viewport},x=[],O=function(e,t,i){if(t.go.Dragable){var n=I(e,t,i);o.canvas.addEventListener("mousemove",n),t.go.execute(t.go.MOUSE_DRAG_START,t),x.push(n)}},T=function(e,t){if(t&&t.go.execute(t.go.MOUSE_DRAG_END,t),x.length>0)for(;x.length;)o.canvas.removeEventListener("mousemove",x.pop())},E={},S=function(e,t,i,n){var o=e.decompose(p).rotation*n*(Math.PI/180),r=Math.cos(o),s=Math.sin(o);return E.x=t*r-i*s,E.y=t*s+i*r,E},I=function(e,t,i){var n,o;t.go.isIndependantWhenDragging?(n=t.go.X,o=t.go.Y):(E=S(t.go.parent.getMatrix(),t.go.X,t.go.Y,1),n=E.x,o=E.y);var r,s,a=e.pageX,l=e.pageY,h=0,c=0;return function(e){if(A(e),t.viewport.MouseBounded&&!t.viewport.isPointInside(b,v))return void i(e,t);if(t.go.isIndependantWhenDragging)r=e.pageX-a,s=e.pageY-l;else{var d=t.go.parent.matrix.decompose(p);r=(e.pageX-a)/d.scaleX,s=(e.pageY-l)/d.scaleY}a=e.pageX,l=e.pageY,h+=r,c+=s,t.go.isIndependantWhenDragging?(t.go.x=n+h/t.viewport.ScaleX,t.go.y=o+c/t.viewport.ScaleY):(E=S(t.go.parent.getMatrix(),n+h/t.viewport.ScaleX,o+c/t.viewport.ScaleY,-1),t.go.x=E.x,t.go.y=E.y),t.go.execute(t.go.MOUSE_DRAG,t)}},A=function(e){R(e);var t=e.target.getBoundingClientRect();b=C-t.left,v=w-t.top},R=function(e){e.pageX||e.pageY?(C=e.pageX,w=e.pageY):(e.clientX||e.clientY)&&(C=e.clientX+document.body.scrollLeft+document.documentElement.scrollLeft,w=e.clientY+document.body.scrollTop+document.documentElement.scrollTop)},M=function(e){A(e);for(var i=t.allAsArray(),n=i.length-1;n>=0;n--){var o=i[n];if(o.isVisible()&&o.MouseEnabled&&(!o.MouseBounded||o.isPointInside(b,v))){o.canvasToLocalCoordinates(b,v,m);var r=D.call(o,m);if(r)return{go:r.go,viewport:o,layer:r.layer,localMouseX:b,localMouseY:v,globalMouseX:C,globalMouseY:w}}}},D=function(e){for(var t=this.layers.length-1;t>=0;t--){var i=this.layers[t];if(i.isVisible()){var n=k.call(i,this,e);if(n)return{go:n,layer:i.name}}}return null},k=function(e,t){for(var i,n=this.gameObjects.length-1;n>=0;n--){if(f=this.gameObjects[n],f.isContainer()&&(i=L(t,f,e)))return i;if(f.canDraw&&(i=j(t,f,e)))return i}return null},L=function(e,t,i){var n;if(t.childs)for(var o=t.childs.length-1;o>=0;o--){var r=t.childs[o];if(r.isContainer()&&(n=L(e,r,i)),r.canDraw&&t.getChildOptions(r).draw){if(n)return n;if(n=j(e,r,i))return n}}return null},j=function(e,t,n){return u=t.renderer,u&&B(t)&&t.getViewportVisibility(n.name)&&(d=t.getMatrix(),g.points[0]=d.transformPoint(u.rendererLeft(),u.rendererTop(),a),g.points[1]=d.transformPoint(u.rendererRight(),u.rendererTop(),l),g.points[2]=d.transformPoint(u.rendererRight(),u.rendererBottom(),h),g.points[3]=d.transformPoint(u.rendererLeft(),u.rendererBottom(),c),g.recalc(),i.pointInPolygon(e,g))?t:null},B=function(e){return e.isRegistered(e.CLICK)||e.isRegistered(e.MOUSE_DOWN)||e.isRegistered(e.MOUSE_UP)||e.isRegistered(e.MOUSE_DRAG_START)||e.isRegistered(e.MOUSE_DRAG_END)||e.isRegistered(e.MOUSE_DRAG)};return Object.defineProperty(r.prototype,"CLICK",{get:function(){return"click"}}),Object.defineProperty(r.prototype,"MOUSE_DOWN",{get:function(){return"mousedown"}}),Object.defineProperty(r.prototype,"MOUSE_UP",{get:function(){return"mouseup"}}),Object.defineProperty(r.prototype,"MOUSE_DRAG",{get:function(){return"mousedrag"}}),Object.defineProperty(r.prototype,"MOUSE_DRAG_START",{get:function(){return"mousedragstart"}}),Object.defineProperty(r.prototype,"MOUSE_DRAG_END",{get:function(){return"mousedragend"}}),Object.defineProperty(r.prototype,"CONTEXT_MENU",{get:function(){return"context_menu"}}),Object.defineProperty(r.prototype,"Dragable",{get:function(){return this.dragable||!1},set:function(e){this.dragable=e}}),P}),define("fit-canvas-in-region",["require","gb","extension"],function(e){var t=e("gb"),i=(document.getElementById("main"),e("extension").extend({init:function(){this.onResize=null,this.originalWidth=null,this.originalHeight=null},type:function(){return t.game.CREATE},execute:function(){this.originalWidth=t.game.WIDTH,this.originalHeight=t.game.HEIGHT,this.fit(),window.addEventListener("resize",this.fit,!1)},fit:function(){t.game.WIDTH=t.canvas.parentNode.clientWidth,t.game.HEIGHT=t.canvas.parentNode.clientHeight},destroy:function(){window.removeEventListener("resize",this.fit,!1),t.game.WIDTH=this.originalWidth,t.game.HEIGHT=this.originalHeight,this.originalWidth=null,this.originalHeight=null,delete this.onResize,delete this.originalWidth,delete this.originalHeight}}));return i}),define("mode",["require"],function(){var e="basic";return{setAdvanced:function(){e="advanced"},setBasic:function(){e="basic"},isAdvanced:function(){return"advanced"==e},isBasic:function(){return"basic"==e}}}),define("splash-state",["require","loader-container","canvas-container","state-machine","gb","sound-player","common-bundle","splash-bundle","sound-bundle","center-canvas","activity-display","logger","mouse-events","fit-canvas-in-region","query-string","mode","query-string","mode","mode","mode"],function(e){var t=e("loader-container"),i=e("canvas-container"),n=e("state-machine"),o=e("gb"),r=e("sound-player"),s=o.game;return function(a){var l=n.createState(this,a);l.addStartAction(function(){r.playLoop("INTRO"),o.groups.removeAll(),o.viewports.removeAll(),o.groups.add("First"),o.groups.add("Second");var n=o.viewports.add("Main",o.canvas.width,o.canvas.height,0,0);n.addLayer("Front"),e("common-bundle").create(),e("splash-bundle").create(),e("sound-bundle").create(),s.add_extension(e("center-canvas")),s.remove_extension(e("activity-display")),s.remove_extension(e("logger")),s.remove_extension(e("mouse-events")),s.remove_extension(e("fit-canvas-in-region")),document.getElementById("main-player-container")||(this.mainContainer=document.createElement("div"),this.mainContainer.id="main-player-container",document.body.appendChild(this.mainContainer)),i.detachCanvas(),document.getElementById("main-player-container").appendChild(i.getCanvasContainer()),t.isOpen()?h():(t.once(t.TRANSITION,this,h),t.once(t.OPEN,this,h))}),l.addCompleteAction(function(e){t.remove(t.TRANSITION,this,h),t.remove(t.OPEN,this,h),o.reclaimer.clearAllObjectsFromPools().now(),o.reclaimer.clearAllPools().now(),"edit-mode"===e&&(i.detachCanvas(),$(this.mainContainer).remove())});var h=function(){if(e("query-string").startInEditorBasic())return e("mode").setBasic(),t.once(t.CLOSE,this,function(){r.stop("INTRO"),l.execute(l.NEXT,{nextInitArgs:"edit-mode",lastCompleteArgs:"edit-mode"})}),void t.transition();if(e("query-string").startInEditorAdvanced())return e("mode").setAdvanced(),t.once(t.CLOSE,this,function(){l.execute(l.NEXT,{nextInitArgs:"edit-mode",lastCompleteArgs:"edit-mode"})}),void t.transition();var i=o.create("Title","First",[{viewport:"Main",layer:"Front"}]);i.on(i.PLAY,this,function(){l.execute(l.NEXT,{nextInitArgs:"play-mode",lastCompleteArgs:"play-mode"})}),i.on(i.EDIT,this,function(i){i?e("mode").setAdvanced():e("mode").setBasic(),t.once(t.CLOSE,this,function(){r.stop("INTRO"),l.execute(l.NEXT,{nextInitArgs:"edit-mode",lastCompleteArgs:"edit-mode"})}),t.transition()}),i.on(i.CUSTOM,this,function(){l.execute(l.NEXT,{nextInitArgs:"custom-mode",lastCompleteArgs:"custom-mode"})})};return l}}),define("stage-1",["level-compressor"],function(e){var t=function(){},i="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",n=null;return t.prototype.get=function(){return n||(n=e.decompress(i),i=null),n},t.prototype.name=function(){return"stage-1"},new t}),define("stage-2",["level-compressor"],function(e){var t=function(){},i="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",n=null;
return t.prototype.get=function(){return n||(n=e.decompress(i),i=null),n},t.prototype.name=function(){return"stage-2"},new t}),define("stage-3",["level-compressor"],function(e){var t=function(){},i="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",n=null;return t.prototype.get=function(){return n||(n=e.decompress(i),i=null),n},t.prototype.name=function(){return"stage-3"},new t}),define("stage-4",["level-compressor"],function(e){var t=function(){},i="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",n=null;return t.prototype.get=function(){return n||(n=e.decompress(i),i=null),n},t.prototype.name=function(){return"stage-4"},new t}),define("level-storage",["require","local-storage","util","stage-1","stage-2","stage-3","stage-4","delegate"],function(e){var t=e("local-storage"),i=e("util"),n=[e("stage-1"),e("stage-2"),e("stage-3"),e("stage-4")],o=e("delegate").extend({init:function(){this._super()},getLevelNames:function(){return n.map(function(e){return e.name().toUpperCase()})},getLevel:function(e){return JSON.parse(JSON.stringify(n[e].get()))},getLevelFromName:function(e){for(var t=0;t<n.length;t++){var i=n[t];if(i.name()===e.toLowerCase())return this.getLevel(t)}},completeLevel:function(e){t.completeLevel(this.getLevelName(e))},reset:function(){t.resetCompletedLevels()},isLevelComplete:function(e){return t.isLevelComplete(this.getLevelName(e))},isLevelIndexComplete:function(e){return this.isLevelComplete(this.getLevel(e))},getLowestIncompleteLevel:function(){for(var e=0;e<n.length;e++){var i=n[e].name();if(!t.isLevelComplete(i))return n[e].get()}return n[n.length-1].get()},getLowestIncompleteLevelIndex:function(){for(var e=0;e<n.length;e++){var i=n[e].name();if(!t.isLevelComplete(i))return e}return n.length-1},getLevelName:function(e){return i.isString(e)?JSON.parse(e).name:i.isObject(e)?e.name:void 0}});return new o}),define("gizmo-handle-renderer",["path-renderer","draw"],function(e,t){var i=null,n=e.extend({init:function(){this._super()},start:function(){this.skipCache=!0,this.width=10,this.height=10,this.name="gizmo-handle-renderer",this.offset="center",this._super()},drawPath:function(e,n){e.save(),e.setTransform(1,0,0,1,0,0),n.transformContext(e),i=this.parent.getMatrix(),e.transform(1,0,0,1,i.tx,i.ty),e.translate(-this.rendererOffsetX()+.5,-this.rendererOffsetY()+.5),t.rectangle(e,-10,-10,10,10,null,"#f0ad4e",1),t.rectangle(e,-6,-6,2,2,"#f0ad4e","#f0ad4e",1),e.restore()}});return n}),define("editor-gizmos",["require","gb","util","class","editor-config","gizmo-bundle","editor-config"],function(e){var t=e("gb"),i=e("util"),n=e("class").extend({init:function(){this.gizmoOptions=i.cache(function(){var t=e("editor-config"),i=e("gizmo-bundle"),n=function(e,t){for(var i=[],n=0;n<e.length;n++){var o=e[n];i.push({viewport:o.viewport,layer:t})}return i};return{viewports:{icons:function(e){return n(e,t.getGizmoIconFrontLayerName())},colliderDisplayers:function(e){return n(e,t.getGizmoCollidersBackLayerName())},colliderHandles:function(e){return n(e,t.getGizmoCollidersFrontLayerName())},rotationDisplayers:function(e){return n(e,t.getGizmoRotationBackLayerName())},rotationHandles:function(e){return n(e,t.getGizmoRotationFrontLayerName())},scaleDisplayers:function(e){return n(e,t.getGizmoScaleBackLayerName())},scaleHandles:function(e){return n(e,t.getGizmoScaleFrontLayerName())}},getIconId:function(e){return"scroll-stopper"==e.typeId?i.getScrollStopperId():"boss-warning"==e.typeId?i.getBossWarningId():"direction-right"==e.typeId?i.getRightDirectionId():"direction-up"==e.typeId?i.getUpDirectionId():"direction-left"==e.typeId?i.getLeftDirectionId():"direction-down"==e.typeId?i.getDownDirectionId():"fast-direction-right"==e.typeId?i.getFastRightDirectionId():"fast-direction-up"==e.typeId?i.getFastUpDirectionId():"fast-direction-left"==e.typeId?i.getFastLeftDirectionId():"fast-direction-down"==e.typeId?i.getFastDownDirectionId():"start-position-right"==e.typeId?i.getStartPositionRightId():"start-position-left"==e.typeId?i.getStartPositionLeftId():"start-position-up"==e.typeId?i.getStartPositionUpId():"start-position-down"==e.typeId?i.getStartPositionDownId():void 0},ids:{colliderGizmo:i.getColliderGizmoId(),iconGizmo:i.getIconGizmoId(),rotationGizmo:i.getRotationGizmoId(),scaleGizmo:i.getScaleGizmoId(),circleHandle:i.getCircleHandleId(),circleDisplay:i.getCircleDisplayId(),polygonHandle:i.getPolygonHandleId(),polygonDisplay:i.getPolygonDisplayId(),fixedPolygonHandle:i.getFixedPolygonHandleId(),fixedPolygonDisplay:i.getFixedPolygonDisplayId(),rotationHandle:i.getRotationHandleId(),rotationDisplay:i.getRotationDisplayId(),scaleHandle:i.getScaleHandleId(),scaleDisplay:i.getScaleDisplayId()}}},this)},addScaleGizmo:function(e){var i=this.gizmoOptions(),n=[],o=e.getViewportList(),r=t.addChildTo(e,i.ids.scaleHandle,i.viewports.scaleHandles(o),null,"create"),s=t.addChildTo(e,i.ids.scaleDisplay,i.viewports.scaleDisplayers(o),null,"create");return r.gizmoType="ScaleHandle",s.gizmoType="ScaleDisplay",r.hide(),s.hide(),n.push(r),n.push(s),n},addIconGizmo:function(e){var i=[],n=this.gizmoOptions(),o=e.getViewportList(),r=t.addChildTo(e,n.getIconId(e),n.viewports.icons(o),null,"create");return r.gizmoType="Icon",i.push(r),i},addRotationGizmo:function(e){var i=[],n=this.gizmoOptions(),o=e.getViewportList(),r=t.addChildTo(e,n.ids.rotationHandle,n.viewports.rotationHandles(o),null,"create"),s=t.addChildTo(e,n.ids.rotationDisplay,n.viewports.rotationDisplayers(o),null,"create");return r.gizmoType="RotationHandle",s.gizmoType="RotationDisplay",r.hide(),s.hide(),i.push(r),i.push(s),i},addCircleColliderGizmo:function(e){var i=this.gizmoOptions(),n=e.findComponents().firstWithProp("collider"),o=[],r=e.getViewportList(),s=t.addChildTo(e,i.ids.circleHandle,i.viewports.colliderHandles(r),null,"create"),a=t.addChildTo(e,i.ids.circleDisplay,i.viewports.colliderDisplayers(r),{parentCollider:n},"create");return s.gizmoType="ColliderHandle",a.gizmoType="ColliderDisplay",s.hide(),a.hide(),o.push(s),o.push(a),o},addPolygonColliderGizmo:function(e){for(var i=this.gizmoOptions(),n=e.findComponents().firstWithProp("collider"),o=[],r=e.getViewportList(),s=0;s<n.Points.length;s++){var a=t.addChildTo(e,i.ids.polygonHandle,i.viewports.colliderHandles(r),{pointIndex:s},"create");a.gizmoType="ColliderHandle",a.hide(),o.push(a)}var l=t.addChildTo(e,i.ids.polygonDisplay,i.viewports.colliderDisplayers(r),{parentCollider:n},"create");return l.gizmoType="ColliderDisplay",l.hide(),o.push(l),o},addFixedPolygonColliderGizmo:function(e){for(var i=this.gizmoOptions(),n=e.findComponents().firstWithProp("collider"),o=[],r=e.getViewportList(),s=0;s<n.Points.length;s++){var a=t.addChildTo(e,i.ids.fixedPolygonHandle,i.viewports.colliderHandles(r),{pointIndex:s},"create");a.gizmoType="ColliderHandle",a.hide(),o.push(a)}var l=t.addChildTo(e,i.ids.fixedPolygonDisplay,i.viewports.colliderDisplayers(r),{parentCollider:n},"create");return l.gizmoType="ColliderDisplay",l.hide(),o.push(l),o},addGizmosToViewports:function(e,i,n){for(var o=this.gizmoOptions(),r=0;r<i.length;r++){var e=i[r];"ColliderHandle"==e.gizmoType&&t.addToViewports(e,o.viewports.colliderHandles(n)),"ColliderDisplay"==e.gizmoType&&t.addToViewports(e,o.viewports.colliderDisplayers(n)),"RotationHandle"==e.gizmoType&&t.addToViewports(e,o.viewports.rotationHandles(n)),"RotationDisplay"==e.gizmoType&&t.addToViewports(e,o.viewports.rotationDisplayers(n)),"ScaleHandle"==e.gizmoType&&t.addToViewports(e,o.viewports.scaleHandles(n)),"ScaleDisplay"==e.gizmoType&&t.addToViewports(e,o.viewports.scaleDisplayers(n)),"Icon"==e.gizmoType&&t.addToViewports(e,o.viewports.icons(n))}},removeGizmosFromViewports:function(e,i,n){for(var o=this.gizmoOptions(),r=0;r<i.length;r++){var e=i[r];"ColliderHandle"==e.gizmoType&&t.removeFromViewports(e,o.viewports.colliderHandles(n)),"ColliderDisplay"==e.gizmoType&&t.removeFromViewports(e,o.viewports.colliderDisplayers(n)),"RotationHandle"==e.gizmoType&&t.removeFromViewports(e,o.viewports.rotationHandles(n)),"RotationDisplay"==e.gizmoType&&t.removeFromViewports(e,o.viewports.rotationDisplayers(n)),"ScaleHandle"==e.gizmoType&&t.removeFromViewports(e,o.viewports.scaleHandles(n)),"ScaleDisplay"==e.gizmoType&&t.removeFromViewports(e,o.viewports.scaleDisplayers(n)),"Icon"==e.gizmoType&&t.removeFromViewports(e,o.viewports.icons(n))}},addGizmos:function(i){var n=this.gizmoOptions();t.goPool.getConfigurationObject(i.typeId).hasMouseSupport()&&(e("editor-config").isEditorGameObject(i.typeId)||i.isContainer()&&(i.findComponents().firstWithProp("collider")&&t.addComponentTo(i,n.ids.colliderGizmo),i.renderer||t.addComponentTo(i,n.ids.iconGizmo),i.renderer&&t.addComponentTo(i,n.ids.rotationGizmo),i.renderer&&t.addComponentTo(i,n.ids.scaleGizmo)))}});return new n}),define("collider-gizmo",["component","gb","collision-resolver","editor-gizmos"],function(e,t,i,n){var o=e.extend({init:function(){this._super(),this.gizmoComponents=null},start:function(){this.gizmoComponents=[];var e=this.getColliderComponent(),t=this.parent;e.colliderType==i.circleCollider&&(this.gizmoComponents=this.gizmoComponents.concat(n.addCircleColliderGizmo(t))),e.colliderType==i.polygonCollider&&(this.gizmoComponents=this.gizmoComponents.concat(n.addPolygonColliderGizmo(t))),e.colliderType==i.fixedPolygonCollider&&(this.gizmoComponents=this.gizmoComponents.concat(n.addFixedPolygonColliderGizmo(t))),t.on(t.ADD_TO_VIEWPORT,this,function(e){n.addGizmosToViewports(t,this.gizmoComponents,e)},!1,!1,!1,"collider-gizmo"),t.on(t.REMOVE_FROM_VIEWPORT,this,function(e){n.removeGizmosFromViewports(t,this.gizmoComponents,e)},!1,!1,!1,"collider-gizmo")},applyChanges:function(e){var t=this.getColliderComponent();t.colliderType==i.circleCollider&&(t.Radius=e),t.colliderType==i.polygonCollider&&(t.Points=e),t.colliderType==i.fixedPolygonCollider&&(t.Points=e)},getChanges:function(){var e=this.getColliderComponent();return e.colliderType==i.circleCollider?e.Radius:e.colliderType==i.polygonCollider?e.Points:e.colliderType==i.fixedPolygonCollider?e.Points:void 0},getColliderComponent:function(){return this.parent.findComponents().firstWithProp("collider")},recycle:function(e){for(e.levelCleanUp("collider-gizmo");this.gizmoComponents.length;)t.reclaimer.claim(this.gizmoComponents.pop());this.gizmoComponents=null}});return o}),define("circle-collider-renderer",["path-renderer","draw","vector-2D"],function(e,t,i){var n=new i,o=e.extend({init:function(){this._super()},start:function(){this.skipCache=!0,this.name="circle-collider-renderer",this.offset="center",this._super()},drawPath:function(e,i){e.save(),e.setTransform(1,0,0,1,0,0),i.transformContext(e),n=this.parent.matrix.transformPoint(0,0,n),t.circle(e,n.x,n.y,this.parent.parentCollider.Radius,null,"#00FF00",2),e.restore()},rendererWidth:function(){return 2*this.parent.parentCollider.Radius},rendererHeight:function(){return 2*this.parent.parentCollider.Radius}});return o}),define("polygon-collider-renderer",["path-renderer","draw"],function(e,t){var i=null,n=e.extend({init:function(){this._super()},start:function(){this.skipCache=!0,this.name="polygon-collider-renderer",this._super()},drawPath:function(e,n){e.save(),e.setTransform(1,0,0,1,0,0),n.transformContext(e),i=this.parent.getMatrix(),e.transform(i.a,i.b,i.c,i.d,i.tx,i.ty),t.polygon(e,0,0,this.parent.parentCollider.Points,null,"#00FF00",2/this.parent.scaleX),e.restore()},rendererWidth:function(){return r(this.parent.parentCollider.Points,"width")},rendererHeight:function(){return r(this.parent.parentCollider.Points,"height")},rendererOffsetX:function(){return o(this.parent.parentCollider.Points,"x")},rendererOffsetY:function(){return o(this.parent.parentCollider.Points,"y")}}),o=function(e,t){for(var i=e[0][t],n=e[0][t],o=1;o<e.length;o++)i=Math.min(i,e[o][t]),n=Math.max(n,e[o][t]);return i},r=function(e,t){t="width"==t?"x":"y";for(var i=e[0][t],n=e[0][t],o=1;o<e.length;o++)i=Math.min(i,e[o][t]),n=Math.max(n,e[o][t]);return n-i};return n}),define("fixed-polygon-collider-renderer",["path-renderer","draw","vector-2D"],function(e,t,i){var n=new i,o=e.extend({init:function(){this._super()},start:function(){this.skipCache=!0,this.name="fixed-polygon-collider-renderer",this._super()},drawPath:function(e,i){e.save(),e.setTransform(1,0,0,1,0,0),i.transformContext(e),n=this.parent.matrix.transformPoint(0,0,n),e.translate(n.x,n.y),t.polygon(e,0,0,this.parent.parentCollider.Points,null,"#00FF00",2),e.restore()},rendererWidth:function(){return l(this.parent.parentCollider.Points,"width")
},rendererHeight:function(){return l(this.parent.parentCollider.Points,"height")},rendererOffsetX:function(){return a(this.parent.parentCollider.Points,"x")},rendererOffsetY:function(){return a(this.parent.parentCollider.Points,"y")},debug_draw:function(e,t,i,n){n.rendererDebug&&(e.save(),e.beginPath(),e.strokeStyle=this.debugColor,e.lineWidth=1,s.call(this,e,this.rendererOffsetX(),this.rendererOffsetY(),i,"moveTo"),s.call(this,e,this.rendererOffsetX()+this.rendererWidth(),this.rendererOffsetY(),i,"lineTo"),s.call(this,e,this.rendererOffsetX()+this.rendererWidth(),this.rendererOffsetY()+this.rendererHeight(),i,"lineTo"),s.call(this,e,this.rendererOffsetX(),this.rendererOffsetY()+this.rendererHeight(),i,"lineTo"),e.closePath(),e.stroke(),e.restore())}}),r=null,s=function(e,t,i,n,o){r=this.parent.getMatrix().decompose(r),e.save(),e.translate(r.x,r.y),e[o](t,i),e.restore()},a=function(e,t){for(var i=e[0][t],n=e[0][t],o=1;o<e.length;o++)i=Math.min(i,e[o][t]),n=Math.max(n,e[o][t]);return i},l=function(e,t){t="width"==t?"x":"y";for(var i=e[0][t],n=e[0][t],o=1;o<e.length;o++)i=Math.min(i,e[o][t]),n=Math.max(n,e[o][t]);return n-i};return o}),define("icon-gizmo",["component","gb","editor-gizmos"],function(e,t,i){var n=e.extend({init:function(){this._super(),this.gizmoComponents=null},start:function(){this.gizmoComponents=[];var e=this.parent.renderer,t=this.parent;e||(this.gizmoComponents=this.gizmoComponents.concat(i.addIconGizmo(t)),t.on(t.ADD_TO_VIEWPORT,this,function(e){i.addGizmosToViewports(t,this.gizmoComponents,e)},!1,!1,!1,"icon-gizmo"),t.on(t.REMOVE_FROM_VIEWPORT,this,function(e){i.removeGizmosFromViewports(t,this.gizmoComponents,e)},!1,!1,!1,"icon-gizmo"))},recycle:function(e){for(e.levelCleanUp("icon-gizmo");this.gizmoComponents.length;)t.reclaimer.claim(this.gizmoComponents.pop());this.gizmoComponents=null}});return n}),define("rotation-gizmo",["component","gb","editor-gizmos"],function(e,t,i){var n=e.extend({init:function(){this._super(),this.gizmoComponents=null},start:function(){this.gizmoComponents=[];var e=this.parent.renderer,t=this.parent;e&&(this.gizmoComponents=this.gizmoComponents.concat(i.addRotationGizmo(t)),t.on(t.ADD_TO_VIEWPORT,this,function(e){i.addGizmosToViewports(t,this.gizmoComponents,e)},!1,!1,!1,"rotation-gizmo"),t.on(t.REMOVE_FROM_VIEWPORT,this,function(e){i.removeGizmosFromViewports(t,this.gizmoComponents,e)},!1,!1,!1,"rotation-gizmo"))},recycle:function(e){for(e.levelCleanUp("rotation-gizmo");this.gizmoComponents.length;)t.reclaimer.claim(this.gizmoComponents.pop());this.gizmoComponents=null}});return n}),define("rotation-display-renderer",["path-renderer","draw","vector-2D"],function(e,t,i){var n=null,o={},r=new i,s=e.extend({init:function(){this._super(),this.handle=null},start:function(){this.skipCache=!0,this.name="rotation-display-renderer",this._super(),this.handle=this.parent.parent.findChildren().firstWithType("RotationGizmoHandle")},drawPath:function(e,t){e.save(),e.setTransform(1,0,0,1,0,0),t.transformContext(e),e.beginPath(),e.strokeStyle="#FF0000",e.lineWidth=2,n=this.parent.getMatrix(),o=n.decompose(o),e.moveTo(o.x,o.y),n=this.handle.getMatrix(),o=n.decompose(o),e.lineTo(o.x,o.y),e.stroke(),e.restore()},rendererWidth:function(){return r.distance(this.handle)},rendererHeight:function(){return 2}});return s}),define("scale-gizmo",["component","gb","editor-gizmos"],function(e,t,i){var n=e.extend({init:function(){this._super(),this.gizmoComponents=null},start:function(){this.gizmoComponents=[];var e=this.parent.renderer,t=this.parent;e&&(this.gizmoComponents=this.gizmoComponents.concat(i.addScaleGizmo(t)),t.on(t.ADD_TO_VIEWPORT,this,function(e){i.addGizmosToViewports(t,this.gizmoComponents,e)},!1,!1,!1,"scale-gizmo"),t.on(t.REMOVE_FROM_VIEWPORT,this,function(e){i.removeGizmosFromViewports(t,this.gizmoComponents,e)},!1,!1,!1,"scale-gizmo"))},recycle:function(e){for(e.levelCleanUp("scale-gizmo");this.gizmoComponents.length;)t.reclaimer.claim(this.gizmoComponents.pop());this.gizmoComponents=null}});return n}),define("scale-display-renderer",["path-renderer","draw","vector-2D"],function(e,t,i){var n=null,o={},r=(new i,e.extend({init:function(){this._super()},start:function(){this.skipCache=!0,this.name="scale-display-renderer",this._super(),this.handle=this.parent.parent.findChildren().firstWithType("ScaleGizmoHandle")},drawPath:function(e,t){e.save(),e.setTransform(1,0,0,1,0,0),t.transformContext(e),e.beginPath(),e.strokeStyle="#0000FF",e.lineWidth=2,n=this.parent.getMatrix(),o=n.decompose(o),e.moveTo(o.x,o.y),n=this.handle.getMatrix(),o=n.decompose(o),e.lineTo(o.x,o.y),e.stroke(),e.restore()},rendererWidth:function(){return this.handle.x/this.handle.parent.getMatrix().decompose(o).scaleX},rendererHeight:function(){return this.handle.y/this.handle.parent.getMatrix().decompose(o).scaleY}}));return r}),define("fixed-gizmo-handle",["game-object"],function(e){var t=e.extend({init:function(){this._super(),this.isIndependantWhenDragging=!0},getMatrix:function(){var e=this.parent.getMatrix();return this.matrix.initialize(1,0,0,1,e.tx+this.x,e.ty+this.y),this.matrix}});return t}),define("snap-to-grid-value",["require","class"],function(e){var t=e("class").extend({init:function(){},get:function(){return $("#snap-to-grid-toggle-button").find("input").prop("checked")}});return new t}),define("circle-gizmo-handle",["require","vector-2D","vector-2D","matrix-3x3","fixed-gizmo-handle","editor-config","editor-config","snap-to-grid-value","snap-to-grid-value"],function(e){var t=new(e("vector-2D")),i=new(e("vector-2D")),n=0,o=0,r=0,s=0,a=new(e("matrix-3x3")),l={},h=e("fixed-gizmo-handle").extend({init:function(){this._super()},added:function(){this._super();var h=this.parent.findComponents().firstWithProp("collider");this.x=h.collider.r,this.y=0,this.on(this.MOUSE_DRAG_START,this,function(){r=Number(e("editor-config").getGridCellSize().width.toFixed(2)),s=Number(e("editor-config").getGridCellSize().height.toFixed(2)),e("snap-to-grid-value").get()&&(l=this.parent.getTransform(l,a),n=l.x-l.x%r-l.x,o=l.y-l.y%s-l.y)}),this.on(this.MOUSE_DRAG,this,function(a){e("snap-to-grid-value").get()&&(a.go.x=n+r*Math.floor((n+a.go.X)/r+.5),a.go.y=o+s*Math.floor((o+a.go.Y)/s+.5)),i.x=a.go.x,i.y=a.go.y,h.collider.r=t.distance(i)}),h.on(h.CHANGE_RADIUS,this,function(e){this.x=e,this.y=0})},start:function(){this._super(),this.Dragable=!0}});return h}),define("gizmo-handle",["game-object"],function(e){var t=e.extend({init:function(){this._super()},getMatrix:function(){return this.matrix.initialize(1,0,0,1,this.matrix.tx,this.matrix.ty),this.matrix}});return t}),define("polik",[],function(){var e={};e.convertCoordinates=function(e){var t=[];t.push(e[0].x),t.push(-1*e[0].y);for(var i=e.length-1;i>0;i--)t.push(e[i].x),t.push(-1*e[i].y);return t},e.IsSimple=function(t){var i=t.length>>1;if(4>i)return!0;for(var n=new e._P,o=new e._P,r=new e._P,s=new e._P,a=new e._P,l=0;i>l;l++){n.x=t[2*l],n.y=t[2*l+1],l==i-1?(o.x=t[0],o.y=t[1]):(o.x=t[2*l+2],o.y=t[2*l+3]);for(var h=0;i>h;h++)if(!(Math.abs(l-h)<2||h==i-1&&0==l||l==i-1&&0==h||(r.x=t[2*h],r.y=t[2*h+1],h==i-1?(s.x=t[0],s.y=t[1]):(s.x=t[2*h+2],s.y=t[2*h+3]),null==e._GetLineIntersection(n,o,r,s,a))))return!1}return!0},e.IsConvex=function(t){if(t.length<6)return!0;for(var i=t.length-4,n=0;i>n;n+=2)if(!e._convex(t[n],t[n+1],t[n+2],t[n+3],t[n+4],t[n+5]))return!1;return e._convex(t[i],t[i+1],t[i+2],t[i+3],t[0],t[1])&&e._convex(t[i+2],t[i+3],t[0],t[1],t[2],t[3])?!0:!1},e.GetArea=function(e){if(e.length<6)return 0;for(var t=e.length-2,i=0,n=0;t>n;n+=2)i+=(e[n+2]-e[n])*(e[n+1]+e[n+3]);return i+=(e[0]-e[t])*(e[t+1]+e[1]),.5*-i},e.GetAABB=function(e){for(var t=1/0,i=1/0,n=-t,o=-i,r=0;r<e.length;r+=2)t=Math.min(t,e[r]),n=Math.max(n,e[r]),i=Math.min(i,e[r+1]),o=Math.max(o,e[r+1]);return{x:t,y:i,width:n-t,height:o-i}},e.Reverse=function(e){for(var t=[],i=e.length-2;i>=0;i-=2)t.push(e[i],e[i+1]);return t},e.Triangulate=function(t){var i=t.length>>1;if(3>i)return[];for(var n=[],o=[],r=0;i>r;r++)o.push(r);for(var r=0,s=i;s>3;){var a=o[(r+0)%s],l=o[(r+1)%s],h=o[(r+2)%s],c=t[2*a],d=t[2*a+1],u=t[2*l],p=t[2*l+1],f=t[2*h],g=t[2*h+1],m=!1;if(e._convex(c,d,u,p,f,g)){m=!0;for(var y=0;s>y;y++){var b=o[y];if(b!=a&&b!=l&&b!=h&&e._PointInTriangle(t[2*b],t[2*b+1],c,d,u,p,f,g)){m=!1;break}}}if(m)n.push(a,l,h),o.splice((r+1)%s,1),s--,r=0;else if(r++>3*s)break}return n.push(o[0],o[1],o[2]),n},e.ContainsPoint=function(e,t,i){for(var n,o=e.length>>1,r=e[2*o-3]-i,s=e[2*o-2]-t,a=e[2*o-1]-i,l=0;o>l;l++)n=s,r=a,s=e[2*l]-t,a=e[2*l+1]-i,r!=a&&(lup=a>r);for(var h=0,l=0;o>l;l++)if(n=s,r=a,s=e[2*l]-t,a=e[2*l+1]-i,!(0>r&&0>a||r>0&&a>0||0>n&&0>s)){if(r==a&&Math.min(n,s)<=0)return!0;if(r!=a){var c=n+(s-n)*-r/(a-r);if(0==c)return!0;c>0&&h++,0==r&&lup&&a>r&&h--,0==r&&!lup&&r>a&&h--,lup=a>r}}return 1==(1&h)},e.Slice=function(t,i,n,o,r){if(e.ContainsPoint(t,i,n)||e.ContainsPoint(t,o,r))return[t.slice(0)];for(var s=new e._P(i,n),a=new e._P(o,r),l=[],h=[],c=0;c<t.length;c+=2)h.push(new e._P(t[c],t[c+1]));for(var c=0;c<h.length;c++){var d=new e._P(0,0);d=e._GetLineIntersection(s,a,h[c],h[(c+1)%h.length],d);var u=l[0],p=l[l.length-1];d&&(null==u||e._P.dist(d,u)>1e-10)&&(null==p||e._P.dist(d,p)>1e-10)&&(d.flag=!0,l.push(d),h.splice(c+1,0,d),c++)}if(l.length<2)return[t.slice(0)];var f=function(t,i){return e._P.dist(s,t)-e._P.dist(s,i)};l.sort(f);for(var g=[],m=0;l.length>0;){var y=(h.length,l[0]),b=l[1],v=h.indexOf(y),C=h.indexOf(b),w=!1;if(e._firstWithFlag(h,v)==C?w=!0:(y=l[1],b=l[0],v=h.indexOf(y),C=h.indexOf(b),e._firstWithFlag(h,v)==C&&(w=!0)),w){m--;var P=e._getPoints(h,v,C);g.push(P),h=e._getPoints(h,C,v),y.flag=b.flag=!1,l.splice(0,2),0==l.length&&g.push(h)}else m++,l.reverse();if(m>1)break}for(var _=[],c=0;c<g.length;c++){for(var x=g[c],O=[],T=0;T<x.length;T++)O.push(x[T].x,x[T].y);_.push(O)}return _},e.Raycast=function(t,i,n,o,r,s){var a=t.length-2,l=e._tp,h=l[0],c=l[1],d=l[2],u=l[3],p=l[4];h.x=i,h.y=n,c.x=i+o,c.y=n+r,null==s&&(s={dist:0,edge:0,norm:{x:0,y:0},refl:{x:0,y:0}}),s.dist=1/0;for(var f=0;a>f;f+=2){d.x=t[f],d.y=t[f+1],u.x=t[f+2],u.y=t[f+3];var g=e._RayLineIntersection(h,c,d,u,p);g&&e._updateISC(o,r,h,d,u,p,f/2,s)}d.x=u.x,d.y=u.y,u.x=t[0],u.y=t[1];var g=e._RayLineIntersection(h,c,d,u,p);return g&&e._updateISC(o,r,h,d,u,p,t.length/2-1,s),1/0!=s.dist?s:null},e.ClosestEdge=function(t,i,n,o){{var r=t.length-2,s=e._tp,a=s[0],l=s[2],h=s[3];s[4]}a.x=i,a.y=n,null==o&&(o={dist:0,edge:0,point:{x:0,y:0},norm:{x:0,y:0}}),o.dist=1/0;for(var c=0;r>c;c+=2)l.x=t[c],l.y=t[c+1],h.x=t[c+2],h.y=t[c+3],e._pointLineDist(a,l,h,c>>1,o);l.x=h.x,l.y=h.y,h.x=t[0],h.y=t[1],e._pointLineDist(a,l,h,r>>1,o);var d=1/o.dist;return o.norm.x=(i-o.point.x)*d,o.norm.y=(n-o.point.y)*d,o},e._pointLineDist=function(e,t,i,n,o){var r,s,a=e.x,l=e.y,h=t.x,c=t.y,d=i.x,u=i.y,p=a-h,f=l-c,g=d-h,m=u-c,y=p*g+f*m,b=g*g+m*m,v=y/b;0>v||h==d&&c==u?(r=h,s=c):v>1?(r=d,s=u):(r=h+v*g,s=c+v*m);var C=a-r,w=l-s,P=Math.sqrt(C*C+w*w);P<o.dist&&(o.dist=P,o.edge=n,o.point.x=r,o.point.y=s)},e._updateISC=function(t,i,n,o,r,s,a,l){var h=e._P.dist(n,s);if(h<l.dist){var c=1/e._P.dist(o,r),d=-(r.y-o.y)*c,u=(r.x-o.x)*c,p=2*(t*d+i*u);l.dist=h,l.norm.x=d,l.norm.y=u,l.refl.x=-p*d+t,l.refl.y=-p*u+i,l.edge=a}},e._getPoints=function(e,t,i){var n=e.length,o=[];t>i&&(i+=n);for(var r=t;i>=r;r++)o.push(e[r%n]);return o},e._firstWithFlag=function(e,t){for(var i=e.length;;)if(t=(t+1)%i,e[t].flag)return t},e._PointInTriangle=function(e,t,i,n,o,r,s,a){var l=s-i,h=a-n,c=o-i,d=r-n,u=e-i,p=t-n,f=l*l+h*h,g=l*c+h*d,m=l*u+h*p,y=c*c+d*d,b=c*u+d*p,v=1/(f*y-g*g),C=(y*m-g*b)*v,w=(f*b-g*m)*v;return C>=0&&w>=0&&1>C+w},e._RayLineIntersection=function(t,i,n,o,r){var s=t.x-i.x,a=n.x-o.x,l=t.y-i.y,h=n.y-o.y,c=s*h-l*a;if(0==c)return null;var d=t.x*i.y-t.y*i.x,u=n.x*o.y-n.y*o.x,p=r,f=1/c;return p.x=(d*a-s*u)*f,p.y=(d*h-l*u)*f,e._InRect(p,n,o)?l>0&&p.y>t.y||0>l&&p.y<t.y?null:s>0&&p.x>t.x||0>s&&p.x<t.x?null:p:null},e._GetLineIntersection=function(t,i,n,o,r){var s=t.x-i.x,a=n.x-o.x,l=t.y-i.y,h=n.y-o.y,c=s*h-l*a;if(0==c)return null;var d=t.x*i.y-t.y*i.x,u=n.x*o.y-n.y*o.x,p=r;return p.x=(d*a-s*u)/c,p.y=(d*h-l*u)/c,e._InRect(p,t,i)&&e._InRect(p,n,o)?p:null},e._InRect=function(e,t,i){var n=Math.min(t.x,i.x),o=Math.max(t.x,i.x),r=Math.min(t.y,i.y),s=Math.max(t.y,i.y);return n==o?r<=e.y&&e.y<=s:r==s?n<=e.x&&e.x<=o:n<=e.x+1e-10&&e.x-1e-10<=o&&r<=e.y+1e-10&&e.y-1e-10<=s},e._convex=function(e,t,i,n,o,r){return(t-n)*(o-i)+(i-e)*(r-n)>=0},e._P=function(e,t){this.x=e,this.y=t,this.flag=!1},e._P.prototype.toString=function(){return"Point ["+this.x+", "+this.y+"]"},e._P.dist=function(e,t){var i=t.x-e.x,n=t.y-e.y;return Math.sqrt(i*i+n*n)},e._tp=[];for(var t=0;10>t;t++)e._tp.push(new e._P(0,0));return e}),define("polygon-gizmo-handle",["require","matrix-3x3","gizmo-handle","editor-config","editor-config","snap-to-grid-value","snap-to-grid-value","polik","gb","logger"],function(e){var t=new(e("matrix-3x3")),i={},n=null,o=null,r=null,s=null,a=e("gizmo-handle").extend({init:function(){this._super(),this.pointIndex=null},added:function(){this._super();var a=this.parent.findComponents().firstWithProp("collider");this.x=a.Points[this.pointIndex].x,this.y=a.Points[this.pointIndex].y;var l,h;this.on(this.MOUSE_DRAG_START,this,function(){n=Number(e("editor-config").getGridCellSize().width.toFixed(2)),o=Number(e("editor-config").getGridCellSize().height.toFixed(2)),e("snap-to-grid-value").get()&&(i=this.parent.getTransform(i,t),r=i.x-i.x%n-i.x,s=i.y-i.y%o-i.y),l=a.Points[this.pointIndex].x,h=a.Points[this.pointIndex].y}),this.on(this.MOUSE_DRAG,this,function(t){e("snap-to-grid-value").get()&&(t.go.x=r+n*Math.floor((r+t.go.X)/n+.5),t.go.y=s+o*Math.floor((s+t.go.Y)/o+.5)),a.Points[this.pointIndex].x=t.go.X,a.Points[this.pointIndex].y=t.go.Y}),this.on(this.MOUSE_DRAG_END,this,function(){var t=e("polik"),i=t.convertCoordinates(a.Points);if(!t.IsConvex(i)||!t.IsSimple(i)){a.Points[this.pointIndex].x=l,a.Points[this.pointIndex].y=h,this.x=l,this.y=h;var n=e("gb").game.get_extension(e("logger"));n.error("Collider polygon is not valid"),n.show(),setTimeout(n.hide,3e3)}}),a.on(a.CHANGE_POINTS,this,function(e){this.x=e[this.pointIndex].x,this.y=e[this.pointIndex].y})},start:function(){this._super(),this.Dragable=!0}});return a}),define("fixed-polygon-gizmo-handle",["require","matrix-3x3","fixed-gizmo-handle","editor-config","editor-config","snap-to-grid-value","snap-to-grid-value","polik","gb","logger"],function(e){var t={},i=new(e("matrix-3x3")),n={},o=null,r=null,s=null,a=null,l=e("fixed-gizmo-handle").extend({init:function(){this._super(),this.pointIndex=null},added:function(){this._super();var t=this.parent.findComponents().firstWithProp("collider");h(this.parent,t.Points[this.pointIndex].x,t.Points[this.pointIndex].y,this,-1);var l,c;this.on(this.MOUSE_DRAG_START,this,function(){o=Number(e("editor-config").getGridCellSize().width.toFixed(2)),r=Number(e("editor-config").getGridCellSize().height.toFixed(2)),e("snap-to-grid-value").get()&&(n=this.parent.getTransform(n,i),s=n.x-n.x%o-n.x,a=n.y-n.y%r-n.y),l=t.Points[this.pointIndex].x,c=t.Points[this.pointIndex].y}),this.on(this.MOUSE_DRAG,this,function(i){e("snap-to-grid-value").get()&&(i.go.x=s+o*Math.floor((s+i.go.X)/o+.5),i.go.y=a+r*Math.floor((a+i.go.Y)/r+.5)),t.Points[this.pointIndex].x=i.go.x,t.Points[this.pointIndex].y=i.go.y}),this.on(this.MOUSE_DRAG_END,this,function(){var i=e("polik"),n=i.convertCoordinates(t.Points);if(!i.IsConvex(n)||!i.IsSimple(n)){t.Points[this.pointIndex].x=l,t.Points[this.pointIndex].y=c,this.x=l,this.y=c;var o=e("gb").game.get_extension(e("logger"));o.error("Collider polygon is not valid"),o.show(),setTimeout(o.hide,3e3)}}),t.on(t.CHANGE_POINTS,this,function(e){this.x=e[this.pointIndex].x,this.y=e[this.pointIndex].y})},start:function(){this._super(),this.Dragable=!0}}),h=function(e,i,n,o,r){var s=e.getMatrix().decompose(t).rotation*r*(Math.PI/180),a=Math.cos(s),l=Math.sin(s);o.x=i*a-n*l,o.y=i*l+n*a};return l}),define("ui-component",["require","util","delegate"],function(e){var t=e("util"),i=e("delegate").extend({init:function(){this._super()},cleanUp:function(){this._destroy(!0)},_destroy:function(e){this.destroy(),t.iterateObject(this,function(t,i){e?"callbackList"!==i&&"list"!==i&&"subMenues"!=i&&n(t,i):n(t,i)})},destroy:function(){}}),n=function(e,i){var s=e[i];if("_super"!=i||!t.isFunction(s)){if("callbackList"==i||"list"==i||"subMenues"==i)return void r(e,i);s._destroy&&t.isFunction(s._destroy)&&s._destroy(),!t.isObject(s)||s instanceof jQuery?t.isArray(s)?(t.iterateArray(s,function(e,i,n){(t.isArray(i)||t.isObject(i))&&o(i),e[n]=null}),s.length=0,e[i]=null):r(e,i):(t.iterateObject(s,function(e,t){n(e,t)}),e[i]=null,delete e[i])}},o=function(e){t.iterateObject(e,function(e,t){n(e,t)})},r=function(e,i){e[i]=null,t.isObject(e)&&delete e[i]};return i}),define("wrap-in-div",["require","class"],function(e){var t=e("class").extend({init:function(){},wrap:function(e,t){var i=document.createElement("div");if(t){t.id&&(i.id=t.id);var n=t.className||t.classNames;if(n&&(i.className="[object Array]"===Object.prototype.toString.call(n)?n.join(" "):n),t.style)if("[object String]"===Object.prototype.toString.call(t.style))i.style.cssText=t.style;else{var o=[];for(var r in t.style)o.push(r+": "+t.style[r]);i.style.cssText=o.join(";")}}for(var s=[].concat(e),a=0;a<s.length;a++){var l=s[a];i.appendChild(l.length?s[a][0]:s[a])}return i}});return new t}),define("menu",["require","wrap-in-div","class"],function(e){var t=e("wrap-in-div"),i=e("class").extend({init:function(){},create:function(e){var i=n.call(this,e,function(){return o}),o={subMenues:i.subMenues,parentMenu:null,dynamic:!1,html:t.wrap(i.list,{classNames:["menu","ui-widget"]}),attachStaticToParent:function(e,t){this.dynamic=!1,this.parentMenu=t,this.parentMenu.hideSubMenues(),this.parentMenu.subMenues.push(this),c(e,this.html)},attachDynamicToParent:function(e,t){this.dynamic=!0,this.parentMenu=t,this.parentMenu.hideSubMenues(),this.parentMenu.subMenues.push(this),c(e,this.html)},show:function(e,t){var n=$(this.html);n.parent().length<=0?n.appendTo("body").position({my:"left top",at:"left+"+e+" top+"+t,of:$("body"),collision:"fit"}):this.hideSubMenues(),i.update()},hide:function(){return this.hideSubMenues(),this.dynamic?($(this.html).remove(),this.parentMenu.removeSubMenu(this)):$(this.html).detach(),this.parentMenu},hideSubMenues:function(){if(this.subMenues)for(var e=0;e<this.subMenues.length;e++)this.subMenues[e]&&this.subMenues[e].hide()},hideParentMenu:function(){for(var e=this.parentMenu;e;)e=e.hide()},removeSubMenu:function(e){this.subMenues.splice(this.subMenues.indexOf(e),1)},belongs:function(e){if($(this.html).find(e).length)return!0;if(this.subMenues)for(var t=0;t<this.subMenues.length;t++)if(this.subMenues[t]&&this.subMenues[t].belongs(e))return!0;return!1}};return o}}),n=function(e,t){var i=document.createElement("ul");e.id&&(i.id=e.id),$(i).addClass("ui-widget-content");var n={};return n="[object Function]"==Object.prototype.toString.call(e.options)?o.call(this,e,t):r.call(this,e,t),$(i).append(n.elements),{list:i,subMenues:n.subMenues.filter(function(e){return e}),update:function(){for(var t=0;t<n.elements.length;t++)h(n.elements[t],e.options[t],!0)}}},o=function(e,t){for(var i=[],n=[],o=e.options(),r=0;r<o.length;r++){var h=document.createElement("li"),c=o[r];if(s.call(this,h,c),c.options){var d=l.call(this,h,c,t);n.push(d)}else a.call(this,h,c.click,t);i.push(h)}return{elements:i,subMenues:n}},r=function(e,t){for(var i=[],n=[],o=0;o<e.options.length;o++){var r=document.createElement("li"),h=e.options[o];if(s.call(this,r,h),h.options){var c=l.call(this,r,h,t);n.push(c)}else a.call(this,r,h.click,t);i.push(r)}return{elements:i,subMenues:n}},s=function(e,t){var i=t.icon,n="";"[object String]"===Object.prototype.toString.call(t.name)&&(n=t.name);var o=$(document.createElement("span"));o.addClass("ui-icon"),o.addClass(i),o.css({"float":"left","margin-right":"3px","margin-top":"1px"}),e.innerHTML=n,$(e).append(o),$(e).attr("value",n),$(e).addClass("ui-corner-all"),h(e,t)},a=function(e,t,i){$(e).on("click",function(e){$(this).data("stateDisabled")||(t&&t($(this).attr("value"),e),i().hide(),i().hideParentMenu())})},l=function(e,t,i){var n=$(document.createElement("span"));n.addClass("ui-icon"),n.addClass("ui-icon-triangle-1-e"),n.css({"float":"right","margin-right":"3px","margin-top":"1px"}),$(e).append(n);var o=this;if("[object Function]"==Object.prototype.toString.call(t.options))return $(e).on("click",function(){if(!$(this).data("stateDisabled")){var e=o.create(t);e.attachDynamicToParent(this,i())}}),null;var r=this.create(t);return $(e).on("click",function(){$(this).data("stateDisabled")||r.attachStaticToParent(this,i())}),r},h=function(e,t,i){if(e.style.display="[object Function]"==Object.prototype.toString.call(t.omit)&&t.omit()?"none":"block","[object Function]"==Object.prototype.toString.call(t.name)&&i){var n=t.name();if(n instanceof Promise)n.then(function(t){$(e).attr("value",t);var i=$(e).children();$(e).text(t).append(i)});else{$(e).attr("value",t.name());var o=$(e).children();$(e).text(t.name()).append(o)}}$(e).off("mouseover"),$(e).off("mouseout"),$(e).hasClass("ui-state-default")||$(e).addClass("ui-state-default"),$(e).removeClass("ui-state-disabled");var r;r="[object Function]"==Object.prototype.toString.call(t.disable)?t.disable():t.disable,r?$(e).addClass("ui-state-disabled"):($(e).addClass("ui-state-default"),$(e).on("mouseover",function(){$(this).addClass("ui-state-hover")}),$(e).on("mouseout",function(){$(this).removeClass("ui-state-hover")})),$(e).data("stateDisabled",r)},c=function(e,t){$(t).appendTo("body").position({my:"left top",at:"right+3 top-2",of:e,collision:"fit"})};return i}),define("object-counter",["require","gb","logger","gb","logger","gb","logger","gb","logger"],function(e){var t=0,i=350,n=function(){};return n.prototype.canCreate=function(){return t>=i},n.prototype.count=function(e){i>t&&(t++,e.once(e.RECYCLE,this,function(){t--}))},n.prototype.showErrorFeedback=function(){e("gb").game.get_extension(e("logger")).error("Maximun object limit of "+i+" reached."),e("gb").game.get_extension(e("logger")).show(),setTimeout(e("gb").game.get_extension(e("logger")).hide,3e3)},n.prototype.showSuccessFeedback=function(){e("gb").game.get_extension(e("logger")).success("Game object created successfully! "+this.toString())},n.prototype.toString=function(){return t+" / "+i},new n}),define("control-object-context-menu",["require","gb","ui-component","menu","mode","object-counter","object-counter"],function(e){var t=e("gb"),i=e("ui-component").extend({init:function(){},create:function(){var i=(new(e("menu"))).create({id:"control-object-context-menu",options:[{name:function(){return new Promise(function(t){e(["editor-config"],function(e){t("IconGizmoHandle"===n.go.poolId?e.getControlObjectAliasName(n.go.parent.typeId):e.getControlObjectAliasName(n.go.typeId))})})},icon:"ui-icon-caret-1-e",disable:!0},{name:"Clone",icon:"ui-icon-plusthick",omit:function(){return e("mode").isAdvanced()},click:function(){return e("object-counter").canCreate()?void e("object-counter").showErrorFeedback():void e(["game-object-cloner"],function(e){e.clone(n.go)})}},{name:"Remove",icon:"ui-icon-trash",click:function(){t.reclaimer.mark("AngleDirectionSetter"==n.go.poolId?n.go:"AbsoluteScrollStopper"==n.go.poolId?n.go:"TwoWayDirectionSetter"==n.go.poolId?n.go:"BGMSound"==n.go.poolId?n.go:n.go.parent)}}]}),n={go:null,menu:i,show:function(e){this.go=e.go,this.menu.show(e.globalMouseX,e.globalMouseY),this.removeHideEvents(),this.addHideEvents()},hide:function(){this.go=null,this.menu.hide(),this.removeHideEvents()},belongs:function(e){return this.menu.belongs(e)},addHideEvents:function(){t.Mouse.on(t.Mouse.NOTHING_CLICKED_ON_CANVAS,this,this.hideMenu),t.Mouse.on(t.Mouse.CLICKED_OUTSIDE_CANVAS,this,this.checkBelongsThenHide)},removeHideEvents:function(){t.Mouse.remove(t.Mouse.NOTHING_CLICKED_ON_CANVAS,this,this.hideMenu),t.Mouse.remove(t.Mouse.CLICKED_OUTSIDE_CANVAS,this,this.checkBelongsThenHide)},hideMenu:function(){this.hide()},checkBelongsThenHide:function(e){this.belongs(e.target)||this.hide()}};return n}});return i}),define("icon-gizmo-handle",["require","matrix-3x3","control-object-context-menu","game-object","editor-config","editor-config","snap-to-grid-value","snap-to-grid-value"],function(e){var t={},i=new(e("matrix-3x3")),n=null,o=null,r=null,s=null,a=(new(e("control-object-context-menu"))).create(),l=e("game-object").extend({init:function(){this._super()},added:function(){this._super(),this.on(this.MOUSE_DRAG_START,this,function(){r=e("editor-config").getGridCellSize().width,s=e("editor-config").getGridCellSize().height,e("snap-to-grid-value").get()&&(t=this.getTransform(t,i),n=t.x-t.x%r-t.x,o=t.y-t.y%s-t.y)}),this.on(this.MOUSE_DRAG,this,function(t){e("snap-to-grid-value").get()&&(t.go.x=n+(t.go.X-t.go.X%r),t.go.y=o+(t.go.Y-t.go.Y%s))}),this.on(this.MOUSE_DRAG_END,this,function(){t=this.getTransform(t,i),this.parent.x=t.x,this.parent.y=t.y,this.x=0,this.y=0}),this.on(this.CONTEXT_MENU,this,function(e){a.show(e)})},start:function(){this._super(),this.Dragable=!0}});return l}),define("rotation-gizmo-handle",["require","matrix-3x3","vector-2D","fixed-gizmo-handle","editor-config","editor-config","snap-to-grid-value","snap-to-grid-value"],function(e){var t=null,i=null,n={},o={},r=0,s=0,a=0,l=0,h=new(e("matrix-3x3")),c=new(e("vector-2D")),d=e("fixed-gizmo-handle").extend({init:function(){this._super()},added:function(){this._super(),this.x=50,this.y=0,this.parent.once("setup_complete",this,function(){this.parent.transform(),i=this.parent.getMatrix(i),o=i.decompose(o),this.x=50*Math.cos(o.rotation*(Math.PI/180)),this.y=50*Math.sin(o.rotation*(Math.PI/180))}),this.on(this.MOUSE_DRAG_START,this,function(){a=Number(e("editor-config").getGridCellSize().width.toFixed(2)),l=Number(e("editor-config").getGridCellSize().height.toFixed(2)),e("snap-to-grid-value").get()&&(c=this.parent.getTransform(c,h),r=c.x-c.x%a-c.x,s=c.y-c.y%l-c.y)}),this.on(this.MOUSE_DRAG,this,function(h){e("snap-to-grid-value").get()&&(h.go.x=r+a*Math.floor((r+h.go.X)/a+.5),h.go.y=s+l*Math.floor((s+h.go.Y)/l+.5)),t=this.getMatrix(t),i=this.parent.getMatrix(i),n=t.decompose(n),o=i.decompose(o),this.parent.rotation=Math.atan2(n.y-o.y,n.x-o.x)*(180/Math.PI)})},start:function(){this._super(),this.Dragable=!0}});return d}),define("scale-gizmo-handle",["require","matrix-3x3","util","fixed-gizmo-handle","editor-config","editor-config","snap-to-grid-value","snap-to-grid-value"],function(e){var t=null,i=null,n={},o={},r=0,s=0,a=0,l=0,h=new(e("matrix-3x3")),c={},d=e("util"),u=e("fixed-gizmo-handle").extend({init:function(){this._super()},added:function(){this._super(),this.x=0,this.y=50,this.startDistance=0,this.currentDistance=0,this.startScaleX=0,this.startScaleY=0,this.increment=0,this.on(this.MOUSE_DRAG_START,this,function(){a=Number(e("editor-config").getGridCellSize().width.toFixed(2)),l=Number(e("editor-config").getGridCellSize().height.toFixed(2)),e("snap-to-grid-value").get()&&(c=this.parent.getTransform(c,h),r=c.x-c.x%a-c.x,s=c.y-c.y%l-c.y),t=this.getMatrix(t),i=this.parent.getMatrix(i),n=t.decompose(n),o=i.decompose(o);var d=n.x-o.x,u=n.y-o.y;this.startDistance=Math.round(Math.sqrt(d*d+u*u)),this.startScaleX=this.parent.scaleX,this.startScaleY=this.parent.scaleY}),this.on(this.MOUSE_DRAG,this,function(h){e("snap-to-grid-value").get()&&(h.go.x=r+a*Math.floor((r+h.go.X)/a+.5),h.go.y=s+l*Math.floor((s+h.go.Y)/l+.5)),t=this.getMatrix(t),i=this.parent.getMatrix(i),n=t.decompose(n),o=i.decompose(o);var c=n.x-o.x,u=n.y-o.y;this.currentDistance=Math.round(Math.sqrt(c*c+u*u)),this.increment=this.currentDistance-this.startDistance,this.increment=d.map(this.increment,0,this.startDistance,0,this.startScaleX),this.parent.scaleX=this.startScaleX+this.increment,this.parent.scaleY=this.startScaleY+this.increment})},start:function(){this._super(),this.Dragable=!0}});return u}),define("gizmo-bundle",["require","gb","common-bundle","bundle","gizmo-handle-renderer","collider-gizmo","circle-collider-renderer","polygon-collider-renderer","fixed-polygon-collider-renderer","icon-gizmo","rotation-gizmo","rotation-display-renderer","scale-gizmo","scale-display-renderer","circle-gizmo-handle","polygon-gizmo-handle","fixed-polygon-gizmo-handle","icon-gizmo-handle","rotation-gizmo-handle","scale-gizmo-handle"],function(e){var t=e("gb"),i=e("common-bundle"),n=e("bundle").extend({create:function(){this.componentPool.createPool("gizmo-handle-renderer",e("gizmo-handle-renderer")),this.componentPool.createConfiguration("GizmoHandleRenderer","gizmo-handle-renderer"),this.componentPool.createPool("collider-gizmo",e("collider-gizmo")),this.componentPool.createPool("circle-collider-renderer",e("circle-collider-renderer")),this.componentPool.createPool("polygon-collider-renderer",e("polygon-collider-renderer")),this.componentPool.createPool("fixed-polygon-collider-renderer",e("fixed-polygon-collider-renderer")),this.componentPool.createConfiguration(this.getColliderGizmoId(),"collider-gizmo"),this.componentPool.createConfiguration("CircleGizmoDisplayRenderer","circle-collider-renderer"),this.componentPool.createConfiguration("PolygonGizmoDisplayRenderer","polygon-collider-renderer"),this.componentPool.createConfiguration("FixedPolygonGizmoDisplayRenderer","fixed-polygon-collider-renderer"),this.componentPool.createPool("icon-gizmo",e("icon-gizmo")),this.componentPool.createConfiguration(this.getIconGizmoId(),"icon-gizmo"),this.componentPool.createConfiguration("ScrollStopperGizmoRenderer",i.getBitmapRendererPoolId()).args({path:t.assetMap()["FLAG.PNG"],offset:"center"}),this.componentPool.createConfiguration("BossWarningGizmoRenderer",i.getBitmapRendererPoolId()).args({path:t.assetMap()["WARNING.PNG"],offset:"center"}),this.componentPool.createConfiguration("RightDirectionGizmoRenderer",i.getBitmapRendererPoolId()).args({path:t.assetMap()["RIGHTARROW.PNG"],offset:"center"}),this.componentPool.createConfiguration("LeftDirectionGizmoRenderer",i.getBitmapRendererPoolId()).args({path:t.assetMap()["LEFTARROW.PNG"],offset:"center"}),this.componentPool.createConfiguration("UpDirectionGizmoRenderer",i.getBitmapRendererPoolId()).args({path:t.assetMap()["UPARROW.PNG"],offset:"center"}),this.componentPool.createConfiguration("DownDirectionGizmoRenderer",i.getBitmapRendererPoolId()).args({path:t.assetMap()["DOWNARROW.PNG"],offset:"center"}),this.componentPool.createConfiguration("FastRightDirectionGizmoRenderer",i.getBitmapRendererPoolId()).args({path:t.assetMap()["FASTRIGHTARROW.PNG"],offset:"center"}),this.componentPool.createConfiguration("FastLeftDirectionGizmoRenderer",i.getBitmapRendererPoolId()).args({path:t.assetMap()["FASTLEFTARROW.PNG"],offset:"center"}),this.componentPool.createConfiguration("FastUpDirectionGizmoRenderer",i.getBitmapRendererPoolId()).args({path:t.assetMap()["FASTUPARROW.PNG"],offset:"center"}),this.componentPool.createConfiguration("FastDownDirectionGizmoRenderer",i.getBitmapRendererPoolId()).args({path:t.assetMap()["FASTDOWNARROW.PNG"],offset:"center"}),this.componentPool.createConfiguration("StartPositionGizmoRendererRight",i.getBitmapRendererPoolId()).args({path:t.assetMap()["CHECKEREDFLAGRIGHT.PNG"],offset:"center"}),this.componentPool.createConfiguration("StartPositionGizmoRendererLeft",i.getBitmapRendererPoolId()).args({path:t.assetMap()["CHECKEREDFLAGLEFT.PNG"],offset:"center"}),this.componentPool.createConfiguration("StartPositionGizmoRendererUp",i.getBitmapRendererPoolId()).args({path:t.assetMap()["CHECKEREDFLAGUP.PNG"],offset:"center"}),this.componentPool.createConfiguration("StartPositionGizmoRendererDown",i.getBitmapRendererPoolId()).args({path:t.assetMap()["CHECKEREDFLAGDOWN.PNG"],offset:"center"}),this.componentPool.createPool("rotation-gizmo",e("rotation-gizmo")),this.componentPool.createPool("rotation-display-renderer",e("rotation-display-renderer")),this.componentPool.createConfiguration(this.getRotationGizmoId(),"rotation-gizmo"),this.componentPool.createConfiguration("RotationDisplayRenderer","rotation-display-renderer"),this.componentPool.createPool("scale-gizmo",e("scale-gizmo")),this.componentPool.createPool("scale-display-renderer",e("scale-display-renderer")),this.componentPool.createConfiguration(this.getScaleGizmoId(),"scale-gizmo"),this.componentPool.createConfiguration("ScaleDisplayRenderer","scale-display-renderer"),this.gameObjectPool.createDynamicPool("CircleGizmoHandle",e("circle-gizmo-handle")),this.gameObjectPool.createDynamicPool("PolygonGizmoHandle",e("polygon-gizmo-handle")),this.gameObjectPool.createDynamicPool("FixedPolygonGizmoHandle",e("fixed-polygon-gizmo-handle")),this.gameObjectPool.createDynamicPool("IconGizmoHandle",e("icon-gizmo-handle")),this.gameObjectPool.createDynamicPool("RotationGizmoHandle",e("rotation-gizmo-handle")),this.gameObjectPool.createDynamicPool("ScaleGizmoHandle",e("scale-gizmo-handle")),this.gameObjectPool.createConfiguration("ScrollStopperGizmo","IconGizmoHandle").setRenderer("ScrollStopperGizmoRenderer"),this.gameObjectPool.createConfiguration("BossWarningGizmo","IconGizmoHandle").setRenderer("BossWarningGizmoRenderer"),this.gameObjectPool.createConfiguration("RightDirectionGizmo","IconGizmoHandle").setRenderer("RightDirectionGizmoRenderer"),this.gameObjectPool.createConfiguration("LeftDirectionGizmo","IconGizmoHandle").setRenderer("LeftDirectionGizmoRenderer"),this.gameObjectPool.createConfiguration("UpDirectionGizmo","IconGizmoHandle").setRenderer("UpDirectionGizmoRenderer"),this.gameObjectPool.createConfiguration("DownDirectionGizmo","IconGizmoHandle").setRenderer("DownDirectionGizmoRenderer"),this.gameObjectPool.createConfiguration("FastRightDirectionGizmo","IconGizmoHandle").setRenderer("FastRightDirectionGizmoRenderer"),this.gameObjectPool.createConfiguration("FastLeftDirectionGizmo","IconGizmoHandle").setRenderer("FastLeftDirectionGizmoRenderer"),this.gameObjectPool.createConfiguration("FastUpDirectionGizmo","IconGizmoHandle").setRenderer("FastUpDirectionGizmoRenderer"),this.gameObjectPool.createConfiguration("FastDownDirectionGizmo","IconGizmoHandle").setRenderer("FastDownDirectionGizmoRenderer"),this.gameObjectPool.createConfiguration("StartPositionGizmoRight","IconGizmoHandle").setRenderer("StartPositionGizmoRendererRight"),this.gameObjectPool.createConfiguration("StartPositionGizmoLeft","IconGizmoHandle").setRenderer("StartPositionGizmoRendererLeft"),this.gameObjectPool.createConfiguration("StartPositionGizmoUp","IconGizmoHandle").setRenderer("StartPositionGizmoRendererUp"),this.gameObjectPool.createConfiguration("StartPositionGizmoDown","IconGizmoHandle").setRenderer("StartPositionGizmoRendererDown"),this.gameObjectPool.createConfiguration(this.getCircleHandleId(),"CircleGizmoHandle").args({skipDebug:!0}).setRenderer("GizmoHandleRenderer"),this.gameObjectPool.createConfiguration(this.getPolygonHandleId(),"PolygonGizmoHandle").args({skipDebug:!0}).setRenderer("GizmoHandleRenderer"),this.gameObjectPool.createConfiguration(this.getFixedPolygonHandleId(),"FixedPolygonGizmoHandle").args({skipDebug:!0}).setRenderer("GizmoHandleRenderer"),this.gameObjectPool.createConfiguration(this.getRotationHandleId(),"RotationGizmoHandle").args({skipDebug:!0}).setRenderer("GizmoHandleRenderer"),this.gameObjectPool.createConfiguration(this.getScaleHandleId(),"ScaleGizmoHandle").args({skipDebug:!0}).setRenderer("GizmoHandleRenderer"),this.gameObjectPool.createConfiguration(this.getCircleDisplayId(),i.getGameObjectPoolId()).args({skipDebug:!0}).setRenderer("CircleGizmoDisplayRenderer"),this.gameObjectPool.createConfiguration(this.getPolygonDisplayId(),i.getGameObjectPoolId()).args({skipDebug:!0}).setRenderer("PolygonGizmoDisplayRenderer"),this.gameObjectPool.createConfiguration(this.getFixedPolygonDisplayId(),i.getGameObjectPoolId()).args({skipDebug:!0}).setRenderer("FixedPolygonGizmoDisplayRenderer"),this.gameObjectPool.createConfiguration(this.getRotationDisplayId(),i.getGameObjectPoolId()).args({skipDebug:!0}).setRenderer("RotationDisplayRenderer"),this.gameObjectPool.createConfiguration(this.getScaleDisplayId(),i.getGameObjectPoolId()).args({skipDebug:!0}).setRenderer("ScaleDisplayRenderer")
},getColliderGizmoId:function(){return"ColliderGizmo"},getIconGizmoId:function(){return"IconGizmo"},getRotationGizmoId:function(){return"RotationGizmo"},getScaleGizmoId:function(){return"ScaleGizmo"},getCircleHandleId:function(){return"CircleHandle"},getPolygonHandleId:function(){return"PolygonHandle"},getFixedPolygonHandleId:function(){return"FixedPolygonHandle"},getRotationHandleId:function(){return"RotationHandle"},getScaleHandleId:function(){return"ScaleHandle"},getCircleDisplayId:function(){return"CircleColliderDisplay"},getPolygonDisplayId:function(){return"PolygonColliderDisplay"},getFixedPolygonDisplayId:function(){return"FixedPolygonColliderDisplay"},getRotationDisplayId:function(){return"RotationDisplay"},getScaleDisplayId:function(){return"ScaleDisplay"},getScrollStopperId:function(){return"ScrollStopperGizmo"},getBossWarningId:function(){return"BossWarningGizmo"},getRightDirectionId:function(){return"RightDirectionGizmo"},getLeftDirectionId:function(){return"LeftDirectionGizmo"},getUpDirectionId:function(){return"UpDirectionGizmo"},getDownDirectionId:function(){return"DownDirectionGizmo"},getFastRightDirectionId:function(){return"FastRightDirectionGizmo"},getFastLeftDirectionId:function(){return"FastLeftDirectionGizmo"},getFastUpDirectionId:function(){return"FastUpDirectionGizmo"},getFastDownDirectionId:function(){return"FastDownDirectionGizmo"},getStartPositionRightId:function(){return"StartPositionGizmoRight"},getStartPositionLeftId:function(){return"StartPositionGizmoLeft"},getStartPositionUpId:function(){return"StartPositionGizmoUp"},getStartPositionDownId:function(){return"StartPositionGizmoDown"}});return new n}),define("outline-bundle",["require","common-bundle","viewports","bundle","editor-config","editor-config"],function(e){var t=e("common-bundle"),i=e("viewports"),n=e("bundle").extend({create:function(){this.componentPool.createConfiguration("OutlineRenderer",t.getPathRendererPoolId()).args({skipCache:!0,width:i.get(e("editor-config").getMainViewportName()).width,height:i.get(e("editor-config").getMainViewportName()).height,name:"outline",drawPath:function(e){e.save(),e.beginPath(),e.rect(0,0,this.width,this.height),e.lineWidth=1/this.parent.viewport.scaleX,e.strokeStyle="#4E91F0",e.closePath(),e.stroke(),e.restore()}}),this.gameObjectPool.createConfiguration("ViewportOutline",t.getGameObjectPoolId()).args({skipDebug:!0,x:0,y:0}).setRenderer("OutlineRenderer")},getOutlineId:function(){return"ViewportOutline"}});return new n}),define("world",["delegate"],function(e){var t=e.extend({init:function(){this._super()},create:function(e,t){var i=e,n=t;this.getWidth=function(){return i},this.getHeight=function(){return n},this.setWidth=function(e){var t=i;i=e,t!=e&&(e>t?this.execute(this.CHANGE_WIDTH_INCREASE,e):this.execute(this.CHANGE_WIDTH_DECREASE,e),this.execute(this.CHANGE_WIDTH,e),this.execute(this.CHANGE))},this.setHeight=function(e){var t=n;n=e,t!=e&&(e>t?this.execute(this.CHANGE_HEIGHT_INCREASE,e):this.execute(this.CHANGE_HEIGHT_DECREASE,e),this.execute(this.CHANGE_HEIGHT,e),this.execute(this.CHANGE))}},scaleViewportToFit:function(e){e.ScaleX=1,e.ScaleY=1,e.ScaleX/=this.getWidth()/e.Width,e.ScaleY/=this.getHeight()/e.Height,e.WorldFit=!0,this.execute(this.SCALE_TO_FIT,e),this.execute(this.SCALE,e)},resetViewportScale:function(e){e.ScaleX=1,e.ScaleY=1,e.WorldFit=!1,this.execute(this.RESET_SCALE,e),this.execute(this.SCALE,e)},scaleViewportProportionaly:function(e,t){e.ScaleX=1,e.ScaleY=1,e.ScaleX*=t,e.ScaleY*=t,this.execute(this.SCALE_PROPORTIONALY,e),this.execute(this.SCALE,e)}});return Object.defineProperty(t.prototype,"CHANGE",{get:function(){return"change"}}),Object.defineProperty(t.prototype,"CHANGE_WIDTH",{get:function(){return"change_width"}}),Object.defineProperty(t.prototype,"CHANGE_HEIGHT",{get:function(){return"change_height"}}),Object.defineProperty(t.prototype,"CHANGE_WIDTH_INCREASE",{get:function(){return"change_width_increase"}}),Object.defineProperty(t.prototype,"CHANGE_WIDTH_DECREASE",{get:function(){return"change_width_decrease"}}),Object.defineProperty(t.prototype,"CHANGE_HEIGHT_INCREASE",{get:function(){return"change_height_increase"}}),Object.defineProperty(t.prototype,"CHANGE_HEIGHT_DECREASE",{get:function(){return"change_height_decrease"}}),Object.defineProperty(t.prototype,"SCALE",{get:function(){return"scale_viewport"}}),Object.defineProperty(t.prototype,"SCALE_TO_FIT",{get:function(){return"scale_to_fit"}}),Object.defineProperty(t.prototype,"RESET_SCALE",{get:function(){return"scale_to_fit"}}),Object.defineProperty(t.prototype,"SCALE_PROPORTIONALY",{get:function(){return"scale_proportionaly"}}),new t}),define("grid-bundle",["require","gb","world","common-bundle","bundle","editor-config","editor-config","editor-config"],function(e){var t=e("gb"),i=(e("world"),e("common-bundle")),n=0,o=0,r=0,s=0,a=t.canvas.width,l=t.canvas.height,h=e("bundle").extend({create:function(){var h=e("editor-config").getGridCellSize(),c=[2];this.componentPool.createConfiguration("GridRenderer",i.getPathRendererPoolId()).args({skipCache:!0,width:{_get:function(){return t.canvas.width}},height:{_get:function(){return t.canvas.height}},drawPath:function(e){e.save(),e.translate(.5-n,.5-o),e.globalAlpha=.5,e.lineWidth=1,e.strokeStyle="#FFFFFF",e.setLineDash(c),e.beginPath();for(var i=0;;){var d=h.width*i;if(i++,d>t.canvas.width+h.width)break;e.moveTo(d,0),e.lineTo(d,t.canvas.height+h.height)}for(i=0;;){var u=h.height*i;if(i++,u>t.canvas.height+h.height)break;e.moveTo(0,u),e.lineTo(t.canvas.width+h.width,u)}for(e.stroke(),e.closePath(),e.restore(),e.save(),e.translate(-r,-s),e.lineWidth=2,e.strokeStyle="#f0ad4e",e.beginPath(),i=0;;){if(d=a*i,i++,d>t.canvas.width+a)break;e.moveTo(d,0),e.lineTo(d,t.canvas.height+l)}for(i=0;;){if(u=l*i,i++,u>t.canvas.height+l)break;e.moveTo(0,u),e.lineTo(t.canvas.width+a,u)}e.stroke(),e.closePath(),e.restore()}}),this.gameObjectPool.createConfiguration("ViewportGrid",i.getGameObjectPoolId()).args({skipDebug:!0}).setRenderer("GridRenderer")},setOffsetX:function(t){n=t%e("editor-config").getGridCellSize().width,r=t%a},setOffsetY:function(t){o=t%e("editor-config").getGridCellSize().height,s=t%l},getGridId:function(){return"ViewportGrid"}});return new h}),define("editor-config",["require","class","gb","gb","gb","gb","gb","gb","gizmo-bundle","outline-bundle","grid-bundle","outline-bundle","grid-bundle","gizmo-bundle","gizmo-bundle","gizmo-bundle","gizmo-bundle"],function(e){var t=12,i=12,n=["Grid"],o=["Outline","GizmoIconFront","GizmoCollidersBack","GizmoCollidersFront","GizmoRotationBack","GizmoRotationFront","GizmoScaleFront","GizmoScaleBack"],r=null,s=null,a=null,l=null,h=null,c=null,d=null,u=null,p=null,f=null,g=null,m=null,y={width:t,height:i},b={width:null,height:null},v=e("class").extend({init:function(){},getDefaultLayerName:function(){return"Front"},getOutlineLayerName:function(){return o[0]},getGizmoIconFrontLayerName:function(){return o[1]},getGizmoCollidersBackLayerName:function(){return o[2]},getGizmoCollidersFrontLayerName:function(){return o[3]},getGizmoRotationBackLayerName:function(){return o[4]},getGizmoRotationFrontLayerName:function(){return o[5]},getGizmoScaleBackLayerName:function(){return o[6]},getGizmoScaleFrontLayerName:function(){return o[7]},getDefaultFrontLayerName:function(){return"Front"},getDefaultMiddleLayerName:function(){return"Middle"},getDefaultBackLayerName:function(){return"Back"},getDefaultGroupName:function(){return"First"},getMainViewportName:function(){return"Main"},getGridViewportName:function(){return n[0]},getColliderGizmoId:function(){return this.getEditorOnlyComponents()[0]},getIconGizmoId:function(){return this.getEditorOnlyComponents()[1]},getRotatioGizmoId:function(){return this.getEditorOnlyComponents()[2]},getScaleGizmoId:function(){return this.getEditorOnlyComponents()[3]},getGridSize:function(){return y},getGridCellSize:function(){if(b.width&&b.height)return b;var n=e("gb");return b.width=n.canvas.width/t,b.height=n.canvas.height/i,b},getGridViewport:function(){return e("gb").viewports.get(this.getGridViewportName())},getGameObjects:function(t){t=t||{filterChilds:!0,customOnly:!1,objectCategory:null};for(var i=e("gb").goPool.getConfigurationTypes(t),n=this.getEditorOnlyGameObjects(),o=0;o<n.length;o++){var r=i.indexOf(n[o]);-1!=r&&i.splice(r,1)}var s=this;return i.filter(function(e){return!s.isControlObject(e)})},getCategoryGameObjects:function(t,i){return e("gb").goPool.getConfigurationTypes({objectCategory:t,enemyTier:i})},isMainViewport:function(e){return e.name==this.getMainViewportName()},isEditorGameObject:function(e){return C(e,this.getEditorOnlyGameObjects())},isControlObject:function(e){return C(e,this.getControlObjects())||C(e,this.getSoundObjects())||C(e,c)},isDraggableOnlyObject:function(e){return C(e,this.getDraggableOnlyObjects())},isControlObjectGizmo:function(e){return C(e,this.getControlGizmoObjects())},isColliderGizmoGameObject:function(e){return C(e,this.getColliderGizmoGameObjects())},isRotationGizmoGameObject:function(e){return C(e,this.getRotationGizmoGameObjects())},isScaleGizmoGameObject:function(e){return C(e,this.getScaleGizmoGameObjects())},isEditorComponent:function(e){return C(e,this.getEditorOnlyComponents())},isEditorViewport:function(e){return C(e,n)},getViewportLayers:function(e){return e.getLayers().filter(function(e){return-1==o.indexOf(e.name)}.bind(this)).map(function(e){return e.name})},getViewportTopMostLayer:function(t){var i;i="string"==typeof t?e("gb").viewports.get(t):t;var n=i.getLayers().filter(function(e){return-1==o.indexOf(e.name)}.bind(this));return n.pop().name},getViewports:function(){return e("gb").viewports.allAsArray().filter(function(e){return-1==n.indexOf(e.name)}.bind(this))},getEditorOnlyComponents:function(){if(r)return r;{var t=e("gizmo-bundle");e("outline-bundle"),e("grid-bundle")}return r=[t.getColliderGizmoId(),t.getIconGizmoId(),t.getRotationGizmoId(),t.getScaleGizmoId()]},getEditorOnlyGameObjects:function(){return s?s:(s=[e("outline-bundle").getOutlineId(),e("grid-bundle").getGridId(),"absolute-scroll-stopper"],s=s.concat(this.getControlGizmoObjects()),s=s.concat(this.getColliderGizmoGameObjects()),s=s.concat(this.getRotationGizmoGameObjects()),s=s.concat(this.getScaleGizmoGameObjects()),s=s.concat(this.getSoundObjects()))},getControlObjects:function(){return a?a:(a=["start-position-right","start-position-left","start-position-up","start-position-down","scroll-stopper","boss-scroll-stopper","boss-warning","direction-right","direction-left","direction-up","direction-down","fast-direction-right","fast-direction-left","fast-direction-up","fast-direction-down","choose-direction-right","choose-direction-left","choose-direction-up","choose-direction-down","direction-down-left","direction-down-right","direction-up-left","direction-up-right"],c=["scroll-stopper","absolute-scroll-stopper","boss-warning"],a)},getControlObjectOriginalName:function(e){return l||(l={"boss-scroll-stopper":"scroll-stopper","scroll-stopper":"absolute-scroll-stopper","warning-sign":"boss-warning"}),l[e]?l[e]:e},getControlObjectAliasName:function(e){return h||(h={"scroll-stopper":"boss-scroll-stopper","absolute-scroll-stopper":"scroll-stopper","boss-warning":"warning-sign"}),h[e]?h[e]:e},getSoundObjects:function(){return d?d:d=["bgm-1","bgm-2","bgm-3","bgm-4"]},getDraggableOnlyObjects:function(){return u?u:u=["GeneratorWayPoint"]},getControlGizmoObjects:function(){if(p)return p;var t=e("gizmo-bundle");return p=[t.getScrollStopperId(),t.getBossWarningId(),t.getRightDirectionId(),t.getLeftDirectionId(),t.getUpDirectionId(),t.getDownDirectionId(),t.getFastRightDirectionId(),t.getFastLeftDirectionId(),t.getFastUpDirectionId(),t.getFastDownDirectionId(),t.getStartPositionRightId(),t.getStartPositionLeftId(),t.getStartPositionUpId(),t.getStartPositionDownId()]},getColliderGizmoGameObjects:function(){if(f)return f;var t=e("gizmo-bundle");return f=[t.getCircleHandleId(),t.getPolygonHandleId(),t.getFixedPolygonHandleId(),t.getCircleDisplayId(),t.getPolygonDisplayId(),t.getFixedPolygonDisplayId()]},getRotationGizmoGameObjects:function(){if(g)return g;var t=e("gizmo-bundle");return g=[t.getRotationHandleId(),t.getRotationDisplayId()]},getScaleGizmoGameObjects:function(){if(m)return m;var t=e("gizmo-bundle");return m=[t.getScaleHandleId(),t.getScaleDisplayId()]}}),C=function(e,t){for(var i=0;i<t.length;i++)if(e==t[i])return!0;return!1};return new v}),define("editor-game-object-container",["game-object-container","editor-config"],function(e,t){var i=e.extend({init:function(){this._super(),this.started=!1,this.structuralChanged=!1},reset:function(){this._super(),this.started=!1,this.structuralChanged=!1},start:function(){this._super(),this.editorStart(),this.started=!0},add:function(e){this._super(e),n.call(this,e)},remove:function(e){n.call(this,e),this._super(e)},setRenderer:function(e){this._super(e),o.call(this,e)},removeRenderer:function(){o.call(this,this.renderer),this._super()},addComponent:function(e){this._super(e),o.call(this,e)},removeComponent:function(e){o.call(this,e),this._super(e)},update:function(e){this._super(e),this.editorUpdate(e)},editorStart:function(){},editorUpdate:function(){},deActivate:function(){},hasStructuralChanges:function(){return this.structuralChanged},setStructuralChanges:function(){this.structuralChanged=!0}}),n=function(e){e&&this.started&&!t.isEditorGameObject(e.typeId)&&(this.structuralChanged=!0)},o=function(e){e&&this.started&&!t.isEditorComponent(e.typeId)&&(this.structuralChanged=!0)};return i}),define("stage-frame",["editor-game-object-container"],function(e){var t=e.extend({init:function(){this._super()},editorStart:function(){this.renderer.play("unselected")},select:function(){this.renderer.play("selected")},unselect:function(){this.renderer.play("unselected")},editorUpdate:function(){}});return t}),define("stage-overview-animation",["game-object","gb","TimelineLite","keyboard","level-storage","TweenLite","EasePack"],function(e,t,i,n){var o=e.extend({init:function(){this._super()},start:function(){var e=[{viewport:"Main",layer:"Front"}];this.gridX=0,this.gridY=0,this.stages=t.create("StageOverviewTitle","First",e,{x:t.canvas.width/2,y:-200}),this.topLeft=t.create("Stage1Frame","First",e,{x:-500,y:t.canvas.height/2-110}),this.topRight=t.create("Stage2Frame","First",e,{x:t.canvas.width+500,y:t.canvas.height/2-110}),this.bottomLeft=t.create("Stage3Frame","First",e,{x:-500,y:t.canvas.height/2+110}),this.bottomRight=t.create("Stage4Frame","First",e,{x:t.canvas.width+500,y:t.canvas.height/2+110});var o=require("level-storage");this.topLeft.findChildren().firstWithType("StageCompleteIcon").hide(),this.topRight.findChildren().firstWithType("StageCompleteIcon").hide(),this.bottomLeft.findChildren().firstWithType("StageCompleteIcon").hide(),this.bottomRight.findChildren().firstWithType("StageCompleteIcon").hide(),o.isLevelIndexComplete(0)&&this.topLeft.findChildren().firstWithType("StageCompleteIcon").show(),o.isLevelIndexComplete(1)&&this.topRight.findChildren().firstWithType("StageCompleteIcon").show(),o.isLevelIndexComplete(2)&&this.bottomLeft.findChildren().firstWithType("StageCompleteIcon").show(),o.isLevelIndexComplete(3)&&this.bottomRight.findChildren().firstWithType("StageCompleteIcon").show(),this.topLeft.select(),this.backOption=t.create("Back","First",e,{x:t.canvas.width/2,y:2*t.canvas.height}),this.tl=new i({onComplete:function(){n.onKeyDown(n.GAME_LEFT,this,this.onLeftPress),n.onKeyDown(n.GAME_RIGHT,this,this.onRightPress),n.onKeyDown(n.GAME_UP,this,this.onUpPress),n.onKeyDown(n.GAME_DOWN,this,this.onDownPress),n.onKeyDown(n.GAME_BUTTON_1,this,this.onOptionSelected),this.execute(this.ENTER)}.bind(this),onReverseComplete:function(){this.executeExitDelegate()}.bind(this)}),this.tl.to(this.stages,.5,{y:50},"title"),this.tl.to(this.topLeft,.5,{x:t.canvas.width/2-110},"stages"),this.tl.to(this.bottomLeft,.5,{x:t.canvas.width/2-110},"stages"),this.tl.to(this.topRight,.5,{x:t.canvas.width/2+110},"stages"),this.tl.to(this.bottomRight,.5,{x:t.canvas.width/2+110},"stages"),this.tl.to(this.backOption,.5,{y:t.canvas.height-40},"title"),this.tl.play(),this.onLeftPress(),this._super()},reverse:function(){n.removeKeyDown(n.GAME_LEFT,this,this.onLeftPress),n.removeKeyDown(n.GAME_RIGHT,this,this.onRightPress),n.removeKeyDown(n.GAME_UP,this,this.onUpPress),n.removeKeyDown(n.GAME_DOWN,this,this.onDownPress),n.removeKeyDown(n.GAME_BUTTON_1,this,this.onOptionSelected),this.tl.reverse()},onLeftPress:function(){this.hideAllOptions(),this.gridX>0&&(this.gridX--,this.execute("option")),this.showSelection()},onRightPress:function(){this.hideAllOptions(),this.gridX<1&&(this.gridX++,this.execute("option")),this.showSelection()},onUpPress:function(){this.hideAllOptions(),this.gridY>0&&(this.gridY--,this.execute("option")),this.showSelection()},onDownPress:function(){this.hideAllOptions(),this.gridY<2&&(this.gridY++,this.execute("option")),this.showSelection()},hideAllOptions:function(){for(var e=this.backOption.findChildren().allWithType("MarkerArrow"),t=0;t<e.length;t++)e[t].hide();this.topLeft.unselect(),this.bottomLeft.unselect(),this.topRight.unselect(),this.bottomRight.unselect()},showSelection:function(){if(0==this.gridX&&0==this.gridY)this.topLeft.select();else if(0==this.gridX&&1==this.gridY)this.bottomLeft.select();else if(1==this.gridX&&0==this.gridY)this.topRight.select();else if(1==this.gridX&&1==this.gridY)this.bottomRight.select();else for(var e=this.backOption.findChildren().allWithType("MarkerArrow"),t=0;t<e.length;t++)e[t].show()},executeExitDelegate:function(){0==this.gridX&&0==this.gridY||0==this.gridX&&1==this.gridY||1==this.gridX&&0==this.gridY||1==this.gridX&&1==this.gridY||this.execute(this.BACK_EXIT)},executeStartSelectedDelegate:function(){0==this.gridX&&0==this.gridY?(this.execute(this.START_SELECTED,0),this.execute("select")):0==this.gridX&&1==this.gridY?(this.execute(this.START_SELECTED,2),this.execute("select")):1==this.gridX&&0==this.gridY?(this.execute(this.START_SELECTED,1),this.execute("select")):1==this.gridX&&1==this.gridY?(this.execute(this.START_SELECTED,3),this.execute("select")):this.execute("back")},onOptionSelected:function(){this.reverse(),this.executeStartSelectedDelegate()},recycle:function(){this._super(),n.removeKeyDown(n.GAME_LEFT,this,this.onLeftPress),n.removeKeyDown(n.GAME_RIGHT,this,this.onRightPress),n.removeKeyDown(n.GAME_UP,this,this.onUpPress),n.removeKeyDown(n.GAME_DOWN,this,this.onDownPress),n.removeKeyDown(n.GAME_BUTTON_1,this,this.onOptionSelected),this.tl.kill(),this.tl=null,this.stages=null,this.backOption=null,this.topLeft=null,this.bottomLeft=null,this.topRight=null,this.bottomRight=null}});return Object.defineProperty(o.prototype,"ENTER",{get:function(){return"enter"}}),Object.defineProperty(o.prototype,"BACK_EXIT",{get:function(){return"back_exit"}}),Object.defineProperty(o.prototype,"START_SELECTED",{get:function(){return"start_exit"}}),o}),define("stage-overview-bundle",["require","common-bundle","gb","bundle","stage-frame","arrow-renderer","stage-overview-animation"],function(e){var t=e("common-bundle"),i=e("gb"),n=e("bundle").extend({create:function(){this.gameObjectPool.createDynamicPool("StageFrame",e("stage-frame")),this.componentPool.createConfiguration("StageFrameRenderer",t.getAnimationsBitmapRendererPoolId()).args({startingLabel:"unselected",frameWidth:200,frameHeight:200,frameDelay:1,frameCount:2,offset:"center",path:i.assetMap()["LEVELFRAME.PNG"],labels:{selected:{frames:[0]},unselected:{frames:[1]}}}),this.componentPool.createConfiguration("StageCompleteIconRenderer",t.getBitmapRendererPoolId()).args({path:i.assetMap()["LEVELCOMPLETEICON.PNG"],offset:"center"}),this.componentPool.createConfiguration("Boss1PortraitRenderer",t.getBitmapRendererPoolId()).args({path:i.assetMap()["BOSS1PORTRAIT.PNG"],offset:"center"}),this.componentPool.createConfiguration("Boss2PortraitRenderer",t.getBitmapRendererPoolId()).args({path:i.assetMap()["BOSS2PORTRAIT.PNG"],offset:"center"}),this.componentPool.createConfiguration("Boss3PortraitRenderer",t.getBitmapRendererPoolId()).args({path:i.assetMap()["BOSS3PORTRAIT.PNG"],offset:"center"}),this.componentPool.createConfiguration("Boss4PortraitRenderer",t.getBitmapRendererPoolId()).args({path:i.assetMap()["BOSS4PORTRAIT.PNG"],offset:"center"}),this.gameObjectPool.createConfiguration("StageCompleteIcon",t.getGameObjectPoolId()).args({x:70,y:70}).setRenderer("StageCompleteIconRenderer"),this.gameObjectPool.createConfiguration("Boss1Portrait",t.getGameObjectPoolId()).setRenderer("Boss1PortraitRenderer"),this.gameObjectPool.createConfiguration("Boss2Portrait",t.getGameObjectPoolId()).setRenderer("Boss2PortraitRenderer"),this.gameObjectPool.createConfiguration("Boss3Portrait",t.getGameObjectPoolId()).setRenderer("Boss3PortraitRenderer"),this.gameObjectPool.createConfiguration("Boss4Portrait",t.getGameObjectPoolId()).setRenderer("Boss4PortraitRenderer"),this.componentPool.createPool("MarkerArrowRenderer",e("arrow-renderer")),this.gameObjectPool.createDynamicPool("StageOverview",e("stage-overview-animation")),this.componentPool.createConfiguration("TextRenderer",t.getTextRendererPoolId()),this.componentPool.createConfiguration("MarkerArrowRenderer","MarkerArrowRenderer"),this.gameObjectPool.createConfiguration("Stage1Frame","StageFrame").addChild("Boss1Portrait").addChild("StageCompleteIcon").setRenderer("StageFrameRenderer"),this.gameObjectPool.createConfiguration("Stage2Frame","StageFrame").addChild("Boss2Portrait").addChild("StageCompleteIcon").setRenderer("StageFrameRenderer"),this.gameObjectPool.createConfiguration("Stage3Frame","StageFrame").addChild("Boss3Portrait").addChild("StageCompleteIcon").setRenderer("StageFrameRenderer"),this.gameObjectPool.createConfiguration("Stage4Frame","StageFrame").addChild("Boss4Portrait").addChild("StageCompleteIcon").setRenderer("StageFrameRenderer"),this.gameObjectPool.createConfiguration("MarkerArrow",t.getGameObjectPoolId()).setRenderer("MarkerArrowRenderer"),this.gameObjectPool.createConfiguration("StageOverviewTitle",t.getGameObjectPoolId()).setRenderer("TextRenderer",{name:"stage-overview-title",text:"Choose a Maze",fillColor:"none",strokeColor:"#FFFFFF",font:"Russo One",padding:3,size:80,offset:"center"}),this.gameObjectPool.createConfiguration("Back",t.getGameObjectContainerPoolId()).addChild("MarkerArrow",{rotation:90,x:100,y:0}).addChild("MarkerArrow",{rotation:270,x:-100,y:0}).setRenderer("TextRenderer",{name:"back-button",fillColor:"none",strokeColor:"#FFFFFF",text:"Back",font:"Russo One",padding:3,size:55,offset:"center"}),this.gameObjectPool.createConfiguration("StageOverview","StageOverview").addComponent("OptionHighlight").addComponent("OptionSelect").addComponent("OptionBack")}});return new n}),define("stage-overview-state",["require","state-machine","gb","loader-container","sound-player","common-bundle","sound-bundle","stage-overview-bundle"],function(e){var t=e("state-machine"),i=e("gb"),n=e("loader-container"),o=e("sound-player");return function(r){var s=t.createState(this,r);return s.addStartAction(function(){o.playLoop("INTRO"),i.groups.removeAll(),i.viewports.removeAll(),i.groups.add("First"),i.groups.add("Second");var t=i.viewports.add("Main",i.canvas.width,i.canvas.height,0,0);t.addLayer("Front"),e("common-bundle").create(),e("sound-bundle").create(),e("stage-overview-bundle").create();var r=i.create("StageOverview","First",[{viewport:"Main",layer:"Front"}]);r.on(r.BACK_EXIT,this,function(){s.execute(s.BACK)}),r.on(r.START_SELECTED,this,function(e){n.once(n.CLOSE,this,function(){o.stop("INTRO"),s.execute(s.NEXT,{nextInitArgs:e,lastCompleteArgs:null})}),n.close()})}),s.addCompleteAction(function(){n.hardCleanUp(),i.reclaimer.clearAllObjectsFromPools().now(),i.reclaimer.clearAllPools().now()}),Object.defineProperty(s,"BACK",{get:function(){return"back"}}),s}}),define("viewport-follow",["require","matrix-3x3","class","viewports"],function(e){var t,i=e("matrix-3x3"),n={noViewportOffsets:!0},o={},r=new i,s=e("class").extend({init:function(){this.viewportGameObjectPairs={}},setFollow:function(t,i){this.viewportGameObjectPairs[t]={viewport:e("viewports").get(t),go:i},i.once(i.RECYCLE,this,function(){delete this.viewportGameObjectPairs[t]})},unsetFollow:function(e){delete this.viewportGameObjectPairs[e]},update:function(){for(var e in this.viewportGameObjectPairs)t=this.viewportGameObjectPairs[e],o=t.go.getTransform(o,r,n),t.viewport.x=-o.x,t.viewport.y=-o.y}});return new s}),define("scene-loader",["require","gb","util","delegate","object-counter"],function(e){var t=e("gb"),n=e("util"),o=e("delegate").extend({init:function(){this._super()},load:function(e){var t;if(!e)throw new Error("missing scene");n.isString(e)&&(t=JSON.parse(e)),n.isObject(e)&&(t=e),this.cleanUp(),this.sceneName(t),this.world(t),this.groups(t),this.viewports(t),this.configurations(t),this.layout=function(){this.addGameObjects(t),this.execute(this.LOAD_COMPLETE)}.bind(this)},cleanUp:function(){},sceneName:function(){},world:function(){},groups:function(e){for(var i=e.groups,n=0;n<i.length;n++)t.groups.add(i[n])},viewports:function(){},configurations:function(e){s(t.goPool,e.goConfig),s(t.coPool,e.coConfig)},getGameObject:function(){},addChildGameObject:function(){},decorateGameObject:function(){},addGameObjects:function(t){if(t.objects)for(i=0;i<t.objects.length;i++){var n=t.objects[i],o=this.getGameObject(n);r.call(this,o,n.hasStructuralChanges,n.properties),c.call(this,o,this.getComponentArgs(n.properties)),d.call(this,o,this.getChildrenArgs(n.properties)),o.x=n.x,o.y=n.y,e("object-counter").count(o)}},getConfigurationsUsedInScene:function(e){if(!e)throw new Error("missing scene");if(n.isString(e)&&(e=JSON.parse(e)),n.isObject(e)&&(e=e),!e.objects)return[];var t={};for(i=0;i<e.objects.length;i++){var o=e.objects[i],r=o.id;t[r]=null;var s=this.getChildrenArgs(o.properties);t=n.shallow_merge(t,this.getChildConfigurationsUsedInScene(s))}returnArray=[];for(var a in t)returnArray.push(a);return returnArray},getChildConfigurationsUsedInScene:function(e){var t={};if(e)for(var i in e){t[i]=null;var o=this.getChildrenArgs(e[i]);t=n.shallow_merge(t,this.getChildConfigurationsUsedInScene(o))}return t},getComponentArgs:function(e){return e?e.componentArgs:null},getGameObjectArgs:function(e){return e?e.args:null},getChildrenArgs:function(e){return e?e.children:null}}),r=function(e,i,n){i&&(e.removeComponents(),t.reclaimer.claimChildren(e),a.call(this,e,this.getComponentArgs(n)),l.call(this,e,this.getChildrenArgs(n)),this.decorateGameObject(e))},s=function(e,t){if(t)for(var i=0;i<t.length;i++)e.createConfigurationFromObject(t[i])},a=function(e,i){if(i)for(var n in i)for(var o=0;o<i[n].length;o++){var r=i[n][o],s=t.addComponentTo(e,n);h.call(this,s,r.attributes)}},l=function(e,t){if(t)for(var i in t)for(var n=i,o=t[n],s=0;s<o.length;s++){var a=o[s],l=a.args,u=a.componentArgs,p=a.children,f=this.addChildGameObject(n,e);r.call(this,f,a.hasStructuralChanges,a),h.call(this,f,l),c.call(this,f,u),p&&d.call(this,f,p)}},h=function(e,t){if(t){e.Attributes&&(e.Attributes=t);for(var i in t)e[i]=t[i]}},c=function(e,t){if(t){var i=e.findComponents().all();for(var n in t)for(var o=0;o<t[n].length;o++){var r=t[n][o];h(i[r.indexInParent],r.attributes)}}},d=function(e,t){if(t){var i=e.findChildren().all();for(var n in t)for(var o=t[n],r=0;r<o.length;r++){var s=o[r],a=s.args,l=s.componentArgs,u=s.children,p=i[s.indexInParent];h(p,a),c(p,l),u&&d(p,u)}}};return Object.defineProperty(o.prototype,"LOAD_COMPLETE",{get:function(){return"load_complete"}}),o}),define("player-scene-loader",["require","gb","world","scene-loader"],function(e){var t=e("gb"),i=e("world"),n=e("scene-loader").extend({init:function(){this._super()},cleanUp:function(){t.reclaimer.clearAllObjectsFromPools(),t.groups.removeAll(),t.viewports.removeAll()},sceneName:function(){},world:function(e){i.create(e.world.width,e.world.height)},viewports:function(e){for(var i=e.viewports,n=0;n<i.length;n++)t.viewports.addFromObject(i[n])},getGameObject:function(e){return t.create(e.id,e.g,e.v,this.getGameObjectArgs(e.properties))},addChildGameObject:function(e,i){return t.addChildTo(i,e,null,null,"create")},decorateGameObject:function(){}});return new n}),define("movement-angle",["editor-component","timer-factory"],function(e,t){var i=e.extend({init:function(){this._super()},editorStart:function(){this.parent.spread&&(this.parent.angle+=this.parent.spread),this.parent.moveTime&&(t.get(this,"moveTimer","moveTimer"),this.moveTimer.on("complete",function(){this.disable(),this.parent.execute("finish-movement")},!0),this.moveTimer.configure({delay:this.parent.moveTime}),this.moveTimer.start())},editorUpdate:function(e){this.parent.x+=Math.cos(this.parent.angle)*e*this.parent.speed,this.parent.y+=Math.sin(this.parent.angle)*e*this.parent.speed},recycle:function(){this.moveTimer&&this.moveTimer.remove()}});return i}),define("angle-modifier",["component"],function(e){var t=e.extend({init:function(){this._super(),this.step=null},update:function(){this.parent.angle+=this.step}});return t}),define("rotate",["component"],function(e){var t=e.extend({init:function(){this._super(),this.amount=0},start:function(){this.amount+=Math.random();var e=Math.random()>.5?1:-1;this.amount*=e},update:function(){this.parent.rotation+=this.amount}});return t}),define("cosine-angle-modifier",["component"],function(e){var t=e.extend({init:function(){this._super(),this.counter=0,this.amplitude=1,this.period=1},start:function(){this.counter=this.initCount(),this.angleOffset=this.angleOffset||90,this.angleOffset=Math.PI/180*this.angleOffset,this.step=Math.PI/180/this.amplitude},update:function(){this.counter+=this.step,this.parent.angle=Math.cos(this.counter*this.period)-this.angleOffset}});return t}),define("straight-line-movement-angle",["component"],function(e){var t=e.extend({init:function(){this._super()},start:function(){this.parent.spread&&(this.parent.angle+=this.parent.spread),this.vecX=Math.cos(this.parent.angle),this.vecY=Math.sin(this.parent.angle)},update:function(e){this.parent.x+=this.vecX*e*this.parent.speed,this.parent.y+=this.vecY*e*this.parent.speed}});return t}),define("straight-line-movement-vector",["component"],function(e){var t=e.extend({init:function(){this._super()},start:function(){var e=Math.atan2(this.parent.vector.y,this.parent.vector.x);0>e&&(e+=2*Math.PI),this.parent.spread&&(e+=this.parent.spread),this.vecX=Math.cos(e)*(this.direction||1),this.vecY=Math.sin(e)*(this.direction||1)},update:function(e){this.parent.x+=this.vecX*e*this.parent.speed,this.parent.y+=this.vecY*e*this.parent.speed}});return t}),define("claim-on-life-depleted",["component","gb","util"],function(e,t){var i=e.extend({init:function(){this._super()},start:function(e){this._life=e.life,this._speed=e.speed},update:function(e){this._life>0?this._life-=this._speed*e:t.reclaimer.mark(this.parent)}});return i}),define("claim-on-out-screen-bounds",["component","gb"],function(e,t){var i=e.extend({init:function(){this._super()},start:function(e){this._super(e),this.parent.on("out-of-screen-bounds",this,function(){t.reclaimer.mark(this.parent)})}});return i}),define("check-out-of-bounds",["editor-component","gb"],function(e){var t=e.extend({init:function(){this._super(),this.outOfBounds=!1},editorStart:function(){this.outOfBounds=!1},editorUpdate:function(){this.outOfBounds||this.parent.getViewportVisibility("Main")?this.outOfBounds&&this.parent.getViewportVisibility("Main")&&(this.parent.execute("in-screen-bounds"),this.outOfBounds=!1):(this.parent.execute("out-of-screen-bounds"),this.outOfBounds=!0)}});return t}),define("boss-3-body-renderer",["editor-component","path-renderer","player-getter","draw"],function(e,t,i,n){var o=t.extend({init:function(){this._super(),this.offset="center",this.skipCache=!0,this.pointOffsetX=0,this.pointOffsetY=0,this.horizontalCounter=0,this.name="Boss_3_Body",this.width=200,this.height=200,this.largeAnchor=20,this.largeAnchorMultiplier=40,this.pointOffsetMultiplier=6,this.horizontalCounterMultiplier=30,this.offset1=75,this.offset2=100,this.lineWidth=3,this.pointsInit=null,this.points=null
},start:function(e){if(this._super(e),"string"!=typeof this.args.name)throw new Error("missing name");if("number"!=typeof this.args.width)throw new Error("missing width");if("number"!=typeof this.args.height)throw new Error("missing height");if("number"!=typeof this.args.largeAnchor)throw new Error("missing largeAnchor");if("number"!=typeof this.args.largeAnchorMultiplier)throw new Error("missing largeAnchorMultiplier");if("number"!=typeof this.args.pointOffsetMultiplier)throw new Error("missing pointOffsetMultiplier");if("number"!=typeof this.args.horizontalCounterMultiplier)throw new Error("missing horizontalCounterMultiplier");if("number"!=typeof this.args.offset1)throw new Error("missing offset1");if("number"!=typeof this.args.offset2)throw new Error("missing offset2");if("number"!=typeof this.args.lineWidth)throw new Error("missing lineWidth");this.halfHorizontalCounterMultiplier=this.horizontalCounterMultiplier/2,this.offset="center",this.pointsInit=[{x:0,y:-this.offset1},{x:-this.offset1,y:-this.offset1},{x:-this.offset1-(this.offset2-this.offset1)/2,y:-this.offset1/2},{x:-this.offset2,y:0},{x:-this.offset1-(this.offset2-this.offset1)/2,y:this.offset1/2},{x:-this.offset1,y:this.offset1},{x:0,y:this.offset1},{x:this.offset1,y:this.offset1},{x:this.offset1+(this.offset2-this.offset1)/2,y:this.offset1/2},{x:this.offset2,y:0},{x:this.offset1+(this.offset2-this.offset1)/2,y:-this.offset1/2},{x:this.offset1,y:-this.offset1},{x:0,y:-this.offset1}],this.points=[{x:0,y:-this.offset1},{x:-this.offset1,y:-this.offset1},{x:-this.offset1-(this.offset2-this.offset1)/2,y:-this.offset1/2},{x:-this.offset2,y:0},{x:-this.offset1-(this.offset2-this.offset1)/2,y:this.offset1/2},{x:-this.offset1,y:this.offset1},{x:0,y:this.offset1},{x:this.offset1,y:this.offset1},{x:this.offset1+(this.offset2-this.offset1)/2,y:this.offset1/2},{x:this.offset2,y:0},{x:this.offset1+(this.offset2-this.offset1)/2,y:-this.offset1/2},{x:this.offset1,y:-this.offset1},{x:0,y:-this.offset1}]},update:function(e){if(i.exists()){this.largeAnchor=Math.cos(this.horizontalCounter)*this.largeAnchorMultiplier,this.pointOffsetX=Math.cos(this.horizontalCounter)*this.pointOffsetMultiplier,this.pointOffsetY=Math.sin(this.horizontalCounter)*this.pointOffsetMultiplier,this.horizontalCounter+=this.horizontalCounterMultiplier*e/this.halfHorizontalCounterMultiplier;for(var t=0;t<this.points.length;t++)t%2==0?(this.points[t].x=this.pointsInit[t].x-this.pointOffsetX,this.points[t].y=this.pointsInit[t].y-this.pointOffsetY):(this.points[t].x=this.pointsInit[t].x+this.pointOffsetX,this.points[t].y=this.pointsInit[t].y+this.pointOffsetY)}},drawPath:function(e){e.save(),e.translate(0,0),e.lineJoin="round",e.lineCap="round",n.quadraticPolygonAuto(e,0,0,this.largeAnchor,this.points,null,"#FFFFFF",this.lineWidth,1,!0,!0),e.restore()}});return o}),define("particle",["game-object","util"],function(e,t){var i=e.extend({init:function(){this._super(),this.angle=null,this.speed=null,this.spread=null,this.life=null,this.vector=null,this.angleRange=null,this.speedRange=null,this.spreadRange=null,this.lifeRange=null},start:function(){this.speed=t.rand_f(this.speedRange.min,this.speedRange.max),this.life=t.rand_f(this.lifeRange.min,this.lifeRange.max),this.angleRange&&(this.angle=t.rand_i(this.angleRange.min,this.angleRange.max)*(Math.PI/180)),this.spreadRange&&(this.spread=t.rand_i(this.spreadRange.min,this.spreadRange.max)*(Math.PI/180)),this._super()},draw:function(e,t){if(this.isTransformed){e.save();var i=this.getMatrix();e.transform(i.a,i.b,i.c,i.d,i.tx,i.ty),1!=i.alpha&&(e.globalAlpha*=i.alpha),i.alpha>0&&this.renderer&&this.renderer.isEnabled()&&this.renderer.draw(e,t),e.restore()}},recycle:function(){this.angle=null,this.speed=null,this.spread=null,this.life=null,this.vector=null,this.angleRange=null,this.speedRange=null,this.spreadRange=null,this.lifeRange=null,this._super()}});return i}),define("particle-bundle",["require","gb","common-bundle","draw","bundle","movement-angle","angle-modifier","rotate","cosine-angle-modifier","straight-line-movement-angle","straight-line-movement-vector","claim-on-life-depleted","claim-on-out-screen-bounds","check-out-of-bounds","boss-3-body-renderer","particle"],function(e){var t=e("gb"),i=e("common-bundle"),n=e("draw"),o=e("bundle").extend({create:function(){this.componentPool.createPool("movement-angle",e("movement-angle")),this.componentPool.createPool("angle-modifier",e("angle-modifier")),this.componentPool.createPool("rotate",e("rotate")),this.componentPool.createPool("cosine-angle-modifier",e("cosine-angle-modifier")),this.componentPool.createPool("straight-line-movement-angle",e("straight-line-movement-angle")),this.componentPool.createPool("straight-line-movement-vector",e("straight-line-movement-vector")),this.componentPool.createPool("claim-on-life-depleted",e("claim-on-life-depleted")),this.componentPool.createPool("claim-on-out-screen-bounds",e("claim-on-out-screen-bounds")),this.componentPool.createPool("check-out-of-bounds",e("check-out-of-bounds")),this.componentPool.createConfiguration("WhiteSquareParticle",i.getPathRendererPoolId()).args({name:"white-square-particle",width:2,height:2,offset:"center",drawPath:function(e){n.rectangle(e,0,0,this.width,this.height,null,"#FFFFFF",1)}}),this.componentPool.createConfiguration("SmokeSquareParticle_1",i.getPathRendererPoolId()).args({name:"smoke-square-particle-1",width:3,height:3,offset:"center",drawPath:function(e){n.rectangle(e,0,0,this.width,this.height,null,"#FFFFFF",1)}}),this.componentPool.createConfiguration("SmokeSquareParticle_2",i.getPathRendererPoolId()).args({name:"smoke-square-particle-2",width:5,height:5,offset:"center",drawPath:function(e){n.rectangle(e,0,0,this.width,this.height,null,"#FFFFFF",1)}}),this.componentPool.createConfiguration("YellowSquareParticle",i.getPathRendererPoolId()).args({name:"yellow-square-particle",width:4,height:4,offset:"center",drawPath:function(e){n.rectangle(e,0,0,this.width,this.height,null,"#FFFFFF",1)}}),this.componentPool.createConfiguration("Boss_1_DestroyParticleRenderer_1",i.getBitmapRendererPoolId()).args({path:t.assetMap()["BOSS1CABLEDAMAGED.PNG"],offset:"center"}),this.componentPool.createConfiguration("Boss_1_DestroyParticleRenderer_2",i.getBitmapRendererPoolId()).args({path:t.assetMap()["BOSS1CHUNK1.PNG"],offset:"center"}),this.componentPool.createConfiguration("Boss_1_DestroyParticleRenderer_3",i.getBitmapRendererPoolId()).args({path:t.assetMap()["BOSS1CHUNK2.PNG"],offset:"center"}),this.componentPool.createConfiguration("Boss_2_DestroyParticleRenderer_1",i.getBitmapRendererPoolId()).args({path:t.assetMap()["BOSS2CHUNK1.PNG"],offset:"center"}),this.componentPool.createConfiguration("Boss_2_DestroyParticleRenderer_2",i.getBitmapRendererPoolId()).args({path:t.assetMap()["BOSS2CHUNK2.PNG"],offset:"center"}),this.componentPool.createPool("Boss_3_DestroyParticleRenderer",e("boss-3-body-renderer")),this.componentPool.createConfiguration("Boss_3_DestroyParticleRenderer_1","Boss_3_DestroyParticleRenderer").args({name:"Boss_3_DestroyParticle_1",width:50,height:50,largeAnchor:10,largeAnchorMultiplier:10,pointOffsetMultiplier:3,horizontalCounterMultiplier:15,offset1:20,offset2:25,lineWidth:2}),this.componentPool.createConfiguration("Boss_3_DestroyParticleRenderer_2","Boss_3_DestroyParticleRenderer").args({name:"Boss_3_DestroyParticle_2",width:25,height:25,largeAnchor:5,largeAnchorMultiplier:5,pointOffsetMultiplier:2,horizontalCounterMultiplier:10,offset1:10,offset2:12,lineWidth:1}),this.componentPool.createConfiguration("Boss_4_DestroyParticleRenderer_1",i.getBitmapRendererPoolId()).args({path:t.assetMap()["BOSS4CHUNK1.PNG"],offset:"center"}),this.componentPool.createConfiguration("Boss_4_DestroyParticleRenderer_2",i.getBitmapRendererPoolId()).args({path:t.assetMap()["BOSS4CHUNK2.PNG"],offset:"center"}),this.componentPool.createConfiguration("Boss_4_DestroyParticleRenderer_3",i.getBitmapRendererPoolId()).args({path:t.assetMap()["BOSS4CHUNK3.PNG"],offset:"center"}),this.componentPool.createConfiguration("Boss_4_DestroyParticleRenderer_4",i.getBitmapRendererPoolId()).args({path:t.assetMap()["BOSS4CHUNK4.PNG"],offset:"center"}),this.componentPool.createConfiguration("MovementAngle","movement-angle"),this.componentPool.createConfiguration("AngleModifier","angle-modifier"),this.componentPool.createConfiguration("Rotate","rotate"),this.componentPool.createConfiguration("CosineAngleModifier","cosine-angle-modifier"),this.componentPool.createConfiguration("StraightMovementAngle","straight-line-movement-angle"),this.componentPool.createConfiguration("StraightMovementVectorReverse","straight-line-movement-vector").args({direction:-1}),this.componentPool.createConfiguration("ClaimOnLifeDepleted","claim-on-life-depleted"),this.componentPool.createConfiguration("CheckOutOfBounds","check-out-of-bounds"),this.componentPool.createConfiguration("ClaimOnOutOfScreenBounds","claim-on-out-screen-bounds"),this.gameObjectPool.createDynamicPool("particle",e("particle")),this.gameObjectPool.createConfiguration("StraightParticle_1","particle").args({speedRange:{min:15,max:15},angleRange:{min:180,max:180},lifeRange:{min:.3,max:.8}}).addComponent("StraightMovementAngle").addComponent("ClaimOnLifeDepleted").setRenderer("WhiteSquareParticle"),this.gameObjectPool.createConfiguration("StraightParticle_2","particle").args({speedRange:{min:250,max:250},spreadRange:{min:-20,max:20},lifeRange:{min:30,max:60}}).addComponent("StraightMovementVectorReverse").addComponent("ClaimOnLifeDepleted").setRenderer("WhiteSquareParticle"),this.gameObjectPool.createConfiguration("StraightParticle_3","particle").args({speedRange:{min:150,max:200},spreadRange:{min:-45,max:45},lifeRange:{min:20,max:50}}).addComponent("StraightMovementVectorReverse").addComponent("ClaimOnLifeDepleted").setRenderer("WhiteSquareParticle"),this.gameObjectPool.createConfiguration("ArchingParticle_1","particle").args({angleRange:{min:-135,max:-135},speedRange:{min:150,max:250},spreadRange:{min:-10,max:10},lifeRange:{min:40,max:50}}).addComponent("AngleModifier",{step:-5*(Math.PI/180)}).addComponent("MovementAngle").addComponent("ClaimOnLifeDepleted").setRenderer("YellowSquareParticle"),this.gameObjectPool.createConfiguration("ArchingParticle_2","particle").args({angleRange:{min:-45,max:-45},speedRange:{min:150,max:250},spreadRange:{min:10,max:10},lifeRange:{min:40,max:50}}).addComponent("AngleModifier",{step:5*(Math.PI/180)}).addComponent("MovementAngle").addComponent("ClaimOnLifeDepleted").setRenderer("YellowSquareParticle"),this.gameObjectPool.createConfiguration("CosineParticle_1","particle").args({angleRange:{min:-90,max:-90},speedRange:{min:50,max:70},spreadRange:{min:0,max:0},lifeRange:{min:50,max:70}}).addComponent("CosineAngleModifier",{period:5,amplitude:.5,angleOffset:90,initCount:function(){return 360*Math.random()}}).addComponent("MovementAngle").addComponent("ClaimOnLifeDepleted").setRenderer("SmokeSquareParticle_1"),this.gameObjectPool.createConfiguration("CosineParticle_2","particle").args({angleRange:{min:-90,max:-90},speedRange:{min:50,max:70},spreadRange:{min:0,max:0},lifeRange:{min:50,max:70}}).addComponent("CosineAngleModifier",{period:3,amplitude:1,angleOffset:90,initCount:function(){return 360*Math.random()}}).addComponent("MovementAngle").addComponent("ClaimOnLifeDepleted").setRenderer("SmokeSquareParticle_2"),this.componentPool.createConfiguration("BossParticleTween",i.getTweenPoolId()),this.gameObjectPool.createConfiguration("Boss_1_DestroyParticle_1","particle").args({angleRange:{min:0,max:360},speedRange:{min:0,max:0},spreadRange:{min:0,max:0},lifeRange:{min:0,max:0}}).addComponent("ClaimOnOutOfScreenBounds").addComponent("CheckOutOfBounds").addComponent("StraightMovementAngle").addComponent("Rotate",{amount:.3}).addComponent("BossParticleTween",{properties:{speed:!0},tweenProperties:{time:2,tweenStartProperties:{speed:250},tweenEndProperties:{speed:10,ease:Power2.easeOut}}}).setRenderer("Boss_1_DestroyParticleRenderer_1"),this.gameObjectPool.createConfiguration("Boss_1_DestroyParticle_2","particle").args({angleRange:{min:0,max:360},speedRange:{min:0,max:0},spreadRange:{min:0,max:0},lifeRange:{min:0,max:0}}).addComponent("ClaimOnOutOfScreenBounds").addComponent("CheckOutOfBounds").addComponent("StraightMovementAngle").addComponent("Rotate",{amount:.3}).addComponent("BossParticleTween",{properties:{speed:!0},tweenProperties:{time:2,tweenStartProperties:{speed:250},tweenEndProperties:{speed:10,ease:Power2.easeOut}}}).setRenderer("Boss_1_DestroyParticleRenderer_2"),this.gameObjectPool.createConfiguration("Boss_1_DestroyParticle_3","particle").args({angleRange:{min:0,max:360},speedRange:{min:0,max:0},spreadRange:{min:0,max:0},lifeRange:{min:0,max:0}}).addComponent("ClaimOnOutOfScreenBounds").addComponent("CheckOutOfBounds").addComponent("StraightMovementAngle").addComponent("Rotate",{amount:.3}).addComponent("BossParticleTween",{properties:{speed:!0},tweenProperties:{time:2,tweenStartProperties:{speed:250},tweenEndProperties:{speed:10,ease:Power2.easeOut}}}).setRenderer("Boss_1_DestroyParticleRenderer_3"),this.gameObjectPool.createConfiguration("Boss_2_DestroyParticle_1","particle").args({angleRange:{min:0,max:360},speedRange:{min:0,max:0},spreadRange:{min:0,max:0},lifeRange:{min:0,max:0}}).addComponent("ClaimOnOutOfScreenBounds").addComponent("CheckOutOfBounds").addComponent("StraightMovementAngle").addComponent("Rotate",{amount:.3}).addComponent("BossParticleTween",{properties:{speed:!0},tweenProperties:{time:2,tweenStartProperties:{speed:250},tweenEndProperties:{speed:10,ease:Power2.easeOut}}}).setRenderer("Boss_2_DestroyParticleRenderer_1"),this.gameObjectPool.createConfiguration("Boss_2_DestroyParticle_2","particle").args({angleRange:{min:0,max:360},speedRange:{min:0,max:0},spreadRange:{min:0,max:0},lifeRange:{min:0,max:0}}).addComponent("ClaimOnOutOfScreenBounds").addComponent("CheckOutOfBounds").addComponent("StraightMovementAngle").addComponent("Rotate",{amount:.3}).addComponent("BossParticleTween",{properties:{speed:!0},tweenProperties:{time:2,tweenStartProperties:{speed:250},tweenEndProperties:{speed:10,ease:Power2.easeOut}}}).setRenderer("Boss_2_DestroyParticleRenderer_2"),this.gameObjectPool.createConfiguration("Boss_3_DestroyParticle_1","particle").args({angleRange:{min:0,max:360},speedRange:{min:0,max:0},spreadRange:{min:0,max:0},lifeRange:{min:0,max:0}}).addComponent("ClaimOnOutOfScreenBounds").addComponent("CheckOutOfBounds").addComponent("StraightMovementAngle").addComponent("Rotate",{amount:.3}).addComponent("BossParticleTween",{properties:{speed:!0},tweenProperties:{time:2,tweenStartProperties:{speed:250},tweenEndProperties:{speed:10,ease:Power2.easeOut}}}).setRenderer("Boss_3_DestroyParticleRenderer_1"),this.gameObjectPool.createConfiguration("Boss_3_DestroyParticle_2","particle").args({angleRange:{min:0,max:360},speedRange:{min:0,max:0},spreadRange:{min:0,max:0},lifeRange:{min:0,max:0}}).addComponent("ClaimOnOutOfScreenBounds").addComponent("CheckOutOfBounds").addComponent("StraightMovementAngle").addComponent("Rotate",{amount:.3}).addComponent("BossParticleTween",{properties:{speed:!0},tweenProperties:{time:2,tweenStartProperties:{speed:250},tweenEndProperties:{speed:10,ease:Power2.easeOut}}}).setRenderer("Boss_3_DestroyParticleRenderer_2"),this.gameObjectPool.createConfiguration("Boss_4_DestroyParticle_1","particle").args({angleRange:{min:0,max:360},speedRange:{min:0,max:0},spreadRange:{min:0,max:0},lifeRange:{min:0,max:0}}).addComponent("ClaimOnOutOfScreenBounds").addComponent("CheckOutOfBounds").addComponent("StraightMovementAngle").addComponent("Rotate",{amount:.3}).addComponent("BossParticleTween",{properties:{speed:!0},tweenProperties:{time:2,tweenStartProperties:{speed:250},tweenEndProperties:{speed:10,ease:Power2.easeOut}}}).setRenderer("Boss_4_DestroyParticleRenderer_1"),this.gameObjectPool.createConfiguration("Boss_4_DestroyParticle_2","particle").args({angleRange:{min:0,max:360},speedRange:{min:0,max:0},spreadRange:{min:0,max:0},lifeRange:{min:0,max:0}}).addComponent("ClaimOnOutOfScreenBounds").addComponent("CheckOutOfBounds").addComponent("StraightMovementAngle").addComponent("Rotate",{amount:.3}).addComponent("BossParticleTween",{properties:{speed:!0},tweenProperties:{time:2,tweenStartProperties:{speed:250},tweenEndProperties:{speed:10,ease:Power2.easeOut}}}).setRenderer("Boss_4_DestroyParticleRenderer_2"),this.gameObjectPool.createConfiguration("Boss_4_DestroyParticle_3","particle").args({angleRange:{min:0,max:360},speedRange:{min:0,max:0},spreadRange:{min:0,max:0},lifeRange:{min:0,max:0}}).addComponent("ClaimOnOutOfScreenBounds").addComponent("CheckOutOfBounds").addComponent("StraightMovementAngle").addComponent("Rotate",{amount:.3}).addComponent("BossParticleTween",{properties:{speed:!0},tweenProperties:{time:2,tweenStartProperties:{speed:250},tweenEndProperties:{speed:10,ease:Power2.easeOut}}}).setRenderer("Boss_4_DestroyParticleRenderer_3"),this.gameObjectPool.createConfiguration("Boss_4_DestroyParticle_4","particle").args({angleRange:{min:0,max:360},speedRange:{min:0,max:0},spreadRange:{min:0,max:0},lifeRange:{min:0,max:0}}).addComponent("ClaimOnOutOfScreenBounds").addComponent("CheckOutOfBounds").addComponent("StraightMovementAngle").addComponent("Rotate",{amount:.3}).addComponent("BossParticleTween",{properties:{speed:!0},tweenProperties:{time:2,tweenStartProperties:{speed:250},tweenEndProperties:{speed:10,ease:Power2.easeOut}}}).setRenderer("Boss_4_DestroyParticleRenderer_4")},getStraightParticle_1_Id:function(){return"StraightParticle_1"},getStraightParticle_2_Id:function(){return"StraightParticle_2"},getStraightParticle_3_Id:function(){return"StraightParticle_3"},getArchingParticle_1_Id:function(){return"ArchingParticle_1"},getArchingParticle_2_Id:function(){return"ArchingParticle_2"},getCosineParticle_1_Id:function(){return"CosineParticle_1"},getCosineParticle_2_Id:function(){return"CosineParticle_2"},getBoss_1_DestroyParticle_1_Id:function(){return"Boss_1_DestroyParticle_1"},getBoss_1_DestroyParticle_2_Id:function(){return"Boss_1_DestroyParticle_2"},getBoss_2_DestroyParticle_1_Id:function(){return"Boss_2_DestroyParticle_1"},getBoss_2_DestroyParticle_2_Id:function(){return"Boss_2_DestroyParticle_2"},getBoss_1_DestroyParticle_3_Id:function(){return"Boss_1_DestroyParticle_3"},getBoss_3_DestroyParticle_1_Id:function(){return"Boss_3_DestroyParticle_1"},getBoss_3_DestroyParticle_2_Id:function(){return"Boss_3_DestroyParticle_2"},getBoss_4_DestroyParticle_1_Id:function(){return"Boss_4_DestroyParticle_1"},getBoss_4_DestroyParticle_2_Id:function(){return"Boss_4_DestroyParticle_2"},getBoss_4_DestroyParticle_3_Id:function(){return"Boss_4_DestroyParticle_3"},getBoss_4_DestroyParticle_4_Id:function(){return"Boss_4_DestroyParticle_4"}});return new o}),define("game-object-generator",["editor-component","gb","util"],function(e,t,i){var n=e.extend({init:function(){this._super(),this.maxAmountToSpray=null,this.sprayDelay=null,this.amountPerSpray=null,this.objectType=null,this.startingPositionTransformation=null,this.currentSprayCount=null,this.delayTime=null,this.viewports=null,this.updateGroup=null,this.self=n,this.gb=t},editorStart:function(){this.delayTime=0,this.currentSprayCount=0,this.args.viewports||(this.viewports=this.parent.getViewportList()),this.args.updateGroup||(this.updateGroup=this.parent.getUpdateGroup())},editorUpdate:function(e){this.delayTime+=e,this.delayTime>=this.sprayDelay&&(this.spray(this.self.args),this.delayTime=0)},disable:function(){this._super(),this.delayTime=0,this.currentSprayCount=0},recycle:function(){this.viewports=null,this.updateGroup=null},spray:function(e){if(this.maxAmountToSpray)if(this.currentSprayCount>this.maxAmountToSpray)this.disable(),this.execute(this.STOP_CREATION);else{if(this.isEnabled())for(var t=0;t<this.amountPerSpray;t++){if(e.x=this.parent.X,e.y=this.parent.Y,this.startingPositionTransformation)for(var n=0;n<this.startingPositionTransformation.length;n++)this.startingPositionTransformation[n].call(this,e);if(i.isArray(this.objectType)){var o=i.rand_i(0,this.objectType.length-1);this.gb.create(this.objectType[o],this.updateGroup,this.viewports,e)}else"Boss_1_Destroy_Particle_1_Generator"===this.typeId,this.gb.create(this.objectType,this.updateGroup,this.viewports,e);this.currentSprayCount++}this.execute(this.SPRAY),this.parent.execute(this.SPRAY)}else{if(this.isEnabled())for(var t=0;t<this.amountPerSpray;t++){if(e.x=this.parent.X,e.y=this.parent.Y,this.startingPositionTransformation)for(var n=0;n<this.startingPositionTransformation.length;n++)this.startingPositionTransformation[n].call(this,e);if(i.isArray(this.objectType)){var o=i.rand_i(0,this.objectType.length-1);this.gb.create(this.objectType[o],this.updateGroup,this.viewports,e)}else"Boss_1_Destroy_Particle_1_Generator"===this.typeId,this.gb.create(this.objectType,this.updateGroup,this.viewports,e);this.currentSprayCount++}this.execute(this.SPRAY),this.parent.execute(this.SPRAY)}}});return n.args={x:null,y:null},Object.defineProperty(n.prototype,"SPRAY",{get:function(){return"spray"}}),Object.defineProperty(n.prototype,"STOP_CREATION",{get:function(){return"stop_creation"}}),n}),define("child-generator",["editor-component","gb"],function(e,t){var i=e.extend({init:function(){this._super(),this.maxAmountToSpray=null,this.sprayDelay=null,this.amountPerSpray=null,this.objectType=null,this.startingPositionTransformation=null,this.currentSprayCount=null,this.delayTime=null,this.createdObjects=[],this.viewports=null,this.self=i,this.gb=t},editorStart:function(){this.delayTime=0,this.currentSprayCount=0,this.createdObjects.length=0},editorUpdate:function(e){this.delayTime+=e,this.delayTime>=this.sprayDelay&&(this.spray(this.self.args),this.delayTime=0)},disable:function(){this._super(),this.delayTime=0,this.currentSprayCount=0},recycle:function(){this.viewports=null},spray:function(e){this.maxAmountToSpray&&this.currentSprayCount>this.maxAmountToSpray?(this.disable(),this.execute(this.STOP_CREATION)):(this.create(e),this.execute(this.SPRAY))},create:function(e){if(this.isEnabled())for(var t=0;t<this.amountPerSpray;t++)this.startingPostion(e),this.gb.addChildTo(this.parent,this.objectType,this.viewports,e,"create"),this.currentSprayCount++},startingPostion:function(e){if(e.x=0,e.y=0,this.startingPositionTransformation)for(var t=0;t<this.startingPositionTransformation.length;t++)this.startingPositionTransformation[t].call(this,e)}});return i.args={x:null,y:null},Object.defineProperty(i.prototype,"SPRAY",{get:function(){return"spray"}}),Object.defineProperty(i.prototype,"STOP_CREATION",{get:function(){return"stop_creation"}}),i}),define("on-collision-game-object-generator",["game-object-generator"],function(e){var t=e.extend({init:function(){this._super(),this.excludeFromCollision="",this.self=t},editorStart:function(e){this._super(),e.on(e.COLLIDE,this,i)},editorUpdate:function(){},recycle:function(e){e.removeDelegate(e.COLLIDE,this,i)}}),i=function(e,t){e.typeId!==this.excludeFromCollision&&(this.self.args.vector=t.overlapV,this.spray(this.self.args))};return t.args={x:null,y:null,vector:null},t}),define("circle-generation",["util"],function(e){return function(t){return function(i){var n=e.rand_f(0,2*Math.PI);i.x+=Math.cos(n)*t,i.y+=Math.sin(n)*t}}}),define("offset-generation",["util"],function(){return function(e,t){return function(i){i.x+=e,i.y+=t}}}),define("rectangle-generation",["util"],function(e){return function(t,i){return function(n){n.x+=e.rand_f(-t,t),n.y+=e.rand_f(-i,i)}}}),define("particle-generator-bundle",["require","common-bundle","particle-bundle","bundle","game-object-generator","child-generator","on-collision-game-object-generator","circle-generation","circle-generation","offset-generation","rectangle-generation","offset-generation","rectangle-generation","offset-generation","rectangle-generation","offset-generation","rectangle-generation","offset-generation","rectangle-generation","circle-generation","circle-generation","circle-generation","circle-generation","circle-generation","circle-generation","circle-generation","circle-generation"],function(e){var t=(e("common-bundle"),e("particle-bundle")),i=e("bundle").extend({create:function(){this.componentPool.createPool("particle-generator",e("game-object-generator")),this.componentPool.createPool("child-particle-generator",e("child-generator")),this.componentPool.createPool("particle-collision-generator",e("on-collision-game-object-generator")),this.componentPool.createConfiguration(this.getCannonBulletCollisionParticlesId(),"particle-collision-generator").args({objectType:t.getStraightParticle_2_Id(),amountPerSpray:40,excludeFromCollision:"player-ship",startingPositionTransformation:[e("circle-generation")(10)]}),this.componentPool.createConfiguration(this.getPlayerBulletCollisionParticlesId(),"particle-collision-generator").args({objectType:t.getStraightParticle_3_Id(),amountPerSpray:10,startingPositionTransformation:[e("circle-generation")(5)]}),this.componentPool.createConfiguration(this.getBossDamageParticles_1_Id(),"child-particle-generator").args({objectType:t.getArchingParticle_1_Id(),amountPerSpray:10,sprayDelay:4,startingPositionTransformation:[e("offset-generation")(-7,-7),e("rectangle-generation")(5,5)]}),this.componentPool.createConfiguration(this.getBossDamageParticles_2_Id(),"child-particle-generator").args({objectType:t.getArchingParticle_1_Id(),amountPerSpray:10,sprayDelay:3,startingPositionTransformation:[e("offset-generation")(-7,7),e("rectangle-generation")(5,5)]}),this.componentPool.createConfiguration(this.getBossDamageParticles_3_Id(),"child-particle-generator").args({objectType:t.getArchingParticle_2_Id(),amountPerSpray:10,sprayDelay:5,startingPositionTransformation:[e("offset-generation")(10,5),e("rectangle-generation")(5,5)]}),this.componentPool.createConfiguration(this.getCannonDamageParticles_1_Id(),"child-particle-generator").args({objectType:t.getCosineParticle_1_Id(),amountPerSpray:1,sprayDelay:.2,startingPositionTransformation:[e("offset-generation")(0,-10),e("rectangle-generation")(20,10)]}),this.componentPool.createConfiguration(this.getCannonDamageParticles_2_Id(),"child-particle-generator").args({objectType:t.getCosineParticle_2_Id(),amountPerSpray:1,sprayDelay:.4,startingPositionTransformation:[e("offset-generation")(0,0),e("rectangle-generation")(20,10)]}),this.componentPool.createConfiguration(this.getBoss_1_DestroyParticlesGenerator_1_Id(),"particle-generator").args({objectType:t.getBoss_1_DestroyParticle_1_Id(),amountPerSpray:4,maxAmountToSpray:4,sprayDelay:.1,startingPositionTransformation:[e("circle-generation")(30)]}),this.componentPool.createConfiguration(this.getBoss_1_DestroyParticlesGenerator_2_Id(),"particle-generator").args({objectType:t.getBoss_1_DestroyParticle_2_Id(),amountPerSpray:2,maxAmountToSpray:2,sprayDelay:.1,startingPositionTransformation:[e("circle-generation")(30)]}),this.componentPool.createConfiguration(this.getBoss_1_DestroyParticlesGenerator_3_Id(),"particle-generator").args({objectType:t.getBoss_1_DestroyParticle_3_Id(),amountPerSpray:1,maxAmountToSpray:1,sprayDelay:.1,startingPositionTransformation:[e("circle-generation")(30)]}),this.componentPool.createConfiguration(this.getBoss_2_DestroyParticlesGenerator_1_Id(),"particle-generator").args({objectType:t.getBoss_2_DestroyParticle_1_Id(),amountPerSpray:4,maxAmountToSpray:4,sprayDelay:.1,startingPositionTransformation:[e("circle-generation")(30)]}),this.componentPool.createConfiguration(this.getBoss_2_DestroyParticlesGenerator_2_Id(),"particle-generator").args({objectType:t.getBoss_2_DestroyParticle_2_Id(),amountPerSpray:1,maxAmountToSpray:1,sprayDelay:.1,startingPositionTransformation:[e("circle-generation")(30)]}),this.componentPool.createConfiguration(this.getBoss_3_DestroyParticlesGenerator_1_Id(),"particle-generator").args({objectType:t.getBoss_3_DestroyParticle_1_Id(),amountPerSpray:4,maxAmountToSpray:4,sprayDelay:.1,startingPositionTransformation:[e("circle-generation")(30)]}),this.componentPool.createConfiguration(this.getBoss_3_DestroyParticlesGenerator_2_Id(),"particle-generator").args({objectType:t.getBoss_3_DestroyParticle_2_Id(),amountPerSpray:2,maxAmountToSpray:2,sprayDelay:.1,startingPositionTransformation:[e("circle-generation")(30)]}),this.componentPool.createConfiguration(this.getBoss_4_DestroyParticlesGenerator_1_Id(),"particle-generator").args({objectType:[t.getBoss_4_DestroyParticle_1_Id(),t.getBoss_4_DestroyParticle_2_Id(),t.getBoss_4_DestroyParticle_3_Id(),t.getBoss_4_DestroyParticle_4_Id()],amountPerSpray:8,maxAmountToSpray:8,sprayDelay:.1,startingPositionTransformation:[e("circle-generation")(30)]})},getPlayerBulletTrailingParticlesId:function(){return"TrailingParticleGenerator"},getCannonBulletCollisionParticlesId:function(){return"CannonBulletCollisionParticleGenerator"},getPlayerBulletCollisionParticlesId:function(){return"PlayerBulletCollisionParticleGenerator2"},getBossDamageParticles_1_Id:function(){return"BossDamageParticleGenerator1"},getBossDamageParticles_2_Id:function(){return"BossDamageParticleGenerator2"},getBossDamageParticles_3_Id:function(){return"BossDamageParticleGenerator3"},getCannonDamageParticles_1_Id:function(){return"CannonDamageParticleGenerator1"},getCannonDamageParticles_2_Id:function(){return"CannonDamageParticleGenerator2"},getBoss_1_DestroyParticlesGenerator_1_Id:function(){return"Boss_1_Destroy_Particle_1_Generator"},getBoss_1_DestroyParticlesGenerator_2_Id:function(){return"Boss_1_Destroy_Particle_2_Generator"},getBoss_2_DestroyParticlesGenerator_1_Id:function(){return"Boss_2_Destroy_Particle_1_Generator"},getBoss_2_DestroyParticlesGenerator_2_Id:function(){return"Boss_2_Destroy_Particle_2_Generator"},getBoss_1_DestroyParticlesGenerator_3_Id:function(){return"Boss_1_Destroy_Particle_3_Generator"},getBoss_3_DestroyParticlesGenerator_1_Id:function(){return"Boss_3_Destroy_Particle_1_Generator"},getBoss_3_DestroyParticlesGenerator_2_Id:function(){return"Boss_3_Destroy_Particle_2_Generator"},getBoss_4_DestroyParticlesGenerator_1_Id:function(){return"Boss_4_Destroy_Particle_1_Generator"}});return new i}),define("round-explosion-renderer",["animation-path-renderer","draw"],function(e){var t=e.extend({init:function(){this._super(),this.width=100,this.height=100,this.name="round-explosion-renderer",this.offset="center",this.frameDelay=.02,this.framePaths=[];for(var e=11,t=this.width/2,n=0;e>=n;n++)this.framePaths.push(i(t,t/e*n,"#FF0000","#FFFF00"))},start:function(e){this._super(e),this.offset="center"}}),i=function(e,t,i,n){return function(o){var r=o.createRadialGradient(2*e/3,0,e/5,0,0,e);r.addColorStop(.01,i),r.addColorStop(.99,n),o.beginPath(),o.fillStyle=r,o.translate(e,e),o.arc(0,0,e,0,2*Math.PI,!0),o.arc(e-t,0,t,0,2*Math.PI,!1),o.fill(),o.closePath()}};return t}),define("explosion",["editor-game-object-container","reclaimer"],function(e,t){var i=e.extend({init:function(){this._super()},start:function(){this._super(),this.renderer.once(this.renderer.COMPLETE,this,function(){t.mark(this)})},editorStart:function(){this.renderer.play()}});return i}),define("explosion-bundle",["require","bundle","round-explosion-renderer","explosion"],function(e){var t=e("bundle").extend({create:function(){this.componentPool.createPool("round-explosion-renderer",e("round-explosion-renderer")),this.componentPool.createConfiguration("ExplosionRenderer","round-explosion-renderer").args({loop:!1}),this.gameObjectPool.createDynamicPool("Explosion",e("explosion")),this.gameObjectPool.createConfiguration(this.getMicroExplosionsId(),"Explosion").args({scaleX:.35,scaleY:.35}).setRenderer("ExplosionRenderer"),this.gameObjectPool.createConfiguration(this.getSmallExplosionsId(),"Explosion").args({scaleX:.25,scaleY:.25}).setRenderer("ExplosionRenderer"),this.gameObjectPool.createConfiguration(this.getMediumExplosionsId(),"Explosion").args({scaleX:.45,scaleY:.45}).setRenderer("ExplosionRenderer"),this.gameObjectPool.createConfiguration(this.getLargeExplosionsId(),"Explosion").args({scaleX:1,scaleY:1}).setRenderer("ExplosionRenderer")
},getMicroExplosionsId:function(){return"MicroExplosion"},getSmallExplosionsId:function(){return"SmallExplosion"},getMediumExplosionsId:function(){return"MediumExplosion"},getLargeExplosionsId:function(){return"LargeExplosion"}});return new t}),define("child-tracking-generator",["editor-component","gb"],function(e,t){var i=e.extend({init:function(){this._super(),this.maxAmountToSpray=null,this.sprayDelay=null,this.amountPerSpray=null,this.objectType=null,this.startingPositionTransformation=null,this.currentSprayCount=null,this.delayTime=null,this.createdObjects=[],this.stopped=!1,this.viewports=null,this.self=i,this.gb=t},editorStart:function(){this.delayTime=0,this.currentSprayCount=0,this.createdObjects.length=0,this.stopped=!1},editorUpdate:function(e){this.delayTime+=e,this.delayTime>=this.sprayDelay&&(this.spray(this.self.args),this.delayTime=0)},stop:function(){this.stopped=!0,this.createdObjects.length=0,this.disable()},disable:function(){this._super(),this.delayTime=0,this.currentSprayCount=0},recycle:function(){this.viewports=null},spray:function(e){if(!this.stopped)if(this.maxAmountToSpray){if(this.currentSprayCount>this.maxAmountToSpray)this.disable(),this.execute(this.STOP_CREATION),this.parent.execute(this.STOP_CREATION);else if(this.isEnabled()){for(var t=0;t<this.amountPerSpray;t++){if(e.x=0,e.y=0,this.startingPositionTransformation)for(var i=0;i<this.startingPositionTransformation.length;i++)this.startingPositionTransformation[i].call(this,e);var o=this.gb.addChildTo(this.parent,this.objectType,this.viewports,e,"create");this.createdObjects.push(o),o.once(o.RECYCLE,this,n),this.currentSprayCount++}this.execute(this.SPRAY),this.parent.execute(this.SPRAY)}}else if(this.isEnabled()){for(var t=0;t<this.amountPerSpray;t++){if(e.x=0,e.y=0,this.startingPositionTransformation)for(var i=0;i<this.startingPositionTransformation.length;i++)this.startingPositionTransformation[i].call(this,e);var o=this.gb.addChildTo(this.parent,this.objectType,this.viewports,e,"create");this.createdObjects.push(o),o.once(o.RECYCLE,this,n),this.currentSprayCount++}this.execute(this.SPRAY),this.parent.execute(this.SPRAY)}}}),n=function(e){if(!this.stopped){var t=this.createdObjects.indexOf(e);-1!=t&&this.createdObjects.splice(t,1),this.isEnabled()||0!=this.createdObjects.length||this.execute(this.STOP_AND_ALL_RECYCLED)}};return i.args={x:null,y:null},Object.defineProperty(i.prototype,"SPRAY",{get:function(){return"spray"}}),Object.defineProperty(i.prototype,"STOP_CREATION",{get:function(){return"stop_creation"}}),Object.defineProperty(i.prototype,"STOP_AND_ALL_RECYCLED",{get:function(){return"stop_and_all_recycled"}}),i}),define("explosion-generator-bundle",["require","explosion-bundle","bundle","child-tracking-generator","game-object-generator","rectangle-generation","rectangle-generation","rectangle-generation","rectangle-generation","rectangle-generation"],function(e){var t=e("explosion-bundle"),i=e("bundle").extend({create:function(){this.componentPool.createPool("child-explosions-generator",e("child-tracking-generator")),this.componentPool.createPool("explosions-generator",e("game-object-generator")),this.componentPool.createConfiguration(this.getSingleSmallExplosionEffectId(),"child-explosions-generator").args({objectType:t.getSmallExplosionsId(),sprayDelay:.03,amountPerSpray:1,maxAmountToSpray:1,startingPositionTransformation:[],viewports:[{viewport:"Main",layer:"Effects"}]}),this.componentPool.createConfiguration(this.getPlayerDestroyExplosionsEffectId(),"explosions-generator").args({objectType:t.getMicroExplosionsId(),sprayDelay:.03,amountPerSpray:2,maxAmountToSpray:30,startingPositionTransformation:[e("rectangle-generation")(35,35)],viewports:[{viewport:"Main",layer:"Effects"}]}),this.componentPool.createConfiguration(this.getMicroExplosionsEffectId(),"explosions-generator").args({objectType:t.getMicroExplosionsId(),sprayDelay:.03,amountPerSpray:1,maxAmountToSpray:10,startingPositionTransformation:[e("rectangle-generation")(20,20)],viewports:[{viewport:"Main",layer:"Effects"}]}),this.componentPool.createConfiguration(this.getSmallExplosionsEffectId(),"child-explosions-generator").args({objectType:t.getSmallExplosionsId(),sprayDelay:.1,amountPerSpray:4,maxAmountToSpray:110,startingPositionTransformation:[e("rectangle-generation")(60,75)],viewports:[{viewport:"Main",layer:"Effects"}]}),this.componentPool.createConfiguration(this.getMediumExplosionsEffectId(),"child-explosions-generator").args({objectType:t.getMediumExplosionsId(),sprayDelay:.03,amountPerSpray:1,maxAmountToSpray:13,startingPositionTransformation:[e("rectangle-generation")(20,20)],viewports:[{viewport:"Main",layer:"Effects"}]}),this.componentPool.createConfiguration(this.getLargeExplosionsEffectId(),"explosions-generator").args({objectType:t.getLargeExplosionsId(),sprayDelay:.01,amountPerSpray:5,maxAmountToSpray:5,startingPositionTransformation:[e("rectangle-generation")(40,40)],viewports:[{viewport:"Main",layer:"Effects"}]})},getPlayerDestroyExplosionsEffectId:function(){return"PlayerDestroyExplosionsEffectId"},getSingleSmallExplosionEffectId:function(){return"SingleSmallExplosionsEffect"},getMicroExplosionsEffectId:function(){return"MicroExplosionsEffect"},getSmallExplosionsEffectId:function(){return"SmallExplosionsEffect"},getMediumExplosionsEffectId:function(){return"MediumExplosionsEffect"},getLargeExplosionsEffectId:function(){return"LargeExplosionsEffect"}});return new i}),define("add-components-bundle",["require","common-bundle","particle-generator-bundle","explosion-generator-bundle","bundle"],function(e){var t=e("common-bundle"),i=e("particle-generator-bundle"),n=e("explosion-generator-bundle"),o=e("bundle").extend({create:function(){this.componentPool.createConfiguration("BossTwitch",t.getTwitchPoolId()),this.componentPool.createConfiguration("AddBossOnDestroyLastExplosions",t.getAddComponentPoolId()).args({componentId:n.getLargeExplosionsEffectId(),parentEvent:"stop_creation",executeOnce:!0,componentArgs:null}),this.componentPool.createConfiguration("AddBoss_1_OnDestroyParticles_1",t.getAddComponentPoolId()).args({componentId:i.getBoss_1_DestroyParticlesGenerator_1_Id(),parentEvent:"stop_creation",executeOnce:!0,componentArgs:null}),this.componentPool.createConfiguration("AddBoss_1_OnDestroyParticles_2",t.getAddComponentPoolId()).args({componentId:i.getBoss_1_DestroyParticlesGenerator_2_Id(),parentEvent:"stop_creation",executeOnce:!0,componentArgs:null}),this.componentPool.createConfiguration("AddBoss_1_OnDestroyParticles_3",t.getAddComponentPoolId()).args({componentId:i.getBoss_1_DestroyParticlesGenerator_3_Id(),parentEvent:"stop_creation",executeOnce:!0,componentArgs:null}),this.componentPool.createConfiguration("AddBoss_2_OnDestroyParticles_1",t.getAddComponentPoolId()).args({componentId:i.getBoss_2_DestroyParticlesGenerator_1_Id(),parentEvent:"stop_creation",executeOnce:!0,componentArgs:null}),this.componentPool.createConfiguration("AddBoss_2_OnDestroyParticles_2",t.getAddComponentPoolId()).args({componentId:i.getBoss_2_DestroyParticlesGenerator_2_Id(),parentEvent:"stop_creation",executeOnce:!0,componentArgs:null}),this.componentPool.createConfiguration("AddBoss_3_OnDestroyParticles_1",t.getAddComponentPoolId()).args({componentId:i.getBoss_3_DestroyParticlesGenerator_1_Id(),parentEvent:"stop_creation",executeOnce:!0,componentArgs:null}),this.componentPool.createConfiguration("AddBoss_3_OnDestroyParticles_2",t.getAddComponentPoolId()).args({componentId:i.getBoss_3_DestroyParticlesGenerator_2_Id(),parentEvent:"stop_creation",executeOnce:!0,componentArgs:null}),this.componentPool.createConfiguration("AddBoss_4_OnDestroyParticles_1",t.getAddComponentPoolId()).args({componentId:i.getBoss_4_DestroyParticlesGenerator_1_Id(),parentEvent:"stop_creation",executeOnce:!0,componentArgs:null}),this.componentPool.createConfiguration("AddBossTwitchOnDestroy",t.getAddComponentPoolId()).args({componentId:"BossTwitch",parentEvent:"destroyed",executeOnce:!0,componentArgs:{amount:5}}),this.componentPool.createConfiguration("BulletHitFlash",t.getDamageFlashPoolId()),this.componentPool.createConfiguration("AddBulletHitFlash",t.getAddComponentPoolId()).args({componentId:"BulletHitFlash",parentEvent:"hit",executeOnce:!1,componentArgs:{flashTime:20}}),this.componentPool.createConfiguration("AddPlayerHitFlash",t.getAddComponentPoolId()).args({componentId:"BulletHitFlash",parentEvent:"damage",executeOnce:!1,componentArgs:{flashTime:200}}),this.componentPool.createConfiguration("RestartLastBGM",t.getAddGameObjectPoolId()).args({goId:"bgm-last",parentEvent:"all-bosses-destroyed",group:"First",viewports:[{viewport:"Main",layer:"Front"}],executeOnce:!1}),this.componentPool.createConfiguration("StopCurrentBGM",t.getAddGameObjectPoolId()).args({goId:"bgm-stop-current",parentEvent:"last-boss-destroyed",group:"First",viewports:[{viewport:"Main",layer:"Front"}],executeOnce:!1}),this.componentPool.createConfiguration("StopCurrentAndRestartLastBGM",t.getAddGameObjectPoolId()).args({goId:"bgm-last",parentEvent:"boss-stop",group:"First",viewports:[{viewport:"Main",layer:"Front"}],executeOnce:!1}),this.componentPool.createConfiguration("PlayerStopCurrentBGM",t.getAddGameObjectPoolId()).args({goId:"bgm-stop-current",parentEvent:"no_control",group:"First",viewports:[{viewport:"Main",layer:"Front"}],executeOnce:!1}),this.componentPool.createConfiguration("LevelItemStopCurrentBGM",t.getAddGameObjectPoolId()).args({goId:"bgm-stop-current",parentEvent:"pick-up",group:"First",viewports:[{viewport:"Main",layer:"Front"}],executeOnce:!1})}});return new o}),define("hp-meter",["editor-game-object-container","player-getter"],function(e,t){var i=e.extend({init:function(){this._super()},editorStart:function(){this.renderer.play("5Hp");var e=t.get();t.get().on(e.HEALTH_DOWN,this,function(e){this.renderer.play(e+"Hp")}),t.get().on(e.HEALTH_UP,this,function(e){this.renderer.play(e+"Hp")})},editorUpdate:function(){}});return i}),define("upwards-movement",["component","TweenLite","EasePack"],function(e,t){var i=e.extend({start:function(e){if(this._super(e),"undefined"==typeof this.endX||null===this.endX)throw new Error("Missing endX property");if("undefined"==typeof this.endY||null===this.endY)throw new Error("Missing endY property");if(!this.time)throw new Error("Missing time property");t.to(this.parent,this.time,{x:this.parent.X+this.endX,y:this.parent.Y+this.endY,onCompleteScope:this,onComplete:function(){this.parent&&this.parent.execute("finish-upward-movement")}})},recycle:function(e){t.killTweensOf(e),this._super(e)}});return i}),define("claim-on-delegate",["component","gb"],function(e,t){var i=e.extend({init:function(){this._super()},start:function(e){if(this._super(e),!this.delegateName)throw new Error("Missing delegateName property");this.parent.on(this.delegateName,this,function(){t.reclaimer.mark(this.parent)})}});return i}),define("hud-bundle",["require","common-bundle","gb","bundle","hp-meter","upwards-movement","claim-on-delegate"],function(e){var t=e("common-bundle"),i=e("gb"),n=e("bundle").extend({create:function(){this.gameObjectPool.createDynamicPool("HpMeterType",e("hp-meter")),this.componentPool.createConfiguration("HpMeterRenderer",t.getAnimationsBitmapRendererPoolId()).args({startingLabel:"5Hp",frameWidth:256,frameHeight:64,frameDelay:1,frameCount:6,path:i.assetMap()["HPMETER.PNG"],labels:{"0Hp":{loop:!1,frames:[0]},"1Hp":{loop:!1,frames:[1]},"2Hp":{loop:!1,frames:[2]},"3Hp":{loop:!1,frames:[3]},"4Hp":{loop:!1,frames:[4]},"5Hp":{loop:!1,frames:[5]}}}),this.gameObjectPool.createConfiguration("HpMeter","HpMeterType").setRenderer("HpMeterRenderer"),this.componentPool.createPool("UpwardsMovement",e("upwards-movement")),this.componentPool.createPool("ClaimOnDelegate",e("claim-on-delegate")),this.componentPool.createConfiguration("UpwardsMovement","UpwardsMovement").args({endX:0,endY:-100,time:1}),this.componentPool.createConfiguration("ClaimOnDelegate","ClaimOnDelegate").args({delegateName:"finish-upward-movement"}),this.componentPool.createConfiguration("TextRenderer",t.getTextRendererPoolId()),this.gameObjectPool.createConfiguration("PowerDown",t.getGameObjectPoolId()).addComponent("UpwardsMovement").addComponent("ClaimOnDelegate").setRenderer("TextRenderer",{name:"power-down",text:"Power Down",fillColor:"none",strokeColor:"#FFFFFF",font:"Russo One",padding:3,size:20,offset:"center",lineWidth:.5}),this.gameObjectPool.createConfiguration("SpeedDown",t.getGameObjectPoolId()).addComponent("UpwardsMovement").addComponent("ClaimOnDelegate").setRenderer("TextRenderer",{name:"speed-down",text:"Speed Down",fillColor:"none",strokeColor:"#FFFFFF",font:"Russo One",padding:3,size:20,offset:"center",lineWidth:.5}),this.gameObjectPool.createConfiguration("HpDown",t.getGameObjectPoolId()).addComponent("UpwardsMovement").addComponent("ClaimOnDelegate").setRenderer("TextRenderer",{name:"hp-down",text:"Hp Down",fillColor:"none",strokeColor:"#FFFFFF",font:"Russo One",padding:3,size:20,offset:"center",lineWidth:.5}),this.gameObjectPool.createConfiguration("PowerUp",t.getGameObjectPoolId()).addComponent("UpwardsMovement").addComponent("ClaimOnDelegate").setRenderer("TextRenderer",{name:"power-up",text:"Power Up!",fillColor:"none",strokeColor:"#FFFFFF",font:"Russo One",padding:3,size:20,offset:"center",lineWidth:.5}),this.gameObjectPool.createConfiguration("SpeedUp",t.getGameObjectPoolId()).addComponent("UpwardsMovement").addComponent("ClaimOnDelegate").setRenderer("TextRenderer",{name:"speed-up",text:"Speed Up!",fillColor:"none",strokeColor:"#FFFFFF",font:"Russo One",padding:3,size:20,offset:"center",lineWidth:.5}),this.gameObjectPool.createConfiguration("HpUp",t.getGameObjectPoolId()).addComponent("UpwardsMovement").addComponent("ClaimOnDelegate").setRenderer("TextRenderer",{name:"hp-up",text:"Hp Up!",fillColor:"none",strokeColor:"#FFFFFF",font:"Russo One",padding:3,size:20,offset:"center",lineWidth:.5})}});return new n}),define("ship-renderer",["path-renderer","path-cache","draw","vector-2D"],function(e,t,i,n){var o=e.extend({init:function(){this._super(),this.size=30,this.color="#FFFFFF",this.exhaustOffset=.3*this.size,this.exhaustRadius=.8*this.size,this.engineSize=.7*this.size,this.innerWindow=.3*this.size,this.outerWindow=.5*this.size,this.middleWindow=.4*this.size,this.middleDetailSize=.025*this.size;var e=Math.cos(270*(Math.PI/180))*this.size,t=Math.sin(270*(Math.PI/180))*this.size,i=Math.cos(30*(Math.PI/180))*this.size,o=Math.sin(30*(Math.PI/180))*this.size,r=Math.cos(150*(Math.PI/180))*this.size,s=Math.sin(150*(Math.PI/180))*this.size,a=Math.cos(330*(Math.PI/180))*this.size,l=Math.sin(330*(Math.PI/180))*this.size,h=Math.cos(90*(Math.PI/180))*this.size,c=Math.sin(90*(Math.PI/180))*this.size,d=Math.cos(210*(Math.PI/180))*this.size,u=Math.sin(210*(Math.PI/180))*this.size;this.points=[new n(e,t),new n(a,l),new n(i,o),new n(h,c),new n(r,s),new n(d,u)],this.width=60,this.height=70,this.name="ship-renderer",this.offset="center"},start:function(e){this._super(e),this.offset="center"},drawPath:function(e){e.strokeStyle=this.color,e.beginPath(),e.translate(this.width/2,this.height/2),e.moveTo(0,this.exhaustOffset),e.arc(0,this.exhaustOffset,this.exhaustRadius,55*(Math.PI/180),65*(Math.PI/180)),e.closePath(),e.moveTo(0,this.exhaustOffset),e.arc(0,this.exhaustOffset,this.exhaustRadius,85*(Math.PI/180),95*(Math.PI/180)),e.closePath(),e.moveTo(0,this.exhaustOffset),e.arc(0,this.exhaustOffset,this.exhaustRadius,115*(Math.PI/180),125*(Math.PI/180)),e.closePath(),e.stroke(),i.circle(e,0,this.exhaustOffset,this.engineSize,"#000000",this.color,1),i.quadraticPolygon(e,0,0,this.points,"#000000",this.color,1),i.circle(e,0,0,this.innerWindow,null,this.color,1),i.circle(e,0,0,this.outerWindow,null,this.color,1);for(var t=45,n=0;8>n;n++)i.circle(e,Math.cos(t*n*(Math.PI/180))*this.middleWindow,Math.sin(t*n*(Math.PI/180))*this.middleWindow,this.middleDetailSize,this.color,null,1)}});return o}),define("player-damage-feedback",["component","gb","timer-factory"],function(e,t,i){var n=e.extend({init:function(){this._super(),this.startPos=!1,this.lastX,this.lastY,this.amount=1,this.damageExplosions=null,this.explosionsGenerator=null},setExplosions:function(e){this.damageExplosions=e},enable:function(){this._super(),this.startPos=!1,this.explosionsGenerator=t.addComponentTo(this.parent,this.damageExplosions),this.disableTimer&&this.disableTimer.remove(),i.get(this,"disableTimer","disableTimer"),this.disableTimer.configure({delay:400}),this.disableTimer.on(this.disableTimer.COMPLETE,function(){this.disable(),this.execute("complete")},!0),this.explosionsGenerator.once(this.explosionsGenerator.STOP_CREATION,this,function(){this.parent.removeComponent(this.explosionsGenerator),this.disableTimer.start(),this.explosionsGenerator=null,this.execute("complete_explosions")})},update:function(){this.startPos?(this.parent.viewportOffsetX=this.lastX,this.parent.viewportOffsetY=this.lastY):(this.lastX=this.parent.viewportOffsetX,this.lastY=this.parent.viewportOffsetY,this.amount*=-1,this.parent.viewportOffsetX+=Math.random()*this.amount,this.parent.viewportOffsetY+=Math.random()*this.amount),this.startPos=!this.startPos},recycle:function(e){this.disableTimer&&this.disableTimer.remove(),this._super(e)}});return n}),define("player-destroy-feedback",["component","gb"],function(e,t){var i=e.extend({init:function(){this._super(),this.dirX,this.dirY},setDirection:function(e){e.normalize(),this.dirX=e.x,this.dirY=e.y},enable:function(){this._super()},update:function(e){this.parent.rotation+=15,this.parent.viewportOffsetX-=this.dirX*e*150,this.parent.viewportOffsetY-=this.dirY*e*150,this.parent.getViewportVisibility("Main")||(t.reclaimer.mark(this.parent),this.execute("complete"))}});return i}),define("player-explode-feedback",["component","gb"],function(e,t){var i=e.extend({init:function(){this._super(),this.damageExplosions=null},enable:function(){this._super(),t.addComponentTo(this.parent,"PlayerSmallExplosion"),this.parent.damageComponent.setExplosions(this.damageExplosions),this.parent.damageComponent.enable(),this.parent.damageComponent.once("complete_explosions",this,function(){t.reclaimer.mark(this.parent),this.execute("complete")})},update:function(){}});return i});var _gsScope="undefined"!=typeof module&&module.exports&&"undefined"!=typeof global?global:this||window;(_gsScope._gsQueue||(_gsScope._gsQueue=[])).push(function(){_gsScope._gsDefine.plugin({propName:"directionalRotation",version:"0.2.1",API:2,init:function(e,t){"object"!=typeof t&&(t={rotation:t}),this.finals={};var i,n,o,r,s,a,l=t.useRadians===!0?2*Math.PI:360,h=1e-6;for(i in t)"useRadians"!==i&&(a=(t[i]+"").split("_"),n=a[0],o=parseFloat("function"!=typeof e[i]?e[i]:e[i.indexOf("set")||"function"!=typeof e["get"+i.substr(3)]?i:"get"+i.substr(3)]()),r=this.finals[i]="string"==typeof n&&"="===n.charAt(1)?o+parseInt(n.charAt(0)+"1",10)*Number(n.substr(2)):Number(n)||0,s=r-o,a.length&&(n=a.join("_"),-1!==n.indexOf("short")&&(s%=l,s!==s%(l/2)&&(s=0>s?s+l:s-l)),-1!==n.indexOf("_cw")&&0>s?s=(s+9999999999*l)%l-(s/l|0)*l:-1!==n.indexOf("ccw")&&s>0&&(s=(s-9999999999*l)%l-(s/l|0)*l)),(s>h||-h>s)&&(this._addTween(e,i,o,o+s,i),this._overwriteProps.push(i)));return!0},set:function(e){var t;if(1!==e)this._super.setRatio.call(this,e);else for(t=this._firstPT;t;)t.f?t.t[t.p](this.finals[t.p]):t.t[t.p]=this.finals[t.p],t=t._next}})._autoCSS=!0}),_gsScope._gsDefine&&_gsScope._gsQueue.pop()(),define("DirectionalRotationPlugin",function(){}),define("player-ship",["editor-game-object-container","keyboard","gb","matrix-3x3","TweenLite","DirectionalRotationPlugin","EasePack"],function(e,t,i,n,o){var r={},s=new n,a={x:0,y:0,angle:0,rotation:0,playerSpeed:0},l={x:0,y:0},h=[{viewport:"Main",layer:"Front"}],c=e.extend({init:function(){this._super(),this.speed=200,this.hp=5,this.maxBulletAmount=1,this.forwardSpeed=this.speed,this.maxForwardSpeed=this.forwardSpeed,this.angle=0,this.direction="right",this.viewportOffsetX=0,this.viewportOffsetY=0,this.block=!1,this.leftShootingPositions=null,this.middleShootingPositions=null,this.rightShootingPositions=null,this.damageComponent=null,this.destroyComponent=null,this.explodeComponent=null},editorStart:function(){this.speed=200,this.hp=5,this.maxBulletAmount=1,this.leftShootingPositions=this.findChildren().first(function(e){return"ShootingPosition"==e.typeId&&"left"==e.name}),this.middleShootingPositions=this.findChildren().first(function(e){return"ShootingPosition"==e.typeId&&"middle"==e.name}),this.rightShootingPositions=this.findChildren().first(function(e){return"ShootingPosition"==e.typeId&&"right"==e.name}),t.onKeyDown(t.A,this,function(){this.block||this.destroyComponent.isEnabled()||this.explodeComponent.isEnabled()||(this.execute("shot"),1==this.maxBulletAmount&&(this.middleShootingPositions.getTransform(r,s),a.x=r.x,a.y=r.y,a.angle=this.angle,a.rotation=this.rotation-90,a.playerSpeed=this.maxForwardSpeed,i.add(this.bulletsType,"First",h,a)),2==this.maxBulletAmount&&(this.leftShootingPositions.getTransform(r,s),a.x=r.x,a.y=r.y,a.angle=this.angle,a.rotation=this.rotation-90,a.playerSpeed=this.maxForwardSpeed,i.add(this.bulletsType,"First",h,a),this.rightShootingPositions.getTransform(r,s),a.x=r.x,a.y=r.y,a.angle=this.angle,a.rotation=this.rotation-90,a.playerSpeed=this.maxForwardSpeed,i.add(this.bulletsType,"First",h,a)),3==this.maxBulletAmount&&(this.middleShootingPositions.getTransform(r,s),a.x=r.x,a.y=r.y,a.angle=this.angle,a.rotation=this.rotation-90,a.playerSpeed=this.maxForwardSpeed,i.add(this.bulletsType,"First",h,a),this.leftShootingPositions.getTransform(r,s),a.x=r.x,a.y=r.y,a.angle=this.angle,a.rotation=this.rotation-90,a.playerSpeed=this.maxForwardSpeed,i.add(this.bulletsType,"First",h,a),this.rightShootingPositions.getTransform(r,s),a.x=r.x,a.y=r.y,a.angle=this.angle,a.rotation=this.rotation-90,a.playerSpeed=this.maxForwardSpeed,i.add(this.bulletsType,"First",h,a)))},"player-ship-keyboard"),this.smallExhausts=this.findChildren().allWithType("SmallExhaust"),this.mediumExhausts=this.findChildren().allWithType("MediumExhaust"),this.findChildren().allWithType("Exhaust").forEach(function(e){e.turnOn()}),t.onKeyDown(t.GAME_RIGHT,this,function(){this.block||this.destroyComponent.isEnabled()||this.explodeComponent.isEnabled()||90==this.rotation&&f.call(this)},"player-ship-keyboard"),t.onKeyUp(t.GAME_RIGHT,this,function(){this.block||this.destroyComponent.isEnabled()||this.explodeComponent.isEnabled()||90==this.rotation&&u.call(this)},"player-ship-keyboard"),t.onKeyDown(t.GAME_LEFT,this,function(){this.block||this.destroyComponent.isEnabled()||this.explodeComponent.isEnabled()||270==this.rotation&&f.call(this)},"player-ship-keyboard"),t.onKeyUp(t.GAME_LEFT,this,function(){this.block||this.destroyComponent.isEnabled()||this.explodeComponent.isEnabled()||270==this.rotation&&u.call(this)},"player-ship-keyboard"),t.onKeyDown(t.GAME_UP,this,function(){this.block||this.destroyComponent.isEnabled()||this.explodeComponent.isEnabled()||0==this.rotation&&f.call(this)},"player-ship-keyboard"),t.onKeyUp(t.GAME_UP,this,function(){this.block||this.destroyComponent.isEnabled()||this.explodeComponent.isEnabled()||0==this.rotation&&u.call(this)},"player-ship-keyboard"),t.onKeyDown(t.GAME_DOWN,this,function(){this.block||this.destroyComponent.isEnabled()||this.explodeComponent.isEnabled()||180==this.rotation&&f.call(this)},"player-ship-keyboard"),t.onKeyUp(t.GAME_DOWN,this,function(){this.block||this.destroyComponent.isEnabled()||this.explodeComponent.isEnabled()||180==this.rotation&&u.call(this)},"player-ship-keyboard"),u.call(this),this.damageComponent=this.findComponents().firstWithType("ShipDamage"),this.destroyComponent=this.findComponents().firstWithType("ShipDestroy"),this.explodeComponent=this.findComponents().firstWithType("ShipExplode"),this.explodeComponent.once("complete",this,function(){this.hp<=0&&(this.block=!0,this.execute(this.DESTROYED))}),this.destroyComponent.once("complete",this,function(){this.block=!0,this.execute(this.DESTROYED)})},editorUpdate:function(e){this.block||this.destroyComponent.isEnabled()||this.explodeComponent.isEnabled()||(this.x+=Math.cos(this.angle)*this.forwardSpeed/4*e,this.y+=Math.sin(this.angle)*this.forwardSpeed/4*e,t.isKeyDown(t.GAME_LEFT)&&this.viewportOffsetX-this.speed*e>20&&(this.viewportOffsetX-=this.speed*e),t.isKeyDown(t.GAME_RIGHT)&&this.viewportOffsetX+this.speed*e<i.canvas.width-20&&(this.viewportOffsetX+=this.speed*e),t.isKeyDown(t.GAME_UP)&&this.viewportOffsetY-this.speed*e>20&&(this.viewportOffsetY-=this.speed*e),t.isKeyDown(t.GAME_DOWN)&&this.viewportOffsetY+this.speed*e<i.canvas.height-20&&(this.viewportOffsetY+=this.speed*e))},onCollide:function(e,t){if(!this.explodeComponent.isEnabled()){if(this.destroyComponent.isEnabled())return void(("Obstacle"==e.poolId||"Boss_1"==e.poolId||"Boss_Cables"==e.poolId)&&(this.destroyComponent.disable(),this.explodeComponent.enable()));switch(e.poolId){case"Obstacle":this.damageComponent.isEnabled()||(this.damageComponent.enable(),this.takeDamage(t.overlapV)),this.viewportOffsetX-=t.overlapV.x,this.viewportOffsetY-=t.overlapV.y;break;case"CannonBullet":this.damageComponent.isEnabled()||(this.damageComponent.enable(),this.takeDamage(t.overlapV));break;case"EnemyShip_1_Type":this.damageComponent.isEnabled()||(this.damageComponent.enable(),this.takeDamage(t.overlapV));break;case"EnemyShip_2_Type":this.damageComponent.isEnabled()||(this.damageComponent.enable(),this.takeDamage(t.overlapV));break;case"Laser":this.damageComponent.isEnabled()||(this.damageComponent.enable(),this.takeDamage(t.overlapV));break;case"Missile":this.damageComponent.isEnabled()||(this.damageComponent.enable(),this.takeDamage(t.overlapV));break;case"Boss_1":this.damageComponent.isEnabled()||(this.damageComponent.enable(),this.takeDamage(t.overlapV)),this.viewportOffsetX-=t.overlapV.x,this.viewportOffsetY-=t.overlapV.y;break;case"Boss_1_Cables":this.damageComponent.isEnabled()||(this.damageComponent.enable(),this.takeDamage(t.overlapV)),this.viewportOffsetX-=t.overlapV.x,this.viewportOffsetY-=t.overlapV.y;break;case"Boss_2_Body":this.damageComponent.isEnabled()||(this.damageComponent.enable(),this.takeDamage(t.overlapV)),this.viewportOffsetX-=t.overlapV.x,this.viewportOffsetY-=t.overlapV.y;break;case"Boss_3_Body":this.damageComponent.isEnabled()||(this.damageComponent.enable(),this.takeDamage(t.overlapV)),this.viewportOffsetX-=t.overlapV.x,this.viewportOffsetY-=t.overlapV.y;break;case"Boss_4_Body":this.damageComponent.isEnabled()||(this.damageComponent.enable(),this.takeDamage(t.overlapV)),this.viewportOffsetX-=t.overlapV.x,this.viewportOffsetY-=t.overlapV.y;break;case"MineType":this.damageComponent.isEnabled()||(this.damageComponent.enable(),this.takeDamage(t.overlapV))}}},recycle:function(){TweenLite.killTweensOf(this),t.levelCleanUp("player-ship-keyboard"),this.middleShootingPositions=null,this.leftShootingPositions=null,this.rightShootingPositions=null,this._super()},isBlocked:function(){return this.block},blockControls:function(){u.call(this),this.block=!0,this.execute(this.BLOCK)},unblockControls:function(){this.block=!1,this.execute(this.UNBLOCK),u.call(this)},move:function(e){"undefined"!=typeof e&&null!=e&&(e%=360,0>e&&(e+=360),this.angle=e*(Math.PI/180),o.to(this,.3,{directionalRotation:e+90+"_short"})),o.to(this,1,{forwardSpeed:this.maxForwardSpeed}),this.execute(this.MOVE)},setMaxForwardSpeed:function(e){this.maxForwardSpeed=e},stopMovement:function(){u.call(this),this.forwardSpeed=0,this.maxForwardSpeed=200,TweenLite.killTweensOf(this),this.execute(this.STOP_MOVEMENT)},isStopped:function(){return 0===this.forwardSpeed},getMaxForwardSpeed:function(){return this.maxForwardSpeed},getDirection:function(){return Math.round(this.angle*(180/Math.PI))},powerUp:function(){this.maxBulletAmount<3&&(this.maxBulletAmount++,l.x=this.X,l.y=this.Y,i.create("PowerUp","First",h,l))},speedUp:function(){this.speed<300&&(this.speed+=50,l.x=this.X,l.y=this.Y,i.create("SpeedUp","First",h,l))},healthUp:function(){this.hp<5&&(this.hp++,l.x=this.X,l.y=this.Y,i.create("HpUp","First",h,l),this.execute(this.HEALTH_UP,this.hp))},takeDamage:function(e){if(this.hp>0)if(this.hp--,this.execute(this.HEALTH_DOWN,this.hp),0==this.hp)this.execute(this.DAMAGE),this.damageComponent.disable(),this.destroyComponent.enable(),this.destroyComponent.setDirection(e),d.call(this),this.execute(this.NO_CONTROL);else{if(this.hp<=0)return;this.execute(this.DAMAGE),l.x=this.X,l.y=this.Y,p=null,Math.random()>.5?this.maxBulletAmount>1&&(this.maxBulletAmount--,p=i.create("PowerDown","First",h,l)):this.speed>200&&(this.speed-=50,p=i.create("SpeedDown","First",h,l)),p||i.create("HpDown","First",h,l)}}}),d=function(){this.smallExhausts.forEach(function(e){e.hide()}),this.mediumExhausts.forEach(function(e){e.hide()})},u=function(){this.block||0==this.forwardSpeed||(this.smallExhausts.forEach(function(e){e.show()}),this.mediumExhausts.forEach(function(e){e.hide()}))},f=function(){this.block||0==this.forwardSpeed||(this.smallExhausts.forEach(function(e){e.hide()}),this.mediumExhausts.forEach(function(e){e.show()}))};return Object.defineProperty(c.prototype,"MOVE",{get:function(){return"move"}}),Object.defineProperty(c.prototype,"STOP_MOVEMENT",{get:function(){return"stop_movement"}}),Object.defineProperty(c.prototype,"BLOCK",{get:function(){return"block"}}),Object.defineProperty(c.prototype,"UNBLOCK",{get:function(){return"unblock"}}),Object.defineProperty(c.prototype,"HEALTH_UP",{get:function(){return"health_up"}}),Object.defineProperty(c.prototype,"HEALTH_DOWN",{get:function(){return"health_down"}}),Object.defineProperty(c.prototype,"DAMAGE",{get:function(){return"damage"}}),Object.defineProperty(c.prototype,"DESTROYED",{get:function(){return"destroyed"}}),Object.defineProperty(c.prototype,"NO_CONTROL",{get:function(){return"no_control"}}),c}),define("exhaust",["editor-game-object-container"],function(e){var t=e.extend({init:function(){this._super()},turnOn:function(){this.renderer.play()}});return t}),define("ship-bundle",["require","common-bundle","explosion-generator-bundle","gb","bundle","ship-renderer","player-damage-feedback","player-destroy-feedback","player-explode-feedback","player-ship","exhaust"],function(e){var t=e("common-bundle"),i=e("explosion-generator-bundle"),n=e("gb"),o=e("bundle").extend({create:function(){this.componentPool.createPool("ship-renderer",e("ship-renderer")),this.componentPool.createPool("player-damage-feedback",e("player-damage-feedback")),this.componentPool.createPool("player-destroy-feedback",e("player-destroy-feedback")),this.componentPool.createPool("player-explode-feedback",e("player-explode-feedback")),this.componentPool.createConfiguration("ShipDamage","player-damage-feedback").args({damageExplosions:i.getMicroExplosionsEffectId(),amount:5,enabled:!1}),this.componentPool.createConfiguration("ShipDestroy","player-destroy-feedback").args({enabled:!1}),this.componentPool.createConfiguration("ShipExplode","player-explode-feedback").args({damageExplosions:i.getPlayerDestroyExplosionsEffectId(),enabled:!1}),this.gameObjectPool.createDynamicPool("Ship",e("player-ship")),this.gameObjectPool.createDynamicPool("Exhaust",e("exhaust")),this.componentPool.createConfiguration("ShipColliderCircle",t.getCircleColliderPoolId()).args({id:"shipColliderId",radius:20,getResponse:!0}),this.componentPool.createConfiguration("ShipRenderer","ship-renderer"),this.componentPool.createConfiguration("ExhaustRenderer",t.getAnimationBitmapRendererPoolId()).args({pingPong:!0,frameWidth:50,frameHeight:30,frameCount:9,frameDelay:.02,path:n.assetMap()["PLAYEREXHAUST.PNG"],offset:"center"}),this.gameObjectPool.createConfiguration("ShootingPosition",t.getGameObjectPoolId()),this.gameObjectPool.createConfiguration("SmallExhaust","Exhaust").setRenderer("ExhaustRenderer"),this.gameObjectPool.createConfiguration("MediumExhaust","Exhaust").setRenderer("ExhaustRenderer"),this.gameObjectPool.createConfiguration("player-ship","Ship").args({rotation:90,bulletsType:"player-bullet"}).addChild("ShootingPosition",{name:"middle",y:-35}).addChild("ShootingPosition",{name:"right",x:15,y:-25}).addChild("ShootingPosition",{name:"left",x:-15,y:-25}).addChild("SmallExhaust",{x:-21,y:45,rotation:-58,scaleX:.6,scaleY:.6}).addChild("SmallExhaust",{x:0,y:55,rotation:-90,scaleX:.8,scaleY:.8}).addChild("SmallExhaust",{x:21,y:45,rotation:-122,scaleX:.6,scaleY:.6}).addChild("MediumExhaust",{x:-21,y:45,rotation:-58,scaleX:.7,scaleY:.7}).addChild("MediumExhaust",{x:0,y:60,rotation:-90,scaleX:1,scaleY:1}).addChild("MediumExhaust",{x:21,y:45,rotation:-122,scaleX:.7,scaleY:.7}).addComponent("ShipDamage").addComponent("ShipDestroy").addComponent("ShipExplode").addComponent("AddPlayerHitFlash").addComponent("ShotSound").addComponent("PlayerDamage").addComponent("PlayerDestroyed").addComponent("PlayerStopCurrentBGM").addComponent("ShipColliderCircle").setRenderer("ShipRenderer")
}});return new o}),define("editor-game-object",["game-object","editor-config"],function(e,t){var i=e.extend({init:function(){this._super(),this.started=!1,this.structuralChanged=!1},reset:function(){this._super(),this.started=!1,this.structuralChanged=!1},start:function(){this._super(),this.editorStart(),this.started=!0},setRenderer:function(e){this._super(e),n.call(this,e)},removeRenderer:function(){n.call(this,this.renderer),this._super()},addComponent:function(e){this._super(e),n.call(this,e)},removeComponent:function(e){n.call(this,e),this._super(e)},update:function(e){this._super(e),this.editorUpdate(e)},editorStart:function(){},editorUpdate:function(){},deActivate:function(){},hasStructuralChanges:function(){return this.structuralChanged},setStructuralChanges:function(){this.structuralChanged=!0}}),n=function(e){e&&this.started&&!t.isEditorComponent(e.typeId)&&(this.structuralChanged=!0)};return i}),define("cannon-base",["editor-game-object-container","gb"],function(e,t){var i=e.extend({init:function(){this._super(),this.destroyExplosions=null,this.hp=1,this.explosionsGenerator=null,this.disabled=!1},editorStart:function(){},editorUpdate:function(){},recycle:function(){this._super()},regen:function(e){if(this.hp=e,this.explosionsGenerator){this.explosionsGenerator.stop(),this.show(!0).not().allWithType(this.explosionsGenerator.objectType),this.removeComponent(this.explosionsGenerator),this.explosionsGenerator=null;var t=this.findComponents().firstWithProp("collider");t&&t.enable(),this.execute("repair")}},disable:function(){this.disabled=!0},enable:function(){this.disabled=!1},onCollide:function(){this.started&&this.isRunning()&&(this.disabled||this.hp>0&&(this.hp--,0==this.hp&&(this.findComponents().firstWithProp("collider").disable(),this.explosionsGenerator=t.addComponentTo(this,this.destroyExplosions),this.explosionsGenerator.once(this.explosionsGenerator.STOP_CREATION,this,function(){this.hide(!0).not().allWithType(this.explosionsGenerator.objectType)}),this.explosionsGenerator.once(this.explosionsGenerator.STOP_AND_ALL_RECYCLED,this,function(){t.reclaimer.mark(this)}),this.execute(this.DAMAGE))))}});return Object.defineProperty(i.prototype,"DAMAGE",{get:function(){return"damage"}}),Object.defineProperty(i.prototype,"REPAIR",{get:function(){return"repair"}}),i}),define("boss-cannon-base",["editor-game-object-container","gb","timer-factory"],function(e,t,i){var n=e.extend({init:function(){this._super(),this.damageExplosions=null,this.damageParticles=null,this.hp=1},editorStart:function(){this.started=!1,this.initHp=this.hp,this.repairTimer||i.get(this,"repairTimer","repairTimer")},editorUpdate:function(){},recycle:function(){this.repairTimer&&this.repairTimer.remove(),this._super()},onBossStart:function(){this.started=!0},onBossStop:function(){this.started=!1},onBossDestroy:function(){this.repairTimer.stop(),this.findComponents().firstWithProp("collider").disable();var e=t.addComponentTo(this,this.damageExplosions);e.once(e.STOP_CREATION,this,function(){this.hide(!0).not().allWithType(e.objectType)}),e.once(e.STOP_AND_ALL_RECYCLED,this,function(){t.reclaimer.mark(this)})},onCollide:function(){if(this.started&&this.hp>0&&(this.hp--,0==this.hp)){var e=t.addComponentTo(this,this.damageExplosions),i=t.addComponentsTo(this,this.damageParticles);this.findComponents().firstWithProp("collider").disable(),this.execute(this.DAMAGE),this.repairTimer.configure({delay:1e4,removeOnComplete:!1}),this.repairTimer.start(),this.repairTimer.on(this.repairTimer.COMPLETE,function(){this.hp=this.initHp,this.findComponents().firstWithProp("collider").enable(),this.removeComponent(e),this.removeComponents(i),this.execute(this.REPAIR)},!0)}}});return Object.defineProperty(n.prototype,"DAMAGE",{get:function(){return"damage"}}),Object.defineProperty(n.prototype,"REPAIR",{get:function(){return"repair"}}),n}),define("cannon-shooter",["editor-game-object-container","gb","player-getter"],function(e,t,i){var n={},o=null,r={},s=null,a=e.extend({init:function(){this._super(),this.bulletType=""},editorStart:function(){this.damaged=!1,this.shootTimer=0,this.burtsTimer=0,this.bursting=!1,this.target=i.get(),this.currentBurstCount=0,this.bulletCount=this.bullets,this.firePosition=this.findChildren().firstWithType("FirePosition"),o=this.target.getMatrix(o),n=o.decompose(n),s=this.getMatrix(s),r=s.decompose(r);var e=n.x-r.x,t=n.y-r.y;this.rotation=(Math.atan2(t,e)-this.parent.rotation*(Math.PI/180))*(180/Math.PI),this.rotation=this.rotation%360,this.rateVariation=Math.floor(20+50*Math.random()),this.parent.on(this.parent.DAMAGE,this,function(){this.damaged=!0,this.shootTimer=0,this.burtsTimer=0,this.bursting=!1,this.currentBurstCount=0}),this.parent.on(this.parent.REPAIR,this,function(){this.damaged=!1})},editorUpdate:function(){if(!this.damaged){o=this.target.getMatrix(o),n=o.decompose(n),s=this.getMatrix(s),r=s.decompose(r);var e=n.x-r.x,i=n.y-r.y;if(this.rotation=(Math.atan2(i,e)-this.parent.rotation*(Math.PI/180))*(180/Math.PI),this.rotation=this.rotation%360,!this.parent.disabled){if(!this.bursting){if(!this.parent.started)return;this.shootTimer++,this.shootTimer%(this.rate+this.rateVariation)==0&&(this.bulletCount>0||-1==this.bullets)&&(this.bursting=!0,this.burtsTimer=0)}this.bursting&&(this.burtsTimer++,this.burtsTimer%10==0&&(this.currentBurstCount<this.burstAmount?(r=this.firePosition.getMatrix().decompose(r),t.create(this.bulletType,this.parent.getUpdateGroup(),this.parent.getViewportList(),{angle:r.rotation,x:r.x,y:r.y}),this.currentBurstCount++):(this.currentBurstCount=0,this.shootTimer=0,this.bursting=!1,this.bulletCount--)))}}}});return a}),define("laser-shooter",["editor-game-object-container","gb"],function(e,t){var i={},n=null,o={},r=null,s=e.extend({init:function(){this._super(),this.damaged=!1,this.bursting=!1,this.shootTimer=0,this.burstTimer=0,this.shootTime=0,this.burstTime=0,this.laser=null,this.laserBurst=null},recycle:function(){this.laser&&t.reclaimer.mark(this.laser),this.laserBurst&&t.reclaimer.mark(this.laserBurst),this.laser=null,this.laserBurst=null,this._super()},deActivate:function(){this.laser&&setTimeout(function(){t.reclaimer.mark(this.laser),this.laser=null}.bind(this),1e3),this.laserBurst&&setTimeout(function(){t.reclaimer.mark(this.laserBurst),this.laserBurst=null}.bind(this),1e3),this.damaged=!1,this.bursting=!1,this.shootTimer=0,this.burstTimer=0},editorStart:function(){this.damaged=!1,this.bursting=!1,this.shootTimer=0,this.burstTimer=0,this.parent.on(this.parent.DAMAGE,this,function(){this.damaged=!0,this.bursting=!1,this.shootTimer=0,this.burstTimer=0,this.laser&&t.reclaimer.mark(this.laser),this.laserBurst&&t.reclaimer.mark(this.laserBurst),this.laser=null,this.laserBurst=null}),this.parent.on(this.parent.REPAIR,this,function(){this.damaged=!1})},editorUpdate:function(){if(!this.damaged){if(!this.bursting){if(!this.parent.started)return;if(this.shootTimer++,this.shootTimer%this.shootTime==0){this.bursting=!0,this.burtsTimer=0;var e=this.findChildren().firstWithType("FirePosition");r=e.getMatrix(r),o=r.decompose(o),n=this.getMatrix(n),i=n.decompose(i),this.laser=t.create("Laser",this.parent.getUpdateGroup(),this.parent.getViewportList(),{rotation:i.rotation-90,x:o.x,y:o.y}),this.laserBurst=t.create("LaserBurst",this.parent.getUpdateGroup(),this.parent.getViewportList(),{rotation:i.rotation,x:o.x,y:o.y}),this.laserBurst.renderer.play()}}this.bursting&&(this.burtsTimer++,this.burtsTimer%this.burstTime==0&&(this.bursting=!1,this.shootTimer=0,this.laser&&t.reclaimer.mark(this.laser),this.laserBurst&&t.reclaimer.mark(this.laserBurst),this.laser=null,this.laserBurst=null))}}});return s}),define("laser-base",["editor-game-object-container","gb"],function(e,t){var i=e.extend({init:function(){this._super(),this.destroyExplosions=null},editorStart:function(){this.health=10},editorUpdate:function(){},onCollide:function(){if(this.health>0)this.health--;else{var e=t.addComponentTo(this,this.destroyExplosions);e.once(e.STOP_CREATION,this,function(){this.hide(!0).not().allWithType(e.objectType)}),e.once(e.STOP_AND_ALL_RECYCLED,this,function(){t.reclaimer.mark(this)}),this.findComponents().firstWithProp("collider").disable(),this.execute(this.DAMAGE)}}});return Object.defineProperty(i.prototype,"DAMAGE",{get:function(){return"damage"}}),i}),define("double-cannon-base",["editor-game-object-container","gb"],function(e,t){var i={},n=e.extend({init:function(){this._super(),this.destroyExplosions=null,this.completeCount=0,this.completeAnimationsBeforeFire=-1,this.bulletType="",this.hp=0},editorStart:function(){this.renderer.play(),this.completeCount=1,this.renderer.on(this.renderer.COMPLETE_BACK,this,this.onCompleteBackAnimation)},deActivate:function(){this.renderer.remove(this.renderer.COMPLETE_BACK,this,this.onCompleteBackAnimation)},onCompleteBackAnimation:function(){if(this.completeCount%this.completeAnimationsBeforeFire==0)for(var e=this.findChildren().allWithType("FirePosition"),n=0;n<e.length;n++)i=e[n].getMatrix().decompose(i),t.create(this.bulletType,this.getUpdateGroup(),this.getViewportList(),{angle:this.rotation-90+e[n].angle,x:i.x,y:i.y});this.completeCount++},editorUpdate:function(){},onCollide:function(){if(this.started&&this.hp>0&&(this.hp--,0==this.hp)){var e=t.addComponentTo(this,this.destroyExplosions);e.once(e.STOP_CREATION,this,function(){this.hide(!0).not().allWithType(e.objectType)}),e.once(e.STOP_AND_ALL_RECYCLED,this,function(){t.reclaimer.mark(this)}),this.findComponents().firstWithProp("collider").disable(),this.execute(this.DAMAGE)}}});return Object.defineProperty(n.prototype,"DAMAGE",{get:function(){return"damage"}}),n}),define("boss-double-cannon-base",["editor-game-object-container","gb","timer-factory"],function(e,t,i){var n={},o=e.extend({init:function(){this._super(),this.damageExplosions=null,this.damageParticles=null,this.completeCount=0,this.completeAnimationsBeforeFire=-1,this.bulletType="",this.hp=0,this.initHp=0},editorStart:function(){this.started=!1,this.initHp=this.hp,this.repairTimer||i.get(this,"repairTimer","repairTimer"),this.completeCount=1},deActivate:function(){this.renderer.remove(this.renderer.COMPLETE_BACK,this,this.onCompleteBackAnimation)},onCompleteBackAnimation:function(){if(this.completeCount%this.completeAnimationsBeforeFire==0)for(var e=this.findChildren().allWithType("FirePosition"),i=0;i<e.length;i++)n=e[i].getMatrix().decompose(n),t.create(this.bulletType,this.getUpdateGroup(),this.getViewportList(),{angle:this.rotation-90+e[i].angle,x:n.x,y:n.y});this.completeCount++},editorUpdate:function(){},recycle:function(){this.repairTimer&&this.repairTimer.remove(),this._super()},onBossStart:function(){this.started||(this.started=!0,this.renderer.play(),this.renderer.on(this.renderer.COMPLETE_BACK,this,this.onCompleteBackAnimation))},onBossStop:function(){this.started=!1,this.renderer.remove(this.renderer.COMPLETE_BACK,this,this.onCompleteBackAnimation)},onBossDestroy:function(){this.repairTimer.stop(),this.findComponents().firstWithProp("collider").disable();var e=t.addComponentTo(this,this.damageExplosions);e.once(e.STOP_CREATION,this,function(){this.hide(!0).not().allWithType(e.objectType)}),e.once(e.STOP_AND_ALL_RECYCLED,this,function(){t.reclaimer.mark(this)})},onCollide:function(){if(this.started&&this.hp>0&&(this.hp--,0==this.hp)){var e=t.addComponentTo(this,this.damageExplosions),i=t.addComponentsTo(this,this.damageParticles);this.findComponents().firstWithProp("collider").disable(),this.repairTimer.configure({delay:1e4,removeOnComplete:!1}),this.repairTimer.start(),this.renderer.pause(),this.repairTimer.on(this.repairTimer.COMPLETE,function(){this.renderer.play(),this.hp=this.initHp,this.findComponents().firstWithProp("collider").enable(),this.removeComponent(e),this.removeComponents(i)},!0)}}});return o}),define("missile-turret-shooter",["editor-game-object-container","gb","player-getter"],function(e,t,i){var n={},o=null,r={},s=null,a=e.extend({init:function(){this._super(),this.aiming=!1,this.aimDirection=1,this.newRotation=0,this.damaged=!1,this.shootTimer=0,this.burtsTimer=0,this.bursting=!1,this.target=null,this.currentBurstCount=0,this.bulletCount=0,this.missileType="",this.firePositions=null,this.firePositionIndex=0,this.firePositionDecompose={}},editorStart:function(){this.damaged=!1,this.shootTimer=0,this.burtsTimer=0,this.bursting=!1,this.target=i.get(),this.currentBurstCount=0,this.bulletCount=this.missiles,this.aiming=!1,this.aimDirection=1,o=this.target.getMatrix(o),n=o.decompose(n),s=this.getMatrix(s),r=s.decompose(r);var e=n.x-r.x,t=n.y-r.y;this.rotation=(Math.atan2(t,e)-this.parent.rotation*(Math.PI/180))*(180/Math.PI),this.rotation=this.rotation%360,this.rateVariation=Math.floor(20+50*Math.random()),this.firePositions=this.findChildren().allWithType("FirePosition").map(function(e){return e.getMatrix()}),this.firePositionIndex=0,this.parent.on(this.parent.DAMAGE,this,function(){this.damaged=!0,this.shootTimer=0,this.burtsTimer=0,this.bursting=!1,this.currentBurstCount=0,o=this.target.getMatrix(o),n=o.decompose(n),s=this.getMatrix(s),r=s.decompose(r);var e=n.x-r.x,t=n.y-r.y;this.aiming=!0,this.newRotation=(Math.atan2(t,e)-this.parent.rotation*(Math.PI/180))*(180/Math.PI)+180,this.newRotation=this.newRotation%360;var i=(this.newRotation-this.rotation)%360;0>i&&(i+=360),this.aimDirection=i>180?-1:1}),this.parent.on(this.parent.REPAIR,this,function(){this.damaged=!1})},editorUpdate:function(){if(!this.damaged){o=this.target.getMatrix(o),n=o.decompose(n),s=this.getMatrix(s),r=s.decompose(r);var e=n.x-r.x,i=n.y-r.y;if(!this.bursting&&!this.aiming){if(this.rotation=(Math.atan2(i,e)-this.parent.rotation*(Math.PI/180))*(180/Math.PI)+180,this.rotation=this.rotation%360,!this.parent.started)return;this.shootTimer++,this.shootTimer%(this.rate+this.rateVariation)==0&&(this.bulletCount>0||-1==this.missiles)&&(this.bursting=!0,this.burtsTimer=0)}if(this.bursting&&!this.aiming&&(this.burtsTimer++,this.burtsTimer%30==0))if(this.currentBurstCount<this.burstAmount){this.execute("launch");var a=this.firePositions[this.firePositionIndex];this.firePositionDecompose=a.decompose(this.firePositionDecompose);var l=t.create(this.missileType,this.parent.getUpdateGroup(),this.parent.getViewportList(),{angle:s.decompose(r).rotation-180,x:this.firePositionDecompose.x,y:this.firePositionDecompose.y,target:this.target});this.firePositionIndex<this.firePositions.length-1?this.firePositionIndex++:this.firePositionIndex=0;for(var h=l.getViewportList(),c=0;c<h.length;c++)t.viewports.get(h[c].viewport).getLayer(h[c].layer).moveGameObjectToBack(l);this.currentBurstCount++}else{this.newRotation=(Math.atan2(i,e)-this.parent.rotation*(Math.PI/180))*(180/Math.PI)+180,this.newRotation=this.newRotation%360;var d=(this.newRotation-this.rotation)%360;0>d&&(d+=360),this.aimDirection=d>180?-1:1,this.currentBurstCount=0,this.shootTimer=0,this.bulletCount--,this.aiming=!0,this.bursting=!1}if(this.aiming){this.rotation+=2*this.aimDirection,this.newRotation=(Math.atan2(i,e)-this.parent.rotation*(Math.PI/180))*(180/Math.PI)+180,this.newRotation=this.newRotation%360;var u=(this.newRotation-this.rotation)%360;0>u&&(u+=360),u=u>180?-1:1,this.aimDirection!=u&&(this.aiming=!1)}}}});return a}),define("missile-turret-base",["editor-game-object-container","gb"],function(e,t){var i=e.extend({init:function(){this._super(),this.destroyExplosions=null,this.hp=0},editorStart:function(){},editorUpdate:function(){},onCollide:function(){if(this.started&&this.hp>0&&(this.hp--,0==this.hp)){var e=t.addComponentTo(this,this.destroyExplosions);e.once(e.STOP_CREATION,this,function(){this.hide(!0).not().allWithType(e.objectType)}),e.once(e.STOP_AND_ALL_RECYCLED,this,function(){t.reclaimer.mark(this)}),this.findComponents().firstWithProp("collider").disable(),this.execute(this.DAMAGE)}}});return Object.defineProperty(i.prototype,"DAMAGE",{get:function(){return"damage"}}),i}),define("cannon-bundle",["require","common-bundle","gb","particle-generator-bundle","explosion-generator-bundle","bundle","editor-game-object","cannon-base","boss-cannon-base","cannon-shooter","laser-shooter","laser-base","double-cannon-base","boss-double-cannon-base","missile-turret-shooter","missile-turret-base"],function(e){var t=e("common-bundle"),i=e("gb"),n=e("particle-generator-bundle"),o=e("explosion-generator-bundle"),r=e("bundle").extend({create:function(){this.componentPool.createConfiguration("ActivateShooterOnView",t.getActivateOnViewPoolId()),this.gameObjectPool.createDynamicPool("editor-game-object",e("editor-game-object")),this.gameObjectPool.createConfiguration("FirePosition","editor-game-object").childOnly(),this.componentPool.createConfiguration("CannonBaseRenderer",t.getBitmapRendererPoolId()).args({path:i.assetMap()["CANNONBASE.PNG"],offset:"center"}),this.componentPool.createConfiguration("CannonShooterRenderer",t.getBitmapRendererPoolId()).args({path:i.assetMap()["CANNONSHOOTER.PNG"],offsetX:-5.5,offsetY:-4.5}),this.componentPool.createConfiguration("BossCannonBaseRenderer",t.getBitmapRendererPoolId()).args({path:i.assetMap()["BOSSCANNONBASE.PNG"],offset:"center"}),this.componentPool.createConfiguration("BossCannonShooterRenderer",t.getBitmapRendererPoolId()).args({path:i.assetMap()["BOSSCANNONSHOOTER.PNG"],offsetX:-10,offsetY:-10}),this.gameObjectPool.createDynamicPool("CannonBase",e("cannon-base")),this.gameObjectPool.createDynamicPool("BossCannonBase",e("boss-cannon-base")),this.gameObjectPool.createPool("CannonShooter",e("cannon-shooter")),this.componentPool.createConfiguration("CannonBaseCollider",t.getCircleColliderPoolId()).args({id:"cannonColliderId",radius:20}),this.gameObjectPool.createConfiguration("cannon-shooter-0","CannonShooter").args({rate:150,bullets:5,burstAmount:1,x:0,y:-2,bulletType:"cannon-bullet-slow",skipDebug:!0}).addComponent("ActivateShooterOnView").addChild("FirePosition",{x:29,y:1}).setRenderer("CannonShooterRenderer").disableMouseSupport().childOnly(),this.gameObjectPool.createConfiguration("cannon-shooter-1","CannonShooter").args({rate:120,bullets:8,burstAmount:1,x:0,y:-2,bulletType:"cannon-bullet-fast",skipDebug:!0}).addComponent("ActivateShooterOnView").addChild("FirePosition",{x:29,y:1}).setRenderer("CannonShooterRenderer").disableMouseSupport().childOnly(),this.gameObjectPool.createConfiguration("boss-cannon-shooter-0","CannonShooter").args({rate:200,bullets:-1,burstAmount:4,y:-15,bulletType:"cannon-bullet-slow",skipDebug:!0}).addComponent("ActivateShooterOnView").addChild("FirePosition",{x:57,y:1}).setRenderer("BossCannonShooterRenderer").disableMouseSupport().childOnly(),this.gameObjectPool.createConfiguration("boss-cannon-shooter-1","CannonShooter").args({rate:180,bullets:-1,burstAmount:3,y:-15,bulletType:"cannon-bullet-fast",skipDebug:!0}).addComponent("ActivateShooterOnView").addChild("FirePosition",{x:57,y:1}).setRenderer("BossCannonShooterRenderer").disableMouseSupport().childOnly(),this.gameObjectPool.createConfiguration("cannon-0","CannonBase").args({destroyExplosions:o.getMediumExplosionsEffectId(),hp:5}).addComponent("CannonBaseCollider").addComponent("ActivateShooterOnView").addComponent("CannonExplosion1").addComponent("AddBulletHitFlash").addChild("cannon-shooter-0").setRenderer("CannonBaseRenderer").enemyCategory().weakEnemyTier(),this.gameObjectPool.createConfiguration("cannon-1","CannonBase").args({destroyExplosions:o.getMediumExplosionsEffectId(),hp:8}).addComponent("CannonBaseCollider").addComponent("ActivateShooterOnView").addComponent("CannonExplosion1").addComponent("AddBulletHitFlash").addChild("cannon-shooter-1").setRenderer("CannonBaseRenderer").enemyCategory().strongEnemyTier(),this.gameObjectPool.createConfiguration("boss-cannon-0","BossCannonBase").args({damageExplosions:o.getMediumExplosionsEffectId(),damageParticles:[n.getCannonDamageParticles_1_Id(),n.getCannonDamageParticles_2_Id()],hp:15}).addComponent("CannonBaseCollider").addComponent("ActivateShooterOnView").addComponent("CannonExplosion1").addComponent("AddBulletHitFlash").addChild("boss-cannon-shooter-0").setRenderer("BossCannonBaseRenderer").enemyCategory().weakBossHelperEnemyTier(),this.gameObjectPool.createConfiguration("boss-cannon-1","BossCannonBase").args({damageExplosions:o.getMediumExplosionsEffectId(),damageParticles:[n.getCannonDamageParticles_1_Id(),n.getCannonDamageParticles_2_Id()],hp:22}).addComponent("CannonBaseCollider").addComponent("ActivateShooterOnView").addComponent("CannonExplosion1").addComponent("AddBulletHitFlash").addChild("boss-cannon-shooter-1").setRenderer("BossCannonBaseRenderer").enemyCategory().strongBossHelperEnemyTier(),this.gameObjectPool.createPool("LaserShooter",e("laser-shooter")),this.gameObjectPool.createDynamicPool("LaserBase",e("laser-base")),this.componentPool.createConfiguration("LaserBaseRenderer",t.getBitmapRendererPoolId()).args({path:i.assetMap()["LASERBASE.PNG"],offset:"center"}),this.componentPool.createConfiguration("LaserShooterRenderer",t.getBitmapRendererPoolId()).args({path:i.assetMap()["LASERTURRET.PNG"],offset:"center"}),this.componentPool.createConfiguration("BossLaserShooterRenderer",t.getBitmapRendererPoolId()).args({path:i.assetMap()["BOSSLASERTURRET.PNG"],offset:"center"}),this.componentPool.createConfiguration("LaserBaseCollider",t.getCircleColliderPoolId()).args({id:"cannonColliderId",radius:25}),this.gameObjectPool.createConfiguration("laser-shooter-0","LaserShooter").args({shootTime:300,burstTime:50}).addChild("FirePosition",{x:0,y:-28}).addComponent("ActivateShooterOnView").setRenderer("LaserShooterRenderer").childOnly(),this.gameObjectPool.createConfiguration("laser-shooter-1","LaserShooter").args({shootTime:200,burstTime:200}).addChild("FirePosition",{x:0,y:-28}).addComponent("ActivateShooterOnView").setRenderer("LaserShooterRenderer").childOnly(),this.gameObjectPool.createConfiguration("boss-laser-shooter-0","LaserShooter").args({shootTime:250,burstTime:250}).addChild("FirePosition",{x:0,y:-28}).addComponent("ActivateShooterOnView").setRenderer("BossLaserShooterRenderer").childOnly(),this.gameObjectPool.createConfiguration("boss-laser-shooter-1","LaserShooter").args({shootTime:250,burstTime:400}).addChild("FirePosition",{x:0,y:-28}).addComponent("ActivateShooterOnView").setRenderer("BossLaserShooterRenderer").childOnly(),this.gameObjectPool.createConfiguration("laser-cannon-0","LaserBase").args({destroyExplosions:o.getMediumExplosionsEffectId(),hp:8}).addComponent("LaserBaseCollider").addComponent("ActivateShooterOnView").addComponent("CannonExplosion1").addComponent("AddBulletHitFlash").addChild("laser-shooter-0").setRenderer("LaserBaseRenderer").enemyCategory().weakEnemyTier(),this.gameObjectPool.createConfiguration("laser-cannon-1","LaserBase").args({destroyExplosions:o.getMediumExplosionsEffectId(),hp:10}).addComponent("LaserBaseCollider").addComponent("ActivateShooterOnView").addComponent("CannonExplosion1").addComponent("AddBulletHitFlash").addChild("laser-shooter-1").setRenderer("LaserBaseRenderer").enemyCategory().strongEnemyTier(),this.gameObjectPool.createConfiguration("boss-laser-cannon-0","BossCannonBase").args({damageExplosions:o.getMediumExplosionsEffectId(),damageParticles:[n.getCannonDamageParticles_1_Id(),n.getCannonDamageParticles_2_Id()],hp:15}).addComponent("LaserBaseCollider").addComponent("ActivateShooterOnView").addComponent("CannonExplosion1").addComponent("AddBulletHitFlash").addChild("boss-laser-shooter-0").setRenderer("LaserBaseRenderer").enemyCategory().weakBossHelperEnemyTier(),this.gameObjectPool.createConfiguration("boss-laser-cannon-1","BossCannonBase").args({damageExplosions:o.getMediumExplosionsEffectId(),damageParticles:[n.getCannonDamageParticles_1_Id(),n.getCannonDamageParticles_2_Id()],hp:22}).addComponent("LaserBaseCollider").addComponent("ActivateShooterOnView").addComponent("CannonExplosion1").addComponent("AddBulletHitFlash").addChild("boss-laser-shooter-1").setRenderer("LaserBaseRenderer").enemyCategory().strongBossHelperEnemyTier(),this.gameObjectPool.createDynamicPool("DoubleCannonBase",e("double-cannon-base")),this.gameObjectPool.createDynamicPool("BossDoubleCannonBase",e("boss-double-cannon-base")),this.componentPool.createConfiguration("DoubleBaseCollider",t.getPolygonColliderPoolId()).args({id:"cannonColliderId",points:[{x:-32,y:5},{x:32,y:5},{x:32,y:30},{x:-32,y:30}]}),this.componentPool.createConfiguration("DoubleCannonBaseRenderer",t.getAnimationBitmapRendererPoolId()).args({pingPong:!0,frameWidth:64,frameHeight:64,frameDelay:.2,path:i.assetMap()["DOUBLECANNON.PNG"],offset:"center"}),this.gameObjectPool.createConfiguration("double-cannon-0","DoubleCannonBase").args({destroyExplosions:o.getMediumExplosionsEffectId(),completeAnimationsBeforeFire:2,bulletType:"double-cannon-bullet-slow",hp:20}).addComponent("DoubleBaseCollider").addComponent("ActivateShooterOnView").addComponent("CannonExplosion1").addComponent("AddBulletHitFlash").addChild("FirePosition",{x:-27,y:6,angle:-41}).addChild("FirePosition",{x:27,y:6,angle:41}).setRenderer("DoubleCannonBaseRenderer").enemyCategory().weakEnemyTier(),this.gameObjectPool.createConfiguration("double-cannon-1","DoubleCannonBase").args({destroyExplosions:o.getMediumExplosionsEffectId(),completeAnimationsBeforeFire:2,bulletType:"double-cannon-bullet-fast",hp:25}).addComponent("DoubleBaseCollider").addComponent("ActivateShooterOnView").addComponent("CannonExplosion1").addComponent("AddBulletHitFlash").addChild("FirePosition",{x:-27,y:6,angle:-41}).addChild("FirePosition",{x:27,y:6,angle:41}).setRenderer("DoubleCannonBaseRenderer").enemyCategory().strongEnemyTier(),this.gameObjectPool.createConfiguration("boss-double-cannon-0","BossDoubleCannonBase").args({damageExplosions:o.getMediumExplosionsEffectId(),damageParticles:[n.getCannonDamageParticles_1_Id(),n.getCannonDamageParticles_2_Id()],completeAnimationsBeforeFire:1,bulletType:"double-cannon-bullet-slow",hp:50}).addComponent("DoubleBaseCollider").addComponent("ActivateShooterOnView").addComponent("CannonExplosion1").addComponent("AddBulletHitFlash").addChild("FirePosition",{x:-27,y:6,angle:-41}).addChild("FirePosition",{x:27,y:6,angle:41}).setRenderer("DoubleCannonBaseRenderer").enemyCategory().weakBossHelperEnemyTier(),this.gameObjectPool.createConfiguration("boss-double-cannon-1","BossDoubleCannonBase").args({damageExplosions:o.getMediumExplosionsEffectId(),damageParticles:[n.getCannonDamageParticles_1_Id(),n.getCannonDamageParticles_2_Id()],completeAnimationsBeforeFire:1,bulletType:"double-cannon-bullet-fast",hp:70}).addComponent("DoubleBaseCollider").addComponent("ActivateShooterOnView").addComponent("CannonExplosion1").addComponent("AddBulletHitFlash").addChild("FirePosition",{x:-27,y:6,angle:-41}).addChild("FirePosition",{x:27,y:6,angle:41}).setRenderer("DoubleCannonBaseRenderer").enemyCategory().strongBossHelperEnemyTier(),this.gameObjectPool.createPool("MissileShooter",e("missile-turret-shooter")),this.gameObjectPool.createDynamicPool("MissileTurretBase",e("missile-turret-base")),this.componentPool.createConfiguration("MissileTurretCollider",t.getCircleColliderPoolId()).args({id:"cannonColliderId",radius:23}),this.componentPool.createConfiguration("MissileTurretBaseRenderer",t.getBitmapRendererPoolId()).args({path:i.assetMap()["MISSILETURRETBASE.PNG"],offset:"center"}),this.componentPool.createConfiguration("MissileTurretHingeRenderer",t.getBitmapRendererPoolId()).args({path:i.assetMap()["MISSILETURRETHINGE.PNG"],offset:"center"}),this.componentPool.createConfiguration("MissileTurretShooterRenderer",t.getBitmapRendererPoolId()).args({path:i.assetMap()["MISSILETURRETSHOOTER.PNG"],offsetX:-32,offsetY:-40}),this.componentPool.createConfiguration("BossMissileTurretShooterRenderer",t.getBitmapRendererPoolId()).args({path:i.assetMap()["BOSSMISSILETURRETSHOOTER.PNG"],offsetX:-32,offsetY:-40}),this.gameObjectPool.createConfiguration("missile-turret-shooter-0","MissileShooter").args({rate:100,missiles:6,burstAmount:3,rotation:45,missileType:"missile-slow",skipDebug:!0}).addComponent("ActivateShooterOnView").addComponent("MissileLaunch1").addChild("FirePosition",{y:-5}).addChild("FirePosition",{y:0}).addChild("FirePosition",{y:5}).setRenderer("MissileTurretShooterRenderer").disableMouseSupport().childOnly(),this.gameObjectPool.createConfiguration("missile-turret-shooter-1","MissileShooter").args({rate:70,missiles:12,burstAmount:3,rotation:45,missileType:"missile-fast",skipDebug:!0}).addComponent("ActivateShooterOnView").addComponent("MissileLaunch1").addChild("FirePosition",{y:-5}).addChild("FirePosition",{y:0}).addChild("FirePosition",{y:5}).setRenderer("MissileTurretShooterRenderer").disableMouseSupport().childOnly(),this.gameObjectPool.createConfiguration("boss-missile-turret-shooter-0","MissileShooter").args({rate:150,missiles:500,burstAmount:4,rotation:45,missileType:"missile-slow",skipDebug:!0}).addComponent("ActivateShooterOnView").addComponent("MissileLaunch1").addChild("FirePosition",{y:-5}).addChild("FirePosition",{y:0}).addChild("FirePosition",{y:5}).setRenderer("BossMissileTurretShooterRenderer").disableMouseSupport().childOnly(),this.gameObjectPool.createConfiguration("boss-missile-turret-shooter-1","MissileShooter").args({rate:170,missiles:500,burstAmount:5,rotation:45,missileType:"missile-fast",skipDebug:!0}).addComponent("ActivateShooterOnView").addComponent("MissileLaunch1").addChild("FirePosition",{y:-5}).addChild("FirePosition",{y:0}).addChild("FirePosition",{y:5}).setRenderer("BossMissileTurretShooterRenderer").disableMouseSupport().childOnly(),this.gameObjectPool.createConfiguration("missile-turret-hinge","editor-game-object").args({skipDebug:!0}).setRenderer("MissileTurretHingeRenderer").disableMouseSupport().childOnly(),this.gameObjectPool.createConfiguration("missile-turret-0","MissileTurretBase").args({destroyExplosions:o.getMediumExplosionsEffectId(),hp:7}).addComponent("MissileTurretCollider").addComponent("ActivateShooterOnView").addComponent("CannonExplosion1").addComponent("AddBulletHitFlash").addChild("missile-turret-shooter-0",{y:7}).addChild("missile-turret-hinge").setRenderer("MissileTurretBaseRenderer").enemyCategory().weakEnemyTier(),this.gameObjectPool.createConfiguration("missile-turret-1","MissileTurretBase").args({destroyExplosions:o.getMediumExplosionsEffectId(),hp:15}).addComponent("MissileTurretCollider").addComponent("ActivateShooterOnView").addComponent("CannonExplosion1").addComponent("AddBulletHitFlash").addChild("missile-turret-shooter-1",{y:7}).addChild("missile-turret-hinge").setRenderer("MissileTurretBaseRenderer").enemyCategory().strongEnemyTier(),this.gameObjectPool.createConfiguration("boss-missile-turret-0","BossCannonBase").args({damageExplosions:o.getMediumExplosionsEffectId(),damageParticles:[n.getCannonDamageParticles_1_Id(),n.getCannonDamageParticles_2_Id()],hp:20}).addComponent("MissileTurretCollider").addComponent("ActivateShooterOnView").addComponent("CannonExplosion1").addComponent("AddBulletHitFlash").addChild("boss-missile-turret-shooter-0",{y:7}).addChild("missile-turret-hinge").setRenderer("MissileTurretBaseRenderer").enemyCategory().weakBossHelperEnemyTier(),this.gameObjectPool.createConfiguration("boss-missile-turret-1","BossCannonBase").args({damageExplosions:o.getMediumExplosionsEffectId(),damageParticles:[n.getCannonDamageParticles_1_Id(),n.getCannonDamageParticles_2_Id()],hp:25}).addComponent("MissileTurretCollider").addComponent("ActivateShooterOnView").addComponent("CannonExplosion1").addComponent("AddBulletHitFlash").addChild("boss-missile-turret-shooter-1",{y:7}).addChild("missile-turret-hinge").setRenderer("MissileTurretBaseRenderer").enemyCategory().strongBossHelperEnemyTier()}});return new r}),define("laser-renderer",["path-renderer","draw"],function(e,t){var i=e.extend({init:function(){this._super(),this.width=800,this.height=30,this.name="Laser",this.skipCache=!0,this.offsetY=-15,this.horizontalCounter=0,this.verticalCounter=0,this.largeAnchor=0,this.largeCurvePoints=[{x:null,y:null},{x:null,y:null},{x:null,y:null}]},update:function(e){this.largeAnchor=40*Math.cos(this.horizontalCounter/15),this.horizontalCounter+=(100*Math.random()+100)*e,this.verticalCounter+=100*e
},drawPath:function(e){e.save(),this.largeCurvePoints[0].x=0,this.largeCurvePoints[0].y=0,this.largeCurvePoints[1].x=this.parent.collisionDistance/2+Math.cos(this.verticalCounter/20)*this.parent.collisionDistance/4,this.largeCurvePoints[1].y=0,this.largeCurvePoints[2].x=this.parent.collisionDistance,this.largeCurvePoints[2].y=0,t.quadraticPolygonAuto(e,0,0,-this.largeAnchor,this.largeCurvePoints,null,"#FFFFFF",3,1,!0,!1),this.largeCurvePoints[0].x=0,this.largeCurvePoints[0].y=0,this.largeCurvePoints[1].x=this.parent.collisionDistance/2-Math.cos(this.verticalCounter/50)*this.parent.collisionDistance/4,this.largeCurvePoints[1].y=0,this.largeCurvePoints[2].x=this.parent.collisionDistance,this.largeCurvePoints[2].y=0,t.quadraticPolygonAuto(e,0,0,this.largeAnchor,this.largeCurvePoints,null,"#FFFFFF",3,1,!1,!1),this.largeCurvePoints[0].x=0,this.largeCurvePoints[0].y=0,this.largeCurvePoints[1].x=this.parent.collisionDistance/3-Math.cos(this.verticalCounter/15)*this.parent.collisionDistance/4,this.largeCurvePoints[1].y=0,this.largeCurvePoints[2].x=this.parent.collisionDistance,this.largeCurvePoints[2].y=0,t.quadraticPolygonAuto(e,0,0,-this.largeAnchor,this.largeCurvePoints,null,"#FFFFFF",3,1,!1,!1),e.restore()}});return i}),define("basic-bullet",["editor-game-object-container","reclaimer","util"],function(e,t,i){var n=["BlobType","Boss_1_Cables","Boss_2_Core","Boss3OuterEye","Boss_4_Body","CannonBase","BossCannonBase","LaserShooter","LaserBase","DoubleCannonBase","BossDoubleCannonBase","MissileShooter","MissileTurretBase","EnemyShip_1_Type","EnemyShip_2_Type","GeneratorType","BossGeneratorType","MineType","Spider_Follow_Type","Spider_Shooting_Type"],o=e.extend({init:function(){this._super(),this.speed=800,this.life=100,this.angle=0,this.playerSpeed=0,this.disableTimeoutId=-1},editorStart:function(){this.life=200,this.renderer.play(),this.angle=this.rotation*(Math.PI/180)},editorUpdate:function(e){this.x+=Math.cos(this.angle)*e*(this.speed+this.playerSpeed/4),this.y+=Math.sin(this.angle)*e*(this.speed+this.playerSpeed/4),this.life<0?t.mark(this):this.life--},onCollide:function(e){return-1!==n.indexOf(e.poolId)?(this.execute("hit"),e.execute("hit"),void t.mark(this)):"Boss_2_Body"===e.poolId?(this.execute("deflect"),void this.deflect()):"Boss_1"===e.poolId?void(e.canBeDamaged()?(this.execute("hit"),e.execute("hit"),t.mark(this)):(this.execute("deflect"),this.deflect())):void t.mark(this)},deflect:function(){this.findComponents().firstWithProp("collider").disable(),this.angle+=Math.PI+Math.PI/180*i.rand_i(-45,45),this.rotation=this.angle*(180/Math.PI),this.disableTimeoutId=setTimeout(function(){this.findComponents().firstWithProp("collider").enable()}.bind(this),200)},recycle:function(){clearTimeout(this.disableTimeoutId),this._super()}});return o}),define("cannon-bullet",["editor-game-object-container","reclaimer"],function(e,t){var i=e.extend({init:function(){this._super(),this.speed=0,this.life=1e5},editorStart:function(){this.life=1e5,this.rotation=this.angle},editorUpdate:function(e){this.x+=Math.cos(this.angle*(Math.PI/180))*e*this.speed,this.y+=Math.sin(this.angle*(Math.PI/180))*e*this.speed,this.life>0?this.life-=this.speed:(this.execute("destroyed"),this.speed=0,this.findComponents().firstWithType("DestroyExplosions")||t.mark(this))},onCollide:function(){this.execute("destroyed"),this.speed=0,this.findComponents().firstWithType("DestroyExplosions")||t.mark(this)}});return i}),define("laser",["editor-game-object-container","gb","sat","timer-factory","vector-2D"],function(e,t,i,n,o){var r=5,s=e.extend({init:function(){this._super(),this.collisionPointFound=!1,this.collisionPoint=new o,this.collisionDistance=0,this.dirX=0,this.dirY=0,this.laserHit=null,this.collidingObstacles=[],this.shortestDistance=-1,this.shortestCollisionPointX=0,this.shortestCollisionPointY=0},editorStart:function(){this.collisionPointFound=!1,this.collisionDistance=0,this.collisionPoint.x=0,this.collisionPoint.y=0,this.shortestDistance=-1,this.dirX=0,this.dirY=0,this.renderer.disable(),n.get(this,"collisionTimer","collisionTimer"),this.collisionTimer.configure({delay:50,removeOnComplete:!0}),this.collisionTimer.on(this.collisionTimer.COMPLETE,function(){this.collisionPointFound||(this.collisionDistance=1500,this.collisionPointFound=!0,this.renderer.enable())},!0),this.collisionTimer.start()},editorUpdate:function(){},recycle:function(){this.collisionPointFound=!1,this.collisionDistance=0,this.collisionPoint.x=0,this.collisionPoint.y=0,this.dirX=0,this.dirY=0,this.laserHit&&t.reclaimer.mark(this.laserHit),this.collisionTimer&&this.collisionTimer.remove(),this.laserHit=null,this.collidingObstacles.length=0,this._super()},onCollide:function(e){if("Obstacle"!=e.poolId||this.collisionPointFound)"player-ship"==e.typeId;else if(-1===this.collidingObstacles.indexOf(e))this.collidingObstacles.push(e);else{this.dirX=Math.cos(this.rotation*(Math.PI/180))*r,this.dirY=Math.sin(this.rotation*(Math.PI/180))*r;e:for(var n=0;n<this.collidingObstacles.length;n++){var o=this.collidingObstacles[n],s=0;this.concatenateMatrix(this.getMatrix()).transformPoint(0,0,this.collisionPoint);for(var a=o.findComponents().firstWithProp("collider").collider,l=0;l<this.renderer.rendererWidth()/r;l++){if(i.pointInPolygon(this.collisionPoint,a)){-1!=this.shortestDistance&&s<this.shortestDistance?(this.shortestDistance=s,this.shortestCollisionPointX=this.collisionPoint.x,this.shortestCollisionPointY=this.collisionPoint.y):-1==this.shortestDistance&&(this.shortestDistance=s,this.shortestCollisionPointX=this.collisionPoint.x,this.shortestCollisionPointY=this.collisionPoint.y);continue e}this.collisionPoint.x+=this.dirX,this.collisionPoint.y+=this.dirY,s+=r}}this.collisionDistance=this.shortestDistance,this.collisionPointFound=!0;var h=this.findComponents().firstWithProp("collider");h.pointsCopy[1].x=this.collisionDistance,h.pointsCopy[2].x=this.collisionDistance,this.renderer.enable(),this.laserHit=t.create("LaserHit",this.getUpdateGroup(),this.getViewportList(),{x:this.shortestCollisionPointX,y:this.shortestCollisionPointY}),this.laserHit.renderer.play()}}});return s}),define("missile",["editor-game-object-container","timer-factory"],function(e,t){var i={},n=null,o={},r=null,s=e.extend({init:function(){this._super(),this.aiming=!1,this.locked=!1,this.deltaX=0,this.deltaY=0,this.angle=0,this.target=null,this.rotationDirection=1,this.newRotation=0,this.life=0,this.speed=0,this.hp=0},editorStart:function(){this.life=5e6,this.rotation=this.angle,this.aiming=!1,this.locked=!1,t.get(this,"straightMovement","straightMovement"),t.get(this,"aimMovement","aimMovement"),this.straightMovement.configure({delay:1500}),this.aimMovement.configure({delay:3e3}),this.straightMovement.start(),this.straightMovement.on(this.straightMovement.COMPLETE,function(){this.aiming=!0,n=this.target.getMatrix(n),i=n.decompose(i),r=this.getMatrix(r),o=r.decompose(o),this.deltaX=i.x-o.x,this.deltaY=i.y-o.y,this.newRotation=Math.atan2(this.deltaY,this.deltaX)*(180/Math.PI)+180,this.newRotation=this.newRotation%360;var e=(this.newRotation-this.rotation)%360;0>e&&(e+=360),this.rotationDirection=e>180?1:-1,this.aimMovement.start()},!0),this.aimMovement.on(this.aimMovement.COMPLETE,function(){this.aiming=!1,this.locked=!1},!0),this.renderer.play()},recycle:function(){this.straightMovement&&this.straightMovement.remove(),this.aimMovement&&this.aimMovement.remove(),this._super()},editorUpdate:function(e){if(this.aiming){this.rotation+=3*this.rotationDirection,n=this.target.getMatrix(n),i=n.decompose(i),r=this.getMatrix(r),o=r.decompose(o),this.deltaX=i.x-o.x,this.deltaY=i.y-o.y,this.newRotation=Math.atan2(this.deltaY,this.deltaX)*(180/Math.PI)+180,this.newRotation=this.newRotation%360;var t=(this.newRotation-this.rotation)%360;0>t&&(t+=360),t=t>180?1:-1,this.rotationDirection!=t&&(this.aiming=!1,this.locked=!0)}this.locked&&(n=this.target.getMatrix(n),i=n.decompose(i),r=this.getMatrix(r),o=r.decompose(o),this.deltaX=i.x-o.x,this.deltaY=i.y-o.y,this.rotation=Math.atan2(this.deltaY,this.deltaX)*(180/Math.PI)),this.x+=Math.cos(this.rotation*(Math.PI/180))*e*this.speed,this.y+=Math.sin(this.rotation*(Math.PI/180))*e*this.speed,this.life>0&&(this.life-=this.speed)},onCollide:function(){this.speed=0}});return s}),define("destroy-explosions",["editor-component","gb"],function(e,t){var i=e.extend({init:function(){this._super(),this.effect=null},start:function(){this.parent.once("destroyed",this,function(){var e=t.addComponentTo(this.parent,this.effect);e.once(e.STOP_CREATION,this,function(){this.parent.hide(!0).not().allWithType(e.objectType)}),e.once(e.STOP_AND_ALL_RECYCLED,this,function(){t.reclaimer.mark(this.parent)})})},update:function(){}});return i}),define("destroy-on-hp-depleted",["editor-component"],function(e){var t=e.extend({init:function(){this._super()},editorStart:function(){if(!this.parent.hp)throw new Error("Parent has no hp, it's either 0 or missing");this.parent.on("collide",this,function(){if(this.parent.hp--,this.parent.hp<=0){var e=this.parent.findComponents().not().all(function(e){return e.poolId==require("common-bundle").getActivateOnViewPoolId()});if(e)for(var t=0;t<e.length;t++)e[t].disable();this.parent.renderer&&this.parent.renderer.disable(),this.parent.execute("destroyed")}})}});return t}),define("bullets-bundle",["require","common-bundle","explosion-generator-bundle","gb","bundle","laser-renderer","rotate","basic-bullet","cannon-bullet","laser","missile","destroy-explosions","destroy-on-hp-depleted","particle-generator-bundle"],function(e){var t=e("common-bundle"),i=e("explosion-generator-bundle"),n=e("gb"),o=e("bundle").extend({create:function(){this.componentPool.createPool("laser-renderer",e("laser-renderer")),this.componentPool.createPool("rotate-component",e("rotate")),this.gameObjectPool.createDynamicPool("Bullet",e("basic-bullet")),this.gameObjectPool.createDynamicPool("CannonBullet",e("cannon-bullet")),this.gameObjectPool.createDynamicPool("Laser",e("laser")),this.gameObjectPool.createDynamicPool("Missile",e("missile")),this.componentPool.createPool("DestroyExplosions",e("destroy-explosions")),this.componentPool.createPool("DestroyOnHpDepleted",e("destroy-on-hp-depleted")),this.componentPool.createConfiguration("BlobBulletDestroyExplosions","DestroyExplosions").args({effect:i.getSingleSmallExplosionEffectId()}),this.componentPool.createConfiguration("DestroyOnHpDepleted","DestroyOnHpDepleted"),this.componentPool.createConfiguration("BulletCollider",t.getCircleColliderPoolId()).args({id:"basicBulletColliderId",radius:10,getResponse:!0}),this.componentPool.createConfiguration("CannonBulletCollider",t.getCircleColliderPoolId()).args({id:"cannonBulletColliderId",radius:10,getResponse:!0}),this.componentPool.createConfiguration("WebBulletCollider",t.getCircleColliderPoolId()).args({id:"webBulletColliderId",radius:10,getResponse:!0}),this.componentPool.createConfiguration("LaserCollider",t.getPolygonColliderPoolId()).args({id:"laserBulletColliderId",points:[{x:0,y:0},{x:800,y:0},{x:800,y:10},{x:0,y:10}]}),this.componentPool.createConfiguration("MissileCollider",t.getCircleColliderPoolId()).args({id:"missilleColliderId",radius:5,getResponse:!0}),this.componentPool.createConfiguration("LaserTwitch",t.getTwitchPoolId()).args({amount:6}),this.componentPool.createConfiguration("PlayerBullet1Renderer",t.getAnimationBitmapRendererPoolId()).args({pingPong:!0,frameWidth:16,frameHeight:16,frameCount:2,frameDelay:.05,path:n.assetMap()["PLAYERBULLET1.PNG"],offset:"center"}),this.componentPool.createConfiguration("RoundBulletRenderer",t.getBitmapRendererPoolId()).args({path:n.assetMap()["ROUNDBULLET.PNG"],offset:"center"}),this.componentPool.createConfiguration("BlobBulletRenderer",t.getBitmapRendererPoolId()).args({path:n.assetMap()["MINIBLOB.PNG"],offset:"center"}),this.componentPool.createConfiguration("ArrowBulletRenderer",t.getBitmapRendererPoolId()).args({path:n.assetMap()["ARROWBULLET.PNG"],offset:"center"}),this.componentPool.createConfiguration("WebBulletRenderer",t.getBitmapRendererPoolId()).args({path:n.assetMap()["WEBBULLET.PNG"],offset:"center"}),this.componentPool.createConfiguration("MissileRenderer",t.getAnimationBitmapRendererPoolId()).args({pingPong:!0,frameWidth:24,frameHeight:12,frameCount:5,frameDelay:.05,path:n.assetMap()["MISSILE.PNG"],offset:"center"}),this.componentPool.createConfiguration("LaserRender","laser-renderer"),this.gameObjectPool.createConfiguration("player-bullet","Bullet").addComponent(e("particle-generator-bundle").getPlayerBulletCollisionParticlesId()).addComponent("BulletCollider").addComponent("PlayerBulletHit").addComponent("PlayerBulletDeflect").setRenderer("PlayerBullet1Renderer"),this.gameObjectPool.createConfiguration("cannon-bullet-slow","CannonBullet").args({speed:100}).addComponent("BlobBulletDestroyExplosions").addComponent("CannonBulletCollider").setRenderer("ArrowBulletRenderer"),this.gameObjectPool.createConfiguration("cannon-bullet-fast","CannonBullet").args({speed:220}).addComponent("BlobBulletDestroyExplosions").addComponent("CannonBulletCollider").setRenderer("ArrowBulletRenderer"),this.componentPool.createConfiguration("BulletRotate","rotate-component").args({amount:5}),this.gameObjectPool.createConfiguration("double-cannon-bullet-slow","CannonBullet").args({speed:250}).addComponent("BulletRotate").addComponent("BlobBulletDestroyExplosions").addComponent("CannonBulletCollider").setRenderer("RoundBulletRenderer"),this.gameObjectPool.createConfiguration("double-cannon-bullet-fast","CannonBullet").args({speed:270}).addComponent("BulletRotate").addComponent("BlobBulletDestroyExplosions").addComponent("CannonBulletCollider").setRenderer("RoundBulletRenderer"),this.gameObjectPool.createConfiguration("Laser","Laser").addComponent("LaserCollider").addComponent("LaserTwitch").setRenderer("LaserRender"),this.gameObjectPool.createConfiguration("missile-slow","Missile").args({speed:100,hp:1}).addComponent("BlobBulletDestroyExplosions").addComponent("DestroyOnHpDepleted").addComponent("MissileCollider").addComponent("MissileExplosion1").setRenderer("MissileRenderer"),this.gameObjectPool.createConfiguration("missile-fast","Missile").args({speed:220,hp:1}).addComponent("BlobBulletDestroyExplosions").addComponent("DestroyOnHpDepleted").addComponent("MissileCollider").addComponent("MissileExplosion1").setRenderer("MissileRenderer"),this.gameObjectPool.createConfiguration("blob-bullet-slow","CannonBullet").args({speed:150}).addComponent("BulletRotate").addComponent("BlobBulletDestroyExplosions").addComponent("CannonBulletCollider").setRenderer("BlobBulletRenderer"),this.gameObjectPool.createConfiguration("blob-bullet-fast","CannonBullet").args({speed:250}).addComponent("BulletRotate").addComponent("BlobBulletDestroyExplosions").addComponent("CannonBulletCollider").setRenderer("BlobBulletRenderer"),this.gameObjectPool.createConfiguration("boss-4-bullet","CannonBullet").args({speed:180}).addComponent("BulletRotate").addComponent("BlobBulletDestroyExplosions").addComponent("WebBulletCollider").setRenderer("WebBulletRenderer")}});return new o}),define("obstacle",["editor-game-object-container","reclaimer"],function(e){var t=e.extend({init:function(){this._super()},editorStart:function(){},editorUpdate:function(){},deActivate:function(){},onCollide:function(){}});return t}),define("obstacle-renderer",["path-renderer","draw"],function(e,t){var i=null,n=e.extend({init:function(){this._super(),this.parentColliderPoints=null},start:function(){this.skipCache=!0,this.name="obstacle-renderer",this.parentColliderPoints=null,this._super()},drawPath:function(e,n){i=this.parent.getMatrix(),this.parentColliderPoints||(this.parentColliderPoints=this.parent.findComponents().firstWithProp("collider").Points),e.save(),e.setTransform(1,0,0,1,0,0),n.transformContext(e),e.transform(i.a,i.b,i.c,i.d,i.tx,i.ty),t.polygon(e,0,0,this.parentColliderPoints,null,"#FFFFFF",2/this.parent.scaleX),e.restore()},rendererWidth:function(){return this.parentColliderPoints||(this.parentColliderPoints=this.parent.findComponents().firstWithProp("collider").Points),s(this.parentColliderPoints,"width")},rendererHeight:function(){return this.parentColliderPoints||(this.parentColliderPoints=this.parent.findComponents().firstWithProp("collider").Points),s(this.parentColliderPoints,"height")},rendererOffsetX:function(){return this.parentColliderPoints||(this.parentColliderPoints=this.parent.findComponents().firstWithProp("collider").Points),r(this.parentColliderPoints,"x")},rendererOffsetY:function(){return this.parentColliderPoints||(this.parentColliderPoints=this.parent.findComponents().firstWithProp("collider").Points),r(this.parentColliderPoints,"y")},debug_draw:function(e,t,n,r){r.rendererDebug&&(e.save(),e.beginPath(),e.strokeStyle=this.debugColor,e.lineWidth=1,i=this.parent.matrix,e.transform(i.a,i.b,i.c,i.d,i.tx,i.ty),e.translate(-.5,-.5),o.call(this,e,this.rendererOffsetX(),this.rendererOffsetY(),"moveTo"),o.call(this,e,this.rendererOffsetX()+this.rendererWidth(),this.rendererOffsetY(),"lineTo"),o.call(this,e,this.rendererOffsetX()+this.rendererWidth(),this.rendererOffsetY()+this.rendererHeight(),"lineTo"),o.call(this,e,this.rendererOffsetX(),this.rendererOffsetY()+this.rendererHeight(),"lineTo"),e.closePath(),e.stroke(),e.restore())}}),o=function(e,t,i,n){e.save(),e[n](Math.round(t),Math.round(i)),e.restore()},r=function(e,t){for(var i=e[0][t],n=1;n<e.length;n++)i=Math.min(i,e[n][t]);return i},s=function(e,t){t="width"==t?"x":"y";for(var i=e[0][t],n=e[0][t],o=1;o<e.length;o++)i=Math.min(i,e[o][t]),n=Math.max(n,e[o][t]);return n-i};return n}),define("obstacle-bundle",["require","common-bundle","obstacle","obstacle-renderer","bundle"],function(e){var t=e("common-bundle"),i=e("obstacle"),n=e("obstacle-renderer"),o=e("bundle").extend({create:function(){this.componentPool.createPool("obstacle-renderer",n),this.componentPool.createConfiguration("ActivateObstancleOnView",t.getActivateOnViewPoolId()),this.gameObjectPool.createDynamicPool("Obstacle",i),this.componentPool.createConfiguration("ObstacleCollider3",t.getPolygonColliderPoolId()).args({id:"obstacleColliderId",points:r(3,20)}),this.componentPool.createConfiguration("ObstacleCollider4",t.getPolygonColliderPoolId()).args({id:"obstacleColliderId",points:r(4,20)}),this.componentPool.createConfiguration("ObstacleRender","obstacle-renderer"),this.gameObjectPool.createConfiguration("obstacle-3","Obstacle").addComponent("ObstacleCollider3").addComponent("ActivateObstancleOnView").setRenderer("ObstacleRender").obstacleCategory(),this.gameObjectPool.createConfiguration("obstacle-4","Obstacle").addComponent("ObstacleCollider4").addComponent("ActivateObstancleOnView").setRenderer("ObstacleRender").obstacleCategory()}}),r=function(e,t){for(var i=[],n=2*Math.PI/e,o=e-1;o>=0;o--){var r={};r.x=Math.sin(n*o)*t,r.y=Math.cos(n*o)*t,i.push(r)}return i};return new o}),define("stop-boss",["editor-component","gb","player-getter"],function(e,t,i){var n=e.extend({init:function(){this._super(),this.isPlayerStopped=!1},editorStart:function(e){if(!e.stopLogic)throw new Error("missing stopLogic method");i.get().on(i.get().STOP_MOVEMENT,this,this.onPlayerStop),i.get().on(i.get().MOVE,this,this.onPlayerMove)},onPlayerStop:function(){this.parent&&this.parent.isActive()&&(this.isPlayerStopped||(this.isPlayerStopped=!0))},onPlayerMove:function(){this.parent&&this.parent.isActive()&&this.isPlayerStopped&&(this.isPlayerStopped=!1,this.parent.stopLogic())},recycle:function(){this._super(),this.isPlayerStopped=!1,i.exists()&&(i.get().removeDelegate(i.get().STOP_MOVEMENT,this,this.onPlayerStop),i.get().removeDelegate(i.get().MOVE,this,this.onPlayerMove))}});return n}),define("boss-1",["editor-game-object-container","player-getter","root","gb"],function(e,t,i,n){var o=e.extend({init:function(){this._super(),this.health=40,this.cableCount=-1,this.initCableCount=-1,this.hasStopListener=!1,this.destroyEffect=null,this.colliderId=null,this.cannons=null,this.cables=null,this.onPlayerStop=function(){if(this.hasStopListener=!1,null===this.cables){this.cables=this.findChildren().allWithType("boss-1-cables"),this.cableCount=this.cables.length,this.initCableCount=this.cables.length;for(var e=0;e<this.cables.length;e++)this.cables[e].onBossStart(),this.cables[e].on(this.cables[e].DAMAGE,this,this.onDamage)}else for(var e=0;e<this.cables.length;e++)this.cables[e].isActive()&&this.cables[e].onBossStart();null===this.cannons&&(this.cannons=i.findChildren().recurse().all(function(e){return("BossCannonBase"==e.poolId||"BossDoubleCannonBase"==e.poolId||"BossGeneratorType"==e.poolId)&&e.getViewportVisibility("Main")}));for(var e=0;e<this.cannons.length;e++)this.cannons[e].isActive()&&this.cannons[e].onBossStart();if(null===this.otherBosses&&(this.otherBosses=i.findChildren().recurse().all(function(e){return("boss-1"==e.typeId||"boss-2"==e.typeId||"boss-3"==e.typeId||"boss-4"==e.typeId)&&e.getViewportVisibility("Main")}),this.otherBosses))for(var e=0;e<this.otherBosses.length;e++)this.otherBosses[e].once("destroyed",this,function(e){this.isActive()&&this.otherBosses.splice(this.otherBosses.indexOf(e),1)})},this.otherBosses=null},editorStart:function(){this.health=40,this.hasStopListener||(this.hasStopListener=!0,t.get().once(t.get().STOP_MOVEMENT,this,this.onPlayerStop))},editorUpdate:function(){},deActivate:function(){this.hasStopListener=!1,t.get().removeDelegate(t.get().STOP_MOVEMENT,this,this.onPlayerStop)},canBeDamaged:function(){return 0===this.cableCount},onDamage:function(){this.cableCount--},onCollide:function(){if(!this.hasStopListener&&null!==this.cableCount&&this.cableCount<=0)if(this.health>0)this.health--;else{var e=n.addComponentTo(this,this.destroyEffect);if(this.removeComponent(this.findComponents().firstWithType(this.colliderId)),e.once(e.STOP_AND_ALL_RECYCLED,this,function(){this.otherBosses&&0==this.otherBosses.length&&(this.execute("all-bosses-destroyed",this),t.get().move(),t.get().removeDelegate(t.get().STOP_MOVEMENT,this,this.onPlayerStop)),n.reclaimer.mark(this)}),this.execute("destroyed",this),this.otherBosses&&0==this.otherBosses.length&&(this.execute("last-boss-destroyed",this),this.cannons)){for(var i=0;i<this.cannons.length;i++)this.cannons[i].onBossDestroy();this.cannons.length=0}}},stopLogic:function(){if(this.execute("boss-stop",this),null!==this.cables&&null!==this.cannons){for(var e=0;e<this.cables.length;e++)this.cables[e].onBossStop();for(var e=0;e<this.cannons.length;e++)this.cannons[e].onBossStop();this.hasStopListener||(this.hasStopListener=!0,t.get().once(t.get().STOP_MOVEMENT,this,this.onPlayerStop))}},recycle:function(){this.cannons=null,this.otherBosses=null,this.cables=null,this._super()}});return o}),define("boss-1-cables",["editor-game-object-container","gb"],function(e,t){var i=e.extend({init:function(){this._super(),this.health=40,this.destroyEffect=null,this.destroyParticles=null},start:function(){this._super()},editorStart:function(){this.bossStarted=!1},editorUpdate:function(){},deActivate:function(){},onBossStart:function(){this.bossStarted=!0},onBossStop:function(){this.bossStarted=!1},onCollide:function(){this.bossStarted&&(this.health>0?this.health--:(t.addComponentTo(this,this.destroyEffect),t.addComponentsTo(this,this.destroyParticles),t.setRendererTo(this,this.damageRendererId),this.removeComponent(this.findComponents().firstWithType(this.colliderId)),this.execute(this.DAMAGE)))}});return Object.defineProperty(i.prototype,"DAMAGE",{get:function(){return"damage"}}),i}),define("boss-1-icon",["editor-game-object-container"],function(e){var t=e.extend({init:function(){this._super()},editorStart:function(){},editorUpdate:function(){},onCollide:function(){}});return t}),define("boss-2-core",["editor-game-object-container","player-getter","root"],function(e,t,i){var n=e.extend({init:function(){this._super(),this.hp=40,this.body=null,this.cannons=null,this.otherBosses=null},start:function(){this._super()},editorStart:function(){this.hp=40,this.hasStopListener||(this.hasStopListener=!0,t.get().once(t.get().STOP_MOVEMENT,this,this.onPlayerStop))},deActivate:function(){this.hasStopListener=!1,t.get().removeDelegate(t.get().STOP_MOVEMENT,this,this.onPlayerStop)},editorUpdate:function(){},onCollide:function(){if(!this.hasStopListener&&this.hp>0&&(this.hp--,0==this.hp&&this.isActive())){var e=this.findComponents().firstWithProp("collider");if(e.disable(),this.execute("destroyed",this),this.otherBosses&&0==this.otherBosses.length&&(this.execute("last-boss-destroyed",this),this.cannons)){for(var t=0;t<this.cannons.length;t++)this.cannons[t].getViewportVisibility("Main")&&this.cannons[t].onBossDestroy();this.cannons.length=0}this.body.isActive()&&this.body.onBossDestroy()}},recycle:function(){t.exists()&&this.otherBosses&&0==this.otherBosses.length&&(this.execute("all-bosses-destroyed",this),this.hasStopListener=!1,t.get().move(),t.get().removeDelegate(t.get().STOP_MOVEMENT,this,this.onPlayerStop)),this.body=null,this.cannons=null,this.otherBosses=null,this._super()},stopLogic:function(){if(this.execute("boss-stop",this),null!==this.cannons&&null!==this.body){this.body.onBossStop();for(var e=0;e<this.cannons.length;e++)this.cannons[e].onBossStop();this.hasStopListener||(this.hasStopListener=!0,t.get().once(t.get().STOP_MOVEMENT,this,this.onPlayerStop))}},onPlayerStop:function(){this.hasStopListener=!1,null===this.body&&(this.body=this.findChildren().firstWithType("boss-body")),null===this.cannons&&(this.cannons=i.findChildren().recurse().all(function(e){return("BossCannonBase"==e.poolId||"BossDoubleCannonBase"==e.poolId||"BossGeneratorType"==e.poolId)&&e.getViewportVisibility("Main")})),this.body.onBossStart();for(var e=0;e<this.cannons.length;e++)this.cannons[e].onBossStart();if(null===this.otherBosses&&(this.otherBosses=null,this.otherBosses=i.findChildren().recurse().all(function(e){return("boss-1"==e.typeId||"boss-2"==e.typeId||"boss-3"==e.typeId||"boss-4"==e.typeId)&&e.getViewportVisibility("Main")}),this.otherBosses))for(var e=0;e<this.otherBosses.length;e++)this.otherBosses[e].once("destroyed",this,function(e){this.isActive()&&this.otherBosses.splice(this.otherBosses.indexOf(e),1)})}});return n}),define("boss-2-body",["editor-game-object-container","timer-factory","util","gb"],function(e,t,i,n){var o={},r=e.extend({init:function(){this._super(),this.destroyEffect=null,this.colliderId=null,this.collider=null,this.attackCount=0,this.laser1=null,this.laser2=null,this.laser3=null,this.mine1=null,this.mine2=null,this.mine3=null,this.mine4=null,this.mine5=null,this.laserAttacks=null,this.mineAttacks=null,this.laserAttackIndex=0,this.mineAttackIndex=0},editorStart:function(){if(!this.laserAttacks&&!this.mineAttacks)throw new Error("No attacks set on boss-2")},editorUpdate:function(){},deActivate:function(){this.openTimer&&this.openTimer.remove(),this.attackTimer&&this.attackTimer.remove(),this.closeTimer&&this.closeTimer.remove(),this.laserTimer&&this.laserTimer.remove(),this.laser1&&n.reclaimer.mark(this.laser1),this.laser2&&n.reclaimer.mark(this.laser2),this.laser3&&n.reclaimer.mark(this.laser3),this.laser1=null,this.laser2=null,this.laser3=null,this.clearMines()},onBossStart:function(){this.attackCount=0,this.laserAttackIndex=0,this.mineAttackIndex=0,this.collider=this.findComponents().firstWithProp("collider"),this.collider.enable(),this.closingAnimation(),t.get(this,"openTimer","openTimer"),t.get(this,"attackTimer","attackTimer"),t.get(this,"closeTimer","closeTimer"),t.get(this,"laserTimer","laserTimer"),this.openTimer.configure({delay:6e3,removeOnComplete:!1}),this.attackTimer.configure({delay:3e3,removeOnComplete:!1}),this.closeTimer.configure({delay:2e3,removeOnComplete:!1}),this.laserTimer.configure({delay:2e3,removeOnComplete:!1}),this.openTimer.start(),this.openTimer.on(this.openTimer.COMPLETE,function(){this.execute("opening"),this.renderer.play("opening"),this.addRendererDelegate("complete",function(){this.collider.disable(),this.renderer.play("opened"),this.attackTimer.start()})}),this.attackTimer.on(this.attackTimer.COMPLETE,function(){if(this.attackCount++,this.attackCount%3==0)this.closeTimer.start();else if(i.rand_b()){if(!this.laserAttacks)return void this.doMineAttack();this.doLaserAttack()}else{if(!this.mineAttacks)return void this.doLaserAttack();this.doMineAttack()}}),this.closeTimer.on(this.closeTimer.COMPLETE,function(){this.execute("closing"),this.renderer.play("closing"),this.collider.enable(),this.addRendererDelegate("complete",function(){this.renderer.play("closed"),this.openTimer.start()})}),this.laserTimer.on(this.laserTimer.COMPLETE,function(){this.laser1&&n.reclaimer.mark(this.laser1),this.laser2&&n.reclaimer.mark(this.laser2),this.laser3&&n.reclaimer.mark(this.laser3),this.laser1=null,this.laser2=null,this.laser3=null,this.closeTimer.start()})},onBossStop:function(){this.renderer&&(this.collider.enable(),this.cleanUpRendererDelegates(),this.deActivate(),this.closingAnimation())},closingAnimation:function(){this.renderer&&(this.execute("closing"),this.renderer.isAtLabel("opened")?(this.renderer.play("closing"),this.addRendererDelegate("complete",function(){this.renderer.play("closed")})):this.renderer.isAtLabel("opening")?(this.renderer.reverse(),this.addRendererDelegate("complete_back",function(){this.renderer.play("closed")})):this.renderer.isAtLabel("closing")?this.addRendererDelegate("complete",function(){this.renderer.play("closed")}):this.renderer.isAtLabel("half-open")&&(this.renderer.play("half-open-close"),this.addRendererDelegate("complete",function(){this.renderer.play("closed")})))},onCollide:function(){},recycle:function(){this.deActivate(),this.cleanUpRendererDelegates(),this._super()},doLaserAttack:function(){this.execute("laser-attack"),o=this.getMatrix().decompose(o),"x1"==this.laserAttacks[this.laserAttackIndex]&&(this.laser1=n.create("Laser",this.getUpdateGroup(),this.getViewportList(),{rotation:o.rotation+90,x:o.x,y:o.y})),"x2"==this.laserAttacks[this.laserAttackIndex]&&(this.laser1=n.create("Laser",this.getUpdateGroup(),this.getViewportList(),{rotation:o.rotation+90+35,x:o.x,y:o.y}),this.laser2=n.create("Laser",this.getUpdateGroup(),this.getViewportList(),{rotation:o.rotation+90-35,x:o.x,y:o.y})),"x3"==this.laserAttacks[this.laserAttackIndex]&&(this.laser1=n.create("Laser",this.getUpdateGroup(),this.getViewportList(),{rotation:o.rotation+90+35,x:o.x,y:o.y}),this.laser2=n.create("Laser",this.getUpdateGroup(),this.getViewportList(),{rotation:o.rotation+90,x:o.x,y:o.y}),this.laser3=n.create("Laser",this.getUpdateGroup(),this.getViewportList(),{rotation:o.rotation+90-35,x:o.x,y:o.y})),this.laserTimer.start(),this.laserAttackIndex<this.laserAttacks.length-1?this.laserAttackIndex++:this.laserAttackIndex=0},doMineAttack:function(){this.execute("mine-attack"),o=this.getMatrix().decompose(o),"x3"==this.mineAttacks[this.mineAttackIndex]&&(this.clearMines(),this.mine1=n.create("boss-mine-long",this.getUpdateGroup(),this.getViewportList(),{angle:(o.rotation+90)*(Math.PI/180),x:o.x,y:o.y}),this.mine2=n.create("boss-mine-long",this.getUpdateGroup(),this.getViewportList(),{angle:(o.rotation+90+20)*(Math.PI/180),x:o.x,y:o.y}),this.mine3=n.create("boss-mine-long",this.getUpdateGroup(),this.getViewportList(),{angle:(o.rotation+90-20)*(Math.PI/180),x:o.x,y:o.y})),"x5"==this.mineAttacks[this.mineAttackIndex]&&(this.clearMines(),this.mine1=n.create("boss-mine-long",this.getUpdateGroup(),this.getViewportList(),{angle:(o.rotation+90)*(Math.PI/180),x:o.x,y:o.y}),this.mine2=n.create("boss-mine-long",this.getUpdateGroup(),this.getViewportList(),{angle:(o.rotation+90+20)*(Math.PI/180),x:o.x,y:o.y}),this.mine3=n.create("boss-mine-long",this.getUpdateGroup(),this.getViewportList(),{angle:(o.rotation+90-20)*(Math.PI/180),x:o.x,y:o.y}),this.mine4=n.create("boss-mine-short",this.getUpdateGroup(),this.getViewportList(),{angle:(o.rotation+90+10)*(Math.PI/180),x:o.x,y:o.y}),this.mine5=n.create("boss-mine-short",this.getUpdateGroup(),this.getViewportList(),{angle:(o.rotation+90-10)*(Math.PI/180),x:o.x,y:o.y})),this.closeTimer.start(),this.mineAttackIndex<this.mineAttacks.length-1?this.mineAttackIndex++:this.mineAttackIndex=0
},onBossDestroy:function(){this.openTimer&&this.openTimer.stop(),this.closeTimer&&this.closeTimer.stop(),this.attackTimer&&this.attackTimer.stop(),this.laserTimer&&this.laserTimer.stop(),this.renderer&&this.renderer.pause()},clearMines:function(){this.mine1&&this.mine1.destroyMine(),this.mine2&&this.mine2.destroyMine(),this.mine3&&this.mine3.destroyMine(),this.mine4&&this.mine4.destroyMine(),this.mine5&&this.mine5.destroyMine(),this.mine1=null,this.mine2=null,this.mine3=null,this.mine4=null,this.mine5=null},addRendererDelegate:function(e,t){this.renderer.once(e,this,t,"boss-2-renderer-handler")},cleanUpRendererDelegates:function(){this.renderer&&this.renderer.levelCleanUp("boss-2-renderer-handler")}});return r}),define("boss-3-body",["editor-game-object-container","player-getter","root","timer-factory"],function(e,t,i,n){var o=e.extend({init:function(){this._super(),this.hp=0,this.eye=null,this.cannons=null,this.target=null,this.vecX=0,this.vecY=0,this.otherBosses=null,this.hasStopListener=!1},editorStart:function(){this.hp=5,this.hasStopListener||(this.eye=this.findChildren().firstWithType("boss-3-eye"),this.eye.disable(),this.hasStopListener=!0,t.get().once(t.get().STOP_MOVEMENT,this,this.onPlayerStop))},deActivate:function(){this.hasStopListener=!1,t.get().removeDelegate(t.get().STOP_MOVEMENT,this,this.onPlayerStop),this.target=null},editorUpdate:function(){},onCollide:function(){},recycle:function(){t.exists()&&this.otherBosses&&0==this.otherBosses.length&&(this.execute("all-bosses-destroyed",this),t.get().move(),t.get().removeDelegate(t.get().STOP_MOVEMENT,this,this.onPlayerStop)),this.regenTimer&&this.regenTimer.remove(),this.eye=null,this.cannons=null,this.otherBosses=null,this._super()},onPlayerStop:function(){this.hasStopListener=!1,this.eye=this.findChildren().firstWithType("boss-3-eye"),this.eye.enable(),this.target=t.get();var e=this.findComponents().firstWithProp("collider");e.enable(),n.get(this,"regenTimer","regenTimer"),this.regenTimer.configure({delay:500,removeOnComplete:!1}),this.regenTimer.on("complete",function(){this.hp>0&&this.eye.regen(40)}),this.eye.on("damage",this,function(){if(this.hp>0)if(this.hp--,0==this.hp){if(this.isActive()){var e=this.findComponents().firstWithProp("collider");if(e.disable(),this.target=null,this.execute("destroyed",this),this.otherBosses&&0==this.otherBosses.length&&(this.execute("last-boss-destroyed",this),this.cannons)){for(var t=0;t<this.cannons.length;t++)this.cannons[t].getViewportVisibility("Main")&&this.cannons[t].onBossDestroy();this.cannons.length=0}}}else this.regenTimer.reset(),TweenLite.to(this,.5,{x:"-="+40*this.vecX,y:"-="+40*this.vecY,ease:Power2.easeOut}),this.execute("damage")},!1,!1,!1,"eye-damage-handler"),null===this.cannons&&(this.cannons=i.findChildren().recurse().all(function(e){return("BossCannonBase"==e.poolId||"BossDoubleCannonBase"==e.poolId||"BossGeneratorType"==e.poolId)&&e.getViewportVisibility("Main")}));for(var o=0;o<this.cannons.length;o++)this.cannons[o].isActive()&&this.cannons[o].onBossStart();if(null===this.otherBosses){this.otherBosses=i.findChildren().recurse().all(function(e){return("boss-1"==e.typeId||"boss-2"==e.typeId||"boss-3"==e.typeId||"boss-4"==e.typeId)&&e.getViewportVisibility("Main")});for(var o=0;o<this.otherBosses.length;o++)this.otherBosses[o].once("destroyed",this,function(e){this.isActive()&&this.otherBosses.splice(this.otherBosses.indexOf(e),1)})}},stopLogic:function(){if(this.execute("boss-stop",this),null!==this.cannons){this.eye.disable(),this.eye.regen(),this.target=null;var e=this.findComponents().firstWithProp("collider");e.enable();for(var i=0;i<this.cannons.length;i++)this.cannons[i].onBossStop();this.regenTimer&&this.regenTimer.remove(),this.eye&&this.eye.levelCleanUp("eye-damage-handler"),this.hasStopListener||(this.hasStopListener=!0,t.get().once(t.get().STOP_MOVEMENT,this,this.onPlayerStop))}}});return o}),define("wobble",["editor-component"],function(e){var t=e.extend({init:function(){this._super(),this.counterX=0,this.counterY=0,this.speedX=0,this.speedY=0,this.amplitudeX=0,this.amplitudeY=0},editorStart:function(){this.speedX=this.speedX||1.5,this.speedY=this.speedY||1.3,this.amplitudeX=this.amplitudeX||1,this.amplitudeY=this.amplitudeY||1,this.counterX=Math.random()*this.speedX,this.counterY=Math.random()*this.speedY},editorUpdate:function(e){this.parent.x-=Math.cos(this.counterX)*this.amplitudeX,this.parent.y+=Math.cos(this.counterY)*this.amplitudeY,this.counterX+=this.speedX*e,this.counterY+=this.speedY*e},recycle:function(){this.speedX=0,this.speedY=0,this.amplitudeX=0,this.amplitudeY=0,this._super()}});return t}),define("follow-target",["editor-component"],function(e){var t=e.extend({init:function(){this._super()},editorStart:function(){},editorUpdate:function(e){if(this.parent.target){var t=this.parent.target.X-this.parent.X,i=this.parent.target.Y-this.parent.Y,n=Math.atan2(i,t);0>n&&(n+=2*Math.PI),this.parent.vecX=Math.cos(n),this.parent.vecY=Math.sin(n),this.parent.x+=this.parent.vecX*e*this.parent.speed,this.parent.y+=this.parent.vecY*e*this.parent.speed}}});return t}),define("blob-divide",["editor-component","gb","TweenLite","EasePack"],function(e,t,i){var n=e.extend({init:function(){this._super(),this.objectType=null,this.amount=null},editorStart:function(){if(!this.objectType)throw new Error("Missing objectType attribute");if(!this.amount)throw new Error("Missing amount attribute");this.parent.on("destroyed",this,function(){"x2"==this.amount&&(this.easeBlob(t.create(this.objectType,this.parent.getUpdateGroup(),this.parent.getViewportList(),{x:this.parent.x,y:this.parent.y})),this.easeBlob(t.create(this.objectType,this.parent.getUpdateGroup(),this.parent.getViewportList(),{x:this.parent.x,y:this.parent.y}))),"x3"==this.amount&&(this.easeBlob(t.create(this.objectType,this.parent.getUpdateGroup(),this.parent.getViewportList(),{x:this.parent.x,y:this.parent.y})),this.easeBlob(t.create(this.objectType,this.parent.getUpdateGroup(),this.parent.getViewportList(),{x:this.parent.x,y:this.parent.y})),this.easeBlob(t.create(this.objectType,this.parent.getUpdateGroup(),this.parent.getViewportList(),{x:this.parent.x,y:this.parent.y})))}),this.parent.on("damage",this,function(){"x2"==this.amount&&(this.easeBlob(t.create(this.objectType,this.parent.getUpdateGroup(),this.parent.getViewportList(),{x:this.parent.x,y:this.parent.y})),this.easeBlob(t.create(this.objectType,this.parent.getUpdateGroup(),this.parent.getViewportList(),{x:this.parent.x,y:this.parent.y}))),"x3"==this.amount&&(this.easeBlob(t.create(this.objectType,this.parent.getUpdateGroup(),this.parent.getViewportList(),{x:this.parent.x,y:this.parent.y})),this.easeBlob(t.create(this.objectType,this.parent.getUpdateGroup(),this.parent.getViewportList(),{x:this.parent.x,y:this.parent.y})),this.easeBlob(t.create(this.objectType,this.parent.getUpdateGroup(),this.parent.getViewportList(),{x:this.parent.x,y:this.parent.y})))})},easeBlob:function(e){var t=2*Math.random()*Math.PI,n=50+70*Math.random(),o=Math.cos(t)*n,r=Math.sin(t)*n;i.to(e,1.2,{x:"+="+o,y:"+="+r,ease:Power2.easeOut})}});return n}),define("boss-4-body",["editor-game-object-container","player-getter","root","timer-factory","gb","TweenLite","EasePack","util"],function(e,t,i,n,o,r,s,a){var l=e.extend({init:function(){this._super(),this.hp=0,this.speed=0,this.cannons=null,this.target=null,this.movementAngleComponent=null,this.activateOnViewComponent=null,this.shootingPatternComponent=null,this.angle=0,this.otherBosses=null},editorStart:function(){this.hp=70,this.speed=170,this.movementAngleComponent=this.findComponents().firstWithType("MovementAngle"),this.movementAngleComponent.disable(),this.activateOnViewComponent=this.findComponents().firstWithType("Activate_Boss_On_View"),this.shootingPatternComponent=this.findComponents().firstWithType("Boss4ShootingPattern"),this.shootingPatternComponent.setOrigin(this.findChildren().firstWithType("FirePosition")),this.angle=(this.rotation+90)*(Math.PI/180),n.get(this,"waitTimer","waitTimer"),n.get(this,"walkTimer","walkTimer"),this.waitTimer.configure({delay:2e3,removeOnComplete:!1}),this.walkTimer.configure({delay:2e3,removeOnComplete:!1}),this.waitTimer.on("complete",function(){if(!this.target.isStopped())return void this.walkTimer.start();this.show();var e=this.renderer.rendererHeight()/2;0==this.rotation&&r.to(this,e/this.speed,{y:"+="+e,ease:Linear.easeNone,onCompleteScope:this,onComplete:function(){this.renderer.pause(),this.execute("start-shot-pattern")}}),90==this.rotation&&r.to(this,e/this.speed,{x:"-="+e,ease:Linear.easeNone,onCompleteScope:this,onComplete:function(){this.renderer.pause(),this.execute("start-shot-pattern")}}),180==this.rotation&&r.to(this,e/this.speed,{y:"-="+e,ease:Linear.easeNone,onCompleteScope:this,onComplete:function(){this.renderer.pause(),this.execute("start-shot-pattern")}}),270==this.rotation&&r.to(this,e/this.speed,{x:"+="+e,ease:Linear.easeNone,onCompleteScope:this,onComplete:function(){this.renderer.pause(),this.execute("start-shot-pattern")}})}),this.walkTimer.on("complete",function(){if(!(this.hp<=0)){this.execute("move"),this.show();var e=this.target.X-this.x,t=this.target.Y-this.y;this.angle=Math.atan2(t,e),this.angle<0&&(this.angle+=2*Math.PI),this.rotation=this.angle*(180/Math.PI)-90,this.movementAngleComponent.enable(),this.renderer.resume()}}),this.on("finish-shot-pattern",this,function(){this.walkTimer.start()}),this.on("out-of-screen-bounds",this,function(){if(this.target){var e=this.target.x,t=this.target.y,i=parseInt(4*(Math.random()-1e-12));0==i?(this.x=e+o.canvas.width/2+a.rand_i(-100,100),this.y=t-this.renderer.rendererHeight()/2,this.rotation=0):1==i?(this.x=e+o.canvas.width+this.renderer.rendererHeight()/2,this.y=t+o.canvas.height/2+a.rand_i(-100,100),this.rotation=90):2==i?(this.x=e+o.canvas.width/2+a.rand_i(-100,100),this.y=t+o.canvas.height+this.renderer.rendererHeight()/2,this.rotation=180):3==i&&(this.x=e-this.renderer.rendererHeight()/2,this.y=t+o.canvas.height/2+a.rand_i(-100,100),this.rotation=270),this.angle=(this.rotation+90)*(Math.PI/180),this.movementAngleComponent.disable(),this.waitTimer.start(),this.hide()}}),t.get().once(t.get().STOP_MOVEMENT,this,this.onPlayerStop)},deActivate:function(){t.get().removeDelegate(t.get().STOP_MOVEMENT,this,this.onPlayerStop),this.target=null},editorUpdate:function(){},onCollide:function(){if(null!==this.target&&this.hp>0)if(this.hp--,0==this.hp){if(this.isActive()){var e=this.findComponents().firstWithProp("collider");if(e.disable(),this.target=null,this.speed=0,r.killTweensOf(this),this.execute("destroyed",this),this.otherBosses&&0==this.otherBosses.length&&(this.execute("last-boss-destroyed",this),this.cannons)){for(var t=0;t<this.cannons.length;t++)this.cannons[t].getViewportVisibility("Main")&&this.cannons[t].onBossDestroy();this.cannons.length=0}}}else this.execute("damage")},recycle:function(){t.exists()&&this.otherBosses&&0==this.otherBosses.length&&(this.execute("all-bosses-destroyed",this),t.get().move(),t.get().removeDelegate(t.get().STOP_MOVEMENT,this,this.onPlayerStop)),this.cannons=null,this.otherBosses=null,this.waitTimer&&this.waitTimer.remove(),this.walkTimer&&this.walkTimer.remove(),this._super()},onPlayerStop:function(){this.target=t.get(),this.movementAngleComponent.enable(),this.activateOnViewComponent.disable(),this.execute("move"),this.renderer.play("walking"),this.cannons=i.findChildren().recurse().all(function(e){return("BossCannonBase"==e.poolId||"BossDoubleCannonBase"==e.poolId||"BossGeneratorType"==e.poolId)&&e.getViewportVisibility("Main")});for(var e=0;e<this.cannons.length;e++)this.cannons[e].onBossStart();if(this.otherBosses=null,this.otherBosses=i.findChildren().recurse().all(function(e){return("boss-1"==e.typeId||"boss-2"==e.typeId||"boss-3"==e.typeId||"boss-4"==e.typeId)&&e.getViewportVisibility("Main")}),t.get().once(t.get().MOVE,this,function(){this.execute("boss-stop",this)}),this.otherBosses)for(var e=0;e<this.otherBosses.length;e++)this.otherBosses[e].once("destroyed",this,function(e){this.isActive()&&this.otherBosses.splice(this.otherBosses.indexOf(e),1)})}});return l}),define("shooting-pattern",["editor-component","gb"],function(e,t){var i={},n=e.extend({init:function(){this._super(),this.pattern=null,this.objectType=null,this.originMatrix=null,this.index=0,this.timeoutId=-1},editorStart:function(){if(this.index=0,!this.pattern)throw new Error("Missing pattern attribute");if(!this.objectType)throw new Error("Missing objectType attribute")},shootVolley:function(){for(var e=this,n=this.pattern[this.index],o=0;o<n.angles.length;o++){i=this.originMatrix.decompose(i);for(var r=t.create(this.objectType,this.parent.getUpdateGroup(),this.parent.getViewportList(),{angle:i.rotation+n.angles[o]+n.offset,x:i.x,y:i.y}),s=r.getViewportList(),a=0;a<s.length;a++)t.viewports.get(s[a].viewport).getLayer(s[a].layer).moveGameObjectToBack(r)}this.index<this.pattern.length-1?(this.index++,this.timeoutId=setTimeout(function(){e.shootVolley()},n.waitTime)):(this.index=0,this.parent.execute("finish-shot-pattern"))},setOrigin:function(e){this.originMatrix=e.getMatrix(this.originMatrix),this.parent.on("start-shot-pattern",this,function(){this.shootVolley()})},recycle:function(){this.pattern=null,this.originMatrix=null,this.objectType=null,clearTimeout(this.timeoutId),this._super()}});return n}),define("boss-bundle",["require","common-bundle","particle-generator-bundle","explosion-generator-bundle","gb","bundle","stop-boss","boss-1","boss-1-cables","boss-1-icon","boss-2-core","boss-2-body","destroy-explosions","editor-game-object","boss-3-body","boss-3-body-renderer","wobble","destroy-explosions","follow-target","blob-divide","cannon-base","cannon-shooter","boss-4-body","editor-game-object","destroy-explosions","movement-angle","check-out-of-bounds","shooting-pattern"],function(e){var t=e("common-bundle"),i=e("particle-generator-bundle"),n=e("explosion-generator-bundle"),o=e("gb"),r=e("bundle").extend({create:function(){this.componentPool.createPool("StopBoss",e("stop-boss")),this.componentPool.createConfiguration("StopBoss","StopBoss"),this.componentPool.createConfiguration("Activate_Boss_On_View",t.getActivateOnViewPoolId()),this.gameObjectPool.createDynamicPool("Boss_1",e("boss-1")),this.gameObjectPool.createDynamicPool("Boss_1_Cables",e("boss-1-cables")),this.gameObjectPool.createDynamicPool("Boss_1_Icon",e("boss-1-icon")),this.componentPool.createConfiguration("Boss_1_Collider",t.getPolygonColliderPoolId()).args({id:"bossColliderId",points:[{x:-50,y:-65},{x:50,y:-65},{x:50,y:65},{x:-50,y:65}]}),this.componentPool.createConfiguration("Boss_1_Cables_Collider",t.getPolygonColliderPoolId()).args({id:"bossColliderId",points:[{x:-15,y:-40},{x:15,y:-40},{x:15,y:40},{x:-15,y:40}]}),this.componentPool.createConfiguration("Boss_1_Renderer",t.getBitmapRendererPoolId()).args({path:o.assetMap()["BOSS1BODY.PNG"],offset:"center"}),this.componentPool.createConfiguration("Boss_1_Cables_Renderer",t.getBitmapRendererPoolId()).args({path:o.assetMap()["BOSS1CABLE.PNG"],offset:"center"}),this.componentPool.createConfiguration("Boss_1_Cables_Damage_Renderer",t.getBitmapRendererPoolId()).args({path:o.assetMap()["BOSS1CABLEDAMAGED.PNG"],offset:"center"}),this.gameObjectPool.createConfiguration("boss-1-cables","Boss_1_Cables").args({damageRendererId:"Boss_1_Cables_Damage_Renderer",colliderId:"Boss_1_Cables_Collider",destroyEffect:n.getMediumExplosionsEffectId(),destroyParticles:[i.getBossDamageParticles_1_Id(),i.getBossDamageParticles_2_Id(),i.getBossDamageParticles_3_Id()]}).addComponent("Boss_1_Cables_Collider").addComponent("Activate_Boss_On_View").addComponent("GeneratorExplosion3").addComponent("AddBulletHitFlash").setRenderer("Boss_1_Cables_Renderer").childOnly(),this.gameObjectPool.createConfiguration("boss-1","Boss_1").args({destroyEffect:n.getSmallExplosionsEffectId(),colliderId:"Boss_1_Collider"}).addChild("boss-1-cables",{rotation:0,x:-50,y:-160}).addChild("boss-1-cables",{rotation:0,x:0,y:-160}).addChild("boss-1-cables",{rotation:0,x:50,y:-160}).addChild("boss-1-cables",{rotation:180,x:-50,y:160}).addChild("boss-1-cables",{rotation:180,x:0,y:160}).addChild("boss-1-cables",{rotation:180,x:50,y:160}).addComponent("StopBoss").addComponent("AddBossTwitchOnDestroy").addComponent("AddBoss_1_OnDestroyParticles_1").addComponent("AddBoss_1_OnDestroyParticles_2").addComponent("AddBoss_1_OnDestroyParticles_3").addComponent("AddBossOnDestroyLastExplosions").addComponent("BossEndExplosion").addComponent("BossSmallExplosion").addComponent("BossStartExplosion").addComponent("RestartLastBGM").addComponent("StopCurrentBGM").addComponent("Activate_Boss_On_View").addComponent("AddBulletHitFlash").addComponent("Boss_1_Collider").addComponent("StopCurrentAndRestartLastBGM").setRenderer("Boss_1_Renderer").enemyCategory().bossEnemyTier(),this.gameObjectPool.createDynamicPool("Boss_2_Core",e("boss-2-core")),this.gameObjectPool.createDynamicPool("Boss_2_Body",e("boss-2-body")),this.componentPool.createConfiguration("Boss_2_Core_Collider",t.getPolygonColliderPoolId()).args({id:"bossColliderId",points:s(4,20)}),this.componentPool.createConfiguration("Boss_2_Body_Collider",t.getPolygonColliderPoolId()).args({id:"bossColliderId",points:s(8,50)}),this.componentPool.createConfiguration("Boss_2_Body_Renderer",t.getAnimationsBitmapRendererPoolId()).args({startingLabel:"half-open",frameWidth:112,frameHeight:60,frameDelay:.08,frameCount:11,offset:"center",path:o.assetMap()["BOSS2BODY.PNG"],labels:{opened:{loop:!1,frames:[10]},closed:{loop:!1,frames:[0]},opening:{loop:!1,frames:[0,1,2,3,4,5,6,7,8,9,10]},closing:{loop:!1,frames:[10,9,8,7,6,5,4,3,2,1,0]},"half-open":{loop:!1,frames:[5]},"half-open-close":{loop:!1,frames:[5,4,3,2,1,0]}}}),this.componentPool.createConfiguration("Boss_2_Core_Renderer",t.getBitmapRendererPoolId()).args({path:o.assetMap()["BOSS2CORE.PNG"],offset:"center"}),this.gameObjectPool.createConfiguration("boss-body","Boss_2_Body").args({destroyEffect:n.getSmallExplosionsEffectId(),colliderId:"Boss_2_Body_Collider",laserAttacks:["x1","x2","x3"],mineAttacks:["x3","x5"]}).addComponent("Activate_Boss_On_View").addComponent("Boss_2_Body_Collider").addComponent("Boss2Mines").addComponent("Boss2Open").addComponent("Boss2Close").setRenderer("Boss_2_Body_Renderer").enemyCategory().disableMouseSupport().childOnly(),this.componentPool.createPool("DestroyExplosions",e("destroy-explosions")),this.componentPool.createConfiguration("BossDestroyExplosions","DestroyExplosions").args({effect:n.getSmallExplosionsEffectId()}),this.gameObjectPool.createConfiguration("boss-2","Boss_2_Core").args({destroyEffect:n.getSmallExplosionsEffectId(),colliderId:"Boss_2_Core_Collider",skipDebug:!0}).addComponent("Activate_Boss_On_View").addComponent("Boss_2_Core_Collider").addComponent("BossDestroyExplosions").addComponent("StopBoss").addComponent("AddBossTwitchOnDestroy").addComponent("AddBoss_2_OnDestroyParticles_1").addComponent("AddBoss_2_OnDestroyParticles_2").addComponent("AddBossOnDestroyLastExplosions").addComponent("BossEndExplosion").addComponent("BossSmallExplosion").addComponent("BossStartExplosion").addComponent("RestartLastBGM").addComponent("StopCurrentBGM").addComponent("AddBulletHitFlash").addComponent("StopCurrentAndRestartLastBGM").addChild("boss-body").setRenderer("Boss_2_Core_Renderer").enemyCategory().bossEnemyTier(),this.gameObjectPool.createDynamicPool("editor-game-object",e("editor-game-object")),this.gameObjectPool.createConfiguration("FirePosition","editor-game-object").childOnly(),this.gameObjectPool.createDynamicPool("Boss_3_Body",e("boss-3-body")),this.componentPool.createPool("Boss_3_Body_Renderer",e("boss-3-body-renderer")),this.componentPool.createPool("Boss_3_Wobble",e("wobble")),this.componentPool.createPool("DestroyExplosions",e("destroy-explosions")),this.componentPool.createPool("FollowTarget",e("follow-target")),this.componentPool.createPool("BlobDivide",e("blob-divide")),this.componentPool.createConfiguration("Boss_3_Body_Renderer","Boss_3_Body_Renderer").args({name:"Boss_3_Body",width:200,height:200,largeAnchor:20,largeAnchorMultiplier:40,pointOffsetMultiplier:6,horizontalCounterMultiplier:30,offset1:75,offset2:100,lineWidth:3}),this.componentPool.createConfiguration("Boss_3_Wobble","Boss_3_Wobble").args({speedX:1.2,speedY:1.5,amplitudeX:.15,amplitudeY:.15}),this.componentPool.createConfiguration("Boss3DestroyExplosions","DestroyExplosions").args({effect:n.getSmallExplosionsEffectId()}),this.componentPool.createConfiguration("BossFollowTarget","FollowTarget"),this.componentPool.createConfiguration("BossDivide","BlobDivide"),this.componentPool.createConfiguration("Boss3BodyCollider",t.getPolygonColliderPoolId()).args({id:"boss3ColliderId",points:[{x:75,y:-75},{x:75,y:75},{x:-75,y:75},{x:-75,y:-75}]}),this.gameObjectPool.createConfiguration("boss-3","Boss_3_Body").args({speed:20}).addChild("boss-3-eye").addComponent("StopBoss").addComponent("Activate_Boss_On_View").addComponent("Boss3BodyCollider").addComponent("Boss3DestroyExplosions").addComponent("BossStartExplosion").addComponent("BossSmallExplosion").addComponent("BossEndExplosion").addComponent("RestartLastBGM").addComponent("StopCurrentBGM").addComponent("AddBossTwitchOnDestroy").addComponent("AddBoss_3_OnDestroyParticles_1").addComponent("AddBoss_3_OnDestroyParticles_2").addComponent("AddBossOnDestroyLastExplosions").addComponent("BlobFollowTarget").addComponent("BossDivide",{objectType:"blob-explode-1",amount:"x2"}).addComponent("StopCurrentAndRestartLastBGM").setRenderer("Boss_3_Body_Renderer").enemyCategory().bossEnemyTier(),this.componentPool.createConfiguration("OuterEyeRenderer",t.getBitmapRendererPoolId()).args({path:o.assetMap()["BOSS3OUTEREYE.PNG"],offset:"center"}),this.componentPool.createConfiguration("InnerEyeRenderer",t.getBitmapRendererPoolId()).args({path:o.assetMap()["BOSS3INNEREYE.PNG"],offsetX:0,offsetY:-16}),this.gameObjectPool.createDynamicPool("Boss3OuterEye",e("cannon-base")),this.gameObjectPool.createPool("Boss3InnerEye",e("cannon-shooter")),this.componentPool.createConfiguration("Boss3EyeCollider",t.getCircleColliderPoolId()).args({id:"cannonColliderId",radius:30}),this.gameObjectPool.createConfiguration("boss-3-inner-eye","Boss3InnerEye").args({rate:250,bullets:1e3,burstAmount:5,bulletType:"blob-bullet-fast",skipDebug:!0}).addChild("FirePosition",{x:16,y:0}).addComponent("Activate_Boss_On_View").setRenderer("InnerEyeRenderer").disableMouseSupport().childOnly(),this.gameObjectPool.createConfiguration("boss-3-eye","Boss3OuterEye").args({destroyExplosions:n.getMediumExplosionsEffectId(),hp:35,x:0,y:0,skipDebug:!0}).addChild("boss-3-inner-eye").addComponent("Activate_Boss_On_View").addComponent("Boss3EyeCollider").addComponent("Boss_3_Wobble").addComponent("GeneratorExplosion3").addComponent("AddBulletHitFlash").setRenderer("OuterEyeRenderer").disableMouseSupport().childOnly(),this.gameObjectPool.createDynamicPool("Boss_4_Body",e("boss-4-body")),this.gameObjectPool.createDynamicPool("editor-game-object",e("editor-game-object")),this.gameObjectPool.createConfiguration("FirePosition","editor-game-object").childOnly(),this.componentPool.createConfiguration("Boss_4_Body_Collider",t.getPolygonColliderPoolId()).args({id:"bossColliderId",points:s(6,50)}),this.componentPool.createPool("DestroyExplosions",e("destroy-explosions")),this.componentPool.createPool("MovementAngle",e("movement-angle")),this.componentPool.createPool("CheckOutOfBounds",e("check-out-of-bounds")),this.componentPool.createPool("ShootingPattern",e("shooting-pattern")),this.componentPool.createConfiguration("BossDestroyExplosions","DestroyExplosions").args({effect:n.getSmallExplosionsEffectId()}),this.componentPool.createConfiguration("MovementAngle","MovementAngle"),this.componentPool.createConfiguration("CheckOutOfBounds","CheckOutOfBounds"),this.componentPool.createConfiguration("Boss4ShootingPattern","ShootingPattern").args({pattern:[{offset:90,angles:[-20,0,20],waitTime:800},{offset:90,angles:[-10,10],waitTime:800},{offset:90,angles:[-25,-20,0,20,25],waitTime:800},{offset:90,angles:[-10,10],waitTime:800},{offset:90,angles:[-20,0,20],waitTime:800}],objectType:"boss-4-bullet"}),this.componentPool.createConfiguration("Boss_4_Body_Renderer",t.getAnimationsBitmapRendererPoolId()).args({startingLabel:"editor-frame",frameWidth:120,frameHeight:156,frameDelay:.08,frameCount:5,offset:"center",path:o.assetMap()["BOSS4BODY.PNG"],labels:{walking:{loop:!0,frames:[0,1,2,3,4]},"editor-frame":{loop:!1,frames:[0]}}}),this.gameObjectPool.createConfiguration("boss-4","Boss_4_Body").args({destroyEffect:n.getSmallExplosionsEffectId(),colliderId:"Boss_4_Body_Renderer"}).addComponent("Activate_Boss_On_View").addComponent("Boss_4_Body_Collider").addComponent("BossDestroyExplosions").addComponent("Boss4ShootingPattern").addComponent("MovementAngle").addComponent("CheckOutOfBounds").addComponent("BossEndExplosion").addComponent("BossSmallExplosion").addComponent("BossStartExplosion").addComponent("RestartLastBGM").addComponent("StopCurrentBGM").addComponent("Boss4Move").addComponent("AddBossTwitchOnDestroy").addComponent("AddBoss_4_OnDestroyParticles_1").addComponent("AddBossOnDestroyLastExplosions").addComponent("AddBulletHitFlash").addComponent("StopCurrentAndRestartLastBGM").addChild("FirePosition",{y:30}).setRenderer("Boss_4_Body_Renderer").enemyCategory().bossEnemyTier()}}),s=function(e,t){for(var i=[],n=2*Math.PI/e,o=e-1;o>=0;o--){var r={};r.x=Math.sin(n*o)*t,r.y=Math.cos(n*o)*t,i.push(r)}return i};return new r}),define("side-message-animation",["game-object","gb","TimelineLite","TweenLite","EasePack"],function(e,t,i){var n=e.extend({init:function(){this._super()},start:function(){var e=[{viewport:"Messages",layer:"Front"}];this.sideMessage=t.create(this.textGameObject,"Second",e,{x:-300,y:t.canvas.height/2}),this.tl=new i({onComplete:function(){t.reclaimer.claim(this),this.onComplete&&this.onComplete()}.bind(this)}),this.tl.to(this.sideMessage,1,{x:t.canvas.width/2,ease:Back.easeOut}),this.tl.to(this.sideMessage,1,{x:t.canvas.width+300,ease:Back.easeIn},"+=2"),this.tl.play()},recycle:function(){this._super(),t.reclaimer.claim(this.sideMessage),this.tl.kill(),this.sideMessage=null,this.tl=null}});return n}),define("messages-bundle",["require","common-bundle","bundle","side-message-animation"],function(e){var t=e("common-bundle"),i=e("bundle").extend({create:function(){this.gameObjectPool.createDynamicPool("SideMessageAnimation",e("side-message-animation")),this.componentPool.createConfiguration("StartMessageRenderer",t.getTextRendererPoolId()).args({name:"start-message",text:"Get Ready",fillColor:"#ec751e",strokeColor:"#FFFFFF",font:"Russo One",padding:3,lineWidth:2,size:55,offset:"center"}),this.componentPool.createConfiguration("WarningMessageRenderer",t.getTextRendererPoolId()).args({name:"warning-message",text:"Warning",fillColor:"#ec751e",strokeColor:"#FFFFFF",font:"Russo One",padding:3,lineWidth:2,size:55,offset:"center"}),this.componentPool.createConfiguration("CompleteMessageRenderer",t.getTextRendererPoolId()).args({name:"complete-message",text:"Complete!",fillColor:"#ec751e",strokeColor:"#FFFFFF",font:"Russo One",padding:3,lineWidth:2,size:55,offset:"center"}),this.componentPool.createConfiguration("FailureMessageRenderer",t.getTextRendererPoolId()).args({name:"failure-message",text:"Failure!",fillColor:"#ec751e",strokeColor:"#FFFFFF",font:"Russo One",padding:3,lineWidth:2,size:55,offset:"center"}),this.gameObjectPool.createConfiguration("StartMessageText",t.getGameObjectPoolId()).setRenderer("StartMessageRenderer"),this.gameObjectPool.createConfiguration("WarningMessageText",t.getGameObjectPoolId()).setRenderer("WarningMessageRenderer"),this.gameObjectPool.createConfiguration("CompleteMessageText",t.getGameObjectPoolId()).setRenderer("CompleteMessageRenderer"),this.gameObjectPool.createConfiguration("FailureMessageText",t.getGameObjectPoolId()).setRenderer("FailureMessageRenderer"),this.gameObjectPool.createConfiguration("StartMessage","SideMessageAnimation").args({textGameObject:"StartMessageText"}),this.gameObjectPool.createConfiguration("WarningMessage","SideMessageAnimation").args({textGameObject:"WarningMessageText"}),this.gameObjectPool.createConfiguration("CompleteMessage","SideMessageAnimation").args({textGameObject:"CompleteMessageText"}),this.gameObjectPool.createConfiguration("FailureMessage","SideMessageAnimation").args({textGameObject:"FailureMessageText"})}});return new i}),define("auto-hide",["editor-component","gb"],function(e){var t=e.extend({init:function(){this._super()},editorStart:function(){this.parent.alpha=0}});return t}),define("scroll-stopper",["require","root","editor-game-object-container","gb","player-getter","gb","gb"],function(e){var t=e("root"),i=e("editor-game-object-container").extend({init:function(){this._super()},editorStart:function(){this.mainViewport=e("gb").viewports.get("Main"),this.player=e("player-getter").get(),this.halfWidth=e("gb").canvas.width/2,this.halfHeight=e("gb").canvas.height/2,this.stopped=!1,this.valid=!0},editorUpdate:function(){if(this.valid&&!this.stopped){var e=this.player.getDirection();if(0==e&&Math.floor(this.mainViewport.x+this.X)<=this.halfWidth){if(this.valid=this.isValid(),!this.valid)return;this.player.stopMovement(),this.stopped=!0}if(180==e&&Math.floor(this.mainViewport.x+this.X)>=this.halfWidth){if(this.valid=this.isValid(),!this.valid)return;this.player.stopMovement(),this.stopped=!0}if(270==e&&Math.floor(this.mainViewport.y+this.Y)>=this.halfHeight){if(this.valid=this.isValid(),!this.valid)return;this.player.stopMovement(),this.stopped=!0}if(90==e&&Math.floor(this.mainViewport.y+this.Y)<=this.halfHeight){if(this.valid=this.isValid(),!this.valid)return;this.player.stopMovement(),this.stopped=!0}}},deActivate:function(){},isValid:function(){var e=t.findChildren().recurse().all(function(e){return("boss-1"==e.typeId||"boss-2"==e.typeId||"boss-3"==e.typeId||"boss-4"==e.typeId)&&e.getViewportVisibility("Main")}),i=this.player.getDirection(),n=t.findChildren().recurse().all(function(e){if(("DirectionSetter"==e.poolId||"AngleDirectionSetter"==e.poolId)&&e.getViewportVisibility("Main")){var t=e.getDirection();return 0==i&&180==t?!1:180==i&&0==t?!1:270==i&&90==t?!1:90==i&&270==t?!1:!0}return!1});return!(0==e.length&&0==n.length)}});return i}),define("absolute-scroll-stopper",["require","editor-game-object-container","gb","player-getter","gb","gb"],function(e){var t=e("editor-game-object-container").extend({init:function(){this._super()},editorStart:function(){this.mainViewport=e("gb").viewports.get("Main"),this.player=e("player-getter").get(),this.halfWidth=e("gb").canvas.width/2,this.halfHeight=e("gb").canvas.height/2,this.stopped=!1},editorUpdate:function(){if(!this.stopped){var e=this.player.getDirection();0==e&&Math.floor(this.mainViewport.x+this.X)<=this.halfWidth&&(this.player.stopMovement(),this.stopped=!0),180==e&&Math.floor(this.mainViewport.x+this.X)>=this.halfWidth&&(this.player.stopMovement(),this.stopped=!0),270==e&&Math.floor(this.mainViewport.y+this.Y)>=this.halfHeight&&(this.player.stopMovement(),this.stopped=!0),90==e&&Math.floor(this.mainViewport.y+this.Y)<=this.halfHeight&&(this.player.stopMovement(),this.stopped=!0)}},deActivate:function(){}});return t}),define("boss-warning",["editor-game-object-container","gb"],function(e,t){var i=[{viewport:"Main",layer:"Front"}],n=e.extend({init:function(){this._super()},editorStart:function(){this.execute("warning"),t.create("WarningMessage","First",i,{onComplete:function(){t.create(this.bossBGM,"First",i),t.reclaimer.mark(this)}.bind(this)})},deActivate:function(){},editorUpdate:function(){}});return n}),define("direction-setter",["require","editor-game-object-container","gb","player-getter","gb","gb"],function(e){var t=e("editor-game-object-container").extend({init:function(){this._super(),this.angle=0,this.speed=0,this.type="",this.amount=0,this.cap=0,this.executed=!1},editorStart:function(){this.mainViewport=e("gb").viewports.get("Main"),this.player=e("player-getter").get(),this.halfWidth=e("gb").canvas.width/2,this.halfHeight=e("gb").canvas.height/2,this.executed=!1
},editorUpdate:function(){if(!this.executed){var e=this.player.getDirection();if(0==e&&Math.floor(this.mainViewport.x+this.X)<=this.halfWidth){var t=this.player.getMaxForwardSpeed();"increase"==this.type&&t<this.cap&&this.player.setMaxForwardSpeed(this.player.getMaxForwardSpeed()+this.amount),"decrease"==this.type&&t>this.cap&&this.player.setMaxForwardSpeed(this.player.getMaxForwardSpeed()-this.amount),this.player.move(this.angle),this.executed=!0}if(180==e&&Math.floor(this.mainViewport.x+this.X)>=this.halfWidth){var t=this.player.getMaxForwardSpeed();"increase"==this.type&&t<this.cap&&this.player.setMaxForwardSpeed(this.player.getMaxForwardSpeed()+this.amount),"decrease"==this.type&&t>this.cap&&this.player.setMaxForwardSpeed(this.player.getMaxForwardSpeed()-this.amount),this.player.move(this.angle),this.executed=!0}if(270==e&&Math.floor(this.mainViewport.y+this.Y)>=this.halfHeight){var t=this.player.getMaxForwardSpeed();"increase"==this.type&&t<this.cap&&this.player.setMaxForwardSpeed(this.player.getMaxForwardSpeed()+this.amount),"decrease"==this.type&&t>this.cap&&this.player.setMaxForwardSpeed(this.player.getMaxForwardSpeed()-this.amount),this.player.move(this.angle),this.executed=!0}if(90==e&&Math.floor(this.mainViewport.y+this.Y)<=this.halfHeight){var t=this.player.getMaxForwardSpeed();"increase"==this.type&&t<this.cap&&this.player.setMaxForwardSpeed(this.player.getMaxForwardSpeed()+this.amount),"decrease"==this.type&&t>this.cap&&this.player.setMaxForwardSpeed(this.player.getMaxForwardSpeed()-this.amount),this.player.move(this.angle),this.executed=!0}}},deActivate:function(){},getDirection:function(){return this.angle}});return t}),define("start-position",["require","reclaimer","gb","editor-game-object-container","player-getter","viewports"],function(e){var t=(e("reclaimer"),e("gb")),i=e("editor-game-object-container").extend({init:function(){this._super()},editorStart:function(){this.player=e("player-getter").get(),this.player.x=t.canvas.width*Math.floor(this.x/t.canvas.width),this.player.y=t.canvas.height*Math.floor(this.y/t.canvas.height);var i=e("viewports").get("Main");i.x=-t.canvas.width*Math.floor(this.x/t.canvas.width),i.y=-t.canvas.height*Math.floor(this.y/t.canvas.height)},editorUpdate:function(){},deActivate:function(){}});return i}),define("angle-direction-setter",["require","editor-game-object-container","gb","player-getter","root"],function(e){var t=e("editor-game-object-container").extend({init:function(){this._super()},editorStart:function(){this.mainViewport=e("gb").viewports.get("Main"),this.player=e("player-getter").get(),this.renderer.play(),this.player.on(this.player.STOP_MOVEMENT,this,this.onPlayerStop);var t=this.findComponents().firstWithProp("collider");t&&t.disable()},onPlayerStop:function(){var e=this.findComponents().firstWithProp("collider");e&&e.enable()},deActivate:function(){this.player.removeDelegate(this.player.STOP_MOVEMENT,this,this.onPlayerStop)},recycle:function(){this.player&&this.player.removeDelegate(this.player.STOP_MOVEMENT,this,this.onPlayerStop),this._super()},editorUpdate:function(){},onCollide:function(t){t.move(this.rotation);var i=this;e("root").findChildren().recurse().all(function(e){return e.poolId==i.poolId&&e.getViewportVisibility("Main")}).forEach(function(e){var t=e.findComponents().firstWithProp("collider");t&&t.disable()})},getDirection:function(){return this.rotation}});return t}),define("two-way-direction-setter",["require","editor-game-object-container","gb","player-getter","gb","gb"],function(e){var t=e("editor-game-object-container").extend({init:function(){this._super(),this.angle=0,this.speed=0,this.type="",this.executed=!1},editorStart:function(){this.mainViewport=e("gb").viewports.get("Main"),this.player=e("player-getter").get(),this.halfWidth=e("gb").canvas.width/2,this.halfHeight=e("gb").canvas.height/2,this.executed=!1},editorUpdate:function(){if(!this.executed){var e=this.player.getDirection();if(0==e&&Math.floor(this.mainViewport.x+this.X)<=this.halfWidth){switch(this.type){case"up-left":this.player.move(270);break;case"up-right":this.player.move(270);break;case"down-left":this.player.move(90);break;case"down-right":this.player.move(90)}this.executed=!0}if(180==e&&Math.floor(this.mainViewport.x+this.X)>=this.halfWidth){switch(this.type){case"up-left":this.player.move(270);break;case"up-right":this.player.move(270);break;case"down-left":this.player.move(90);break;case"down-right":this.player.move(90)}this.executed=!0}if(270==e&&Math.floor(this.mainViewport.y+this.Y)>=this.halfHeight){switch(this.type){case"up-left":this.player.move(180);break;case"up-right":this.player.move(0);break;case"down-left":this.player.move(180);break;case"down-right":this.player.move(0)}this.executed=!0}if(90==e&&Math.floor(this.mainViewport.y+this.Y)<=this.halfHeight){switch(this.type){case"up-left":this.player.move(180);break;case"up-right":this.player.move(0);break;case"down-left":this.player.move(180);break;case"down-right":this.player.move(0)}this.executed=!0}}},deActivate:function(){}});return t}),define("bgm-sound",["require","sound-player","editor-game-object-container","reclaimer"],function(e){var t=e("sound-player"),i="",n=e("editor-game-object-container").extend({init:function(){this._super(),this.soundId="",this.playLast=!1,this.stopCurrent=!1,this.storeLast=!0,this.inmediateRecycle=!1,this.stopSoundOnRecycle=!1},editorStart:function(){return this.stopCurrent?void t.stopAll().which(function(e){return"INTRO"===e||"LEVEL_1"===e||"LEVEL_2"===e||"LEVEL_3"===e||"LEVEL_4"===e||"BOSS"===e}):this.playLast?void(""!==i&&(t.stopAll().which(function(e){return"INTRO"===e||"LEVEL_1"===e||"LEVEL_2"===e||"LEVEL_3"===e||"LEVEL_4"===e||"BOSS"===e}),t.playLoop(i))):(""!==i&&t.stop(i),t.playLoop(this.soundId),this.storeLast&&""!==this.soundId&&(i=this.soundId),void(this.inmediateRecycle&&e("reclaimer").mark(this)))},deActivate:function(){},recycle:function(){""!==this.soundId&&this.stopSoundOnRecycle&&t.stop(this.soundId),this.playLast=!1,this.stopCurrent=!1,this.storeLast=!0,this.inmediateRecycle=!1,this.stopSoundOnRecycle=!1,this.soundId="",this._super()}});return n.clearLastBGMId=function(){i=""},n}),define("control-objects-bundle",["require","common-bundle","gb","bundle","auto-hide","scroll-stopper","absolute-scroll-stopper","boss-warning","direction-setter","start-position","angle-direction-setter","two-way-direction-setter","bgm-sound"],function(e){var t=e("common-bundle"),i=e("gb"),n=e("bundle").extend({create:function(){this.componentPool.createPool("AutoHide",e("auto-hide")),this.componentPool.createConfiguration("AutoHide","AutoHide"),this.componentPool.createConfiguration("ActivateControlOnView",t.getActivateOnViewPoolId()),this.gameObjectPool.createDynamicPool("ScrollStopper",e("scroll-stopper")),this.gameObjectPool.createDynamicPool("AbsoluteScrollStopper",e("absolute-scroll-stopper")),this.gameObjectPool.createDynamicPool("BossWarning",e("boss-warning")),this.gameObjectPool.createDynamicPool("DirectionSetter",e("direction-setter")),this.gameObjectPool.createDynamicPool("StartPosition",e("start-position")),this.gameObjectPool.createDynamicPool("AngleDirectionSetter",e("angle-direction-setter")),this.gameObjectPool.createDynamicPool("TwoWayDirectionSetter",e("two-way-direction-setter")),this.gameObjectPool.createDynamicPool("BGMSound",e("bgm-sound")),this.componentPool.createConfiguration("DirectionSetterCollider",t.getCircleColliderPoolId()).args({id:"directionSetterColliderId",radius:10}),this.componentPool.createConfiguration("AngleDirectionSetterRenderer",t.getAnimationBitmapRendererPoolId()).args({loop:!0,frameWidth:32,frameHeight:32,frameDelay:1,path:i.assetMap()["ANIMATEDARROW.PNG"],offset:"center"}),this.componentPool.createConfiguration("AbsoluteScrollStopperRenderer",t.getBitmapRendererPoolId()).args({path:i.assetMap()["STOP.PNG"],offset:"center"}),this.componentPool.createConfiguration("TwoWayDirectionSetterRenderer1",t.getBitmapRendererPoolId()).args({path:i.assetMap()["DOWNLEFTARROW.PNG"],offset:"center"}),this.componentPool.createConfiguration("TwoWayDirectionSetterRenderer2",t.getBitmapRendererPoolId()).args({path:i.assetMap()["DOWNRIGHTARROW.PNG"],offset:"center"}),this.componentPool.createConfiguration("TwoWayDirectionSetterRenderer3",t.getBitmapRendererPoolId()).args({path:i.assetMap()["UPLEFTARROW.PNG"],offset:"center"}),this.componentPool.createConfiguration("TwoWayDirectionSetterRenderer4",t.getBitmapRendererPoolId()).args({path:i.assetMap()["UPRIGHTARROW.PNG"],offset:"center"}),this.componentPool.createConfiguration("SoundPlayerRenderer",t.getBitmapRendererPoolId()).args({path:i.assetMap()["SOUND.PNG"],offset:"center"}),this.gameObjectPool.createConfiguration("scroll-stopper","ScrollStopper").addComponent("ActivateControlOnView"),this.gameObjectPool.createConfiguration("absolute-scroll-stopper","AbsoluteScrollStopper").addComponent("AutoHide").addComponent("ActivateControlOnView").setRenderer("AbsoluteScrollStopperRenderer"),this.gameObjectPool.createConfiguration("boss-warning","BossWarning").args({bossBGM:"bgm-boss"}).addComponent("ActivateControlOnView").addComponent("WarningSound"),this.gameObjectPool.createConfiguration("direction-right","DirectionSetter").args({angle:0,type:"decrease",amount:200,cap:200}).addComponent("ActivateControlOnView"),this.gameObjectPool.createConfiguration("direction-up","DirectionSetter").args({angle:270,type:"decrease",amount:200,cap:200}).addComponent("ActivateControlOnView"),this.gameObjectPool.createConfiguration("direction-left","DirectionSetter").args({angle:180,type:"decrease",amount:200,cap:200}).addComponent("ActivateControlOnView"),this.gameObjectPool.createConfiguration("direction-down","DirectionSetter").args({angle:90,type:"decrease",amount:200,cap:200}).addComponent("ActivateControlOnView"),this.gameObjectPool.createConfiguration("fast-direction-right","DirectionSetter").args({angle:0,type:"increase",amount:200,cap:2e3}).addComponent("ActivateControlOnView"),this.gameObjectPool.createConfiguration("fast-direction-up","DirectionSetter").args({angle:270,type:"increase",amount:200,cap:2e3}).addComponent("ActivateControlOnView"),this.gameObjectPool.createConfiguration("fast-direction-left","DirectionSetter").args({angle:180,type:"increase",amount:200,cap:2e3}).addComponent("ActivateControlOnView"),this.gameObjectPool.createConfiguration("fast-direction-down","DirectionSetter").args({angle:90,type:"increase",amount:200,cap:2e3}).addComponent("ActivateControlOnView"),this.gameObjectPool.createConfiguration("direction-down-left","TwoWayDirectionSetter").args({type:"down-left"}).addComponent("AutoHide").addComponent("ActivateControlOnView").setRenderer("TwoWayDirectionSetterRenderer1"),this.gameObjectPool.createConfiguration("direction-down-right","TwoWayDirectionSetter").args({type:"down-right"}).addComponent("AutoHide").addComponent("ActivateControlOnView").setRenderer("TwoWayDirectionSetterRenderer2"),this.gameObjectPool.createConfiguration("direction-up-left","TwoWayDirectionSetter").args({type:"up-left"}).addComponent("AutoHide").addComponent("ActivateControlOnView").setRenderer("TwoWayDirectionSetterRenderer3"),this.gameObjectPool.createConfiguration("direction-up-right","TwoWayDirectionSetter").args({type:"up-right"}).addComponent("AutoHide").addComponent("ActivateControlOnView").setRenderer("TwoWayDirectionSetterRenderer4"),this.gameObjectPool.createConfiguration("start-position-right","StartPosition").args({type:"right"}),this.gameObjectPool.createConfiguration("start-position-left","StartPosition").args({type:"left"}),this.gameObjectPool.createConfiguration("start-position-up","StartPosition").args({type:"up"}),this.gameObjectPool.createConfiguration("start-position-down","StartPosition").args({type:"down"}),this.gameObjectPool.createConfiguration("choose-direction-right","AngleDirectionSetter").args({angle:0,rotation:0}).addComponent("DirectionSetterCollider").addComponent("ActivateControlOnView").setRenderer("AngleDirectionSetterRenderer"),this.gameObjectPool.createConfiguration("choose-direction-up","AngleDirectionSetter").args({angle:270,rotation:270}).addComponent("DirectionSetterCollider").addComponent("ActivateControlOnView").setRenderer("AngleDirectionSetterRenderer"),this.gameObjectPool.createConfiguration("choose-direction-left","AngleDirectionSetter").args({angle:180,rotation:180}).addComponent("DirectionSetterCollider").addComponent("ActivateControlOnView").setRenderer("AngleDirectionSetterRenderer"),this.gameObjectPool.createConfiguration("choose-direction-down","AngleDirectionSetter").args({angle:90,rotation:90}).addComponent("DirectionSetterCollider").addComponent("ActivateControlOnView").setRenderer("AngleDirectionSetterRenderer"),this.gameObjectPool.createConfiguration("bgm-1","BGMSound").args({soundId:"LEVEL_1"}).addComponent("AutoHide").addComponent("ActivateControlOnView").setRenderer("SoundPlayerRenderer"),this.gameObjectPool.createConfiguration("bgm-2","BGMSound").args({soundId:"LEVEL_2"}).addComponent("AutoHide").addComponent("ActivateControlOnView").setRenderer("SoundPlayerRenderer"),this.gameObjectPool.createConfiguration("bgm-3","BGMSound").args({soundId:"LEVEL_3"}).addComponent("AutoHide").addComponent("ActivateControlOnView").setRenderer("SoundPlayerRenderer"),this.gameObjectPool.createConfiguration("bgm-4","BGMSound").args({soundId:"LEVEL_4"}).addComponent("AutoHide").addComponent("ActivateControlOnView").setRenderer("SoundPlayerRenderer"),this.gameObjectPool.createConfiguration("bgm-boss","BGMSound").args({soundId:"BOSS",storeLast:!1,inmediateRecycle:!0}),this.gameObjectPool.createConfiguration("bgm-last","BGMSound").args({playLast:!0,inmediateRecycle:!0}),this.gameObjectPool.createConfiguration("bgm-stop-current","BGMSound").args({stopCurrent:!0,inmediateRecycle:!0})}});return new n}),define("level-item",["editor-game-object-container","reclaimer"],function(e,t){var i=e.extend({init:function(){this._super()},editorStart:function(){this.counter=0,this.startY=this.y},editorUpdate:function(e){this.y=this.startY+10*Math.cos(this.counter/20),this.counter+=100*e},onCollide:function(){t.mark(this),this.execute("pick-up")}});return i}),define("defeat-all-bosses-level-item",["editor-game-object-container","root","reclaimer"],function(e,t,i){var n=e.extend({init:function(){this._super(),this.bosses=null},editorStart:function(){this.counter=0,this.startY=this.y,this.hide(),this.bosses=t.findChildren().recurse().all(function(e){return"boss-1"==e.typeId||"boss-2"==e.typeId||"boss-3"==e.typeId||"boss-4"==e.typeId});for(var e=0;e<this.bosses.length;e++)this.bosses[e].once("destroyed",this,function(e){this.bosses.splice(this.bosses.indexOf(e),1),0==this.bosses.length&&this.show()})},editorUpdate:function(e){this.y=this.startY+10*Math.cos(this.counter/20),this.counter+=100*e},show:function(){this._super();var e=this.findComponents().firstWithProp("collider");e&&e.enable()},hide:function(){this._super();var e=this.findComponents().firstWithProp("collider");e&&e.disable()},onCollide:function(){i.mark(this),this.execute("pick-up")}});return n}),define("power-up-item",["editor-game-object-container","reclaimer"],function(e,t){var i=e.extend({init:function(){this._super(),this.powerUpType="",this.counter=0,this.startY=0},editorStart:function(){this.counter=0,this.startY=this.y},editorUpdate:function(e){this.y=this.startY+10*Math.cos(this.counter/20),this.counter+=100*e},onCollide:function(e){switch(this.powerUpType){case"power-up":this.execute("pick-up"),e.powerUp();break;case"speed-up":this.execute("pick-up"),e.speedUp();break;case"health-up":this.execute("pick-up"),e.healthUp()}t.mark(this)}});return i}),define("items-bundle",["require","common-bundle","gb","bundle","level-item","defeat-all-bosses-level-item","power-up-item"],function(e){var t=e("common-bundle"),i=e("gb"),n=e("bundle").extend({create:function(){this.gameObjectPool.createDynamicPool("LevelItem",e("level-item")),this.gameObjectPool.createDynamicPool("AllBossDefeatLevelItem",e("defeat-all-bosses-level-item")),this.gameObjectPool.createDynamicPool("PowerUpItem",e("power-up-item")),this.componentPool.createConfiguration("LevelItemCircle",t.getCircleColliderPoolId()).args({id:"levelItemColliderId",radius:20}),this.componentPool.createConfiguration("LevelItem_Renderer",t.getBitmapRendererPoolId()).args({path:i.assetMap()["STAR.PNG"],offset:"center"}),this.componentPool.createConfiguration("LevelItem_2_Renderer",t.getBitmapRendererPoolId()).args({path:i.assetMap()["MOON.PNG"],offset:"center"}),this.componentPool.createConfiguration("PowerUp_Renderer",t.getBitmapRendererPoolId()).args({path:i.assetMap()["POWERUP.PNG"],offset:"center"}),this.componentPool.createConfiguration("SpeedUp_Renderer",t.getBitmapRendererPoolId()).args({path:i.assetMap()["SPEEDUP.PNG"],offset:"center"}),this.componentPool.createConfiguration("HealthUp_Renderer",t.getBitmapRendererPoolId()).args({path:i.assetMap()["HEALTHUP.PNG"],offset:"center"}),this.gameObjectPool.createConfiguration("level-item","LevelItem").addComponent("LevelItemCircle").addComponent("LevelItemStopCurrentBGM").addComponent("WinSound").setRenderer("LevelItem_Renderer").itemCategory(),this.gameObjectPool.createConfiguration("defeat-all-bosses-level-item","AllBossDefeatLevelItem").addComponent("LevelItemCircle").addComponent("LevelItemStopCurrentBGM").addComponent("WinSound").setRenderer("LevelItem_2_Renderer").itemCategory(),this.gameObjectPool.createConfiguration("power-up-item","PowerUpItem").args({powerUpType:"power-up"}).addComponent("LevelItemCircle").addComponent("PowerUp1").setRenderer("PowerUp_Renderer").itemCategory(),this.gameObjectPool.createConfiguration("speed-up-item","PowerUpItem").args({powerUpType:"speed-up"}).addComponent("LevelItemCircle").addComponent("PowerUp1").setRenderer("SpeedUp_Renderer").itemCategory(),this.gameObjectPool.createConfiguration("health-up-item","PowerUpItem").args({powerUpType:"health-up"}).addComponent("LevelItemCircle").addComponent("PowerUp1").setRenderer("HealthUp_Renderer").itemCategory()}});return new n}),define("laser-effects-bundle",["require","common-bundle","gb","bundle","twitch"],function(e){var t=e("common-bundle"),i=e("gb"),n=e("bundle").extend({create:function(){this.componentPool.createPool("burst-twich-component",e("twitch")),this.componentPool.createConfiguration("LaserBurstRenderer",t.getAnimationBitmapRendererPoolId()).args({loop:!0,frameWidth:64,frameHeight:32,offset:"center",frameDelay:.02,frameCount:6,path:i.assetMap()["BURST.PNG"]}),this.componentPool.createConfiguration("LaserHitRenderer",t.getAnimationBitmapRendererPoolId()).args({loop:!0,frameWidth:64,frameHeight:64,offset:"center",frameDelay:.02,frameCount:4,path:i.assetMap()["LASERHIT.PNG"]}),this.componentPool.createConfiguration("BurstTwitch","burst-twich-component").args({amount:3}),this.gameObjectPool.createConfiguration("LaserBurst",t.getGameObjectPoolId()).addComponent("BurstTwitch").setRenderer("LaserBurstRenderer"),this.gameObjectPool.createConfiguration("LaserHit",t.getGameObjectPoolId()).addComponent("BurstTwitch").setRenderer("LaserHitRenderer")}});return new n}),define("mine",["editor-game-object-container","reclaimer"],function(e){var t=e.extend({init:function(){this._super(),this.hp=0,this.angle=0,this.speed=0,this.moveTime=0},editorStart:function(){if(0==this.hp)throw new Error("Mine is missing hp attribute");this.renderer.play()},editorUpdate:function(){},onCollide:function(e){return"player-ship"==e.typeId?void this.destroyMine():void(this.hp>0&&(this.hp--,0==this.hp&&this.destroyMine()))},destroyMine:function(){if(this.isActive()){this.angle=0,this.speed=0;var e=this.findComponents().firstWithProp("collider");e.disable(),this.execute("destroyed")}}});return t}),define("mine-bundle",["require","common-bundle","gb","explosion-generator-bundle","bundle","mine","movement-angle","wobble","destroy-explosions"],function(e){var t=e("common-bundle"),i=e("gb"),n=e("explosion-generator-bundle"),o=e("bundle").extend({create:function(){this.gameObjectPool.createDynamicPool("MineType",e("mine")),this.componentPool.createPool("AngleMovement",e("movement-angle")),this.componentPool.createPool("WobbleMovement",e("wobble")),this.componentPool.createPool("DestroyExplosions",e("destroy-explosions")),this.componentPool.createConfiguration("MineCircleCollider",t.getCircleColliderPoolId()).args({id:"mineColliderId",radius:13}),this.componentPool.createConfiguration("Activate_Mine_On_View",t.getActivateOnViewPoolId()),this.componentPool.createConfiguration("MineAngleMovement","AngleMovement"),this.componentPool.createConfiguration("MineWobbleMovement","WobbleMovement").args({speedX:1.2,speedY:1.5,amplitudeX:.3,amplitudeY:.3}),this.componentPool.createConfiguration("MineDestroyExplosions","DestroyExplosions").args({effect:n.getMediumExplosionsEffectId()}),this.componentPool.createConfiguration("MineRenderer",t.getAnimationBitmapRendererPoolId()).args({frameWidth:32,frameHeight:32,frameDelay:.1,frameCount:5,pingPong:!0,path:i.assetMap()["MINE.PNG"],offset:"center"}),this.gameObjectPool.createConfiguration("mine-0","MineType").args({hp:3}).addComponent("MineCircleCollider").addComponent("MineWobbleMovement").addComponent("Activate_Mine_On_View").addComponent("MineDestroyExplosions").addComponent("EnemyShipExplosion3").addComponent("AddBulletHitFlash").setRenderer("MineRenderer").enemyCategory().weakEnemyTier(),this.gameObjectPool.createConfiguration("mine-1","MineType").args({hp:8}).addComponent("MineCircleCollider").addComponent("MineWobbleMovement").addComponent("Activate_Mine_On_View").addComponent("MineDestroyExplosions").addComponent("EnemyShipExplosion3").addComponent("AddBulletHitFlash").setRenderer("MineRenderer").enemyCategory().strongEnemyTier(),this.gameObjectPool.createConfiguration("boss-mine-long","MineType").args({hp:8,speed:100,moveTime:2500}).addComponent("MineCircleCollider").addComponent("MineAngleMovement").addComponent("MineWobbleMovement").addComponent("MineDestroyExplosions").addComponent("EnemyShipExplosion3").addComponent("AddBulletHitFlash").setRenderer("MineRenderer").childOnly(),this.gameObjectPool.createConfiguration("boss-mine-short","MineType").args({hp:8,speed:50,moveTime:2500}).addComponent("MineCircleCollider").addComponent("MineAngleMovement").addComponent("MineWobbleMovement").addComponent("MineDestroyExplosions").addComponent("EnemyShipExplosion3").addComponent("AddBulletHitFlash").setRenderer("MineRenderer").childOnly()}});return new o}),define("generator",["editor-game-object-container","timer-factory","util","matrix-3x3","gb"],function(e,t,i,n,o){var r={},s={},a=new n,l=e.extend({init:function(){this._super(),this.hp=0,this.amount=0,this.objectType=""},editorStart:function(){if(0==this.hp)throw new Error("Missing hp");if(0==this.amount)throw new Error("Missing amount");if(""==this.objectType)throw new Error("Missing objectType");this.renderer.play("closed"),t.get(this,"openTimer","openTimer"),t.get(this,"attackTimer","attackTimer"),t.get(this,"closeTimer","closeTimer"),t.get(this,"generateTimer","generateTimer"),this.openTimer.configure({delay:2e3,removeOnComplete:!1}),this.attackTimer.configure({delay:1e3,removeOnComplete:!1}),this.closeTimer.configure({delay:1e3,removeOnComplete:!1}),this.generateTimer.configure({delay:1e3,repeatCount:this.amount,removeOnComplete:!1}),this.openTimer.start(),this.openTimer.on(this.openTimer.COMPLETE,function(){this.renderer.play("opening"),this.renderer.once("complete",this,function(){this.renderer.play("opened"),this.attackTimer&&this.attackTimer.start()})}),this.attackTimer.on(this.attackTimer.COMPLETE,function(){this.generateTimer&&this.generateTimer.start()}),this.closeTimer.on(this.closeTimer.COMPLETE,function(){this.renderer.play("closing"),this.renderer.once("complete",this,function(){this.renderer.play("closed"),this.openTimer&&this.openTimer.start()})}),this.generateTimer.on(this.generateTimer.REPEATE,function(){this.generate()}),this.generateTimer.on(this.generateTimer.COMPLETE,function(){this.closeTimer&&this.closeTimer.start()})},deActivate:function(){this.openTimer&&this.openTimer.remove(),this.attackTimer&&this.attackTimer.remove(),this.closeTimer&&this.closeTimer.remove(),this.generateTimer&&this.generateTimer.remove()},editorUpdate:function(){},onCollide:function(){},recycle:function(){this.openTimer&&this.openTimer.remove(),this.closeTimer&&this.closeTimer.remove(),this.attackTimer&&this.attackTimer.remove(),this.generateTimer&&this.generateTimer.remove(),this._super()},generate:function(){r=this.getMatrix().decompose(r);for(var e=o.create(this.objectType,this.getUpdateGroup(),this.getViewportList(),{angle:(r.rotation-90)*(Math.PI/180),rotation:r.rotation-90,x:r.x,y:r.y,wayPoints:this.findChildren().allWithType("GeneratorWayPoint").map(function(e){return e.getTransform(s,a),{x:s.x,y:s.y}})}),t=e.getViewportList(),i=0;i<t.length;i++)o.viewports.get(t[i].viewport).getLayer(t[i].layer).moveGameObjectToBack(e)}});return l}),define("boss-generator",["editor-game-object-container","timer-factory","util","gb"],function(e,t,i,n){var o={},r={},s=e.extend({init:function(){this._super(),this.hp=0,this.amount=0,this.objectType=""},canCollide:function(){return this.started},editorStart:function(){this.started=!1},deActivate:function(){this.openTimer&&this.openTimer.remove(),this.attackTimer&&this.attackTimer.remove(),this.closeTimer&&this.closeTimer.remove(),this.generateTimer&&this.generateTimer.remove()},editorUpdate:function(){},onCollide:function(){},recycle:function(){this.deActivate(),this.cleanUpRendererDelegates(),this._super()},generate:function(){o=this.getMatrix().decompose(o);for(var e=n.create(this.objectType,this.getUpdateGroup(),this.getViewportList(),{angle:(o.rotation-90)*(Math.PI/180),rotation:o.rotation-90,x:o.x,y:o.y,wayPoints:this.findChildren().allWithType("GeneratorWayPoint").map(function(e){return e.getMatrix().decompose(r),{x:r.x,y:r.y}})}),t=e.getViewportList(),i=0;i<t.length;i++)n.viewports.get(t[i].viewport).getLayer(t[i].layer).moveGameObjectToBack(e)},onBossStart:function(){if(!this.started){if(this.started=!0,0==this.hp)throw new Error("Missing hp");if(0==this.amount)throw new Error("Missing amount");if(""==this.objectType)throw new Error("Missing objectType");this.closingAnimation(),t.get(this,"openTimer","openTimer"),t.get(this,"attackTimer","attackTimer"),t.get(this,"closeTimer","closeTimer"),t.get(this,"generateTimer","generateTimer"),this.openTimer.configure({delay:6e3,removeOnComplete:!1}),this.attackTimer.configure({delay:3e3,removeOnComplete:!1}),this.closeTimer.configure({delay:2e3,removeOnComplete:!1}),this.generateTimer.configure({delay:1e3,repeatCount:this.amount,removeOnComplete:!1}),this.openTimer.start(),this.openTimer.on(this.openTimer.COMPLETE,function(){this.renderer.play("opening"),this.addRendererDelegate("complete",function(){this.renderer.play("opened"),this.attackTimer.start()})}),this.attackTimer.on(this.attackTimer.COMPLETE,function(){this.generateTimer.start()}),this.closeTimer.on(this.closeTimer.COMPLETE,function(){this.renderer.play("closing"),this.addRendererDelegate("complete",function(){this.renderer.play("closed"),this.openTimer.start()})}),this.generateTimer.on(this.generateTimer.REPEATE,function(){this.generate()}),this.generateTimer.on(this.generateTimer.COMPLETE,function(){this.closeTimer.start()}),this.on("damaged",this,function(){this.started&&(this.openTimer.stop(),this.closeTimer.stop(),this.attackTimer.stop(),this.generateTimer.stop(),this.closingAnimation())}),this.on("repaired",this,function(){this.started&&this.openTimer.start()})}},onBossStop:function(){this.started=!1,this.deActivate(),this.cleanUpRendererDelegates(),this.closingAnimation()},closingAnimation:function(){this.renderer.isAtLabel("opened")?(this.renderer.play("closing"),this.addRendererDelegate("complete",function(){this.renderer.play("closed")})):this.renderer.isAtLabel("opening")?(this.renderer.reverse(),this.addRendererDelegate("complete_back",function(){this.renderer.play("closed")})):this.renderer.isAtLabel("closing")?this.addRendererDelegate("complete",function(){this.renderer.play("closed")}):this.renderer.isAtLabel("half-open")&&(this.renderer.play("half-open-close"),this.addRendererDelegate("complete",function(){this.renderer.play("closed")}))},onBossDestroy:function(){this.execute("destroyed")},addRendererDelegate:function(e,t){this.renderer.once(e,this,t,"boss-generator-renderer-handler")},cleanUpRendererDelegates:function(){this.renderer.levelCleanUp("boss-generator-renderer-handler")}});return s}),define("damage-explosions",["editor-component","gb"],function(e,t){var i=e.extend({init:function(){this._super(),this.instantEffects=null,this.lastingEffects=null,this.instantEffectGenerators=null,this.lastingEffectGenerators=null},editorStart:function(){if(!this.instantEffects)throw new Error("Missing instantEffect attribute");if(!this.lastingEffects)throw new Error("Missing lastingEffect attribute");this.parent.on("damaged",this,function(){this.instantEffectGenerators=t.addComponentsTo(this.parent,this.instantEffects),this.lastingEffectGenerators=t.addComponentsTo(this.parent,this.lastingEffects)}),this.parent.on("repaired",this,function(){this.parent.removeComponents(this.instantEffectGenerators),this.parent.removeComponents(this.lastingEffectGenerators)})}});return i}),define("damage-on-hp-depleted",["editor-component","timer-factory"],function(e,t){var i=e.extend({init:function(){this._super(),this.initHp=0},editorStart:function(){if(t.get(this,"repairTimer","repairTimer"),this.repairTimer.configure({delay:1e4,removeOnComplete:!1}),this.initHp=this.parent.hp,!this.parent.hp)throw new Error("Parent has no hp, it's either 0 or missing");this.parent.once("destroyed",this,function(){this.parent.findComponents().firstWithProp("collider").disable()}),this.parent.on("collide",this,function(){(!this.parent.canCollide||this.parent.canCollide())&&(this.parent.hp>0?this.parent.hp--:(this.parent.findComponents().firstWithProp("collider").disable(),this.parent.execute("damaged"),this.repairTimer.start(),this.repairTimer.on(this.repairTimer.COMPLETE,function(){this.parent.hp=this.initHp,this.parent.findComponents().firstWithProp("collider").enable(),this.parent.execute("repaired")},!0)))})},recycle:function(){this.repairTimer&&this.repairTimer.remove()}});return i}),define("generator-way-point",["require","editor-game-object-container"],function(e){var t=e("editor-game-object-container").extend({init:function(){this._super()},editorStart:function(){},editorUpdate:function(){}});return t}),define("connect-similar-game-objects",["component","gb","matrix-3x3"],function(e,t,i){var n={},o=new i,r=e.extend({init:function(){this._super(),this.objectType="",this.childrenToConnect=null},start:function(e){if(this._super(e),!this.objectType)throw new Error("Missing objectType attribute");this.childrenToConnect=this.parent.findChildren().allWithType(this.objectType)},debug_draw:function(e,t){e.save(),e.setTransform(1,0,0,1,0,0),t.transformContext(e),e.lineWidth=2,e.strokeStyle="aquamarine",e.beginPath();var i=this.childrenToConnect[0];n=i.getTransform(n,o),e.moveTo(n.x,n.y);for(var r=1;r<this.childrenToConnect.length;r++)i=this.childrenToConnect[r],n=i.getTransform(n,o),e.lineTo(n.x,n.y);e.stroke(),e.restore()}});return r}),define("generator-bundle",["require","common-bundle","gb","explosion-generator-bundle","particle-generator-bundle","bundle","generator","boss-generator","destroy-explosions","destroy-on-hp-depleted","damage-explosions","damage-on-hp-depleted","generator-way-point","auto-hide","connect-similar-game-objects"],function(e){var t=e("common-bundle"),i=e("gb"),n=e("explosion-generator-bundle"),o=e("particle-generator-bundle"),r=e("bundle").extend({create:function(){this.gameObjectPool.createDynamicPool("GeneratorType",e("generator")),this.gameObjectPool.createDynamicPool("BossGeneratorType",e("boss-generator")),this.componentPool.createPool("DestroyExplosions",e("destroy-explosions")),this.componentPool.createPool("DestroyOnHpDepleted",e("destroy-on-hp-depleted")),this.componentPool.createPool("DamageExplosions",e("damage-explosions")),this.componentPool.createPool("DamageOnHpDepleted",e("damage-on-hp-depleted")),this.componentPool.createConfiguration("GeneratorCircleCollider",t.getPolygonColliderPoolId()).args({id:"generatorColliderId",points:[{x:-32,y:-15},{x:32,y:-15},{x:32,y:15},{x:-32,y:15}]}),this.componentPool.createConfiguration("Activate_Generator_On_View",t.getActivateOnViewPoolId()),this.componentPool.createConfiguration("GeneratorDestroyExplosions","DestroyExplosions").args({effect:n.getMediumExplosionsEffectId()}),this.componentPool.createConfiguration("GeneratorDestroyOnHpDepleted","DestroyOnHpDepleted"),this.componentPool.createConfiguration("GeneratorDamageExplosions","DamageExplosions").args({instantEffects:[n.getMediumExplosionsEffectId()],lastingEffects:[o.getCannonDamageParticles_1_Id(),o.getCannonDamageParticles_2_Id()]}),this.componentPool.createConfiguration("GeneratorDamageOnHpDepleted","DamageOnHpDepleted"),this.gameObjectPool.createDynamicPool("GeneratorWayPoint",e("generator-way-point")),this.componentPool.createPool("AutoHide",e("auto-hide")),this.componentPool.createPool("ConnectSimilar",e("connect-similar-game-objects")),this.componentPool.createConfiguration("GeneratorWayPointRenderer",t.getBitmapRendererPoolId()).args({path:i.assetMap()["GENERATORWAYPOINT.PNG"],offset:"center"}),this.componentPool.createConfiguration("AutoHide","AutoHide"),this.componentPool.createConfiguration("ConnectSimilarGeneratorWayPoints","ConnectSimilar").args({objectType:"GeneratorWayPoint"}),this.gameObjectPool.createConfiguration("GeneratorWayPoint","GeneratorWayPoint").args({skipDebug:!0}).addComponent("AutoHide").setRenderer("GeneratorWayPointRenderer").childOnly(),this.componentPool.createConfiguration("GeneratorRenderer",t.getAnimationsBitmapRendererPoolId()).args({startingLabel:"half-open",frameWidth:64,frameHeight:40,frameDelay:.08,frameCount:9,offset:"center",path:i.assetMap()["GENERATOR.PNG"],labels:{opened:{loop:!1,frames:[8]},closed:{loop:!1,frames:[0]},opening:{loop:!1,frames:[0,1,2,3,4,5,6,7,8]},closing:{loop:!1,frames:[8,7,6,5,4,3,2,1,0]},"half-open":{loop:!1,frames:[4]},"half-open-close":{loop:!1,frames:[4,3,2,1,0]}}}),this.componentPool.createConfiguration("BossGeneratorRenderer",t.getAnimationsBitmapRendererPoolId()).args({startingLabel:"half-open",frameWidth:64,frameHeight:40,frameDelay:.08,frameCount:9,offset:"center",path:i.assetMap()["BOSSGENERATOR.PNG"],labels:{opened:{loop:!1,frames:[8]},closed:{loop:!1,frames:[0]},opening:{loop:!1,frames:[0,1,2,3,4,5,6,7,8]},closing:{loop:!1,frames:[8,7,6,5,4,3,2,1,0]},"half-open":{loop:!1,frames:[4]},"half-open-close":{loop:!1,frames:[4,3,2,1,0]}}}),this.gameObjectPool.createConfiguration("ship-generator-0","GeneratorType").args({hp:20,amount:3,objectType:"generator-enemy-ship-0"}).addComponent("GeneratorCircleCollider").addComponent("Activate_Generator_On_View").addComponent("GeneratorDestroyOnHpDepleted").addComponent("GeneratorDestroyExplosions").addComponent("ConnectSimilarGeneratorWayPoints").addComponent("GeneratorExplosion1").addComponent("AddBulletHitFlash").addChild("GeneratorWayPoint",{y:-20}).addChild("GeneratorWayPoint",{y:-40}).addChild("GeneratorWayPoint",{y:-60}).addChild("GeneratorWayPoint",{y:-80}).addChild("GeneratorWayPoint",{y:-100}).addChild("GeneratorWayPoint",{y:-120}).setRenderer("GeneratorRenderer").enemyCategory().weakEnemyTier(),this.gameObjectPool.createConfiguration("ship-generator-1","GeneratorType").args({hp:30,amount:4,objectType:"generator-enemy-ship-1"}).addComponent("GeneratorCircleCollider").addComponent("Activate_Generator_On_View").addComponent("GeneratorDestroyOnHpDepleted").addComponent("GeneratorDestroyExplosions").addComponent("ConnectSimilarGeneratorWayPoints").addComponent("GeneratorExplosion1").addComponent("AddBulletHitFlash").addChild("GeneratorWayPoint",{y:-20}).addChild("GeneratorWayPoint",{y:-40}).addChild("GeneratorWayPoint",{y:-60}).addChild("GeneratorWayPoint",{y:-80}).addChild("GeneratorWayPoint",{y:-100}).addChild("GeneratorWayPoint",{y:-120}).setRenderer("GeneratorRenderer").enemyCategory().strongEnemyTier(),this.gameObjectPool.createConfiguration("boss-ship-generator-0","BossGeneratorType").args({hp:10,amount:3,objectType:"generator-enemy-ship-0"}).addComponent("GeneratorCircleCollider").addComponent("Activate_Generator_On_View").addComponent("GeneratorDamageOnHpDepleted").addComponent("GeneratorDamageExplosions").addComponent("GeneratorDestroyExplosions").addComponent("ConnectSimilarGeneratorWayPoints").addComponent("GeneratorExplosion1").addComponent("GeneratorExplosion2").addComponent("AddBulletHitFlash").addChild("GeneratorWayPoint",{y:-20}).addChild("GeneratorWayPoint",{y:-40}).addChild("GeneratorWayPoint",{y:-60}).addChild("GeneratorWayPoint",{y:-80}).addChild("GeneratorWayPoint",{y:-100}).addChild("GeneratorWayPoint",{y:-120}).setRenderer("BossGeneratorRenderer").enemyCategory().weakBossHelperEnemyTier(),this.gameObjectPool.createConfiguration("boss-ship-generator-1","BossGeneratorType").args({hp:10,amount:4,objectType:"generator-enemy-ship-1"}).addComponent("GeneratorCircleCollider").addComponent("Activate_Generator_On_View").addComponent("GeneratorDamageOnHpDepleted").addComponent("GeneratorDamageExplosions").addComponent("GeneratorDestroyExplosions").addComponent("ConnectSimilarGeneratorWayPoints").addComponent("GeneratorExplosion1").addComponent("GeneratorExplosion2").addComponent("AddBulletHitFlash").addChild("GeneratorWayPoint",{y:-20}).addChild("GeneratorWayPoint",{y:-40}).addChild("GeneratorWayPoint",{y:-60}).addChild("GeneratorWayPoint",{y:-80}).addChild("GeneratorWayPoint",{y:-100}).addChild("GeneratorWayPoint",{y:-120}).setRenderer("BossGeneratorRenderer").enemyCategory().strongBossHelperEnemyTier(),this.gameObjectPool.createConfiguration("boss-spider-generator-0","BossGeneratorType").args({hp:10,amount:5,objectType:"generator-spider-0"}).addComponent("GeneratorCircleCollider").addComponent("Activate_Generator_On_View").addComponent("GeneratorDamageOnHpDepleted").addComponent("GeneratorDamageExplosions").addComponent("GeneratorDestroyExplosions").addComponent("ConnectSimilarGeneratorWayPoints").addComponent("GeneratorExplosion1").addComponent("GeneratorExplosion2").addComponent("AddBulletHitFlash").addChild("GeneratorWayPoint",{y:-20}).addChild("GeneratorWayPoint",{y:-40}).addChild("GeneratorWayPoint",{y:-60}).addChild("GeneratorWayPoint",{y:-80}).addChild("GeneratorWayPoint",{y:-100}).addChild("GeneratorWayPoint",{y:-120}).setRenderer("BossGeneratorRenderer").enemyCategory().weakBossHelperEnemyTier(),this.gameObjectPool.createConfiguration("boss-spider-generator-1","BossGeneratorType").args({hp:10,amount:5,objectType:"generator-spider-1"}).addComponent("GeneratorCircleCollider").addComponent("Activate_Generator_On_View").addComponent("GeneratorDamageOnHpDepleted").addComponent("GeneratorDamageExplosions").addComponent("GeneratorDestroyExplosions").addComponent("ConnectSimilarGeneratorWayPoints").addComponent("GeneratorExplosion1").addComponent("GeneratorExplosion2").addComponent("AddBulletHitFlash").addChild("GeneratorWayPoint",{y:-20}).addChild("GeneratorWayPoint",{y:-40}).addChild("GeneratorWayPoint",{y:-60}).addChild("GeneratorWayPoint",{y:-80}).addChild("GeneratorWayPoint",{y:-100}).addChild("GeneratorWayPoint",{y:-120}).setRenderer("BossGeneratorRenderer").enemyCategory().strongBossHelperEnemyTier()
}});return new r}),define("enemy-ship-1",["editor-game-object-container","reclaimer","player-getter"],function(e,t){var i=e.extend({init:function(){this._super(),this.hp=0,this.angle=0,this.speed=0,this.wayPoints=null},editorStart:function(){if(0==this.hp)throw new Error("Enemy ship is missing hp attribute");if(0==this.speed)throw new Error("Enemy ship is missing speed attribute");if(0==this.moveTime)throw new Error("Enemy ship is missing moveTime attribute");this.renderer.play(),this.findComponents().firstWithType("AngleMovement").disable(),this.once("finish-movement",this,function(){this.angle=this.rotation*(Math.PI/180),this.findComponents().firstWithType("AngleMovement").enable()})},deActivate:function(){t.mark(this)},editorUpdate:function(){},onCollide:function(e){"Obstacle"==e.poolId&&(this.hp=0),"player-ship"==e.typeId&&(this.hp=0)}});return i}),define("enemy-ship-2",["editor-game-object-container","reclaimer"],function(e,t){var i=e.extend({init:function(){this._super(),this.hp=0,this.speed=0,this.angle=0},editorStart:function(){if(0==this.hp)throw new Error("Enemy ship is missing hp attribute");if(0==this.speed)throw new Error("Enemy ship is missing speed attribute");this.renderer.play(),this.angle=this.rotation*(Math.PI/180)},deActivate:function(){t.mark(this)},editorUpdate:function(){},onCollide:function(e){"Obstacle"==e.poolId&&(this.hp=0),"player-ship"==e.typeId&&(this.hp=0)}});return i});var _gsScope="undefined"!=typeof module&&module.exports&&"undefined"!=typeof global?global:this||window;(_gsScope._gsQueue||(_gsScope._gsQueue=[])).push(function(){var e=180/Math.PI,t=[],i=[],n=[],o={},r=_gsScope._gsDefine.globals,s=function(e,t,i,n){this.a=e,this.b=t,this.c=i,this.d=n,this.da=n-e,this.ca=i-e,this.ba=t-e},a=",x,y,z,left,top,right,bottom,marginTop,marginLeft,marginRight,marginBottom,paddingLeft,paddingTop,paddingRight,paddingBottom,backgroundPosition,backgroundPosition_y,",l=function(e,t,i,n){var o={a:e},r={},s={},a={c:n},l=(e+t)/2,h=(t+i)/2,c=(i+n)/2,d=(l+h)/2,u=(h+c)/2,p=(u-d)/8;return o.b=l+(e-l)/4,r.b=d+p,o.c=r.a=(o.b+r.b)/2,r.c=s.a=(d+u)/2,s.b=u-p,a.b=c+(n-c)/4,s.c=a.a=(s.b+a.b)/2,[o,r,s,a]},h=function(e,o,r,s,a){var h,c,d,u,p,f,g,m,y,b,v,C,w,P=e.length-1,_=0,x=e[0].a;for(h=0;P>h;h++)p=e[_],c=p.a,d=p.d,u=e[_+1].d,a?(v=t[h],C=i[h],w=(C+v)*o*.25/(s?.5:n[h]||.5),f=d-(d-c)*(s?.5*o:0!==v?w/v:0),g=d+(u-d)*(s?.5*o:0!==C?w/C:0),m=d-(f+((g-f)*(3*v/(v+C)+.5)/4||0))):(f=d-(d-c)*o*.5,g=d+(u-d)*o*.5,m=d-(f+g)/2),f+=m,g+=m,p.c=y=f,p.b=0!==h?x:x=p.a+.6*(p.c-p.a),p.da=d-c,p.ca=y-c,p.ba=x-c,r?(b=l(c,x,y,d),e.splice(_,1,b[0],b[1],b[2],b[3]),_+=4):_++,x=g;p=e[_],p.b=x,p.c=x+.4*(p.d-x),p.da=p.d-p.a,p.ca=p.c-p.a,p.ba=x-p.a,r&&(b=l(p.a,x,p.c,p.d),e.splice(_,1,b[0],b[1],b[2],b[3]))},c=function(e,n,o,r){var a,l,h,c,d,u,p=[];if(r)for(e=[r].concat(e),l=e.length;--l>-1;)"string"==typeof(u=e[l][n])&&"="===u.charAt(1)&&(e[l][n]=r[n]+Number(u.charAt(0)+u.substr(2)));if(a=e.length-2,0>a)return p[0]=new s(e[0][n],0,0,e[-1>a?0:1][n]),p;for(l=0;a>l;l++)h=e[l][n],c=e[l+1][n],p[l]=new s(h,0,0,c),o&&(d=e[l+2][n],t[l]=(t[l]||0)+(c-h)*(c-h),i[l]=(i[l]||0)+(d-c)*(d-c));return p[l]=new s(e[l][n],0,0,e[l+1][n]),p},d=function(e,r,s,l,d,u){var p,f,g,m,y,b,v,C,w={},P=[],_=u||e[0];d="string"==typeof d?","+d+",":a,null==r&&(r=1);for(f in e[0])P.push(f);if(e.length>1){for(C=e[e.length-1],v=!0,p=P.length;--p>-1;)if(f=P[p],Math.abs(_[f]-C[f])>.05){v=!1;break}v&&(e=e.concat(),u&&e.unshift(u),e.push(e[1]),u=e[e.length-3])}for(t.length=i.length=n.length=0,p=P.length;--p>-1;)f=P[p],o[f]=-1!==d.indexOf(","+f+","),w[f]=c(e,f,o[f],u);for(p=t.length;--p>-1;)t[p]=Math.sqrt(t[p]),i[p]=Math.sqrt(i[p]);if(!l){for(p=P.length;--p>-1;)if(o[f])for(g=w[P[p]],b=g.length-1,m=0;b>m;m++)y=g[m+1].da/i[m]+g[m].da/t[m],n[m]=(n[m]||0)+y*y;for(p=n.length;--p>-1;)n[p]=Math.sqrt(n[p])}for(p=P.length,m=s?4:1;--p>-1;)f=P[p],g=w[f],h(g,r,s,l,o[f]),v&&(g.splice(0,m),g.splice(g.length-m,m));return w},u=function(e,t,i){t=t||"soft";var n,o,r,a,l,h,c,d,u,p,f,g={},m="cubic"===t?3:2,y="soft"===t,b=[];if(y&&i&&(e=[i].concat(e)),null==e||e.length<m+1)throw"invalid Bezier data";for(u in e[0])b.push(u);for(h=b.length;--h>-1;){for(u=b[h],g[u]=l=[],p=0,d=e.length,c=0;d>c;c++)n=null==i?e[c][u]:"string"==typeof(f=e[c][u])&&"="===f.charAt(1)?i[u]+Number(f.charAt(0)+f.substr(2)):Number(f),y&&c>1&&d-1>c&&(l[p++]=(n+l[p-2])/2),l[p++]=n;for(d=p-m+1,p=0,c=0;d>c;c+=m)n=l[c],o=l[c+1],r=l[c+2],a=2===m?0:l[c+3],l[p++]=f=3===m?new s(n,o,r,a):new s(n,(2*o+n)/3,(2*o+r)/3,r);l.length=p}return g},p=function(e,t,i){for(var n,o,r,s,a,l,h,c,d,u,p,f=1/i,g=e.length;--g>-1;)for(u=e[g],r=u.a,s=u.d-r,a=u.c-r,l=u.b-r,n=o=0,c=1;i>=c;c++)h=f*c,d=1-h,n=o-(o=(h*h*s+3*d*(h*a+d*l))*h),p=g*i+c-1,t[p]=(t[p]||0)+n*n},f=function(e,t){t=t>>0||6;var i,n,o,r,s=[],a=[],l=0,h=0,c=t-1,d=[],u=[];for(i in e)p(e[i],s,t);for(o=s.length,n=0;o>n;n++)l+=Math.sqrt(s[n]),r=n%t,u[r]=l,r===c&&(h+=l,r=n/t>>0,d[r]=u,a[r]=h,l=0,u=[]);return{length:h,lengths:a,segments:d}},g=_gsScope._gsDefine.plugin({propName:"bezier",priority:-1,version:"1.3.4",API:2,global:!0,init:function(e,t,i){this._target=e,t instanceof Array&&(t={values:t}),this._func={},this._round={},this._props=[],this._timeRes=null==t.timeResolution?6:parseInt(t.timeResolution,10);var n,o,r,s,a,l=t.values||[],h={},c=l[0],p=t.autoRotate||i.vars.orientToBezier;this._autoRotate=p?p instanceof Array?p:[["x","y","rotation",p===!0?0:Number(p)||0]]:null;for(n in c)this._props.push(n);for(r=this._props.length;--r>-1;)n=this._props[r],this._overwriteProps.push(n),o=this._func[n]="function"==typeof e[n],h[n]=o?e[n.indexOf("set")||"function"!=typeof e["get"+n.substr(3)]?n:"get"+n.substr(3)]():parseFloat(e[n]),a||h[n]!==l[0][n]&&(a=h);if(this._beziers="cubic"!==t.type&&"quadratic"!==t.type&&"soft"!==t.type?d(l,isNaN(t.curviness)?1:t.curviness,!1,"thruBasic"===t.type,t.correlate,a):u(l,t.type,h),this._segCount=this._beziers[n].length,this._timeRes){var g=f(this._beziers,this._timeRes);this._length=g.length,this._lengths=g.lengths,this._segments=g.segments,this._l1=this._li=this._s1=this._si=0,this._l2=this._lengths[0],this._curSeg=this._segments[0],this._s2=this._curSeg[0],this._prec=1/this._curSeg.length}if(p=this._autoRotate)for(this._initialRotations=[],p[0]instanceof Array||(this._autoRotate=p=[p]),r=p.length;--r>-1;){for(s=0;3>s;s++)n=p[r][s],this._func[n]="function"==typeof e[n]?e[n.indexOf("set")||"function"!=typeof e["get"+n.substr(3)]?n:"get"+n.substr(3)]:!1;n=p[r][2],this._initialRotations[r]=this._func[n]?this._func[n].call(this._target):this._target[n]}return this._startRatio=i.vars.runBackwards?1:0,!0},set:function(t){var i,n,o,r,s,a,l,h,c,d,u=this._segCount,p=this._func,f=this._target,g=t!==this._startRatio;if(this._timeRes){if(c=this._lengths,d=this._curSeg,t*=this._length,o=this._li,t>this._l2&&u-1>o){for(h=u-1;h>o&&(this._l2=c[++o])<=t;);this._l1=c[o-1],this._li=o,this._curSeg=d=this._segments[o],this._s2=d[this._s1=this._si=0]}else if(t<this._l1&&o>0){for(;o>0&&(this._l1=c[--o])>=t;);0===o&&t<this._l1?this._l1=0:o++,this._l2=c[o],this._li=o,this._curSeg=d=this._segments[o],this._s1=d[(this._si=d.length-1)-1]||0,this._s2=d[this._si]}if(i=o,t-=this._l1,o=this._si,t>this._s2&&o<d.length-1){for(h=d.length-1;h>o&&(this._s2=d[++o])<=t;);this._s1=d[o-1],this._si=o}else if(t<this._s1&&o>0){for(;o>0&&(this._s1=d[--o])>=t;);0===o&&t<this._s1?this._s1=0:o++,this._s2=d[o],this._si=o}a=(o+(t-this._s1)/(this._s2-this._s1))*this._prec}else i=0>t?0:t>=1?u-1:u*t>>0,a=(t-i*(1/u))*u;for(n=1-a,o=this._props.length;--o>-1;)r=this._props[o],s=this._beziers[r][i],l=(a*a*s.da+3*n*(a*s.ca+n*s.ba))*a+s.a,this._round[r]&&(l=Math.round(l)),p[r]?f[r](l):f[r]=l;if(this._autoRotate){var m,y,b,v,C,w,P,_=this._autoRotate;for(o=_.length;--o>-1;)r=_[o][2],w=_[o][3]||0,P=_[o][4]===!0?1:e,s=this._beziers[_[o][0]],m=this._beziers[_[o][1]],s&&m&&(s=s[i],m=m[i],y=s.a+(s.b-s.a)*a,v=s.b+(s.c-s.b)*a,y+=(v-y)*a,v+=(s.c+(s.d-s.c)*a-v)*a,b=m.a+(m.b-m.a)*a,C=m.b+(m.c-m.b)*a,b+=(C-b)*a,C+=(m.c+(m.d-m.c)*a-C)*a,l=g?Math.atan2(C-b,v-y)*P+w:this._initialRotations[o],p[r]?f[r](l):f[r]=l)}}}),m=g.prototype;g.bezierThrough=d,g.cubicToQuadratic=l,g._autoCSS=!0,g.quadraticToCubic=function(e,t,i){return new s(e,(2*t+e)/3,(2*t+i)/3,i)},g._cssRegister=function(){var e=r.CSSPlugin;if(e){var t=e._internals,i=t._parseToProxy,n=t._setPluginRatio,o=t.CSSPropTween;t._registerComplexSpecialProp("bezier",{parser:function(e,t,r,s,a,l){t instanceof Array&&(t={values:t}),l=new g;var h,c,d,u=t.values,p=u.length-1,f=[],m={};if(0>p)return a;for(h=0;p>=h;h++)d=i(e,u[h],s,a,l,p!==h),f[h]=d.end;for(c in t)m[c]=t[c];return m.values=f,a=new o(e,"bezier",0,0,d.pt,2),a.data=d,a.plugin=l,a.setRatio=n,0===m.autoRotate&&(m.autoRotate=!0),!m.autoRotate||m.autoRotate instanceof Array||(h=m.autoRotate===!0?0:Number(m.autoRotate),m.autoRotate=null!=d.end.left?[["left","top","rotation",h,!1]]:null!=d.end.x?[["x","y","rotation",h,!1]]:!1),m.autoRotate&&(s._transform||s._enableTransforms(!1),d.autoRotate=s._target._gsTransform),l._onInitTween(d.proxy,m,s._tween),a}})}},m._roundProps=function(e,t){for(var i=this._overwriteProps,n=i.length;--n>-1;)(e[i[n]]||e.bezier||e.bezierThrough)&&(this._round[i[n]]=t)},m._kill=function(e){var t,i,n=this._props;for(t in this._beziers)if(t in e)for(delete this._beziers[t],delete this._func[t],i=n.length;--i>-1;)n[i]===t&&n.splice(i,1);return this._super._kill.call(this,e)}}),_gsScope._gsDefine&&_gsScope._gsQueue.pop()(),function(e){var t=function(){return(_gsScope.GreenSockGlobals||_gsScope)[e]};"function"==typeof define&&define.amd?define("BezierPlugin",["TweenLite"],t):"undefined"!=typeof module&&module.exports&&(require("../TweenLite.js"),module.exports=t())}("BezierPlugin"),define("follow-way-points",["editor-component","TweenLite","BezierPlugin","EasePack","util"],function(e,t,i,n,o){var r=e.extend({init:function(){this._super()},editorStart:function(){if(!this.parent.speed)throw new Error("Missing speed attribute");if(!this.parent.wayPoints)throw new Error("Missing wayPoints attribute");var e=o.polylineLength(this.parent.wayPoints)/this.parent.speed;t.to(this.parent,e,{bezier:{curviness:0,autoRotate:!0,values:this.parent.wayPoints},ease:Linear.easeNone,onCompleteScope:this,onComplete:function(){this.parent&&this.parent.execute("finish-movement")}}),this.parent.on("destroyed",this,function(){t.killTweensOf(this.parent)})},editorUpdate:function(){},recycle:function(e){t.killTweensOf(e),this._super(e)}});return r}),define("enemy-ship-bundle",["require","common-bundle","gb","explosion-generator-bundle","bundle","enemy-ship-1","enemy-ship-2","movement-angle","follow-way-points","destroy-explosions","destroy-on-hp-depleted"],function(e){var t=e("common-bundle"),i=e("gb"),n=e("explosion-generator-bundle"),o=e("bundle").extend({create:function(){this.gameObjectPool.createDynamicPool("EnemyShip_1_Type",e("enemy-ship-1")),this.gameObjectPool.createDynamicPool("EnemyShip_2_Type",e("enemy-ship-2")),this.componentPool.createPool("AngleMovement",e("movement-angle")),this.componentPool.createPool("FollowWayPoints",e("follow-way-points")),this.componentPool.createPool("DestroyExplosions",e("destroy-explosions")),this.componentPool.createPool("DestroyOnHpDepleted",e("destroy-on-hp-depleted")),this.componentPool.createConfiguration("EnemyShipRectangleCollider",t.getPolygonColliderPoolId()).args({id:"enemyShipColliderId",points:[{x:-30,y:-10},{x:30,y:-10},{x:30,y:10},{x:-30,y:10}]}),this.componentPool.createConfiguration("EnemyShipCircleCollider",t.getCircleColliderPoolId()).args({id:"enemyShipColliderId",radius:12}),this.componentPool.createConfiguration("EnemySpiderCircleCollider",t.getCircleColliderPoolId()).args({id:"enemySpiderColliderId",radius:15}),this.componentPool.createConfiguration("Activate_EnemyShip_On_View",t.getActivateOnViewPoolId()),this.componentPool.createConfiguration("EnemyShipAngleMovement","AngleMovement"),this.componentPool.createConfiguration("EnemyShipFollowWayPoints","FollowWayPoints"),this.componentPool.createConfiguration("EnemyShipDestroyExplosions","DestroyExplosions").args({effect:n.getMediumExplosionsEffectId()}),this.componentPool.createConfiguration("EnemyShipDestroyOnHpDepleted","DestroyOnHpDepleted"),this.componentPool.createConfiguration("EnemyShip_1_Renderer",t.getAnimationBitmapRendererPoolId()).args({frameWidth:40,frameHeight:32,frameDelay:.03,frameCount:5,pingPong:!0,offset:"center",path:i.assetMap()["ENEMYSHIP1.PNG"]}),this.componentPool.createConfiguration("EnemyShip_2_Renderer",t.getAnimationBitmapRendererPoolId()).args({frameWidth:60,frameHeight:32,frameDelay:.03,frameCount:6,pingPong:!0,offset:"center",path:i.assetMap()["ENEMYSHIP2.PNG"]}),this.componentPool.createConfiguration("Spider_Helper_Renderer",t.getAnimationBitmapRendererPoolId()).args({frameWidth:78,frameHeight:60,frameDelay:.03,frameCount:5,loop:!0,offset:"center",path:i.assetMap()["SMALLSPIDER.PNG"]}),this.gameObjectPool.createConfiguration("generator-enemy-ship-0","EnemyShip_1_Type").args({hp:3,speed:120}).addComponent("EnemyShipCircleCollider").addComponent("Activate_EnemyShip_On_View").addComponent("EnemyShipAngleMovement").addComponent("EnemyShipFollowWayPoints").addComponent("EnemyShipDestroyExplosions").addComponent("EnemyShipDestroyOnHpDepleted").addComponent("EnemyShipExplosion1").addComponent("AddBulletHitFlash").setRenderer("EnemyShip_1_Renderer").childOnly(),this.gameObjectPool.createConfiguration("generator-enemy-ship-1","EnemyShip_1_Type").args({hp:5,speed:140}).addComponent("EnemyShipCircleCollider").addComponent("Activate_EnemyShip_On_View").addComponent("EnemyShipAngleMovement").addComponent("EnemyShipFollowWayPoints").addComponent("EnemyShipDestroyExplosions").addComponent("EnemyShipDestroyOnHpDepleted").addComponent("EnemyShipExplosion1").addComponent("AddBulletHitFlash").setRenderer("EnemyShip_1_Renderer").childOnly(),this.gameObjectPool.createConfiguration("generator-spider-0","EnemyShip_1_Type").args({hp:5,speed:200,scaleX:.8,scaleY:.8}).addComponent("EnemySpiderCircleCollider").addComponent("Activate_EnemyShip_On_View").addComponent("EnemyShipAngleMovement").addComponent("EnemyShipFollowWayPoints").addComponent("EnemyShipDestroyExplosions").addComponent("EnemyShipDestroyOnHpDepleted").addComponent("SpiderExplosion1").addComponent("AddBulletHitFlash").setRenderer("Spider_Helper_Renderer").childOnly(),this.gameObjectPool.createConfiguration("generator-spider-1","EnemyShip_1_Type").args({hp:10,speed:200,scaleX:.8,scaleY:.8}).addComponent("EnemySpiderCircleCollider").addComponent("Activate_EnemyShip_On_View").addComponent("EnemyShipAngleMovement").addComponent("EnemyShipFollowWayPoints").addComponent("EnemyShipDestroyExplosions").addComponent("EnemyShipDestroyOnHpDepleted").addComponent("SpiderExplosion1").addComponent("AddBulletHitFlash").setRenderer("Spider_Helper_Renderer").childOnly(),this.gameObjectPool.createConfiguration("straight-line-ship-0","EnemyShip_2_Type").args({hp:3,speed:120}).addComponent("EnemyShipRectangleCollider").addComponent("Activate_EnemyShip_On_View").addComponent("EnemyShipAngleMovement").addComponent("EnemyShipDestroyExplosions").addComponent("EnemyShipDestroyOnHpDepleted").addComponent("EnemyShipExplosion2").addComponent("AddBulletHitFlash").setRenderer("EnemyShip_2_Renderer").enemyCategory().weakEnemyTier(),this.gameObjectPool.createConfiguration("straight-line-ship-1","EnemyShip_2_Type").args({hp:5,speed:150}).addComponent("EnemyShipRectangleCollider").addComponent("Activate_EnemyShip_On_View").addComponent("EnemyShipAngleMovement").addComponent("EnemyShipDestroyExplosions").addComponent("EnemyShipDestroyOnHpDepleted").addComponent("EnemyShipExplosion2").addComponent("AddBulletHitFlash").setRenderer("EnemyShip_2_Renderer").enemyCategory().strongEnemyTier()}});return new o}),define("blob",["editor-game-object-container","reclaimer","player-getter"],function(e,t,i){var n=e.extend({init:function(){this._super(),this.hp=0,this.speed=0,this.target=null},editorStart:function(){if(0==this.hp)throw new Error("Blob is missing hp attribute");if(0==this.speed)throw new Error("Blob is missing speed attribute");this.target=i.get(),this.renderer.play()},deActivate:function(){t.mark(this)},editorUpdate:function(){},onCollide:function(e){"player-ship"==e.typeId&&(this.hp=0)}});return n}),define("blob-shrapnel",["editor-component","gb","util"],function(e,t,i){var n=e.extend({init:function(){this._super(),this.objectType=null,this.amount=null},editorStart:function(){if(!this.objectType)throw new Error("Missing objectType attribute");if(!this.amount)throw new Error("Missing amount attribute");this.parent.on("destroyed",this,function(){"x8"==this.amount&&(t.create(this.objectType,this.parent.getUpdateGroup(),this.parent.getViewportList(),{angle:0,x:this.parent.x,y:this.parent.y}),t.create(this.objectType,this.parent.getUpdateGroup(),this.parent.getViewportList(),{angle:90,x:this.parent.x,y:this.parent.y}),t.create(this.objectType,this.parent.getUpdateGroup(),this.parent.getViewportList(),{angle:180,x:this.parent.x,y:this.parent.y}),t.create(this.objectType,this.parent.getUpdateGroup(),this.parent.getViewportList(),{angle:270,x:this.parent.x,y:this.parent.y}),t.create(this.objectType,this.parent.getUpdateGroup(),this.parent.getViewportList(),{angle:45,x:this.parent.x,y:this.parent.y}),t.create(this.objectType,this.parent.getUpdateGroup(),this.parent.getViewportList(),{angle:135,x:this.parent.x,y:this.parent.y}),t.create(this.objectType,this.parent.getUpdateGroup(),this.parent.getViewportList(),{angle:225,x:this.parent.x,y:this.parent.y}),t.create(this.objectType,this.parent.getUpdateGroup(),this.parent.getViewportList(),{angle:315,x:this.parent.x,y:this.parent.y})),"x4"==this.amount&&(i.rand_b()?(t.create(this.objectType,this.parent.getUpdateGroup(),this.parent.getViewportList(),{angle:0,x:this.parent.x,y:this.parent.y}),t.create(this.objectType,this.parent.getUpdateGroup(),this.parent.getViewportList(),{angle:90,x:this.parent.x,y:this.parent.y}),t.create(this.objectType,this.parent.getUpdateGroup(),this.parent.getViewportList(),{angle:180,x:this.parent.x,y:this.parent.y}),t.create(this.objectType,this.parent.getUpdateGroup(),this.parent.getViewportList(),{angle:270,x:this.parent.x,y:this.parent.y})):(t.create(this.objectType,this.parent.getUpdateGroup(),this.parent.getViewportList(),{angle:45,x:this.parent.x,y:this.parent.y}),t.create(this.objectType,this.parent.getUpdateGroup(),this.parent.getViewportList(),{angle:135,x:this.parent.x,y:this.parent.y}),t.create(this.objectType,this.parent.getUpdateGroup(),this.parent.getViewportList(),{angle:225,x:this.parent.x,y:this.parent.y}),t.create(this.objectType,this.parent.getUpdateGroup(),this.parent.getViewportList(),{angle:315,x:this.parent.x,y:this.parent.y})))})}});return n}),define("blob-bundle",["require","common-bundle","gb","explosion-generator-bundle","bundle","blob","destroy-explosions","destroy-on-hp-depleted","follow-target","blob-shrapnel","blob-divide"],function(e){var t=e("common-bundle"),i=e("gb"),n=e("explosion-generator-bundle"),o=e("bundle").extend({create:function(){this.gameObjectPool.createDynamicPool("BlobType",e("blob")),this.componentPool.createPool("DestroyExplosions",e("destroy-explosions")),this.componentPool.createPool("DestroyOnHpDepleted",e("destroy-on-hp-depleted")),this.componentPool.createPool("FollowTarget",e("follow-target")),this.componentPool.createPool("BlobShrapnel",e("blob-shrapnel")),this.componentPool.createPool("BlobDivide",e("blob-divide")),this.componentPool.createConfiguration("BlobCircleCollider",t.getCircleColliderPoolId()).args({id:"blobColliderId",radius:10}),this.componentPool.createConfiguration("Activate_Blob_On_View",t.getActivateOnViewPoolId()),this.componentPool.createConfiguration("BlobDestroyExplosions","DestroyExplosions").args({effect:n.getMediumExplosionsEffectId()}),this.componentPool.createConfiguration("BlobDestroyOnHpDepleted","DestroyOnHpDepleted"),this.componentPool.createConfiguration("BlobFollowTarget","FollowTarget"),this.componentPool.createConfiguration("BlobShrapnel","BlobShrapnel"),this.componentPool.createConfiguration("BlobDivide","BlobDivide"),this.componentPool.createConfiguration("BlobRenderer",t.getAnimationBitmapRendererPoolId()).args({frameWidth:40,frameHeight:40,frameDelay:.1,frameCount:11,loop:!0,offset:"center",path:i.assetMap()["BLOB.PNG"]}),this.gameObjectPool.createConfiguration("blob-explode-0","BlobType").args({hp:10,speed:20}).addComponent("BlobCircleCollider").addComponent("Activate_Blob_On_View").addComponent("BlobDestroyExplosions").addComponent("BlobDestroyOnHpDepleted").addComponent("BlobFollowTarget").addComponent("BlobShrapnel",{objectType:"blob-bullet-slow",amount:"x4"}).addComponent("EnemyShipExplosion3").addComponent("AddBulletHitFlash").setRenderer("BlobRenderer").enemyCategory().weakEnemyTier(),this.gameObjectPool.createConfiguration("blob-explode-1","BlobType").args({hp:5,speed:10}).addComponent("BlobCircleCollider").addComponent("Activate_Blob_On_View").addComponent("BlobDestroyExplosions").addComponent("BlobDestroyOnHpDepleted").addComponent("BlobFollowTarget").addComponent("EnemyShipExplosion3").addComponent("BlobShrapnel",{objectType:"blob-bullet-slow",amount:"x8"}).addComponent("AddBulletHitFlash").setRenderer("BlobRenderer").enemyCategory().strongEnemyTier(),this.gameObjectPool.createConfiguration("blob-divide-0","BlobType").args({hp:10,speed:20}).addComponent("BlobCircleCollider").addComponent("Activate_Blob_On_View").addComponent("BlobDestroyExplosions").addComponent("BlobDestroyOnHpDepleted").addComponent("BlobFollowTarget").addComponent("EnemyShipExplosion1").addComponent("BlobDivide",{objectType:"blob-explode-0",amount:"x2"}).addComponent("AddBulletHitFlash").setRenderer("BlobRenderer").enemyCategory().weakEnemyTier(),this.gameObjectPool.createConfiguration("blob-divide-1","BlobType").args({hp:10,speed:20}).addComponent("BlobCircleCollider").addComponent("Activate_Blob_On_View").addComponent("BlobDestroyExplosions").addComponent("BlobDestroyOnHpDepleted").addComponent("BlobFollowTarget").addComponent("EnemyShipExplosion1").addComponent("BlobDivide",{objectType:"blob-explode-1",amount:"x3"}).addComponent("AddBulletHitFlash").setRenderer("BlobRenderer").enemyCategory().strongEnemyTier(),this.gameObjectPool.createConfiguration("blob-divide-2","BlobType").args({hp:15,speed:20}).addComponent("BlobCircleCollider").addComponent("Activate_Blob_On_View").addComponent("BlobDestroyExplosions").addComponent("BlobDestroyOnHpDepleted").addComponent("BlobFollowTarget").addComponent("BlobDivide",{objectType:"blob-divide-0",amount:"x2"}).addComponent("AddBulletHitFlash").addComponent("EnemyShipExplosion1").setRenderer("BlobRenderer").enemyCategory().strongEnemyTier(),this.gameObjectPool.createConfiguration("blob-divide-3","BlobType").args({hp:15,speed:20}).addComponent("BlobCircleCollider").addComponent("Activate_Blob_On_View").addComponent("BlobDestroyExplosions").addComponent("BlobDestroyOnHpDepleted").addComponent("BlobFollowTarget").addComponent("BlobDivide",{objectType:"blob-divide-1",amount:"x3"}).addComponent("AddBulletHitFlash").addComponent("EnemyShipExplosion1").setRenderer("BlobRenderer").enemyCategory().strongEnemyTier()}});return new o}),define("follow-spider",["editor-game-object-container","player-getter","root","timer-factory","gb","TweenLite","EasePack"],function(e,t,i,n,o){var r=e.extend({init:function(){this._super(),this.hp=0,this.speed=0,this.target=null,this.movementAngleComponent=null,this.angle=0},editorStart:function(){this.target=t.get(),this.movementAngleComponent=this.findComponents().firstWithType("AngleMovement"),this.findComponents().firstWithType("Activate_Spider_On_View").disable(),this.angle=this.rotation*(Math.PI/180),n.get(this,"waitTimer","waitTimer"),this.waitTimer.configure({delay:1e3,removeOnComplete:!1}),this.renderer.play(),this.waitTimer.on("complete",function(){if(this.target){this.show();var e=parseInt(4*(Math.random()-1e-12)),t=this.target.x,i=this.target.y;0==e?(this.x=t+o.canvas.width/2,this.y=i-this.renderer.rendererHeight()/2):1==e?(this.x=t+o.canvas.width+this.renderer.rendererHeight()/2,this.y=i+o.canvas.height/2):2==e?(this.x=t+o.canvas.width/2,this.y=i+o.canvas.height+this.renderer.rendererHeight()/2):3==e&&(this.x=t-this.renderer.rendererHeight()/2,this.y=i+o.canvas.height/2);var n=this.target.X-this.x,r=this.target.Y-this.y;this.angle=Math.atan2(r,n),this.angle<0&&(this.angle+=2*Math.PI),this.rotation=this.angle*(180/Math.PI),this.movementAngleComponent.enable()}}),this.on("out-of-screen-bounds",this,function(){this.waitTimer.start(),this.movementAngleComponent.disable(),this.hide()})},deActivate:function(){this.target=null},editorUpdate:function(){},onCollide:function(e){"player-ship"==e.typeId&&(this.hp=0)},recycle:function(){this.waitTimer&&this.waitTimer.remove(),this._super()}});return r}),define("shooting-spider",["editor-game-object-container","reclaimer","player-getter","timer-factory","gb"],function(e,t,i,n,o){var r={},s={},a=e.extend({init:function(){this._super(),this.hp=0,this.speed=0,this.angle=0,this.shootingTime=0,this.bulletType="",this.targetMatrix=null,this.selfMatrix=null},editorStart:function(){if(0==this.hp)throw new Error("Shooting Spider is missing hp attribute");if(0==this.speed)throw new Error("Shooting Spider is missing speed attribute");if(0==this.shootingTime)throw new Error("Shooting Spider is missing shootingTime attribute");if(0==this.bulletType)throw new Error("Shooting Spider is missing bulletType attribute");this.renderer.play(),this.angle=this.rotation*(Math.PI/180),this.shootingTimer&&this.shootingTimer.remove(),n.get(this,"shootingTimer","shootingTimer"),this.shootingTimer.configure({delay:this.shootingTime,removeOnComplete:!1,repeatCount:-1}),this.targetMatrix=i.get().getMatrix(this.targetMatrix),this.selfMatrix=this.getMatrix(this.selfMatrix),this.shootingTimer.on(this.shootingTimer.REPEATE,function(){r=this.targetMatrix.decompose(r),s=this.selfMatrix.decompose(s);var e=r.x-s.x,t=r.y-s.y;o.create(this.bulletType,this.getUpdateGroup(),this.getViewportList(),{angle:Math.atan2(t,e)*(180/Math.PI),x:s.x,y:s.y})}),this.once("destroyed",this,function(){this.shootingTimer.stop()}),this.shootingTimer.start()},deActivate:function(){t.mark(this)},editorUpdate:function(){},onCollide:function(e){"player-ship"==e.typeId&&(this.hp=0)},recycle:function(e){this.shootingTimer&&this.shootingTimer.remove(),this._super(e)}});return a}),define("spider-bundle",["require","common-bundle","gb","explosion-generator-bundle","bundle","follow-spider","shooting-spider","movement-angle","destroy-explosions","destroy-on-hp-depleted","check-out-of-bounds"],function(e){var t=e("common-bundle"),i=e("gb"),n=e("explosion-generator-bundle"),o=e("bundle").extend({create:function(){this.gameObjectPool.createDynamicPool("Spider_Follow_Type",e("follow-spider")),this.gameObjectPool.createDynamicPool("Spider_Shooting_Type",e("shooting-spider")),this.componentPool.createPool("AngleMovement",e("movement-angle")),this.componentPool.createPool("DestroyExplosions",e("destroy-explosions")),this.componentPool.createPool("DestroyOnHpDepleted",e("destroy-on-hp-depleted")),this.componentPool.createPool("CheckOutOfBounds",e("check-out-of-bounds")),this.componentPool.createConfiguration("Activate_Spider_On_View",t.getActivateOnViewPoolId()),this.componentPool.createConfiguration("SpiderAngleMovement","AngleMovement"),this.componentPool.createConfiguration("SpiderDestroyExplosions","DestroyExplosions").args({effect:n.getMediumExplosionsEffectId()}),this.componentPool.createConfiguration("SpiderDestroyOnHpDepleted","DestroyOnHpDepleted"),this.componentPool.createConfiguration("CheckOutOfBounds","CheckOutOfBounds"),this.componentPool.createConfiguration("Spider_Renderer",t.getAnimationBitmapRendererPoolId()).args({frameWidth:78,frameHeight:60,frameDelay:.03,frameCount:5,loop:!0,offset:"center",path:i.assetMap()["SMALLSPIDER.PNG"]}),this.gameObjectPool.createConfiguration("follow-spider-0","Spider_Follow_Type").args({hp:2,speed:200}).addComponent("EnemySpiderCircleCollider",{radius:25}).addComponent("Activate_Spider_On_View").addComponent("SpiderAngleMovement").addComponent("SpiderDestroyExplosions").addComponent("SpiderDestroyOnHpDepleted").addComponent("CheckOutOfBounds").addComponent("SpiderExplosion1").addComponent("AddBulletHitFlash").setRenderer("Spider_Renderer").enemyCategory().weakEnemyTier(),this.gameObjectPool.createConfiguration("follow-spider-1","Spider_Follow_Type").args({hp:3,speed:300}).addComponent("EnemySpiderCircleCollider",{radius:25}).addComponent("Activate_Spider_On_View").addComponent("SpiderAngleMovement").addComponent("SpiderDestroyExplosions").addComponent("SpiderDestroyOnHpDepleted").addComponent("CheckOutOfBounds").addComponent("SpiderExplosion1").addComponent("AddBulletHitFlash").setRenderer("Spider_Renderer").enemyCategory().strongEnemyTier(),this.gameObjectPool.createConfiguration("shooting-spider-0","Spider_Shooting_Type").args({hp:2,speed:200,scaleX:.6,scaleY:.6,shootingTime:1200,bulletType:"double-cannon-bullet-slow"}).addComponent("EnemySpiderCircleCollider").addComponent("Activate_Spider_On_View").addComponent("SpiderAngleMovement").addComponent("SpiderDestroyExplosions").addComponent("SpiderDestroyOnHpDepleted").addComponent("SpiderExplosion1").addComponent("AddBulletHitFlash").setRenderer("Spider_Renderer").enemyCategory().weakEnemyTier(),this.gameObjectPool.createConfiguration("shooting-spider-1","Spider_Shooting_Type").args({hp:4,speed:100,scaleX:.6,scaleY:.6,shootingTime:800,bulletType:"double-cannon-bullet-slow"}).addComponent("EnemySpiderCircleCollider").addComponent("Activate_Spider_On_View").addComponent("SpiderAngleMovement").addComponent("SpiderDestroyExplosions").addComponent("SpiderDestroyOnHpDepleted").addComponent("SpiderExplosion1").addComponent("AddBulletHitFlash").setRenderer("Spider_Renderer").enemyCategory().strongEnemyTier()}});return new o}),define("scene-player",["require","gb","canvas-container","keyboard","collision-resolver","util","sound-player","asset-preloader","editor-config","ui-component","common-bundle","sound-bundle","add-components-bundle","hud-bundle","explosion-bundle","explosion-generator-bundle","particle-generator-bundle","particle-bundle","ship-bundle","cannon-bundle","bullets-bundle","obstacle-bundle","boss-bundle","messages-bundle","control-objects-bundle","items-bundle","laser-effects-bundle","mine-bundle","generator-bundle","enemy-ship-bundle","blob-bundle","spider-bundle","bgm-sound"],function(e){var t=e("gb"),i=e("canvas-container"),n=e("keyboard"),o=e("collision-resolver"),r=e("util"),s=e("sound-player"),a=e("asset-preloader"),l=e("editor-config"),h=e("ui-component").extend({init:function(){this._super(),this.blockEscape=!0},pools:function(){e("common-bundle").create(),e("sound-bundle").create(),e("add-components-bundle").create(),e("hud-bundle").create(),e("explosion-bundle").create(),e("explosion-generator-bundle").create(),e("particle-generator-bundle").create(),e("particle-bundle").create(),e("ship-bundle").create(),e("cannon-bundle").create(),e("bullets-bundle").create(),e("obstacle-bundle").create(),e("boss-bundle").create(),e("messages-bundle").create(),e("control-objects-bundle").create(),e("items-bundle").create(),e("laser-effects-bundle").create(),e("mine-bundle").create(),e("generator-bundle").create(),e("enemy-ship-bundle").create(),e("blob-bundle").create(),e("spider-bundle").create()},setCollisionPairs:function(){o.addCollisionPair("basicBulletColliderId","bossColliderId"),o.addCollisionPair("basicBulletColliderId","cannonColliderId"),o.addCollisionPair("basicBulletColliderId","laserBulletColliderId"),o.addCollisionPair("basicBulletColliderId","missilleColliderId"),o.addCollisionPair("basicBulletColliderId","mineColliderId"),o.addCollisionPair("basicBulletColliderId","generatorColliderId"),o.addCollisionPair("basicBulletColliderId","enemyShipColliderId"),o.addCollisionPair("basicBulletColliderId","blobColliderId"),o.addCollisionPair("basicBulletColliderId","enemySpiderColliderId"),o.addCollisionPair("obstacleColliderId","shipColliderId"),o.addCollisionPair("obstacleColliderId","cannonBulletColliderId"),o.addCollisionPair("obstacleColliderId","basicBulletColliderId"),o.addCollisionPair("obstacleColliderId","laserBulletColliderId"),o.addCollisionPair("obstacleColliderId","missilleColliderId"),o.addCollisionPair("obstacleColliderId","enemyShipColliderId"),o.addCollisionPair("shipColliderId","cannonBulletColliderId"),o.addCollisionPair("shipColliderId","bossColliderId"),o.addCollisionPair("shipColliderId","boss3ColliderId"),o.addCollisionPair("shipColliderId","levelItemColliderId"),o.addCollisionPair("shipColliderId","laserBulletColliderId"),o.addCollisionPair("shipColliderId","missilleColliderId"),o.addCollisionPair("shipColliderId","directionSetterColliderId"),o.addCollisionPair("shipColliderId","mineColliderId"),o.addCollisionPair("shipColliderId","generatorColliderId"),o.addCollisionPair("shipColliderId","enemyShipColliderId"),o.addCollisionPair("shipColliderId","blobColliderId"),o.addCollisionPair("shipColliderId","enemySpiderColliderId"),o.addCollisionPair("shipColliderId","webBulletColliderId")
},removeCollisionPairs:function(){o.removeCollisionPair("basicBulletColliderId","bossColliderId"),o.removeCollisionPair("basicBulletColliderId","cannonColliderId"),o.removeCollisionPair("basicBulletColliderId","laserBulletColliderId"),o.removeCollisionPair("basicBulletColliderId","missilleColliderId"),o.removeCollisionPair("basicBulletColliderId","mineColliderId"),o.removeCollisionPair("basicBulletColliderId","generatorColliderId"),o.removeCollisionPair("basicBulletColliderId","enemyShipColliderId"),o.removeCollisionPair("basicBulletColliderId","blobColliderId"),o.removeCollisionPair("basicBulletColliderId","enemySpiderColliderId"),o.removeCollisionPair("obstacleColliderId","shipColliderId"),o.removeCollisionPair("obstacleColliderId","cannonBulletColliderId"),o.removeCollisionPair("obstacleColliderId","basicBulletColliderId"),o.removeCollisionPair("obstacleColliderId","laserBulletColliderId"),o.removeCollisionPair("obstacleColliderId","missilleColliderId"),o.removeCollisionPair("obstacleColliderId","enemyShipColliderId"),o.removeCollisionPair("shipColliderId","cannonBulletColliderId"),o.removeCollisionPair("shipColliderId","bossColliderId"),o.removeCollisionPair("shipColliderId","boss3ColliderId"),o.removeCollisionPair("shipColliderId","levelItemColliderId"),o.removeCollisionPair("shipColliderId","laserBulletColliderId"),o.removeCollisionPair("shipColliderId","missilleColliderId"),o.removeCollisionPair("shipColliderId","directionSetterColliderId"),o.removeCollisionPair("shipColliderId","mineColliderId"),o.removeCollisionPair("shipColliderId","generatorColliderId"),o.removeCollisionPair("shipColliderId","enemyShipColliderId"),o.removeCollisionPair("shipColliderId","blobColliderId"),o.removeCollisionPair("shipColliderId","enemySpiderColliderId"),o.removeCollisionPair("shipColliderId","webBulletColliderId")},container:function(){this.mainContainer=document.getElementById("main-player-container"),this.mainContainer||(this.mainContainer=document.createElement("div"),this.mainContainer.id="main-player-container",document.body.appendChild(this.mainContainer)),i.detachCanvas(),this.mainContainer.appendChild(i.getCanvasContainer())},requiredViewports:function(){if(t.groups.exists("Second")||t.groups.add("Second"),!t.viewports.exists("Messages")){var e=t.viewports.add("Messages",t.canvas.width,t.canvas.height);e.addLayer("Front")}var i=t.viewports.get("Main");i.layerExists("Effects")||i.addLayer("Effects")},load:function(){},setKeyboardEvents:function(){n.onKeyDown(n.ESC,this,this.escape)},removeKeyboardEvents:function(){n.removeKeyDown(n.ESC,this,this.escape)},escape:function(){this.blockEscape||(this.blockEscape=!0,this.execute(this.ESCAPE))},enableEscape:function(){this.blockEscape=!1},setCompleteEvents:function(){},removeCompleteEvents:function(){},create:function(e){this.viewports=[{viewport:"Main",layer:"Front"}],this.blockEscape=!0,this.container(),this.pools(),this.preloadAssets(e),this.setCollisionPairs(),this.load(e),this.requiredViewports(),this.setKeyboardEvents(),this.setCompleteEvents(),this.decorateContainer(e),a.once(a.ON_LOAD_ALL_COMPLETE,this,function(){this.execute(this.CREATION_COMPLETE)}),a.loadAll(),s.playLoop("INTRO")},getSceneLoader:function(){},preloadAssets:function(e){function i(e){var t=/^assets\/.*?\/.*?\?b=.*?$/;return t.test(e)?!0:!1}function n(e){if(r.isString(e)&&(i(e)&&-1===u.indexOf(e)&&u.push(e),t.goPool.configurationExists(e)&&-1===c.indexOf(e)&&c.push(e),t.coPool.configurationExists(e)&&-1===c.indexOf(e)&&c.push(e),s.hasId(e))){var n=s.getResourcePath(e);-1===u.indexOf(n)&&u.push(n)}}function o(e){for(var t in e)n(e[t])}function h(e){t.coPool.configurationExists(e)&&o(t.coPool.getConfigurationObject(e).componentArgs)}for(var c=this.getSceneLoader().getConfigurationsUsedInScene(e),d=[],u=[],p=0;p<c.length;p++){var f=c[p];if(-1===d.indexOf(f)&&(d.push(f),!l.isEditorGameObject(f))){var g=!1,m=!1,y=null;if(t.goPool.configurationExists(f)&&(g=!0,y=t.goPool.getConfigurationObject(f)),t.coPool.configurationExists(f)&&(m=!0,y=t.coPool.getConfigurationObject(f)),g){if(o(y.hardArguments),y.childs)for(var b=0;b<y.childs.length;b++){var v=y.childs[b].childId;o(y.childs[b].args),-1===c.indexOf(v)&&c.push(v)}if(y.components)for(var b=0;b<y.components.length;b++)o(y.components[b].args),h(y.components[b].componentId);y.renderer&&(o(y.renderer.args),h(y.renderer.componentId))}m&&(o(y.componentArgs),h(y.componentId))}}for(var p=0;p<u.length;p++){var C=u[p];a.addAsset(C)}},start:function(){},decorateContainer:function(e){var t=document.createElement("div"),i=document.createElement("div");t.id="player-title",i.id="player-controls",this.mainContainer.appendChild(t),this.mainContainer.appendChild(i),document.getElementById("player-controls").appendChild(document.createTextNode("ESC to Exit")),document.getElementById("player-controls").appendChild(document.createElement("br")),document.getElementById("player-controls").appendChild(document.createTextNode("Arrows to Move")),document.getElementById("player-controls").appendChild(document.createElement("br")),document.getElementById("player-controls").appendChild(document.createTextNode("A to Shoot"));var n;r.isString(e)?n=JSON.parse(e).name:r.isObject(e)&&(n=e.name),n="!@<share>@!"===n?"Space Maze":"Space Maze: "+n,document.getElementById("player-title").appendChild(document.createTextNode(n))},removeContainer:function(){},cleanUp:function(){var t=document.getElementById("player-title"),i=document.getElementById("player-controls");t&&t.parentNode.removeChild(t),i&&i.parentNode.removeChild(i),s.stopAll().now(),e("bgm-sound").clearLastBGMId(),this.removeCollisionPairs(),this.removeCompleteEvents(),this.removeKeyboardEvents(),this.removeContainer(),TimelineLite.exportRoot().kill(),this._super()}});return Object.defineProperty(h.prototype,"EXIT",{get:function(){return"exit"}}),Object.defineProperty(h.prototype,"FAILURE",{get:function(){return"failure"}}),Object.defineProperty(h.prototype,"ESCAPE",{get:function(){return"escape"}}),Object.defineProperty(h.prototype,"CREATION_COMPLETE",{get:function(){return"creation_complete"}}),new h}),define("game-scene-player",["require","gb","root","util","player-scene-loader","viewport-follow","player-getter","sound-player","TweenLite","EasePack","scene-player"],function(e){var t=e("gb"),i=e("root"),n=(e("util"),e("player-scene-loader")),o=e("viewport-follow"),r=e("player-getter"),s=e("sound-player");e("TweenLite"),e("EasePack");var a=e("scene-player").constructor.extend({init:function(){this._super()},load:function(e){n.load(e);r.get(-200,-200).blockControls();r.get().findComponents().firstWithProp("collider").disable(),t.create("HpMeter","First",[{viewport:"Messages",layer:"Front"}],{x:0,y:5}),n.layout()},getSceneLoader:function(){return n},setCompleteEvents:function(){var e=i.findChildren().recurse().all(function(e){return"LevelItem"==e.poolId||"AllBossDefeatLevelItem"==e.poolId}),n=r.get();if(n.once(n.NO_CONTROL,this,function(){this.blockEscape=!0}),n.once(n.DESTROYED,this,function(){t.groups.stop_update("First"),this.blockEscape=!0,t.create("FailureMessage","Second",this.viewports,{onComplete:function(){this.blockEscape=!1,this.execute(this.FAILURE)}.bind(this)})}),e)for(var s=0;s<e.length;s++){var a=e[s];a.once("collide",this,function(){n.blockControls(),t.groups.stop_update("First"),o.unsetFollow("Main",n),t.groups.get("First").remove(n),n.run(),n.findComponents().firstWithProp("collider").enable(),t.groups.get("Second").add(n),this.blockEscape=!0,t.create("CompleteMessage","Second",this.viewports,{onComplete:function(){var e=n.getDirection();return 0===e?void TweenLite.to(n,1.5,{viewportOffsetX:t.canvas.width+200,ease:Back.easeIn,onComplete:function(){this.execute(this.EXIT)}.bind(this)}):180===e?void TweenLite.to(n,1.5,{viewportOffsetX:-200,ease:Back.easeIn,onComplete:function(){this.execute(this.EXIT)}.bind(this)}):270===e?void TweenLite.to(n,1.5,{viewportOffsetY:-200,ease:Back.easeIn,onComplete:function(){this.execute(this.EXIT)}.bind(this)}):90===e?void TweenLite.to(n,1.5,{viewportOffsetY:t.canvas.height+200,ease:Back.easeIn,onComplete:function(){this.execute(this.EXIT)}.bind(this)}):void 0}.bind(this)})})}},start:function(){var e=r.get(),n=this,a=i.findChildren().recurse().firstWithType("StartPosition");return a?(t.reclaimer.mark(a),"right"===a.type?(e.viewportOffsetX=-300,e.viewportOffsetY=t.canvas.height/2,e.move(0),void TweenLite.to(e,3,{viewportOffsetX:150,onComplete:function(){t.create("StartMessage","Second",this.viewports,{onComplete:function(){e.unblockControls(),e.findComponents().firstWithProp("collider").enable(),o.setFollow("Main",e),s.stop("INTRO"),n.blockEscape=!1}})}.bind(this)})):"left"===a.type?(e.viewportOffsetX=t.canvas.width+300,e.viewportOffsetY=t.canvas.height/2,e.move(180),void TweenLite.to(e,3,{viewportOffsetX:t.canvas.width-150,onComplete:function(){t.create("StartMessage","Second",this.viewports,{onComplete:function(){e.unblockControls(),e.findComponents().firstWithProp("collider").enable(),o.setFollow("Main",e),s.stop("INTRO"),n.blockEscape=!1}})}.bind(this)})):"up"===a.type?(e.viewportOffsetX=t.canvas.width/2,e.viewportOffsetY=t.canvas.height+300,e.move(270),void TweenLite.to(e,3,{viewportOffsetY:t.canvas.height-150,onComplete:function(){t.create("StartMessage","Second",this.viewports,{onComplete:function(){e.unblockControls(),e.findComponents().firstWithProp("collider").enable(),o.setFollow("Main",e),s.stop("INTRO"),n.blockEscape=!1}})}.bind(this)})):"down"===a.type?(e.viewportOffsetX=t.canvas.width/2,e.viewportOffsetY=-300,e.move(90),void TweenLite.to(e,3,{viewportOffsetY:150,onComplete:function(){t.create("StartMessage","Second",this.viewports,{onComplete:function(){e.unblockControls(),e.findComponents().firstWithProp("collider").enable(),o.setFollow("Main",e),s.stop("INTRO"),n.blockEscape=!1}})}.bind(this)})):void 0):(e.viewportOffsetX=-300,e.viewportOffsetY=t.canvas.height/2,e.move(0),void TweenLite.to(e,3,{viewportOffsetX:150,onComplete:function(){t.create("StartMessage","Second",this.viewports,{onComplete:function(){e.unblockControls(),e.findComponents().firstWithProp("collider").enable(),o.setFollow("Main",e),s.stop("INTRO"),n.blockEscape=!1}})}.bind(this)}))}});return new a}),define("scene-player-state",["require","state-machine","gb","viewport-follow","game-scene-player","level-storage","loader-container"],function(e){var t=e("state-machine"),i=e("gb"),n=e("viewport-follow"),o=e("game-scene-player"),r=e("level-storage"),s=e("loader-container");return function(e){var a=t.createState(this,e);return a.addStartAction(function(){i.groups.removeAll(),i.viewports.removeAll()}),a.addStartAction(function(e){var t=r.getLevel(e);o.once(o.ESCAPE,this,function(){s.once(s.CLOSE,this,function(){a.execute(a.PREVIOUS,{nextInitArgs:null,lastCompleteArgs:null})}),s.transition()}),o.once(o.EXIT,this,function(){r.completeLevel(t),s.once(s.CLOSE,this,function(){a.execute(a.PREVIOUS,{nextInitArgs:null,lastCompleteArgs:null})}),s.transition()}),o.once(o.FAILURE,this,function(){s.once(s.CLOSE,this,function(){a.execute(a.PREVIOUS,{nextInitArgs:null,lastCompleteArgs:null})}),s.transition()}),o.once(o.CREATION_COMPLETE,this,function(){s.open()}),s.once(s.OPEN,this,function(){o.start()}),o.create(t)}),a.addUpdateAction(function(e){n.update(e)}),a.addCompleteAction(function(){i.reclaimer.clearAllObjectsFromPools().now(),i.reclaimer.clearAllPools().now(),o.cleanUp(),s.hardCleanUp()}),a}}),function(e){"function"==typeof define&&define.amd?define("jquery-ui",["jquery"],e):e(jQuery)}(function(e){function t(t,n){var o,r,s,a=t.nodeName.toLowerCase();return"area"===a?(o=t.parentNode,r=o.name,t.href&&r&&"map"===o.nodeName.toLowerCase()?(s=e("img[usemap='#"+r+"']")[0],!!s&&i(s)):!1):(/^(input|select|textarea|button|object)$/.test(a)?!t.disabled:"a"===a?t.href||n:n)&&i(t)}function i(t){return e.expr.filters.visible(t)&&!e(t).parents().addBack().filter(function(){return"hidden"===e.css(this,"visibility")}).length}function n(e){return function(){var t=this.element.val();e.apply(this,arguments),this._refresh(),t!==this.element.val()&&this._trigger("change")}}e.ui=e.ui||{},e.extend(e.ui,{version:"1.11.4",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),e.fn.extend({scrollParent:function(t){var i=this.css("position"),n="absolute"===i,o=t?/(auto|scroll|hidden)/:/(auto|scroll)/,r=this.parents().filter(function(){var t=e(this);return n&&"static"===t.css("position")?!1:o.test(t.css("overflow")+t.css("overflow-y")+t.css("overflow-x"))}).eq(0);return"fixed"!==i&&r.length?r:e(this[0].ownerDocument||document)},uniqueId:function(){var e=0;return function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++e)})}}(),removeUniqueId:function(){return this.each(function(){/^ui-id-\d+$/.test(this.id)&&e(this).removeAttr("id")})}}),e.extend(e.expr[":"],{data:e.expr.createPseudo?e.expr.createPseudo(function(t){return function(i){return!!e.data(i,t)}}):function(t,i,n){return!!e.data(t,n[3])},focusable:function(i){return t(i,!isNaN(e.attr(i,"tabindex")))},tabbable:function(i){var n=e.attr(i,"tabindex"),o=isNaN(n);return(o||n>=0)&&t(i,!o)}}),e("<a>").outerWidth(1).jquery||e.each(["Width","Height"],function(t,i){function n(t,i,n,r){return e.each(o,function(){i-=parseFloat(e.css(t,"padding"+this))||0,n&&(i-=parseFloat(e.css(t,"border"+this+"Width"))||0),r&&(i-=parseFloat(e.css(t,"margin"+this))||0)}),i}var o="Width"===i?["Left","Right"]:["Top","Bottom"],r=i.toLowerCase(),s={innerWidth:e.fn.innerWidth,innerHeight:e.fn.innerHeight,outerWidth:e.fn.outerWidth,outerHeight:e.fn.outerHeight};e.fn["inner"+i]=function(t){return void 0===t?s["inner"+i].call(this):this.each(function(){e(this).css(r,n(this,t)+"px")})},e.fn["outer"+i]=function(t,o){return"number"!=typeof t?s["outer"+i].call(this,t):this.each(function(){e(this).css(r,n(this,t,!0,o)+"px")})}}),e.fn.addBack||(e.fn.addBack=function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}),e("<a>").data("a-b","a").removeData("a-b").data("a-b")&&(e.fn.removeData=function(t){return function(i){return arguments.length?t.call(this,e.camelCase(i)):t.call(this)}}(e.fn.removeData)),e.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase()),e.fn.extend({focus:function(t){return function(i,n){return"number"==typeof i?this.each(function(){var t=this;setTimeout(function(){e(t).focus(),n&&n.call(t)},i)}):t.apply(this,arguments)}}(e.fn.focus),disableSelection:function(){var e="onselectstart"in document.createElement("div")?"selectstart":"mousedown";return function(){return this.bind(e+".ui-disableSelection",function(e){e.preventDefault()})}}(),enableSelection:function(){return this.unbind(".ui-disableSelection")},zIndex:function(t){if(void 0!==t)return this.css("zIndex",t);if(this.length)for(var i,n,o=e(this[0]);o.length&&o[0]!==document;){if(i=o.css("position"),("absolute"===i||"relative"===i||"fixed"===i)&&(n=parseInt(o.css("zIndex"),10),!isNaN(n)&&0!==n))return n;o=o.parent()}return 0}}),e.ui.plugin={add:function(t,i,n){var o,r=e.ui[t].prototype;for(o in n)r.plugins[o]=r.plugins[o]||[],r.plugins[o].push([i,n[o]])},call:function(e,t,i,n){var o,r=e.plugins[t];if(r&&(n||e.element[0].parentNode&&11!==e.element[0].parentNode.nodeType))for(o=0;o<r.length;o++)e.options[r[o][0]]&&r[o][1].apply(e.element,i)}};var o=0,r=Array.prototype.slice;e.cleanData=function(t){return function(i){var n,o,r;for(r=0;null!=(o=i[r]);r++)try{n=e._data(o,"events"),n&&n.remove&&e(o).triggerHandler("remove")}catch(s){}t(i)}}(e.cleanData),e.widget=function(t,i,n){var o,r,s,a,l={},h=t.split(".")[0];return t=t.split(".")[1],o=h+"-"+t,n||(n=i,i=e.Widget),e.expr[":"][o.toLowerCase()]=function(t){return!!e.data(t,o)},e[h]=e[h]||{},r=e[h][t],s=e[h][t]=function(e,t){return this._createWidget?void(arguments.length&&this._createWidget(e,t)):new s(e,t)},e.extend(s,r,{version:n.version,_proto:e.extend({},n),_childConstructors:[]}),a=new i,a.options=e.widget.extend({},a.options),e.each(n,function(t,n){return e.isFunction(n)?void(l[t]=function(){var e=function(){return i.prototype[t].apply(this,arguments)},o=function(e){return i.prototype[t].apply(this,e)};return function(){var t,i=this._super,r=this._superApply;return this._super=e,this._superApply=o,t=n.apply(this,arguments),this._super=i,this._superApply=r,t}}()):void(l[t]=n)}),s.prototype=e.widget.extend(a,{widgetEventPrefix:r?a.widgetEventPrefix||t:t},l,{constructor:s,namespace:h,widgetName:t,widgetFullName:o}),r?(e.each(r._childConstructors,function(t,i){var n=i.prototype;e.widget(n.namespace+"."+n.widgetName,s,i._proto)}),delete r._childConstructors):i._childConstructors.push(s),e.widget.bridge(t,s),s},e.widget.extend=function(t){for(var i,n,o=r.call(arguments,1),s=0,a=o.length;a>s;s++)for(i in o[s])n=o[s][i],o[s].hasOwnProperty(i)&&void 0!==n&&(t[i]=e.isPlainObject(n)?e.isPlainObject(t[i])?e.widget.extend({},t[i],n):e.widget.extend({},n):n);return t},e.widget.bridge=function(t,i){var n=i.prototype.widgetFullName||t;e.fn[t]=function(o){var s="string"==typeof o,a=r.call(arguments,1),l=this;return s?this.each(function(){var i,r=e.data(this,n);return"instance"===o?(l=r,!1):r?e.isFunction(r[o])&&"_"!==o.charAt(0)?(i=r[o].apply(r,a),i!==r&&void 0!==i?(l=i&&i.jquery?l.pushStack(i.get()):i,!1):void 0):e.error("no such method '"+o+"' for "+t+" widget instance"):e.error("cannot call methods on "+t+" prior to initialization; attempted to call method '"+o+"'")}):(a.length&&(o=e.widget.extend.apply(null,[o].concat(a))),this.each(function(){var t=e.data(this,n);t?(t.option(o||{}),t._init&&t._init()):e.data(this,n,new i(o,this))})),l}},e.Widget=function(){},e.Widget._childConstructors=[],e.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(t,i){i=e(i||this.defaultElement||this)[0],this.element=e(i),this.uuid=o++,this.eventNamespace="."+this.widgetName+this.uuid,this.bindings=e(),this.hoverable=e(),this.focusable=e(),i!==this&&(e.data(i,this.widgetFullName,this),this._on(!0,this.element,{remove:function(e){e.target===i&&this.destroy()}}),this.document=e(i.style?i.ownerDocument:i.document||i),this.window=e(this.document[0].defaultView||this.document[0].parentWindow)),this.options=e.widget.extend({},this.options,this._getCreateOptions(),t),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:e.noop,_getCreateEventData:e.noop,_create:e.noop,_init:e.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetFullName).removeData(e.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:e.noop,widget:function(){return this.element},option:function(t,i){var n,o,r,s=t;if(0===arguments.length)return e.widget.extend({},this.options);if("string"==typeof t)if(s={},n=t.split("."),t=n.shift(),n.length){for(o=s[t]=e.widget.extend({},this.options[t]),r=0;r<n.length-1;r++)o[n[r]]=o[n[r]]||{},o=o[n[r]];if(t=n.pop(),1===arguments.length)return void 0===o[t]?null:o[t];o[t]=i}else{if(1===arguments.length)return void 0===this.options[t]?null:this.options[t];s[t]=i}return this._setOptions(s),this},_setOptions:function(e){var t;for(t in e)this._setOption(t,e[t]);return this},_setOption:function(e,t){return this.options[e]=t,"disabled"===e&&(this.widget().toggleClass(this.widgetFullName+"-disabled",!!t),t&&(this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus"))),this},enable:function(){return this._setOptions({disabled:!1})},disable:function(){return this._setOptions({disabled:!0})},_on:function(t,i,n){var o,r=this;"boolean"!=typeof t&&(n=i,i=t,t=!1),n?(i=o=e(i),this.bindings=this.bindings.add(i)):(n=i,i=this.element,o=this.widget()),e.each(n,function(n,s){function a(){return t||r.options.disabled!==!0&&!e(this).hasClass("ui-state-disabled")?("string"==typeof s?r[s]:s).apply(r,arguments):void 0}"string"!=typeof s&&(a.guid=s.guid=s.guid||a.guid||e.guid++);var l=n.match(/^([\w:-]*)\s*(.*)$/),h=l[1]+r.eventNamespace,c=l[2];c?o.delegate(c,h,a):i.bind(h,a)})},_off:function(t,i){i=(i||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,t.unbind(i).undelegate(i),this.bindings=e(this.bindings.not(t).get()),this.focusable=e(this.focusable.not(t).get()),this.hoverable=e(this.hoverable.not(t).get())},_delay:function(e,t){function i(){return("string"==typeof e?n[e]:e).apply(n,arguments)}var n=this;return setTimeout(i,t||0)},_hoverable:function(t){this.hoverable=this.hoverable.add(t),this._on(t,{mouseenter:function(t){e(t.currentTarget).addClass("ui-state-hover")},mouseleave:function(t){e(t.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(t){this.focusable=this.focusable.add(t),this._on(t,{focusin:function(t){e(t.currentTarget).addClass("ui-state-focus")},focusout:function(t){e(t.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(t,i,n){var o,r,s=this.options[t];if(n=n||{},i=e.Event(i),i.type=(t===this.widgetEventPrefix?t:this.widgetEventPrefix+t).toLowerCase(),i.target=this.element[0],r=i.originalEvent)for(o in r)o in i||(i[o]=r[o]);return this.element.trigger(i,n),!(e.isFunction(s)&&s.apply(this.element[0],[i].concat(n))===!1||i.isDefaultPrevented())}},e.each({show:"fadeIn",hide:"fadeOut"},function(t,i){e.Widget.prototype["_"+t]=function(n,o,r){"string"==typeof o&&(o={effect:o});var s,a=o?o===!0||"number"==typeof o?i:o.effect||i:t;o=o||{},"number"==typeof o&&(o={duration:o}),s=!e.isEmptyObject(o),o.complete=r,o.delay&&n.delay(o.delay),s&&e.effects&&e.effects.effect[a]?n[t](o):a!==t&&n[a]?n[a](o.duration,o.easing,r):n.queue(function(i){e(this)[t](),r&&r.call(n[0]),i()})}});var s=(e.widget,!1);e(document).mouseup(function(){s=!1});e.widget("ui.mouse",{version:"1.11.4",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var t=this;this.element.bind("mousedown."+this.widgetName,function(e){return t._mouseDown(e)}).bind("click."+this.widgetName,function(i){return!0===e.data(i.target,t.widgetName+".preventClickEvent")?(e.removeData(i.target,t.widgetName+".preventClickEvent"),i.stopImmediatePropagation(),!1):void 0}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName),this._mouseMoveDelegate&&this.document.unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(t){if(!s){this._mouseMoved=!1,this._mouseStarted&&this._mouseUp(t),this._mouseDownEvent=t;var i=this,n=1===t.which,o="string"==typeof this.options.cancel&&t.target.nodeName?e(t.target).closest(this.options.cancel).length:!1;return n&&!o&&this._mouseCapture(t)?(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){i.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=this._mouseStart(t)!==!1,!this._mouseStarted)?(t.preventDefault(),!0):(!0===e.data(t.target,this.widgetName+".preventClickEvent")&&e.removeData(t.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(e){return i._mouseMove(e)},this._mouseUpDelegate=function(e){return i._mouseUp(e)},this.document.bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),t.preventDefault(),s=!0,!0)):!0}},_mouseMove:function(t){if(this._mouseMoved){if(e.ui.ie&&(!document.documentMode||document.documentMode<9)&&!t.button)return this._mouseUp(t);if(!t.which)return this._mouseUp(t)}return(t.which||t.button)&&(this._mouseMoved=!0),this._mouseStarted?(this._mouseDrag(t),t.preventDefault()):(this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,t)!==!1,this._mouseStarted?this._mouseDrag(t):this._mouseUp(t)),!this._mouseStarted)},_mouseUp:function(t){return this.document.unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,t.target===this._mouseDownEvent.target&&e.data(t.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(t)),s=!1,!1},_mouseDistanceMet:function(e){return Math.max(Math.abs(this._mouseDownEvent.pageX-e.pageX),Math.abs(this._mouseDownEvent.pageY-e.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}});!function(){function t(e,t,i){return[parseFloat(e[0])*(p.test(e[0])?t/100:1),parseFloat(e[1])*(p.test(e[1])?i/100:1)]}function i(t,i){return parseInt(e.css(t,i),10)||0}function n(t){var i=t[0];return 9===i.nodeType?{width:t.width(),height:t.height(),offset:{top:0,left:0}}:e.isWindow(i)?{width:t.width(),height:t.height(),offset:{top:t.scrollTop(),left:t.scrollLeft()}}:i.preventDefault?{width:0,height:0,offset:{top:i.pageY,left:i.pageX}}:{width:t.outerWidth(),height:t.outerHeight(),offset:t.offset()}}e.ui=e.ui||{};var o,r,s=Math.max,a=Math.abs,l=Math.round,h=/left|center|right/,c=/top|center|bottom/,d=/[\+\-]\d+(\.[\d]+)?%?/,u=/^\w+/,p=/%$/,f=e.fn.position;e.position={scrollbarWidth:function(){if(void 0!==o)return o;var t,i,n=e("<div style='display:block;position:absolute;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),r=n.children()[0];return e("body").append(n),t=r.offsetWidth,n.css("overflow","scroll"),i=r.offsetWidth,t===i&&(i=n[0].clientWidth),n.remove(),o=t-i},getScrollInfo:function(t){var i=t.isWindow||t.isDocument?"":t.element.css("overflow-x"),n=t.isWindow||t.isDocument?"":t.element.css("overflow-y"),o="scroll"===i||"auto"===i&&t.width<t.element[0].scrollWidth,r="scroll"===n||"auto"===n&&t.height<t.element[0].scrollHeight;return{width:r?e.position.scrollbarWidth():0,height:o?e.position.scrollbarWidth():0}},getWithinInfo:function(t){var i=e(t||window),n=e.isWindow(i[0]),o=!!i[0]&&9===i[0].nodeType;return{element:i,isWindow:n,isDocument:o,offset:i.offset()||{left:0,top:0},scrollLeft:i.scrollLeft(),scrollTop:i.scrollTop(),width:n||o?i.width():i.outerWidth(),height:n||o?i.height():i.outerHeight()}}},e.fn.position=function(o){if(!o||!o.of)return f.apply(this,arguments);o=e.extend({},o);var p,g,m,y,b,v,C=e(o.of),w=e.position.getWithinInfo(o.within),P=e.position.getScrollInfo(w),_=(o.collision||"flip").split(" "),x={};return v=n(C),C[0].preventDefault&&(o.at="left top"),g=v.width,m=v.height,y=v.offset,b=e.extend({},y),e.each(["my","at"],function(){var e,t,i=(o[this]||"").split(" ");1===i.length&&(i=h.test(i[0])?i.concat(["center"]):c.test(i[0])?["center"].concat(i):["center","center"]),i[0]=h.test(i[0])?i[0]:"center",i[1]=c.test(i[1])?i[1]:"center",e=d.exec(i[0]),t=d.exec(i[1]),x[this]=[e?e[0]:0,t?t[0]:0],o[this]=[u.exec(i[0])[0],u.exec(i[1])[0]]}),1===_.length&&(_[1]=_[0]),"right"===o.at[0]?b.left+=g:"center"===o.at[0]&&(b.left+=g/2),"bottom"===o.at[1]?b.top+=m:"center"===o.at[1]&&(b.top+=m/2),p=t(x.at,g,m),b.left+=p[0],b.top+=p[1],this.each(function(){var n,h,c=e(this),d=c.outerWidth(),u=c.outerHeight(),f=i(this,"marginLeft"),v=i(this,"marginTop"),O=d+f+i(this,"marginRight")+P.width,T=u+v+i(this,"marginBottom")+P.height,E=e.extend({},b),S=t(x.my,c.outerWidth(),c.outerHeight());"right"===o.my[0]?E.left-=d:"center"===o.my[0]&&(E.left-=d/2),"bottom"===o.my[1]?E.top-=u:"center"===o.my[1]&&(E.top-=u/2),E.left+=S[0],E.top+=S[1],r||(E.left=l(E.left),E.top=l(E.top)),n={marginLeft:f,marginTop:v},e.each(["left","top"],function(t,i){e.ui.position[_[t]]&&e.ui.position[_[t]][i](E,{targetWidth:g,targetHeight:m,elemWidth:d,elemHeight:u,collisionPosition:n,collisionWidth:O,collisionHeight:T,offset:[p[0]+S[0],p[1]+S[1]],my:o.my,at:o.at,within:w,elem:c})}),o.using&&(h=function(e){var t=y.left-E.left,i=t+g-d,n=y.top-E.top,r=n+m-u,l={target:{element:C,left:y.left,top:y.top,width:g,height:m},element:{element:c,left:E.left,top:E.top,width:d,height:u},horizontal:0>i?"left":t>0?"right":"center",vertical:0>r?"top":n>0?"bottom":"middle"};d>g&&a(t+i)<g&&(l.horizontal="center"),u>m&&a(n+r)<m&&(l.vertical="middle"),l.important=s(a(t),a(i))>s(a(n),a(r))?"horizontal":"vertical",o.using.call(this,e,l)}),c.offset(e.extend(E,{using:h}))})},e.ui.position={fit:{left:function(e,t){var i,n=t.within,o=n.isWindow?n.scrollLeft:n.offset.left,r=n.width,a=e.left-t.collisionPosition.marginLeft,l=o-a,h=a+t.collisionWidth-r-o;t.collisionWidth>r?l>0&&0>=h?(i=e.left+l+t.collisionWidth-r-o,e.left+=l-i):e.left=h>0&&0>=l?o:l>h?o+r-t.collisionWidth:o:l>0?e.left+=l:h>0?e.left-=h:e.left=s(e.left-a,e.left)},top:function(e,t){var i,n=t.within,o=n.isWindow?n.scrollTop:n.offset.top,r=t.within.height,a=e.top-t.collisionPosition.marginTop,l=o-a,h=a+t.collisionHeight-r-o;t.collisionHeight>r?l>0&&0>=h?(i=e.top+l+t.collisionHeight-r-o,e.top+=l-i):e.top=h>0&&0>=l?o:l>h?o+r-t.collisionHeight:o:l>0?e.top+=l:h>0?e.top-=h:e.top=s(e.top-a,e.top)}},flip:{left:function(e,t){var i,n,o=t.within,r=o.offset.left+o.scrollLeft,s=o.width,l=o.isWindow?o.scrollLeft:o.offset.left,h=e.left-t.collisionPosition.marginLeft,c=h-l,d=h+t.collisionWidth-s-l,u="left"===t.my[0]?-t.elemWidth:"right"===t.my[0]?t.elemWidth:0,p="left"===t.at[0]?t.targetWidth:"right"===t.at[0]?-t.targetWidth:0,f=-2*t.offset[0];0>c?(i=e.left+u+p+f+t.collisionWidth-s-r,(0>i||i<a(c))&&(e.left+=u+p+f)):d>0&&(n=e.left-t.collisionPosition.marginLeft+u+p+f-l,(n>0||a(n)<d)&&(e.left+=u+p+f))},top:function(e,t){var i,n,o=t.within,r=o.offset.top+o.scrollTop,s=o.height,l=o.isWindow?o.scrollTop:o.offset.top,h=e.top-t.collisionPosition.marginTop,c=h-l,d=h+t.collisionHeight-s-l,u="top"===t.my[1],p=u?-t.elemHeight:"bottom"===t.my[1]?t.elemHeight:0,f="top"===t.at[1]?t.targetHeight:"bottom"===t.at[1]?-t.targetHeight:0,g=-2*t.offset[1];0>c?(n=e.top+p+f+g+t.collisionHeight-s-r,(0>n||n<a(c))&&(e.top+=p+f+g)):d>0&&(i=e.top-t.collisionPosition.marginTop+p+f+g-l,(i>0||a(i)<d)&&(e.top+=p+f+g))}},flipfit:{left:function(){e.ui.position.flip.left.apply(this,arguments),e.ui.position.fit.left.apply(this,arguments)},top:function(){e.ui.position.flip.top.apply(this,arguments),e.ui.position.fit.top.apply(this,arguments)}}},function(){var t,i,n,o,s,a=document.getElementsByTagName("body")[0],l=document.createElement("div");t=document.createElement(a?"div":"body"),n={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"},a&&e.extend(n,{position:"absolute",left:"-1000px",top:"-1000px"});for(s in n)t.style[s]=n[s];t.appendChild(l),i=a||document.documentElement,i.insertBefore(t,i.firstChild),l.style.cssText="position: absolute; left: 10.7432222px;",o=e(l).offset().left,r=o>10&&11>o,t.innerHTML="",i.removeChild(t)}()}();e.ui.position;e.widget("ui.draggable",e.ui.mouse,{version:"1.11.4",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1,drag:null,start:null,stop:null},_create:function(){"original"===this.options.helper&&this._setPositionRelative(),this.options.addClasses&&this.element.addClass("ui-draggable"),this.options.disabled&&this.element.addClass("ui-draggable-disabled"),this._setHandleClassName(),this._mouseInit()},_setOption:function(e,t){this._super(e,t),"handle"===e&&(this._removeHandleClassName(),this._setHandleClassName())},_destroy:function(){return(this.helper||this.element).is(".ui-draggable-dragging")?void(this.destroyOnClear=!0):(this.element.removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled"),this._removeHandleClassName(),void this._mouseDestroy())},_mouseCapture:function(t){var i=this.options;
return this._blurActiveElement(t),this.helper||i.disabled||e(t.target).closest(".ui-resizable-handle").length>0?!1:(this.handle=this._getHandle(t),this.handle?(this._blockFrames(i.iframeFix===!0?"iframe":i.iframeFix),!0):!1)},_blockFrames:function(t){this.iframeBlocks=this.document.find(t).map(function(){var t=e(this);return e("<div>").css("position","absolute").appendTo(t.parent()).outerWidth(t.outerWidth()).outerHeight(t.outerHeight()).offset(t.offset())[0]})},_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),delete this.iframeBlocks)},_blurActiveElement:function(t){var i=this.document[0];if(this.handleElement.is(t.target))try{i.activeElement&&"body"!==i.activeElement.nodeName.toLowerCase()&&e(i.activeElement).blur()}catch(n){}},_mouseStart:function(t){var i=this.options;return this.helper=this._createHelper(t),this.helper.addClass("ui-draggable-dragging"),this._cacheHelperProportions(),e.ui.ddmanager&&(e.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(!0),this.offsetParent=this.helper.offsetParent(),this.hasFixedAncestor=this.helper.parents().filter(function(){return"fixed"===e(this).css("position")}).length>0,this.positionAbs=this.element.offset(),this._refreshOffsets(t),this.originalPosition=this.position=this._generatePosition(t,!1),this.originalPageX=t.pageX,this.originalPageY=t.pageY,i.cursorAt&&this._adjustOffsetFromHelper(i.cursorAt),this._setContainment(),this._trigger("start",t)===!1?(this._clear(),!1):(this._cacheHelperProportions(),e.ui.ddmanager&&!i.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t),this._normalizeRightBottom(),this._mouseDrag(t,!0),e.ui.ddmanager&&e.ui.ddmanager.dragStart(this,t),!0)},_refreshOffsets:function(e){this.offset={top:this.positionAbs.top-this.margins.top,left:this.positionAbs.left-this.margins.left,scroll:!1,parent:this._getParentOffset(),relative:this._getRelativeOffset()},this.offset.click={left:e.pageX-this.offset.left,top:e.pageY-this.offset.top}},_mouseDrag:function(t,i){if(this.hasFixedAncestor&&(this.offset.parent=this._getParentOffset()),this.position=this._generatePosition(t,!0),this.positionAbs=this._convertPositionTo("absolute"),!i){var n=this._uiHash();if(this._trigger("drag",t,n)===!1)return this._mouseUp({}),!1;this.position=n.position}return this.helper[0].style.left=this.position.left+"px",this.helper[0].style.top=this.position.top+"px",e.ui.ddmanager&&e.ui.ddmanager.drag(this,t),!1},_mouseStop:function(t){var i=this,n=!1;return e.ui.ddmanager&&!this.options.dropBehaviour&&(n=e.ui.ddmanager.drop(this,t)),this.dropped&&(n=this.dropped,this.dropped=!1),"invalid"===this.options.revert&&!n||"valid"===this.options.revert&&n||this.options.revert===!0||e.isFunction(this.options.revert)&&this.options.revert.call(this.element,n)?e(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){i._trigger("stop",t)!==!1&&i._clear()}):this._trigger("stop",t)!==!1&&this._clear(),!1},_mouseUp:function(t){return this._unblockFrames(),e.ui.ddmanager&&e.ui.ddmanager.dragStop(this,t),this.handleElement.is(t.target)&&this.element.focus(),e.ui.mouse.prototype._mouseUp.call(this,t)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear(),this},_getHandle:function(t){return this.options.handle?!!e(t.target).closest(this.element.find(this.options.handle)).length:!0},_setHandleClassName:function(){this.handleElement=this.options.handle?this.element.find(this.options.handle):this.element,this.handleElement.addClass("ui-draggable-handle")},_removeHandleClassName:function(){this.handleElement.removeClass("ui-draggable-handle")},_createHelper:function(t){var i=this.options,n=e.isFunction(i.helper),o=n?e(i.helper.apply(this.element[0],[t])):"clone"===i.helper?this.element.clone().removeAttr("id"):this.element;return o.parents("body").length||o.appendTo("parent"===i.appendTo?this.element[0].parentNode:i.appendTo),n&&o[0]===this.element[0]&&this._setPositionRelative(),o[0]===this.element[0]||/(fixed|absolute)/.test(o.css("position"))||o.css("position","absolute"),o},_setPositionRelative:function(){/^(?:r|a|f)/.test(this.element.css("position"))||(this.element[0].style.position="relative")},_adjustOffsetFromHelper:function(t){"string"==typeof t&&(t=t.split(" ")),e.isArray(t)&&(t={left:+t[0],top:+t[1]||0}),"left"in t&&(this.offset.click.left=t.left+this.margins.left),"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left),"top"in t&&(this.offset.click.top=t.top+this.margins.top),"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_isRootNode:function(e){return/(html|body)/i.test(e.tagName)||e===this.document[0]},_getParentOffset:function(){var t=this.offsetParent.offset(),i=this.document[0];return"absolute"===this.cssPosition&&this.scrollParent[0]!==i&&e.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop()),this._isRootNode(this.offsetParent[0])&&(t={top:0,left:0}),{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"!==this.cssPosition)return{top:0,left:0};var e=this.element.position(),t=this._isRootNode(this.scrollParent[0]);return{top:e.top-(parseInt(this.helper.css("top"),10)||0)+(t?0:this.scrollParent.scrollTop()),left:e.left-(parseInt(this.helper.css("left"),10)||0)+(t?0:this.scrollParent.scrollLeft())}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t,i,n,o=this.options,r=this.document[0];return this.relativeContainer=null,o.containment?"window"===o.containment?void(this.containment=[e(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,e(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,e(window).scrollLeft()+e(window).width()-this.helperProportions.width-this.margins.left,e(window).scrollTop()+(e(window).height()||r.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]):"document"===o.containment?void(this.containment=[0,0,e(r).width()-this.helperProportions.width-this.margins.left,(e(r).height()||r.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]):o.containment.constructor===Array?void(this.containment=o.containment):("parent"===o.containment&&(o.containment=this.helper[0].parentNode),i=e(o.containment),n=i[0],void(n&&(t=/(scroll|auto)/.test(i.css("overflow")),this.containment=[(parseInt(i.css("borderLeftWidth"),10)||0)+(parseInt(i.css("paddingLeft"),10)||0),(parseInt(i.css("borderTopWidth"),10)||0)+(parseInt(i.css("paddingTop"),10)||0),(t?Math.max(n.scrollWidth,n.offsetWidth):n.offsetWidth)-(parseInt(i.css("borderRightWidth"),10)||0)-(parseInt(i.css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(t?Math.max(n.scrollHeight,n.offsetHeight):n.offsetHeight)-(parseInt(i.css("borderBottomWidth"),10)||0)-(parseInt(i.css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relativeContainer=i))):void(this.containment=null)},_convertPositionTo:function(e,t){t||(t=this.position);var i="absolute"===e?1:-1,n=this._isRootNode(this.scrollParent[0]);return{top:t.top+this.offset.relative.top*i+this.offset.parent.top*i-("fixed"===this.cssPosition?-this.offset.scroll.top:n?0:this.offset.scroll.top)*i,left:t.left+this.offset.relative.left*i+this.offset.parent.left*i-("fixed"===this.cssPosition?-this.offset.scroll.left:n?0:this.offset.scroll.left)*i}},_generatePosition:function(e,t){var i,n,o,r,s=this.options,a=this._isRootNode(this.scrollParent[0]),l=e.pageX,h=e.pageY;return a&&this.offset.scroll||(this.offset.scroll={top:this.scrollParent.scrollTop(),left:this.scrollParent.scrollLeft()}),t&&(this.containment&&(this.relativeContainer?(n=this.relativeContainer.offset(),i=[this.containment[0]+n.left,this.containment[1]+n.top,this.containment[2]+n.left,this.containment[3]+n.top]):i=this.containment,e.pageX-this.offset.click.left<i[0]&&(l=i[0]+this.offset.click.left),e.pageY-this.offset.click.top<i[1]&&(h=i[1]+this.offset.click.top),e.pageX-this.offset.click.left>i[2]&&(l=i[2]+this.offset.click.left),e.pageY-this.offset.click.top>i[3]&&(h=i[3]+this.offset.click.top)),s.grid&&(o=s.grid[1]?this.originalPageY+Math.round((h-this.originalPageY)/s.grid[1])*s.grid[1]:this.originalPageY,h=i?o-this.offset.click.top>=i[1]||o-this.offset.click.top>i[3]?o:o-this.offset.click.top>=i[1]?o-s.grid[1]:o+s.grid[1]:o,r=s.grid[0]?this.originalPageX+Math.round((l-this.originalPageX)/s.grid[0])*s.grid[0]:this.originalPageX,l=i?r-this.offset.click.left>=i[0]||r-this.offset.click.left>i[2]?r:r-this.offset.click.left>=i[0]?r-s.grid[0]:r+s.grid[0]:r),"y"===s.axis&&(l=this.originalPageX),"x"===s.axis&&(h=this.originalPageY)),{top:h-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.offset.scroll.top:a?0:this.offset.scroll.top),left:l-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.offset.scroll.left:a?0:this.offset.scroll.left)}},_clear:function(){this.helper.removeClass("ui-draggable-dragging"),this.helper[0]===this.element[0]||this.cancelHelperRemoval||this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1,this.destroyOnClear&&this.destroy()},_normalizeRightBottom:function(){"y"!==this.options.axis&&"auto"!==this.helper.css("right")&&(this.helper.width(this.helper.width()),this.helper.css("right","auto")),"x"!==this.options.axis&&"auto"!==this.helper.css("bottom")&&(this.helper.height(this.helper.height()),this.helper.css("bottom","auto"))},_trigger:function(t,i,n){return n=n||this._uiHash(),e.ui.plugin.call(this,t,[i,n,this],!0),/^(drag|start|stop)/.test(t)&&(this.positionAbs=this._convertPositionTo("absolute"),n.offset=this.positionAbs),e.Widget.prototype._trigger.call(this,t,i,n)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),e.ui.plugin.add("draggable","connectToSortable",{start:function(t,i,n){var o=e.extend({},i,{item:n.element});n.sortables=[],e(n.options.connectToSortable).each(function(){var i=e(this).sortable("instance");i&&!i.options.disabled&&(n.sortables.push(i),i.refreshPositions(),i._trigger("activate",t,o))})},stop:function(t,i,n){var o=e.extend({},i,{item:n.element});n.cancelHelperRemoval=!1,e.each(n.sortables,function(){var e=this;e.isOver?(e.isOver=0,n.cancelHelperRemoval=!0,e.cancelHelperRemoval=!1,e._storedCSS={position:e.placeholder.css("position"),top:e.placeholder.css("top"),left:e.placeholder.css("left")},e._mouseStop(t),e.options.helper=e.options._helper):(e.cancelHelperRemoval=!0,e._trigger("deactivate",t,o))})},drag:function(t,i,n){e.each(n.sortables,function(){var o=!1,r=this;r.positionAbs=n.positionAbs,r.helperProportions=n.helperProportions,r.offset.click=n.offset.click,r._intersectsWith(r.containerCache)&&(o=!0,e.each(n.sortables,function(){return this.positionAbs=n.positionAbs,this.helperProportions=n.helperProportions,this.offset.click=n.offset.click,this!==r&&this._intersectsWith(this.containerCache)&&e.contains(r.element[0],this.element[0])&&(o=!1),o})),o?(r.isOver||(r.isOver=1,n._parent=i.helper.parent(),r.currentItem=i.helper.appendTo(r.element).data("ui-sortable-item",!0),r.options._helper=r.options.helper,r.options.helper=function(){return i.helper[0]},t.target=r.currentItem[0],r._mouseCapture(t,!0),r._mouseStart(t,!0,!0),r.offset.click.top=n.offset.click.top,r.offset.click.left=n.offset.click.left,r.offset.parent.left-=n.offset.parent.left-r.offset.parent.left,r.offset.parent.top-=n.offset.parent.top-r.offset.parent.top,n._trigger("toSortable",t),n.dropped=r.element,e.each(n.sortables,function(){this.refreshPositions()}),n.currentItem=n.element,r.fromOutside=n),r.currentItem&&(r._mouseDrag(t),i.position=r.position)):r.isOver&&(r.isOver=0,r.cancelHelperRemoval=!0,r.options._revert=r.options.revert,r.options.revert=!1,r._trigger("out",t,r._uiHash(r)),r._mouseStop(t,!0),r.options.revert=r.options._revert,r.options.helper=r.options._helper,r.placeholder&&r.placeholder.remove(),i.helper.appendTo(n._parent),n._refreshOffsets(t),i.position=n._generatePosition(t,!0),n._trigger("fromSortable",t),n.dropped=!1,e.each(n.sortables,function(){this.refreshPositions()}))})}}),e.ui.plugin.add("draggable","cursor",{start:function(t,i,n){var o=e("body"),r=n.options;o.css("cursor")&&(r._cursor=o.css("cursor")),o.css("cursor",r.cursor)},stop:function(t,i,n){var o=n.options;o._cursor&&e("body").css("cursor",o._cursor)}}),e.ui.plugin.add("draggable","opacity",{start:function(t,i,n){var o=e(i.helper),r=n.options;o.css("opacity")&&(r._opacity=o.css("opacity")),o.css("opacity",r.opacity)},stop:function(t,i,n){var o=n.options;o._opacity&&e(i.helper).css("opacity",o._opacity)}}),e.ui.plugin.add("draggable","scroll",{start:function(e,t,i){i.scrollParentNotHidden||(i.scrollParentNotHidden=i.helper.scrollParent(!1)),i.scrollParentNotHidden[0]!==i.document[0]&&"HTML"!==i.scrollParentNotHidden[0].tagName&&(i.overflowOffset=i.scrollParentNotHidden.offset())},drag:function(t,i,n){var o=n.options,r=!1,s=n.scrollParentNotHidden[0],a=n.document[0];s!==a&&"HTML"!==s.tagName?(o.axis&&"x"===o.axis||(n.overflowOffset.top+s.offsetHeight-t.pageY<o.scrollSensitivity?s.scrollTop=r=s.scrollTop+o.scrollSpeed:t.pageY-n.overflowOffset.top<o.scrollSensitivity&&(s.scrollTop=r=s.scrollTop-o.scrollSpeed)),o.axis&&"y"===o.axis||(n.overflowOffset.left+s.offsetWidth-t.pageX<o.scrollSensitivity?s.scrollLeft=r=s.scrollLeft+o.scrollSpeed:t.pageX-n.overflowOffset.left<o.scrollSensitivity&&(s.scrollLeft=r=s.scrollLeft-o.scrollSpeed))):(o.axis&&"x"===o.axis||(t.pageY-e(a).scrollTop()<o.scrollSensitivity?r=e(a).scrollTop(e(a).scrollTop()-o.scrollSpeed):e(window).height()-(t.pageY-e(a).scrollTop())<o.scrollSensitivity&&(r=e(a).scrollTop(e(a).scrollTop()+o.scrollSpeed))),o.axis&&"y"===o.axis||(t.pageX-e(a).scrollLeft()<o.scrollSensitivity?r=e(a).scrollLeft(e(a).scrollLeft()-o.scrollSpeed):e(window).width()-(t.pageX-e(a).scrollLeft())<o.scrollSensitivity&&(r=e(a).scrollLeft(e(a).scrollLeft()+o.scrollSpeed)))),r!==!1&&e.ui.ddmanager&&!o.dropBehaviour&&e.ui.ddmanager.prepareOffsets(n,t)}}),e.ui.plugin.add("draggable","snap",{start:function(t,i,n){var o=n.options;n.snapElements=[],e(o.snap.constructor!==String?o.snap.items||":data(ui-draggable)":o.snap).each(function(){var t=e(this),i=t.offset();this!==n.element[0]&&n.snapElements.push({item:this,width:t.outerWidth(),height:t.outerHeight(),top:i.top,left:i.left})})},drag:function(t,i,n){var o,r,s,a,l,h,c,d,u,p,f=n.options,g=f.snapTolerance,m=i.offset.left,y=m+n.helperProportions.width,b=i.offset.top,v=b+n.helperProportions.height;for(u=n.snapElements.length-1;u>=0;u--)l=n.snapElements[u].left-n.margins.left,h=l+n.snapElements[u].width,c=n.snapElements[u].top-n.margins.top,d=c+n.snapElements[u].height,l-g>y||m>h+g||c-g>v||b>d+g||!e.contains(n.snapElements[u].item.ownerDocument,n.snapElements[u].item)?(n.snapElements[u].snapping&&n.options.snap.release&&n.options.snap.release.call(n.element,t,e.extend(n._uiHash(),{snapItem:n.snapElements[u].item})),n.snapElements[u].snapping=!1):("inner"!==f.snapMode&&(o=Math.abs(c-v)<=g,r=Math.abs(d-b)<=g,s=Math.abs(l-y)<=g,a=Math.abs(h-m)<=g,o&&(i.position.top=n._convertPositionTo("relative",{top:c-n.helperProportions.height,left:0}).top),r&&(i.position.top=n._convertPositionTo("relative",{top:d,left:0}).top),s&&(i.position.left=n._convertPositionTo("relative",{top:0,left:l-n.helperProportions.width}).left),a&&(i.position.left=n._convertPositionTo("relative",{top:0,left:h}).left)),p=o||r||s||a,"outer"!==f.snapMode&&(o=Math.abs(c-b)<=g,r=Math.abs(d-v)<=g,s=Math.abs(l-m)<=g,a=Math.abs(h-y)<=g,o&&(i.position.top=n._convertPositionTo("relative",{top:c,left:0}).top),r&&(i.position.top=n._convertPositionTo("relative",{top:d-n.helperProportions.height,left:0}).top),s&&(i.position.left=n._convertPositionTo("relative",{top:0,left:l}).left),a&&(i.position.left=n._convertPositionTo("relative",{top:0,left:h-n.helperProportions.width}).left)),!n.snapElements[u].snapping&&(o||r||s||a||p)&&n.options.snap.snap&&n.options.snap.snap.call(n.element,t,e.extend(n._uiHash(),{snapItem:n.snapElements[u].item})),n.snapElements[u].snapping=o||r||s||a||p)}}),e.ui.plugin.add("draggable","stack",{start:function(t,i,n){var o,r=n.options,s=e.makeArray(e(r.stack)).sort(function(t,i){return(parseInt(e(t).css("zIndex"),10)||0)-(parseInt(e(i).css("zIndex"),10)||0)});s.length&&(o=parseInt(e(s[0]).css("zIndex"),10)||0,e(s).each(function(t){e(this).css("zIndex",o+t)}),this.css("zIndex",o+s.length))}}),e.ui.plugin.add("draggable","zIndex",{start:function(t,i,n){var o=e(i.helper),r=n.options;o.css("zIndex")&&(r._zIndex=o.css("zIndex")),o.css("zIndex",r.zIndex)},stop:function(t,i,n){var o=n.options;o._zIndex&&e(i.helper).css("zIndex",o._zIndex)}});e.ui.draggable;e.widget("ui.resizable",e.ui.mouse,{version:"1.11.4",widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:90,resize:null,start:null,stop:null},_num:function(e){return parseInt(e,10)||0},_isNumber:function(e){return!isNaN(parseInt(e,10))},_hasScroll:function(t,i){if("hidden"===e(t).css("overflow"))return!1;var n=i&&"left"===i?"scrollLeft":"scrollTop",o=!1;return t[n]>0?!0:(t[n]=1,o=t[n]>0,t[n]=0,o)},_create:function(){var t,i,n,o,r,s=this,a=this.options;if(this.element.addClass("ui-resizable"),e.extend(this,{_aspectRatio:!!a.aspectRatio,aspectRatio:a.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:a.helper||a.ghost||a.animate?a.helper||"ui-resizable-helper":null}),this.element[0].nodeName.match(/^(canvas|textarea|input|select|button|img)$/i)&&(this.element.wrap(e("<div class='ui-wrapper' style='overflow: hidden;'></div>").css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("ui-resizable",this.element.resizable("instance")),this.elementIsWrapper=!0,this.element.css({marginLeft:this.originalElement.css("marginLeft"),marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom")}),this.originalElement.css({marginLeft:0,marginTop:0,marginRight:0,marginBottom:0}),this.originalResizeStyle=this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"})),this.originalElement.css({margin:this.originalElement.css("margin")}),this._proportionallyResize()),this.handles=a.handles||(e(".ui-resizable-handle",this.element).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se"),this._handles=e(),this.handles.constructor===String)for("all"===this.handles&&(this.handles="n,e,s,w,se,sw,ne,nw"),t=this.handles.split(","),this.handles={},i=0;i<t.length;i++)n=e.trim(t[i]),r="ui-resizable-"+n,o=e("<div class='ui-resizable-handle "+r+"'></div>"),o.css({zIndex:a.zIndex}),"se"===n&&o.addClass("ui-icon ui-icon-gripsmall-diagonal-se"),this.handles[n]=".ui-resizable-"+n,this.element.append(o);this._renderAxis=function(t){var i,n,o,r;t=t||this.element;for(i in this.handles)this.handles[i].constructor===String?this.handles[i]=this.element.children(this.handles[i]).first().show():(this.handles[i].jquery||this.handles[i].nodeType)&&(this.handles[i]=e(this.handles[i]),this._on(this.handles[i],{mousedown:s._mouseDown})),this.elementIsWrapper&&this.originalElement[0].nodeName.match(/^(textarea|input|select|button)$/i)&&(n=e(this.handles[i],this.element),r=/sw|ne|nw|se|n|s/.test(i)?n.outerHeight():n.outerWidth(),o=["padding",/ne|nw|n/.test(i)?"Top":/se|sw|s/.test(i)?"Bottom":/^e$/.test(i)?"Right":"Left"].join(""),t.css(o,r),this._proportionallyResize()),this._handles=this._handles.add(this.handles[i])},this._renderAxis(this.element),this._handles=this._handles.add(this.element.find(".ui-resizable-handle")),this._handles.disableSelection(),this._handles.mouseover(function(){s.resizing||(this.className&&(o=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i)),s.axis=o&&o[1]?o[1]:"se")}),a.autoHide&&(this._handles.hide(),e(this.element).addClass("ui-resizable-autohide").mouseenter(function(){a.disabled||(e(this).removeClass("ui-resizable-autohide"),s._handles.show())}).mouseleave(function(){a.disabled||s.resizing||(e(this).addClass("ui-resizable-autohide"),s._handles.hide())})),this._mouseInit()},_destroy:function(){this._mouseDestroy();var t,i=function(t){e(t).removeClass("ui-resizable ui-resizable-disabled ui-resizable-resizing").removeData("resizable").removeData("ui-resizable").unbind(".resizable").find(".ui-resizable-handle").remove()};return this.elementIsWrapper&&(i(this.element),t=this.element,this.originalElement.css({position:t.css("position"),width:t.outerWidth(),height:t.outerHeight(),top:t.css("top"),left:t.css("left")}).insertAfter(t),t.remove()),this.originalElement.css("resize",this.originalResizeStyle),i(this.originalElement),this},_mouseCapture:function(t){var i,n,o=!1;for(i in this.handles)n=e(this.handles[i])[0],(n===t.target||e.contains(n,t.target))&&(o=!0);return!this.options.disabled&&o},_mouseStart:function(t){var i,n,o,r=this.options,s=this.element;return this.resizing=!0,this._renderProxy(),i=this._num(this.helper.css("left")),n=this._num(this.helper.css("top")),r.containment&&(i+=e(r.containment).scrollLeft()||0,n+=e(r.containment).scrollTop()||0),this.offset=this.helper.offset(),this.position={left:i,top:n},this.size=this._helper?{width:this.helper.width(),height:this.helper.height()}:{width:s.width(),height:s.height()},this.originalSize=this._helper?{width:s.outerWidth(),height:s.outerHeight()}:{width:s.width(),height:s.height()},this.sizeDiff={width:s.outerWidth()-s.width(),height:s.outerHeight()-s.height()},this.originalPosition={left:i,top:n},this.originalMousePosition={left:t.pageX,top:t.pageY},this.aspectRatio="number"==typeof r.aspectRatio?r.aspectRatio:this.originalSize.width/this.originalSize.height||1,o=e(".ui-resizable-"+this.axis).css("cursor"),e("body").css("cursor","auto"===o?this.axis+"-resize":o),s.addClass("ui-resizable-resizing"),this._propagate("start",t),!0},_mouseDrag:function(t){var i,n,o=this.originalMousePosition,r=this.axis,s=t.pageX-o.left||0,a=t.pageY-o.top||0,l=this._change[r];return this._updatePrevProperties(),l?(i=l.apply(this,[t,s,a]),this._updateVirtualBoundaries(t.shiftKey),(this._aspectRatio||t.shiftKey)&&(i=this._updateRatio(i,t)),i=this._respectSize(i,t),this._updateCache(i),this._propagate("resize",t),n=this._applyChanges(),!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize(),e.isEmptyObject(n)||(this._updatePrevProperties(),this._trigger("resize",t,this.ui()),this._applyChanges()),!1):!1},_mouseStop:function(t){this.resizing=!1;var i,n,o,r,s,a,l,h=this.options,c=this;return this._helper&&(i=this._proportionallyResizeElements,n=i.length&&/textarea/i.test(i[0].nodeName),o=n&&this._hasScroll(i[0],"left")?0:c.sizeDiff.height,r=n?0:c.sizeDiff.width,s={width:c.helper.width()-r,height:c.helper.height()-o},a=parseInt(c.element.css("left"),10)+(c.position.left-c.originalPosition.left)||null,l=parseInt(c.element.css("top"),10)+(c.position.top-c.originalPosition.top)||null,h.animate||this.element.css(e.extend(s,{top:l,left:a})),c.helper.height(c.size.height),c.helper.width(c.size.width),this._helper&&!h.animate&&this._proportionallyResize()),e("body").css("cursor","auto"),this.element.removeClass("ui-resizable-resizing"),this._propagate("stop",t),this._helper&&this.helper.remove(),!1},_updatePrevProperties:function(){this.prevPosition={top:this.position.top,left:this.position.left},this.prevSize={width:this.size.width,height:this.size.height}},_applyChanges:function(){var e={};return this.position.top!==this.prevPosition.top&&(e.top=this.position.top+"px"),this.position.left!==this.prevPosition.left&&(e.left=this.position.left+"px"),this.size.width!==this.prevSize.width&&(e.width=this.size.width+"px"),this.size.height!==this.prevSize.height&&(e.height=this.size.height+"px"),this.helper.css(e),e},_updateVirtualBoundaries:function(e){var t,i,n,o,r,s=this.options;r={minWidth:this._isNumber(s.minWidth)?s.minWidth:0,maxWidth:this._isNumber(s.maxWidth)?s.maxWidth:1/0,minHeight:this._isNumber(s.minHeight)?s.minHeight:0,maxHeight:this._isNumber(s.maxHeight)?s.maxHeight:1/0},(this._aspectRatio||e)&&(t=r.minHeight*this.aspectRatio,n=r.minWidth/this.aspectRatio,i=r.maxHeight*this.aspectRatio,o=r.maxWidth/this.aspectRatio,t>r.minWidth&&(r.minWidth=t),n>r.minHeight&&(r.minHeight=n),i<r.maxWidth&&(r.maxWidth=i),o<r.maxHeight&&(r.maxHeight=o)),this._vBoundaries=r},_updateCache:function(e){this.offset=this.helper.offset(),this._isNumber(e.left)&&(this.position.left=e.left),this._isNumber(e.top)&&(this.position.top=e.top),this._isNumber(e.height)&&(this.size.height=e.height),this._isNumber(e.width)&&(this.size.width=e.width)},_updateRatio:function(e){var t=this.position,i=this.size,n=this.axis;return this._isNumber(e.height)?e.width=e.height*this.aspectRatio:this._isNumber(e.width)&&(e.height=e.width/this.aspectRatio),"sw"===n&&(e.left=t.left+(i.width-e.width),e.top=null),"nw"===n&&(e.top=t.top+(i.height-e.height),e.left=t.left+(i.width-e.width)),e},_respectSize:function(e){var t=this._vBoundaries,i=this.axis,n=this._isNumber(e.width)&&t.maxWidth&&t.maxWidth<e.width,o=this._isNumber(e.height)&&t.maxHeight&&t.maxHeight<e.height,r=this._isNumber(e.width)&&t.minWidth&&t.minWidth>e.width,s=this._isNumber(e.height)&&t.minHeight&&t.minHeight>e.height,a=this.originalPosition.left+this.originalSize.width,l=this.position.top+this.size.height,h=/sw|nw|w/.test(i),c=/nw|ne|n/.test(i);return r&&(e.width=t.minWidth),s&&(e.height=t.minHeight),n&&(e.width=t.maxWidth),o&&(e.height=t.maxHeight),r&&h&&(e.left=a-t.minWidth),n&&h&&(e.left=a-t.maxWidth),s&&c&&(e.top=l-t.minHeight),o&&c&&(e.top=l-t.maxHeight),e.width||e.height||e.left||!e.top?e.width||e.height||e.top||!e.left||(e.left=null):e.top=null,e},_getPaddingPlusBorderDimensions:function(e){for(var t=0,i=[],n=[e.css("borderTopWidth"),e.css("borderRightWidth"),e.css("borderBottomWidth"),e.css("borderLeftWidth")],o=[e.css("paddingTop"),e.css("paddingRight"),e.css("paddingBottom"),e.css("paddingLeft")];4>t;t++)i[t]=parseInt(n[t],10)||0,i[t]+=parseInt(o[t],10)||0;return{height:i[0]+i[2],width:i[1]+i[3]}},_proportionallyResize:function(){if(this._proportionallyResizeElements.length)for(var e,t=0,i=this.helper||this.element;t<this._proportionallyResizeElements.length;t++)e=this._proportionallyResizeElements[t],this.outerDimensions||(this.outerDimensions=this._getPaddingPlusBorderDimensions(e)),e.css({height:i.height()-this.outerDimensions.height||0,width:i.width()-this.outerDimensions.width||0})},_renderProxy:function(){var t=this.element,i=this.options;this.elementOffset=t.offset(),this._helper?(this.helper=this.helper||e("<div style='overflow:hidden;'></div>"),this.helper.addClass(this._helper).css({width:this.element.outerWidth()-1,height:this.element.outerHeight()-1,position:"absolute",left:this.elementOffset.left+"px",top:this.elementOffset.top+"px",zIndex:++i.zIndex}),this.helper.appendTo("body").disableSelection()):this.helper=this.element},_change:{e:function(e,t){return{width:this.originalSize.width+t}},w:function(e,t){var i=this.originalSize,n=this.originalPosition;return{left:n.left+t,width:i.width-t}},n:function(e,t,i){var n=this.originalSize,o=this.originalPosition;return{top:o.top+i,height:n.height-i}},s:function(e,t,i){return{height:this.originalSize.height+i}},se:function(t,i,n){return e.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[t,i,n]))},sw:function(t,i,n){return e.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[t,i,n]))},ne:function(t,i,n){return e.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[t,i,n]))},nw:function(t,i,n){return e.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[t,i,n]))}},_propagate:function(t,i){e.ui.plugin.call(this,t,[i,this.ui()]),"resize"!==t&&this._trigger(t,i,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}}),e.ui.plugin.add("resizable","animate",{stop:function(t){var i=e(this).resizable("instance"),n=i.options,o=i._proportionallyResizeElements,r=o.length&&/textarea/i.test(o[0].nodeName),s=r&&i._hasScroll(o[0],"left")?0:i.sizeDiff.height,a=r?0:i.sizeDiff.width,l={width:i.size.width-a,height:i.size.height-s},h=parseInt(i.element.css("left"),10)+(i.position.left-i.originalPosition.left)||null,c=parseInt(i.element.css("top"),10)+(i.position.top-i.originalPosition.top)||null;i.element.animate(e.extend(l,c&&h?{top:c,left:h}:{}),{duration:n.animateDuration,easing:n.animateEasing,step:function(){var n={width:parseInt(i.element.css("width"),10),height:parseInt(i.element.css("height"),10),top:parseInt(i.element.css("top"),10),left:parseInt(i.element.css("left"),10)};o&&o.length&&e(o[0]).css({width:n.width,height:n.height}),i._updateCache(n),i._propagate("resize",t)}})}}),e.ui.plugin.add("resizable","containment",{start:function(){var t,i,n,o,r,s,a,l=e(this).resizable("instance"),h=l.options,c=l.element,d=h.containment,u=d instanceof e?d.get(0):/parent/.test(d)?c.parent().get(0):d;u&&(l.containerElement=e(u),/document/.test(d)||d===document?(l.containerOffset={left:0,top:0},l.containerPosition={left:0,top:0},l.parentData={element:e(document),left:0,top:0,width:e(document).width(),height:e(document).height()||document.body.parentNode.scrollHeight}):(t=e(u),i=[],e(["Top","Right","Left","Bottom"]).each(function(e,n){i[e]=l._num(t.css("padding"+n))}),l.containerOffset=t.offset(),l.containerPosition=t.position(),l.containerSize={height:t.innerHeight()-i[3],width:t.innerWidth()-i[1]},n=l.containerOffset,o=l.containerSize.height,r=l.containerSize.width,s=l._hasScroll(u,"left")?u.scrollWidth:r,a=l._hasScroll(u)?u.scrollHeight:o,l.parentData={element:u,left:n.left,top:n.top,width:s,height:a}))},resize:function(t){var i,n,o,r,s=e(this).resizable("instance"),a=s.options,l=s.containerOffset,h=s.position,c=s._aspectRatio||t.shiftKey,d={top:0,left:0},u=s.containerElement,p=!0;u[0]!==document&&/static/.test(u.css("position"))&&(d=l),h.left<(s._helper?l.left:0)&&(s.size.width=s.size.width+(s._helper?s.position.left-l.left:s.position.left-d.left),c&&(s.size.height=s.size.width/s.aspectRatio,p=!1),s.position.left=a.helper?l.left:0),h.top<(s._helper?l.top:0)&&(s.size.height=s.size.height+(s._helper?s.position.top-l.top:s.position.top),c&&(s.size.width=s.size.height*s.aspectRatio,p=!1),s.position.top=s._helper?l.top:0),o=s.containerElement.get(0)===s.element.parent().get(0),r=/relative|absolute/.test(s.containerElement.css("position")),o&&r?(s.offset.left=s.parentData.left+s.position.left,s.offset.top=s.parentData.top+s.position.top):(s.offset.left=s.element.offset().left,s.offset.top=s.element.offset().top),i=Math.abs(s.sizeDiff.width+(s._helper?s.offset.left-d.left:s.offset.left-l.left)),n=Math.abs(s.sizeDiff.height+(s._helper?s.offset.top-d.top:s.offset.top-l.top)),i+s.size.width>=s.parentData.width&&(s.size.width=s.parentData.width-i,c&&(s.size.height=s.size.width/s.aspectRatio,p=!1)),n+s.size.height>=s.parentData.height&&(s.size.height=s.parentData.height-n,c&&(s.size.width=s.size.height*s.aspectRatio,p=!1)),p||(s.position.left=s.prevPosition.left,s.position.top=s.prevPosition.top,s.size.width=s.prevSize.width,s.size.height=s.prevSize.height)
},stop:function(){var t=e(this).resizable("instance"),i=t.options,n=t.containerOffset,o=t.containerPosition,r=t.containerElement,s=e(t.helper),a=s.offset(),l=s.outerWidth()-t.sizeDiff.width,h=s.outerHeight()-t.sizeDiff.height;t._helper&&!i.animate&&/relative/.test(r.css("position"))&&e(this).css({left:a.left-o.left-n.left,width:l,height:h}),t._helper&&!i.animate&&/static/.test(r.css("position"))&&e(this).css({left:a.left-o.left-n.left,width:l,height:h})}}),e.ui.plugin.add("resizable","alsoResize",{start:function(){var t=e(this).resizable("instance"),i=t.options;e(i.alsoResize).each(function(){var t=e(this);t.data("ui-resizable-alsoresize",{width:parseInt(t.width(),10),height:parseInt(t.height(),10),left:parseInt(t.css("left"),10),top:parseInt(t.css("top"),10)})})},resize:function(t,i){var n=e(this).resizable("instance"),o=n.options,r=n.originalSize,s=n.originalPosition,a={height:n.size.height-r.height||0,width:n.size.width-r.width||0,top:n.position.top-s.top||0,left:n.position.left-s.left||0};e(o.alsoResize).each(function(){var t=e(this),n=e(this).data("ui-resizable-alsoresize"),o={},r=t.parents(i.originalElement[0]).length?["width","height"]:["width","height","top","left"];e.each(r,function(e,t){var i=(n[t]||0)+(a[t]||0);i&&i>=0&&(o[t]=i||null)}),t.css(o)})},stop:function(){e(this).removeData("resizable-alsoresize")}}),e.ui.plugin.add("resizable","ghost",{start:function(){var t=e(this).resizable("instance"),i=t.options,n=t.size;t.ghost=t.originalElement.clone(),t.ghost.css({opacity:.25,display:"block",position:"relative",height:n.height,width:n.width,margin:0,left:0,top:0}).addClass("ui-resizable-ghost").addClass("string"==typeof i.ghost?i.ghost:""),t.ghost.appendTo(t.helper)},resize:function(){var t=e(this).resizable("instance");t.ghost&&t.ghost.css({position:"relative",height:t.size.height,width:t.size.width})},stop:function(){var t=e(this).resizable("instance");t.ghost&&t.helper&&t.helper.get(0).removeChild(t.ghost.get(0))}}),e.ui.plugin.add("resizable","grid",{resize:function(){var t,i=e(this).resizable("instance"),n=i.options,o=i.size,r=i.originalSize,s=i.originalPosition,a=i.axis,l="number"==typeof n.grid?[n.grid,n.grid]:n.grid,h=l[0]||1,c=l[1]||1,d=Math.round((o.width-r.width)/h)*h,u=Math.round((o.height-r.height)/c)*c,p=r.width+d,f=r.height+u,g=n.maxWidth&&n.maxWidth<p,m=n.maxHeight&&n.maxHeight<f,y=n.minWidth&&n.minWidth>p,b=n.minHeight&&n.minHeight>f;n.grid=l,y&&(p+=h),b&&(f+=c),g&&(p-=h),m&&(f-=c),/^(se|s|e)$/.test(a)?(i.size.width=p,i.size.height=f):/^(ne)$/.test(a)?(i.size.width=p,i.size.height=f,i.position.top=s.top-u):/^(sw)$/.test(a)?(i.size.width=p,i.size.height=f,i.position.left=s.left-d):((0>=f-c||0>=p-h)&&(t=i._getPaddingPlusBorderDimensions(this)),f-c>0?(i.size.height=f,i.position.top=s.top-u):(f=c-t.height,i.size.height=f,i.position.top=s.top+r.height-f),p-h>0?(i.size.width=p,i.position.left=s.left-d):(p=h-t.width,i.size.width=p,i.position.left=s.left+r.width-p))}});var a,l=(e.ui.resizable,e.widget("ui.sortable",e.ui.mouse,{version:"1.11.4",widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1e3,activate:null,beforeStop:null,change:null,deactivate:null,out:null,over:null,receive:null,remove:null,sort:null,start:null,stop:null,update:null},_isOverAxis:function(e,t,i){return e>=t&&t+i>e},_isFloating:function(e){return/left|right/.test(e.css("float"))||/inline|table-cell/.test(e.css("display"))},_create:function(){this.containerCache={},this.element.addClass("ui-sortable"),this.refresh(),this.offset=this.element.offset(),this._mouseInit(),this._setHandleClassName(),this.ready=!0},_setOption:function(e,t){this._super(e,t),"handle"===e&&this._setHandleClassName()},_setHandleClassName:function(){this.element.find(".ui-sortable-handle").removeClass("ui-sortable-handle"),e.each(this.items,function(){(this.instance.options.handle?this.item.find(this.instance.options.handle):this.item).addClass("ui-sortable-handle")})},_destroy:function(){this.element.removeClass("ui-sortable ui-sortable-disabled").find(".ui-sortable-handle").removeClass("ui-sortable-handle"),this._mouseDestroy();for(var e=this.items.length-1;e>=0;e--)this.items[e].item.removeData(this.widgetName+"-item");return this},_mouseCapture:function(t,i){var n=null,o=!1,r=this;return this.reverting?!1:this.options.disabled||"static"===this.options.type?!1:(this._refreshItems(t),e(t.target).parents().each(function(){return e.data(this,r.widgetName+"-item")===r?(n=e(this),!1):void 0}),e.data(t.target,r.widgetName+"-item")===r&&(n=e(t.target)),n&&(!this.options.handle||i||(e(this.options.handle,n).find("*").addBack().each(function(){this===t.target&&(o=!0)}),o))?(this.currentItem=n,this._removeCurrentsFromItems(),!0):!1)},_mouseStart:function(t,i,n){var o,r,s=this.options;if(this.currentContainer=this,this.refreshPositions(),this.helper=this._createHelper(t),this._cacheHelperProportions(),this._cacheMargins(),this.scrollParent=this.helper.scrollParent(),this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},e.extend(this.offset,{click:{left:t.pageX-this.offset.left,top:t.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.helper.css("position","absolute"),this.cssPosition=this.helper.css("position"),this.originalPosition=this._generatePosition(t),this.originalPageX=t.pageX,this.originalPageY=t.pageY,s.cursorAt&&this._adjustOffsetFromHelper(s.cursorAt),this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]},this.helper[0]!==this.currentItem[0]&&this.currentItem.hide(),this._createPlaceholder(),s.containment&&this._setContainment(),s.cursor&&"auto"!==s.cursor&&(r=this.document.find("body"),this.storedCursor=r.css("cursor"),r.css("cursor",s.cursor),this.storedStylesheet=e("<style>*{ cursor: "+s.cursor+" !important; }</style>").appendTo(r)),s.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",s.opacity)),s.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",s.zIndex)),this.scrollParent[0]!==this.document[0]&&"HTML"!==this.scrollParent[0].tagName&&(this.overflowOffset=this.scrollParent.offset()),this._trigger("start",t,this._uiHash()),this._preserveHelperProportions||this._cacheHelperProportions(),!n)for(o=this.containers.length-1;o>=0;o--)this.containers[o]._trigger("activate",t,this._uiHash(this));return e.ui.ddmanager&&(e.ui.ddmanager.current=this),e.ui.ddmanager&&!s.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t),this.dragging=!0,this.helper.addClass("ui-sortable-helper"),this._mouseDrag(t),!0},_mouseDrag:function(t){var i,n,o,r,s=this.options,a=!1;for(this.position=this._generatePosition(t),this.positionAbs=this._convertPositionTo("absolute"),this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs),this.options.scroll&&(this.scrollParent[0]!==this.document[0]&&"HTML"!==this.scrollParent[0].tagName?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-t.pageY<s.scrollSensitivity?this.scrollParent[0].scrollTop=a=this.scrollParent[0].scrollTop+s.scrollSpeed:t.pageY-this.overflowOffset.top<s.scrollSensitivity&&(this.scrollParent[0].scrollTop=a=this.scrollParent[0].scrollTop-s.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-t.pageX<s.scrollSensitivity?this.scrollParent[0].scrollLeft=a=this.scrollParent[0].scrollLeft+s.scrollSpeed:t.pageX-this.overflowOffset.left<s.scrollSensitivity&&(this.scrollParent[0].scrollLeft=a=this.scrollParent[0].scrollLeft-s.scrollSpeed)):(t.pageY-this.document.scrollTop()<s.scrollSensitivity?a=this.document.scrollTop(this.document.scrollTop()-s.scrollSpeed):this.window.height()-(t.pageY-this.document.scrollTop())<s.scrollSensitivity&&(a=this.document.scrollTop(this.document.scrollTop()+s.scrollSpeed)),t.pageX-this.document.scrollLeft()<s.scrollSensitivity?a=this.document.scrollLeft(this.document.scrollLeft()-s.scrollSpeed):this.window.width()-(t.pageX-this.document.scrollLeft())<s.scrollSensitivity&&(a=this.document.scrollLeft(this.document.scrollLeft()+s.scrollSpeed))),a!==!1&&e.ui.ddmanager&&!s.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t)),this.positionAbs=this._convertPositionTo("absolute"),this.options.axis&&"y"===this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"===this.options.axis||(this.helper[0].style.top=this.position.top+"px"),i=this.items.length-1;i>=0;i--)if(n=this.items[i],o=n.item[0],r=this._intersectsWithPointer(n),r&&n.instance===this.currentContainer&&o!==this.currentItem[0]&&this.placeholder[1===r?"next":"prev"]()[0]!==o&&!e.contains(this.placeholder[0],o)&&("semi-dynamic"===this.options.type?!e.contains(this.element[0],o):!0)){if(this.direction=1===r?"down":"up","pointer"!==this.options.tolerance&&!this._intersectsWithSides(n))break;this._rearrange(t,n),this._trigger("change",t,this._uiHash());break}return this._contactContainers(t),e.ui.ddmanager&&e.ui.ddmanager.drag(this,t),this._trigger("sort",t,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(t,i){if(t){if(e.ui.ddmanager&&!this.options.dropBehaviour&&e.ui.ddmanager.drop(this,t),this.options.revert){var n=this,o=this.placeholder.offset(),r=this.options.axis,s={};r&&"x"!==r||(s.left=o.left-this.offset.parent.left-this.margins.left+(this.offsetParent[0]===this.document[0].body?0:this.offsetParent[0].scrollLeft)),r&&"y"!==r||(s.top=o.top-this.offset.parent.top-this.margins.top+(this.offsetParent[0]===this.document[0].body?0:this.offsetParent[0].scrollTop)),this.reverting=!0,e(this.helper).animate(s,parseInt(this.options.revert,10)||500,function(){n._clear(t)})}else this._clear(t,i);return!1}},cancel:function(){if(this.dragging){this._mouseUp({target:null}),"original"===this.options.helper?this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper"):this.currentItem.show();for(var t=this.containers.length-1;t>=0;t--)this.containers[t]._trigger("deactivate",null,this._uiHash(this)),this.containers[t].containerCache.over&&(this.containers[t]._trigger("out",null,this._uiHash(this)),this.containers[t].containerCache.over=0)}return this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),"original"!==this.options.helper&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),e.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?e(this.domPosition.prev).after(this.currentItem):e(this.domPosition.parent).prepend(this.currentItem)),this},serialize:function(t){var i=this._getItemsAsjQuery(t&&t.connected),n=[];return t=t||{},e(i).each(function(){var i=(e(t.item||this).attr(t.attribute||"id")||"").match(t.expression||/(.+)[\-=_](.+)/);i&&n.push((t.key||i[1]+"[]")+"="+(t.key&&t.expression?i[1]:i[2]))}),!n.length&&t.key&&n.push(t.key+"="),n.join("&")},toArray:function(t){var i=this._getItemsAsjQuery(t&&t.connected),n=[];return t=t||{},i.each(function(){n.push(e(t.item||this).attr(t.attribute||"id")||"")}),n},_intersectsWith:function(e){var t=this.positionAbs.left,i=t+this.helperProportions.width,n=this.positionAbs.top,o=n+this.helperProportions.height,r=e.left,s=r+e.width,a=e.top,l=a+e.height,h=this.offset.click.top,c=this.offset.click.left,d="x"===this.options.axis||n+h>a&&l>n+h,u="y"===this.options.axis||t+c>r&&s>t+c,p=d&&u;return"pointer"===this.options.tolerance||this.options.forcePointerForContainers||"pointer"!==this.options.tolerance&&this.helperProportions[this.floating?"width":"height"]>e[this.floating?"width":"height"]?p:r<t+this.helperProportions.width/2&&i-this.helperProportions.width/2<s&&a<n+this.helperProportions.height/2&&o-this.helperProportions.height/2<l},_intersectsWithPointer:function(e){var t="x"===this.options.axis||this._isOverAxis(this.positionAbs.top+this.offset.click.top,e.top,e.height),i="y"===this.options.axis||this._isOverAxis(this.positionAbs.left+this.offset.click.left,e.left,e.width),n=t&&i,o=this._getDragVerticalDirection(),r=this._getDragHorizontalDirection();return n?this.floating?r&&"right"===r||"down"===o?2:1:o&&("down"===o?2:1):!1},_intersectsWithSides:function(e){var t=this._isOverAxis(this.positionAbs.top+this.offset.click.top,e.top+e.height/2,e.height),i=this._isOverAxis(this.positionAbs.left+this.offset.click.left,e.left+e.width/2,e.width),n=this._getDragVerticalDirection(),o=this._getDragHorizontalDirection();return this.floating&&o?"right"===o&&i||"left"===o&&!i:n&&("down"===n&&t||"up"===n&&!t)},_getDragVerticalDirection:function(){var e=this.positionAbs.top-this.lastPositionAbs.top;return 0!==e&&(e>0?"down":"up")},_getDragHorizontalDirection:function(){var e=this.positionAbs.left-this.lastPositionAbs.left;return 0!==e&&(e>0?"right":"left")},refresh:function(e){return this._refreshItems(e),this._setHandleClassName(),this.refreshPositions(),this},_connectWith:function(){var e=this.options;return e.connectWith.constructor===String?[e.connectWith]:e.connectWith},_getItemsAsjQuery:function(t){function i(){a.push(this)}var n,o,r,s,a=[],l=[],h=this._connectWith();if(h&&t)for(n=h.length-1;n>=0;n--)for(r=e(h[n],this.document[0]),o=r.length-1;o>=0;o--)s=e.data(r[o],this.widgetFullName),s&&s!==this&&!s.options.disabled&&l.push([e.isFunction(s.options.items)?s.options.items.call(s.element):e(s.options.items,s.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),s]);for(l.push([e.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):e(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]),n=l.length-1;n>=0;n--)l[n][0].each(i);return e(a)},_removeCurrentsFromItems:function(){var t=this.currentItem.find(":data("+this.widgetName+"-item)");this.items=e.grep(this.items,function(e){for(var i=0;i<t.length;i++)if(t[i]===e.item[0])return!1;return!0})},_refreshItems:function(t){this.items=[],this.containers=[this];var i,n,o,r,s,a,l,h,c=this.items,d=[[e.isFunction(this.options.items)?this.options.items.call(this.element[0],t,{item:this.currentItem}):e(this.options.items,this.element),this]],u=this._connectWith();if(u&&this.ready)for(i=u.length-1;i>=0;i--)for(o=e(u[i],this.document[0]),n=o.length-1;n>=0;n--)r=e.data(o[n],this.widgetFullName),r&&r!==this&&!r.options.disabled&&(d.push([e.isFunction(r.options.items)?r.options.items.call(r.element[0],t,{item:this.currentItem}):e(r.options.items,r.element),r]),this.containers.push(r));for(i=d.length-1;i>=0;i--)for(s=d[i][1],a=d[i][0],n=0,h=a.length;h>n;n++)l=e(a[n]),l.data(this.widgetName+"-item",s),c.push({item:l,instance:s,width:0,height:0,left:0,top:0})},refreshPositions:function(t){this.floating=this.items.length?"x"===this.options.axis||this._isFloating(this.items[0].item):!1,this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset());var i,n,o,r;for(i=this.items.length-1;i>=0;i--)n=this.items[i],n.instance!==this.currentContainer&&this.currentContainer&&n.item[0]!==this.currentItem[0]||(o=this.options.toleranceElement?e(this.options.toleranceElement,n.item):n.item,t||(n.width=o.outerWidth(),n.height=o.outerHeight()),r=o.offset(),n.left=r.left,n.top=r.top);if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(i=this.containers.length-1;i>=0;i--)r=this.containers[i].element.offset(),this.containers[i].containerCache.left=r.left,this.containers[i].containerCache.top=r.top,this.containers[i].containerCache.width=this.containers[i].element.outerWidth(),this.containers[i].containerCache.height=this.containers[i].element.outerHeight();return this},_createPlaceholder:function(t){t=t||this;var i,n=t.options;n.placeholder&&n.placeholder.constructor!==String||(i=n.placeholder,n.placeholder={element:function(){var n=t.currentItem[0].nodeName.toLowerCase(),o=e("<"+n+">",t.document[0]).addClass(i||t.currentItem[0].className+" ui-sortable-placeholder").removeClass("ui-sortable-helper");return"tbody"===n?t._createTrPlaceholder(t.currentItem.find("tr").eq(0),e("<tr>",t.document[0]).appendTo(o)):"tr"===n?t._createTrPlaceholder(t.currentItem,o):"img"===n&&o.attr("src",t.currentItem.attr("src")),i||o.css("visibility","hidden"),o},update:function(e,o){(!i||n.forcePlaceholderSize)&&(o.height()||o.height(t.currentItem.innerHeight()-parseInt(t.currentItem.css("paddingTop")||0,10)-parseInt(t.currentItem.css("paddingBottom")||0,10)),o.width()||o.width(t.currentItem.innerWidth()-parseInt(t.currentItem.css("paddingLeft")||0,10)-parseInt(t.currentItem.css("paddingRight")||0,10)))}}),t.placeholder=e(n.placeholder.element.call(t.element,t.currentItem)),t.currentItem.after(t.placeholder),n.placeholder.update(t,t.placeholder)},_createTrPlaceholder:function(t,i){var n=this;t.children().each(function(){e("<td>&#160;</td>",n.document[0]).attr("colspan",e(this).attr("colspan")||1).appendTo(i)})},_contactContainers:function(t){var i,n,o,r,s,a,l,h,c,d,u=null,p=null;for(i=this.containers.length-1;i>=0;i--)if(!e.contains(this.currentItem[0],this.containers[i].element[0]))if(this._intersectsWith(this.containers[i].containerCache)){if(u&&e.contains(this.containers[i].element[0],u.element[0]))continue;u=this.containers[i],p=i}else this.containers[i].containerCache.over&&(this.containers[i]._trigger("out",t,this._uiHash(this)),this.containers[i].containerCache.over=0);if(u)if(1===this.containers.length)this.containers[p].containerCache.over||(this.containers[p]._trigger("over",t,this._uiHash(this)),this.containers[p].containerCache.over=1);else{for(o=1e4,r=null,c=u.floating||this._isFloating(this.currentItem),s=c?"left":"top",a=c?"width":"height",d=c?"clientX":"clientY",n=this.items.length-1;n>=0;n--)e.contains(this.containers[p].element[0],this.items[n].item[0])&&this.items[n].item[0]!==this.currentItem[0]&&(l=this.items[n].item.offset()[s],h=!1,t[d]-l>this.items[n][a]/2&&(h=!0),Math.abs(t[d]-l)<o&&(o=Math.abs(t[d]-l),r=this.items[n],this.direction=h?"up":"down"));if(!r&&!this.options.dropOnEmpty)return;if(this.currentContainer===this.containers[p])return void(this.currentContainer.containerCache.over||(this.containers[p]._trigger("over",t,this._uiHash()),this.currentContainer.containerCache.over=1));r?this._rearrange(t,r,null,!0):this._rearrange(t,null,this.containers[p].element,!0),this._trigger("change",t,this._uiHash()),this.containers[p]._trigger("change",t,this._uiHash(this)),this.currentContainer=this.containers[p],this.options.placeholder.update(this.currentContainer,this.placeholder),this.containers[p]._trigger("over",t,this._uiHash(this)),this.containers[p].containerCache.over=1}},_createHelper:function(t){var i=this.options,n=e.isFunction(i.helper)?e(i.helper.apply(this.element[0],[t,this.currentItem])):"clone"===i.helper?this.currentItem.clone():this.currentItem;return n.parents("body").length||e("parent"!==i.appendTo?i.appendTo:this.currentItem[0].parentNode)[0].appendChild(n[0]),n[0]===this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}),(!n[0].style.width||i.forceHelperSize)&&n.width(this.currentItem.width()),(!n[0].style.height||i.forceHelperSize)&&n.height(this.currentItem.height()),n},_adjustOffsetFromHelper:function(t){"string"==typeof t&&(t=t.split(" ")),e.isArray(t)&&(t={left:+t[0],top:+t[1]||0}),"left"in t&&(this.offset.click.left=t.left+this.margins.left),"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left),"top"in t&&(this.offset.click.top=t.top+this.margins.top),"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var t=this.offsetParent.offset();return"absolute"===this.cssPosition&&this.scrollParent[0]!==this.document[0]&&e.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]===this.document[0].body||this.offsetParent[0].tagName&&"html"===this.offsetParent[0].tagName.toLowerCase()&&e.ui.ie)&&(t={top:0,left:0}),{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"===this.cssPosition){var e=this.currentItem.position();return{top:e.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:e.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t,i,n,o=this.options;"parent"===o.containment&&(o.containment=this.helper[0].parentNode),("document"===o.containment||"window"===o.containment)&&(this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,"document"===o.containment?this.document.width():this.window.width()-this.helperProportions.width-this.margins.left,("document"===o.containment?this.document.width():this.window.height()||this.document[0].body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]),/^(document|window|parent)$/.test(o.containment)||(t=e(o.containment)[0],i=e(o.containment).offset(),n="hidden"!==e(t).css("overflow"),this.containment=[i.left+(parseInt(e(t).css("borderLeftWidth"),10)||0)+(parseInt(e(t).css("paddingLeft"),10)||0)-this.margins.left,i.top+(parseInt(e(t).css("borderTopWidth"),10)||0)+(parseInt(e(t).css("paddingTop"),10)||0)-this.margins.top,i.left+(n?Math.max(t.scrollWidth,t.offsetWidth):t.offsetWidth)-(parseInt(e(t).css("borderLeftWidth"),10)||0)-(parseInt(e(t).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,i.top+(n?Math.max(t.scrollHeight,t.offsetHeight):t.offsetHeight)-(parseInt(e(t).css("borderTopWidth"),10)||0)-(parseInt(e(t).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top])},_convertPositionTo:function(t,i){i||(i=this.position);var n="absolute"===t?1:-1,o="absolute"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,r=/(html|body)/i.test(o[0].tagName);return{top:i.top+this.offset.relative.top*n+this.offset.parent.top*n-("fixed"===this.cssPosition?-this.scrollParent.scrollTop():r?0:o.scrollTop())*n,left:i.left+this.offset.relative.left*n+this.offset.parent.left*n-("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():r?0:o.scrollLeft())*n}},_generatePosition:function(t){var i,n,o=this.options,r=t.pageX,s=t.pageY,a="absolute"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,l=/(html|body)/i.test(a[0].tagName);return"relative"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&this.scrollParent[0]!==this.offsetParent[0]||(this.offset.relative=this._getRelativeOffset()),this.originalPosition&&(this.containment&&(t.pageX-this.offset.click.left<this.containment[0]&&(r=this.containment[0]+this.offset.click.left),t.pageY-this.offset.click.top<this.containment[1]&&(s=this.containment[1]+this.offset.click.top),t.pageX-this.offset.click.left>this.containment[2]&&(r=this.containment[2]+this.offset.click.left),t.pageY-this.offset.click.top>this.containment[3]&&(s=this.containment[3]+this.offset.click.top)),o.grid&&(i=this.originalPageY+Math.round((s-this.originalPageY)/o.grid[1])*o.grid[1],s=this.containment?i-this.offset.click.top>=this.containment[1]&&i-this.offset.click.top<=this.containment[3]?i:i-this.offset.click.top>=this.containment[1]?i-o.grid[1]:i+o.grid[1]:i,n=this.originalPageX+Math.round((r-this.originalPageX)/o.grid[0])*o.grid[0],r=this.containment?n-this.offset.click.left>=this.containment[0]&&n-this.offset.click.left<=this.containment[2]?n:n-this.offset.click.left>=this.containment[0]?n-o.grid[0]:n+o.grid[0]:n)),{top:s-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.scrollParent.scrollTop():l?0:a.scrollTop()),left:r-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():l?0:a.scrollLeft())}},_rearrange:function(e,t,i,n){i?i[0].appendChild(this.placeholder[0]):t.item[0].parentNode.insertBefore(this.placeholder[0],"down"===this.direction?t.item[0]:t.item[0].nextSibling),this.counter=this.counter?++this.counter:1;var o=this.counter;this._delay(function(){o===this.counter&&this.refreshPositions(!n)})},_clear:function(e,t){function i(e,t,i){return function(n){i._trigger(e,n,t._uiHash(t))}}this.reverting=!1;var n,o=[];if(!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem),this._noFinalSort=null,this.helper[0]===this.currentItem[0]){for(n in this._storedCSS)("auto"===this._storedCSS[n]||"static"===this._storedCSS[n])&&(this._storedCSS[n]="");this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else this.currentItem.show();for(this.fromOutside&&!t&&o.push(function(e){this._trigger("receive",e,this._uiHash(this.fromOutside))}),!this.fromOutside&&this.domPosition.prev===this.currentItem.prev().not(".ui-sortable-helper")[0]&&this.domPosition.parent===this.currentItem.parent()[0]||t||o.push(function(e){this._trigger("update",e,this._uiHash())}),this!==this.currentContainer&&(t||(o.push(function(e){this._trigger("remove",e,this._uiHash())}),o.push(function(e){return function(t){e._trigger("receive",t,this._uiHash(this))}}.call(this,this.currentContainer)),o.push(function(e){return function(t){e._trigger("update",t,this._uiHash(this))}}.call(this,this.currentContainer)))),n=this.containers.length-1;n>=0;n--)t||o.push(i("deactivate",this,this.containers[n])),this.containers[n].containerCache.over&&(o.push(i("out",this,this.containers[n])),this.containers[n].containerCache.over=0);if(this.storedCursor&&(this.document.find("body").css("cursor",this.storedCursor),this.storedStylesheet.remove()),this._storedOpacity&&this.helper.css("opacity",this._storedOpacity),this._storedZIndex&&this.helper.css("zIndex","auto"===this._storedZIndex?"":this._storedZIndex),this.dragging=!1,t||this._trigger("beforeStop",e,this._uiHash()),this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.cancelHelperRemoval||(this.helper[0]!==this.currentItem[0]&&this.helper.remove(),this.helper=null),!t){for(n=0;n<o.length;n++)o[n].call(this,e);this._trigger("stop",e,this._uiHash())}return this.fromOutside=!1,!this.cancelHelperRemoval},_trigger:function(){e.Widget.prototype._trigger.apply(this,arguments)===!1&&this.cancel()},_uiHash:function(t){var i=t||this;return{helper:i.helper,placeholder:i.placeholder||e([]),position:i.position,originalPosition:i.originalPosition,offset:i.positionAbs,item:i.currentItem,sender:t?t.element:null}}}),"ui-button ui-widget ui-state-default ui-corner-all"),h="ui-button-icons-only ui-button-icon-only ui-button-text-icons ui-button-text-icon-primary ui-button-text-icon-secondary ui-button-text-only",c=function(){var t=e(this);setTimeout(function(){t.find(":ui-button").button("refresh")},1)},d=function(t){var i=t.name,n=t.form,o=e([]);return i&&(i=i.replace(/'/g,"\\'"),o=n?e(n).find("[name='"+i+"'][type=radio]"):e("[name='"+i+"'][type=radio]",t.ownerDocument).filter(function(){return!this.form})),o};e.widget("ui.button",{version:"1.11.4",defaultElement:"<button>",options:{disabled:null,text:!0,label:null,icons:{primary:null,secondary:null}},_create:function(){this.element.closest("form").unbind("reset"+this.eventNamespace).bind("reset"+this.eventNamespace,c),"boolean"!=typeof this.options.disabled?this.options.disabled=!!this.element.prop("disabled"):this.element.prop("disabled",this.options.disabled),this._determineButtonType(),this.hasTitle=!!this.buttonElement.attr("title");var t=this,i=this.options,n="checkbox"===this.type||"radio"===this.type,o=n?"":"ui-state-active";null===i.label&&(i.label="input"===this.type?this.buttonElement.val():this.buttonElement.html()),this._hoverable(this.buttonElement),this.buttonElement.addClass(l).attr("role","button").bind("mouseenter"+this.eventNamespace,function(){i.disabled||this===a&&e(this).addClass("ui-state-active")}).bind("mouseleave"+this.eventNamespace,function(){i.disabled||e(this).removeClass(o)}).bind("click"+this.eventNamespace,function(e){i.disabled&&(e.preventDefault(),e.stopImmediatePropagation())}),this._on({focus:function(){this.buttonElement.addClass("ui-state-focus")},blur:function(){this.buttonElement.removeClass("ui-state-focus")}}),n&&this.element.bind("change"+this.eventNamespace,function(){t.refresh()}),"checkbox"===this.type?this.buttonElement.bind("click"+this.eventNamespace,function(){return i.disabled?!1:void 0}):"radio"===this.type?this.buttonElement.bind("click"+this.eventNamespace,function(){if(i.disabled)return!1;e(this).addClass("ui-state-active"),t.buttonElement.attr("aria-pressed","true");var n=t.element[0];d(n).not(n).map(function(){return e(this).button("widget")[0]}).removeClass("ui-state-active").attr("aria-pressed","false")}):(this.buttonElement.bind("mousedown"+this.eventNamespace,function(){return i.disabled?!1:(e(this).addClass("ui-state-active"),a=this,void t.document.one("mouseup",function(){a=null}))}).bind("mouseup"+this.eventNamespace,function(){return i.disabled?!1:void e(this).removeClass("ui-state-active")}).bind("keydown"+this.eventNamespace,function(t){return i.disabled?!1:void((t.keyCode===e.ui.keyCode.SPACE||t.keyCode===e.ui.keyCode.ENTER)&&e(this).addClass("ui-state-active"))}).bind("keyup"+this.eventNamespace+" blur"+this.eventNamespace,function(){e(this).removeClass("ui-state-active")}),this.buttonElement.is("a")&&this.buttonElement.keyup(function(t){t.keyCode===e.ui.keyCode.SPACE&&e(this).click()})),this._setOption("disabled",i.disabled),this._resetButton()},_determineButtonType:function(){var e,t,i;this.type=this.element.is("[type=checkbox]")?"checkbox":this.element.is("[type=radio]")?"radio":this.element.is("input")?"input":"button","checkbox"===this.type||"radio"===this.type?(e=this.element.parents().last(),t="label[for='"+this.element.attr("id")+"']",this.buttonElement=e.find(t),this.buttonElement.length||(e=e.length?e.siblings():this.element.siblings(),this.buttonElement=e.filter(t),this.buttonElement.length||(this.buttonElement=e.find(t))),this.element.addClass("ui-helper-hidden-accessible"),i=this.element.is(":checked"),i&&this.buttonElement.addClass("ui-state-active"),this.buttonElement.prop("aria-pressed",i)):this.buttonElement=this.element},widget:function(){return this.buttonElement},_destroy:function(){this.element.removeClass("ui-helper-hidden-accessible"),this.buttonElement.removeClass(l+" ui-state-active "+h).removeAttr("role").removeAttr("aria-pressed").html(this.buttonElement.find(".ui-button-text").html()),this.hasTitle||this.buttonElement.removeAttr("title")},_setOption:function(e,t){return this._super(e,t),"disabled"===e?(this.widget().toggleClass("ui-state-disabled",!!t),this.element.prop("disabled",!!t),void(t&&this.buttonElement.removeClass("checkbox"===this.type||"radio"===this.type?"ui-state-focus":"ui-state-focus ui-state-active"))):void this._resetButton()},refresh:function(){var t=this.element.is("input, button")?this.element.is(":disabled"):this.element.hasClass("ui-button-disabled");
t!==this.options.disabled&&this._setOption("disabled",t),"radio"===this.type?d(this.element[0]).each(function(){e(this).is(":checked")?e(this).button("widget").addClass("ui-state-active").attr("aria-pressed","true"):e(this).button("widget").removeClass("ui-state-active").attr("aria-pressed","false")}):"checkbox"===this.type&&(this.element.is(":checked")?this.buttonElement.addClass("ui-state-active").attr("aria-pressed","true"):this.buttonElement.removeClass("ui-state-active").attr("aria-pressed","false"))},_resetButton:function(){if("input"===this.type)return void(this.options.label&&this.element.val(this.options.label));var t=this.buttonElement.removeClass(h),i=e("<span></span>",this.document[0]).addClass("ui-button-text").html(this.options.label).appendTo(t.empty()).text(),n=this.options.icons,o=n.primary&&n.secondary,r=[];n.primary||n.secondary?(this.options.text&&r.push("ui-button-text-icon"+(o?"s":n.primary?"-primary":"-secondary")),n.primary&&t.prepend("<span class='ui-button-icon-primary ui-icon "+n.primary+"'></span>"),n.secondary&&t.append("<span class='ui-button-icon-secondary ui-icon "+n.secondary+"'></span>"),this.options.text||(r.push(o?"ui-button-icons-only":"ui-button-icon-only"),this.hasTitle||t.attr("title",e.trim(i)))):r.push("ui-button-text-only"),t.addClass(r.join(" "))}}),e.widget("ui.buttonset",{version:"1.11.4",options:{items:"button, input[type=button], input[type=submit], input[type=reset], input[type=checkbox], input[type=radio], a, :data(ui-button)"},_create:function(){this.element.addClass("ui-buttonset")},_init:function(){this.refresh()},_setOption:function(e,t){"disabled"===e&&this.buttons.button("option",e,t),this._super(e,t)},refresh:function(){var t="rtl"===this.element.css("direction"),i=this.element.find(this.options.items),n=i.filter(":ui-button");i.not(":ui-button").button(),n.button("refresh"),this.buttons=i.map(function(){return e(this).button("widget")[0]}).removeClass("ui-corner-all ui-corner-left ui-corner-right").filter(":first").addClass(t?"ui-corner-right":"ui-corner-left").end().filter(":last").addClass(t?"ui-corner-left":"ui-corner-right").end().end()},_destroy:function(){this.element.removeClass("ui-buttonset"),this.buttons.map(function(){return e(this).button("widget")[0]}).removeClass("ui-corner-left ui-corner-right").end().button("destroy")}});e.ui.button,e.widget("ui.dialog",{version:"1.11.4",options:{appendTo:"body",autoOpen:!0,buttons:[],closeOnEscape:!0,closeText:"Close",dialogClass:"",draggable:!0,hide:null,height:"auto",maxHeight:null,maxWidth:null,minHeight:150,minWidth:150,modal:!1,position:{my:"center",at:"center",of:window,collision:"fit",using:function(t){var i=e(this).css(t).offset().top;0>i&&e(this).css("top",t.top-i)}},resizable:!0,show:null,title:null,width:300,beforeClose:null,close:null,drag:null,dragStart:null,dragStop:null,focus:null,open:null,resize:null,resizeStart:null,resizeStop:null},sizeRelatedOptions:{buttons:!0,height:!0,maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0,width:!0},resizableRelatedOptions:{maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0},_create:function(){this.originalCss={display:this.element[0].style.display,width:this.element[0].style.width,minHeight:this.element[0].style.minHeight,maxHeight:this.element[0].style.maxHeight,height:this.element[0].style.height},this.originalPosition={parent:this.element.parent(),index:this.element.parent().children().index(this.element)},this.originalTitle=this.element.attr("title"),this.options.title=this.options.title||this.originalTitle,this._createWrapper(),this.element.show().removeAttr("title").addClass("ui-dialog-content ui-widget-content").appendTo(this.uiDialog),this._createTitlebar(),this._createButtonPane(),this.options.draggable&&e.fn.draggable&&this._makeDraggable(),this.options.resizable&&e.fn.resizable&&this._makeResizable(),this._isOpen=!1,this._trackFocus()},_init:function(){this.options.autoOpen&&this.open()},_appendTo:function(){var t=this.options.appendTo;return t&&(t.jquery||t.nodeType)?e(t):this.document.find(t||"body").eq(0)},_destroy:function(){var e,t=this.originalPosition;this._untrackInstance(),this._destroyOverlay(),this.element.removeUniqueId().removeClass("ui-dialog-content ui-widget-content").css(this.originalCss).detach(),this.uiDialog.stop(!0,!0).remove(),this.originalTitle&&this.element.attr("title",this.originalTitle),e=t.parent.children().eq(t.index),e.length&&e[0]!==this.element[0]?e.before(this.element):t.parent.append(this.element)},widget:function(){return this.uiDialog},disable:e.noop,enable:e.noop,close:function(t){var i,n=this;if(this._isOpen&&this._trigger("beforeClose",t)!==!1){if(this._isOpen=!1,this._focusedElement=null,this._destroyOverlay(),this._untrackInstance(),!this.opener.filter(":focusable").focus().length)try{i=this.document[0].activeElement,i&&"body"!==i.nodeName.toLowerCase()&&e(i).blur()}catch(o){}this._hide(this.uiDialog,this.options.hide,function(){n._trigger("close",t)})}},isOpen:function(){return this._isOpen},moveToTop:function(){this._moveToTop()},_moveToTop:function(t,i){var n=!1,o=this.uiDialog.siblings(".ui-front:visible").map(function(){return+e(this).css("z-index")}).get(),r=Math.max.apply(null,o);return r>=+this.uiDialog.css("z-index")&&(this.uiDialog.css("z-index",r+1),n=!0),n&&!i&&this._trigger("focus",t),n},open:function(){var t=this;return this._isOpen?void(this._moveToTop()&&this._focusTabbable()):(this._isOpen=!0,this.opener=e(this.document[0].activeElement),this._size(),this._position(),this._createOverlay(),this._moveToTop(null,!0),this.overlay&&this.overlay.css("z-index",this.uiDialog.css("z-index")-1),this._show(this.uiDialog,this.options.show,function(){t._focusTabbable(),t._trigger("focus")}),this._makeFocusTarget(),void this._trigger("open"))},_focusTabbable:function(){var e=this._focusedElement;e||(e=this.element.find("[autofocus]")),e.length||(e=this.element.find(":tabbable")),e.length||(e=this.uiDialogButtonPane.find(":tabbable")),e.length||(e=this.uiDialogTitlebarClose.filter(":tabbable")),e.length||(e=this.uiDialog),e.eq(0).focus()},_keepFocus:function(t){function i(){var t=this.document[0].activeElement,i=this.uiDialog[0]===t||e.contains(this.uiDialog[0],t);i||this._focusTabbable()}t.preventDefault(),i.call(this),this._delay(i)},_createWrapper:function(){this.uiDialog=e("<div>").addClass("ui-dialog ui-widget ui-widget-content ui-corner-all ui-front "+this.options.dialogClass).hide().attr({tabIndex:-1,role:"dialog"}).appendTo(this._appendTo()),this._on(this.uiDialog,{keydown:function(t){if(this.options.closeOnEscape&&!t.isDefaultPrevented()&&t.keyCode&&t.keyCode===e.ui.keyCode.ESCAPE)return t.preventDefault(),void this.close(t);if(t.keyCode===e.ui.keyCode.TAB&&!t.isDefaultPrevented()){var i=this.uiDialog.find(":tabbable"),n=i.filter(":first"),o=i.filter(":last");t.target!==o[0]&&t.target!==this.uiDialog[0]||t.shiftKey?t.target!==n[0]&&t.target!==this.uiDialog[0]||!t.shiftKey||(this._delay(function(){o.focus()}),t.preventDefault()):(this._delay(function(){n.focus()}),t.preventDefault())}},mousedown:function(e){this._moveToTop(e)&&this._focusTabbable()}}),this.element.find("[aria-describedby]").length||this.uiDialog.attr({"aria-describedby":this.element.uniqueId().attr("id")})},_createTitlebar:function(){var t;this.uiDialogTitlebar=e("<div>").addClass("ui-dialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix").prependTo(this.uiDialog),this._on(this.uiDialogTitlebar,{mousedown:function(t){e(t.target).closest(".ui-dialog-titlebar-close")||this.uiDialog.focus()}}),this.uiDialogTitlebarClose=e("<button type='button'></button>").button({label:this.options.closeText,icons:{primary:"ui-icon-closethick"},text:!1}).addClass("ui-dialog-titlebar-close").appendTo(this.uiDialogTitlebar),this._on(this.uiDialogTitlebarClose,{click:function(e){e.preventDefault(),this.close(e)}}),t=e("<span>").uniqueId().addClass("ui-dialog-title").prependTo(this.uiDialogTitlebar),this._title(t),this.uiDialog.attr({"aria-labelledby":t.attr("id")})},_title:function(e){this.options.title||e.html("&#160;"),e.text(this.options.title)},_createButtonPane:function(){this.uiDialogButtonPane=e("<div>").addClass("ui-dialog-buttonpane ui-widget-content ui-helper-clearfix"),this.uiButtonSet=e("<div>").addClass("ui-dialog-buttonset").appendTo(this.uiDialogButtonPane),this._createButtons()},_createButtons:function(){var t=this,i=this.options.buttons;return this.uiDialogButtonPane.remove(),this.uiButtonSet.empty(),e.isEmptyObject(i)||e.isArray(i)&&!i.length?void this.uiDialog.removeClass("ui-dialog-buttons"):(e.each(i,function(i,n){var o,r;n=e.isFunction(n)?{click:n,text:i}:n,n=e.extend({type:"button"},n),o=n.click,n.click=function(){o.apply(t.element[0],arguments)},r={icons:n.icons,text:n.showText},delete n.icons,delete n.showText,e("<button></button>",n).button(r).appendTo(t.uiButtonSet)}),this.uiDialog.addClass("ui-dialog-buttons"),void this.uiDialogButtonPane.appendTo(this.uiDialog))},_makeDraggable:function(){function t(e){return{position:e.position,offset:e.offset}}var i=this,n=this.options;this.uiDialog.draggable({cancel:".ui-dialog-content, .ui-dialog-titlebar-close",handle:".ui-dialog-titlebar",containment:"document",start:function(n,o){e(this).addClass("ui-dialog-dragging"),i._blockFrames(),i._trigger("dragStart",n,t(o))},drag:function(e,n){i._trigger("drag",e,t(n))},stop:function(o,r){var s=r.offset.left-i.document.scrollLeft(),a=r.offset.top-i.document.scrollTop();n.position={my:"left top",at:"left"+(s>=0?"+":"")+s+" top"+(a>=0?"+":"")+a,of:i.window},e(this).removeClass("ui-dialog-dragging"),i._unblockFrames(),i._trigger("dragStop",o,t(r))}})},_makeResizable:function(){function t(e){return{originalPosition:e.originalPosition,originalSize:e.originalSize,position:e.position,size:e.size}}var i=this,n=this.options,o=n.resizable,r=this.uiDialog.css("position"),s="string"==typeof o?o:"n,e,s,w,se,sw,ne,nw";this.uiDialog.resizable({cancel:".ui-dialog-content",containment:"document",alsoResize:this.element,maxWidth:n.maxWidth,maxHeight:n.maxHeight,minWidth:n.minWidth,minHeight:this._minHeight(),handles:s,start:function(n,o){e(this).addClass("ui-dialog-resizing"),i._blockFrames(),i._trigger("resizeStart",n,t(o))},resize:function(e,n){i._trigger("resize",e,t(n))},stop:function(o,r){var s=i.uiDialog.offset(),a=s.left-i.document.scrollLeft(),l=s.top-i.document.scrollTop();n.height=i.uiDialog.height(),n.width=i.uiDialog.width(),n.position={my:"left top",at:"left"+(a>=0?"+":"")+a+" top"+(l>=0?"+":"")+l,of:i.window},e(this).removeClass("ui-dialog-resizing"),i._unblockFrames(),i._trigger("resizeStop",o,t(r))}}).css("position",r)},_trackFocus:function(){this._on(this.widget(),{focusin:function(t){this._makeFocusTarget(),this._focusedElement=e(t.target)}})},_makeFocusTarget:function(){this._untrackInstance(),this._trackingInstances().unshift(this)},_untrackInstance:function(){var t=this._trackingInstances(),i=e.inArray(this,t);-1!==i&&t.splice(i,1)},_trackingInstances:function(){var e=this.document.data("ui-dialog-instances");return e||(e=[],this.document.data("ui-dialog-instances",e)),e},_minHeight:function(){var e=this.options;return"auto"===e.height?e.minHeight:Math.min(e.minHeight,e.height)},_position:function(){var e=this.uiDialog.is(":visible");e||this.uiDialog.show(),this.uiDialog.position(this.options.position),e||this.uiDialog.hide()},_setOptions:function(t){var i=this,n=!1,o={};e.each(t,function(e,t){i._setOption(e,t),e in i.sizeRelatedOptions&&(n=!0),e in i.resizableRelatedOptions&&(o[e]=t)}),n&&(this._size(),this._position()),this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option",o)},_setOption:function(e,t){var i,n,o=this.uiDialog;"dialogClass"===e&&o.removeClass(this.options.dialogClass).addClass(t),"disabled"!==e&&(this._super(e,t),"appendTo"===e&&this.uiDialog.appendTo(this._appendTo()),"buttons"===e&&this._createButtons(),"closeText"===e&&this.uiDialogTitlebarClose.button({label:""+t}),"draggable"===e&&(i=o.is(":data(ui-draggable)"),i&&!t&&o.draggable("destroy"),!i&&t&&this._makeDraggable()),"position"===e&&this._position(),"resizable"===e&&(n=o.is(":data(ui-resizable)"),n&&!t&&o.resizable("destroy"),n&&"string"==typeof t&&o.resizable("option","handles",t),n||t===!1||this._makeResizable()),"title"===e&&this._title(this.uiDialogTitlebar.find(".ui-dialog-title")))},_size:function(){var e,t,i,n=this.options;this.element.show().css({width:"auto",minHeight:0,maxHeight:"none",height:0}),n.minWidth>n.width&&(n.width=n.minWidth),e=this.uiDialog.css({height:"auto",width:n.width}).outerHeight(),t=Math.max(0,n.minHeight-e),i="number"==typeof n.maxHeight?Math.max(0,n.maxHeight-e):"none","auto"===n.height?this.element.css({minHeight:t,maxHeight:i,height:"auto"}):this.element.height(Math.max(0,n.height-e)),this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option","minHeight",this._minHeight())},_blockFrames:function(){this.iframeBlocks=this.document.find("iframe").map(function(){var t=e(this);return e("<div>").css({position:"absolute",width:t.outerWidth(),height:t.outerHeight()}).appendTo(t.parent()).offset(t.offset())[0]})},_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),delete this.iframeBlocks)},_allowInteraction:function(t){return e(t.target).closest(".ui-dialog").length?!0:!!e(t.target).closest(".ui-datepicker").length},_createOverlay:function(){if(this.options.modal){var t=!0;this._delay(function(){t=!1}),this.document.data("ui-dialog-overlays")||this._on(this.document,{focusin:function(e){t||this._allowInteraction(e)||(e.preventDefault(),this._trackingInstances()[0]._focusTabbable())}}),this.overlay=e("<div>").addClass("ui-widget-overlay ui-front").appendTo(this._appendTo()),this._on(this.overlay,{mousedown:"_keepFocus"}),this.document.data("ui-dialog-overlays",(this.document.data("ui-dialog-overlays")||0)+1)}},_destroyOverlay:function(){if(this.options.modal&&this.overlay){var e=this.document.data("ui-dialog-overlays")-1;e?this.document.data("ui-dialog-overlays",e):this.document.unbind("focusin").removeData("ui-dialog-overlays"),this.overlay.remove(),this.overlay=null}}}),e.widget("ui.spinner",{version:"1.11.4",defaultElement:"<input>",widgetEventPrefix:"spin",options:{culture:null,icons:{down:"ui-icon-triangle-1-s",up:"ui-icon-triangle-1-n"},incremental:!0,max:null,min:null,numberFormat:null,page:10,step:1,change:null,spin:null,start:null,stop:null},_create:function(){this._setOption("max",this.options.max),this._setOption("min",this.options.min),this._setOption("step",this.options.step),""!==this.value()&&this._value(this.element.val(),!0),this._draw(),this._on(this._events),this._refresh(),this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_getCreateOptions:function(){var t={},i=this.element;return e.each(["min","max","step"],function(e,n){var o=i.attr(n);void 0!==o&&o.length&&(t[n]=o)}),t},_events:{keydown:function(e){this._start(e)&&this._keydown(e)&&e.preventDefault()},keyup:"_stop",focus:function(){this.previous=this.element.val()},blur:function(e){return this.cancelBlur?void delete this.cancelBlur:(this._stop(),this._refresh(),void(this.previous!==this.element.val()&&this._trigger("change",e)))},mousewheel:function(e,t){if(t){if(!this.spinning&&!this._start(e))return!1;this._spin((t>0?1:-1)*this.options.step,e),clearTimeout(this.mousewheelTimer),this.mousewheelTimer=this._delay(function(){this.spinning&&this._stop(e)},100),e.preventDefault()}},"mousedown .ui-spinner-button":function(t){function i(){var e=this.element[0]===this.document[0].activeElement;e||(this.element.focus(),this.previous=n,this._delay(function(){this.previous=n}))}var n;n=this.element[0]===this.document[0].activeElement?this.previous:this.element.val(),t.preventDefault(),i.call(this),this.cancelBlur=!0,this._delay(function(){delete this.cancelBlur,i.call(this)}),this._start(t)!==!1&&this._repeat(null,e(t.currentTarget).hasClass("ui-spinner-up")?1:-1,t)},"mouseup .ui-spinner-button":"_stop","mouseenter .ui-spinner-button":function(t){return e(t.currentTarget).hasClass("ui-state-active")?this._start(t)===!1?!1:void this._repeat(null,e(t.currentTarget).hasClass("ui-spinner-up")?1:-1,t):void 0},"mouseleave .ui-spinner-button":"_stop"},_draw:function(){var e=this.uiSpinner=this.element.addClass("ui-spinner-input").attr("autocomplete","off").wrap(this._uiSpinnerHtml()).parent().append(this._buttonHtml());this.element.attr("role","spinbutton"),this.buttons=e.find(".ui-spinner-button").attr("tabIndex",-1).button().removeClass("ui-corner-all"),this.buttons.height()>Math.ceil(.5*e.height())&&e.height()>0&&e.height(e.height()),this.options.disabled&&this.disable()},_keydown:function(t){var i=this.options,n=e.ui.keyCode;switch(t.keyCode){case n.UP:return this._repeat(null,1,t),!0;case n.DOWN:return this._repeat(null,-1,t),!0;case n.PAGE_UP:return this._repeat(null,i.page,t),!0;case n.PAGE_DOWN:return this._repeat(null,-i.page,t),!0}return!1},_uiSpinnerHtml:function(){return"<span class='ui-spinner ui-widget ui-widget-content ui-corner-all'></span>"},_buttonHtml:function(){return"<a class='ui-spinner-button ui-spinner-up ui-corner-tr'><span class='ui-icon "+this.options.icons.up+"'>&#9650;</span></a><a class='ui-spinner-button ui-spinner-down ui-corner-br'><span class='ui-icon "+this.options.icons.down+"'>&#9660;</span></a>"},_start:function(e){return this.spinning||this._trigger("start",e)!==!1?(this.counter||(this.counter=1),this.spinning=!0,!0):!1},_repeat:function(e,t,i){e=e||500,clearTimeout(this.timer),this.timer=this._delay(function(){this._repeat(40,t,i)},e),this._spin(t*this.options.step,i)},_spin:function(e,t){var i=this.value()||0;this.counter||(this.counter=1),i=this._adjustValue(i+e*this._increment(this.counter)),this.spinning&&this._trigger("spin",t,{value:i})===!1||(this._value(i),this.counter++)},_increment:function(t){var i=this.options.incremental;return i?e.isFunction(i)?i(t):Math.floor(t*t*t/5e4-t*t/500+17*t/200+1):1},_precision:function(){var e=this._precisionOf(this.options.step);return null!==this.options.min&&(e=Math.max(e,this._precisionOf(this.options.min))),e},_precisionOf:function(e){var t=e.toString(),i=t.indexOf(".");return-1===i?0:t.length-i-1},_adjustValue:function(e){var t,i,n=this.options;return t=null!==n.min?n.min:0,i=e-t,i=Math.round(i/n.step)*n.step,e=t+i,e=parseFloat(e.toFixed(this._precision())),null!==n.max&&e>n.max?n.max:null!==n.min&&e<n.min?n.min:e},_stop:function(e){this.spinning&&(clearTimeout(this.timer),clearTimeout(this.mousewheelTimer),this.counter=0,this.spinning=!1,this._trigger("stop",e))},_setOption:function(e,t){if("culture"===e||"numberFormat"===e){var i=this._parse(this.element.val());return this.options[e]=t,void this.element.val(this._format(i))}("max"===e||"min"===e||"step"===e)&&"string"==typeof t&&(t=this._parse(t)),"icons"===e&&(this.buttons.first().find(".ui-icon").removeClass(this.options.icons.up).addClass(t.up),this.buttons.last().find(".ui-icon").removeClass(this.options.icons.down).addClass(t.down)),this._super(e,t),"disabled"===e&&(this.widget().toggleClass("ui-state-disabled",!!t),this.element.prop("disabled",!!t),this.buttons.button(t?"disable":"enable"))},_setOptions:n(function(e){this._super(e)}),_parse:function(e){return"string"==typeof e&&""!==e&&(e=window.Globalize&&this.options.numberFormat?Globalize.parseFloat(e,10,this.options.culture):+e),""===e||isNaN(e)?null:e},_format:function(e){return""===e?"":window.Globalize&&this.options.numberFormat?Globalize.format(e,this.options.numberFormat,this.options.culture):e},_refresh:function(){this.element.attr({"aria-valuemin":this.options.min,"aria-valuemax":this.options.max,"aria-valuenow":this._parse(this.element.val())})},isValid:function(){var e=this.value();return null===e?!1:e===this._adjustValue(e)},_value:function(e,t){var i;""!==e&&(i=this._parse(e),null!==i&&(t||(i=this._adjustValue(i)),e=this._format(i))),this.element.val(e),this._refresh()},_destroy:function(){this.element.removeClass("ui-spinner-input").prop("disabled",!1).removeAttr("autocomplete").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow"),this.uiSpinner.replaceWith(this.element)},stepUp:n(function(e){this._stepUp(e)}),_stepUp:function(e){this._start()&&(this._spin((e||1)*this.options.step),this._stop())},stepDown:n(function(e){this._stepDown(e)}),_stepDown:function(e){this._start()&&(this._spin((e||1)*-this.options.step),this._stop())},pageUp:n(function(e){this._stepUp((e||1)*this.options.page)}),pageDown:n(function(e){this._stepDown((e||1)*this.options.page)}),value:function(e){return arguments.length?void n(this._value).call(this,e):this._parse(this.element.val())},widget:function(){return this.uiSpinner}}),e.widget("ui.tabs",{version:"1.11.4",delay:300,options:{active:null,collapsible:!1,event:"click",heightStyle:"content",hide:null,show:null,activate:null,beforeActivate:null,beforeLoad:null,load:null},_isLocal:function(){var e=/#.*$/;return function(t){var i,n;t=t.cloneNode(!1),i=t.href.replace(e,""),n=location.href.replace(e,"");try{i=decodeURIComponent(i)}catch(o){}try{n=decodeURIComponent(n)}catch(o){}return t.hash.length>1&&i===n}}(),_create:function(){var t=this,i=this.options;this.running=!1,this.element.addClass("ui-tabs ui-widget ui-widget-content ui-corner-all").toggleClass("ui-tabs-collapsible",i.collapsible),this._processTabs(),i.active=this._initialActive(),e.isArray(i.disabled)&&(i.disabled=e.unique(i.disabled.concat(e.map(this.tabs.filter(".ui-state-disabled"),function(e){return t.tabs.index(e)}))).sort()),this.active=this.options.active!==!1&&this.anchors.length?this._findActive(i.active):e(),this._refresh(),this.active.length&&this.load(i.active)},_initialActive:function(){var t=this.options.active,i=this.options.collapsible,n=location.hash.substring(1);return null===t&&(n&&this.tabs.each(function(i,o){return e(o).attr("aria-controls")===n?(t=i,!1):void 0}),null===t&&(t=this.tabs.index(this.tabs.filter(".ui-tabs-active"))),(null===t||-1===t)&&(t=this.tabs.length?0:!1)),t!==!1&&(t=this.tabs.index(this.tabs.eq(t)),-1===t&&(t=i?!1:0)),!i&&t===!1&&this.anchors.length&&(t=0),t},_getCreateEventData:function(){return{tab:this.active,panel:this.active.length?this._getPanelForTab(this.active):e()}},_tabKeydown:function(t){var i=e(this.document[0].activeElement).closest("li"),n=this.tabs.index(i),o=!0;if(!this._handlePageNav(t)){switch(t.keyCode){case e.ui.keyCode.RIGHT:case e.ui.keyCode.DOWN:n++;break;case e.ui.keyCode.UP:case e.ui.keyCode.LEFT:o=!1,n--;break;case e.ui.keyCode.END:n=this.anchors.length-1;break;case e.ui.keyCode.HOME:n=0;break;case e.ui.keyCode.SPACE:return t.preventDefault(),clearTimeout(this.activating),void this._activate(n);case e.ui.keyCode.ENTER:return t.preventDefault(),clearTimeout(this.activating),void this._activate(n===this.options.active?!1:n);default:return}t.preventDefault(),clearTimeout(this.activating),n=this._focusNextTab(n,o),t.ctrlKey||t.metaKey||(i.attr("aria-selected","false"),this.tabs.eq(n).attr("aria-selected","true"),this.activating=this._delay(function(){this.option("active",n)},this.delay))}},_panelKeydown:function(t){this._handlePageNav(t)||t.ctrlKey&&t.keyCode===e.ui.keyCode.UP&&(t.preventDefault(),this.active.focus())},_handlePageNav:function(t){return t.altKey&&t.keyCode===e.ui.keyCode.PAGE_UP?(this._activate(this._focusNextTab(this.options.active-1,!1)),!0):t.altKey&&t.keyCode===e.ui.keyCode.PAGE_DOWN?(this._activate(this._focusNextTab(this.options.active+1,!0)),!0):void 0},_findNextTab:function(t,i){function n(){return t>o&&(t=0),0>t&&(t=o),t}for(var o=this.tabs.length-1;-1!==e.inArray(n(),this.options.disabled);)t=i?t+1:t-1;return t},_focusNextTab:function(e,t){return e=this._findNextTab(e,t),this.tabs.eq(e).focus(),e},_setOption:function(e,t){return"active"===e?void this._activate(t):"disabled"===e?void this._setupDisabled(t):(this._super(e,t),"collapsible"===e&&(this.element.toggleClass("ui-tabs-collapsible",t),t||this.options.active!==!1||this._activate(0)),"event"===e&&this._setupEvents(t),void("heightStyle"===e&&this._setupHeightStyle(t)))},_sanitizeSelector:function(e){return e?e.replace(/[!"$%&'()*+,.\/:;<=>?@\[\]\^`{|}~]/g,"\\$&"):""},refresh:function(){var t=this.options,i=this.tablist.children(":has(a[href])");t.disabled=e.map(i.filter(".ui-state-disabled"),function(e){return i.index(e)}),this._processTabs(),t.active!==!1&&this.anchors.length?this.active.length&&!e.contains(this.tablist[0],this.active[0])?this.tabs.length===t.disabled.length?(t.active=!1,this.active=e()):this._activate(this._findNextTab(Math.max(0,t.active-1),!1)):t.active=this.tabs.index(this.active):(t.active=!1,this.active=e()),this._refresh()},_refresh:function(){this._setupDisabled(this.options.disabled),this._setupEvents(this.options.event),this._setupHeightStyle(this.options.heightStyle),this.tabs.not(this.active).attr({"aria-selected":"false","aria-expanded":"false",tabIndex:-1}),this.panels.not(this._getPanelForTab(this.active)).hide().attr({"aria-hidden":"true"}),this.active.length?(this.active.addClass("ui-tabs-active ui-state-active").attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0}),this._getPanelForTab(this.active).show().attr({"aria-hidden":"false"})):this.tabs.eq(0).attr("tabIndex",0)},_processTabs:function(){var t=this,i=this.tabs,n=this.anchors,o=this.panels;this.tablist=this._getList().addClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all").attr("role","tablist").delegate("> li","mousedown"+this.eventNamespace,function(t){e(this).is(".ui-state-disabled")&&t.preventDefault()}).delegate(".ui-tabs-anchor","focus"+this.eventNamespace,function(){e(this).closest("li").is(".ui-state-disabled")&&this.blur()}),this.tabs=this.tablist.find("> li:has(a[href])").addClass("ui-state-default ui-corner-top").attr({role:"tab",tabIndex:-1}),this.anchors=this.tabs.map(function(){return e("a",this)[0]}).addClass("ui-tabs-anchor").attr({role:"presentation",tabIndex:-1}),this.panels=e(),this.anchors.each(function(i,n){var o,r,s,a=e(n).uniqueId().attr("id"),l=e(n).closest("li"),h=l.attr("aria-controls");t._isLocal(n)?(o=n.hash,s=o.substring(1),r=t.element.find(t._sanitizeSelector(o))):(s=l.attr("aria-controls")||e({}).uniqueId()[0].id,o="#"+s,r=t.element.find(o),r.length||(r=t._createPanel(s),r.insertAfter(t.panels[i-1]||t.tablist)),r.attr("aria-live","polite")),r.length&&(t.panels=t.panels.add(r)),h&&l.data("ui-tabs-aria-controls",h),l.attr({"aria-controls":s,"aria-labelledby":a}),r.attr("aria-labelledby",a)}),this.panels.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").attr("role","tabpanel"),i&&(this._off(i.not(this.tabs)),this._off(n.not(this.anchors)),this._off(o.not(this.panels)))},_getList:function(){return this.tablist||this.element.find("ol,ul").eq(0)},_createPanel:function(t){return e("<div>").attr("id",t).addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").data("ui-tabs-destroy",!0)},_setupDisabled:function(t){e.isArray(t)&&(t.length?t.length===this.anchors.length&&(t=!0):t=!1);for(var i,n=0;i=this.tabs[n];n++)t===!0||-1!==e.inArray(n,t)?e(i).addClass("ui-state-disabled").attr("aria-disabled","true"):e(i).removeClass("ui-state-disabled").removeAttr("aria-disabled");this.options.disabled=t},_setupEvents:function(t){var i={};t&&e.each(t.split(" "),function(e,t){i[t]="_eventHandler"}),this._off(this.anchors.add(this.tabs).add(this.panels)),this._on(!0,this.anchors,{click:function(e){e.preventDefault()}}),this._on(this.anchors,i),this._on(this.tabs,{keydown:"_tabKeydown"}),this._on(this.panels,{keydown:"_panelKeydown"}),this._focusable(this.tabs),this._hoverable(this.tabs)},_setupHeightStyle:function(t){var i,n=this.element.parent();"fill"===t?(i=n.height(),i-=this.element.outerHeight()-this.element.height(),this.element.siblings(":visible").each(function(){var t=e(this),n=t.css("position");"absolute"!==n&&"fixed"!==n&&(i-=t.outerHeight(!0))}),this.element.children().not(this.panels).each(function(){i-=e(this).outerHeight(!0)}),this.panels.each(function(){e(this).height(Math.max(0,i-e(this).innerHeight()+e(this).height()))}).css("overflow","auto")):"auto"===t&&(i=0,this.panels.each(function(){i=Math.max(i,e(this).height("").height())}).height(i))},_eventHandler:function(t){var i=this.options,n=this.active,o=e(t.currentTarget),r=o.closest("li"),s=r[0]===n[0],a=s&&i.collapsible,l=a?e():this._getPanelForTab(r),h=n.length?this._getPanelForTab(n):e(),c={oldTab:n,oldPanel:h,newTab:a?e():r,newPanel:l};t.preventDefault(),r.hasClass("ui-state-disabled")||r.hasClass("ui-tabs-loading")||this.running||s&&!i.collapsible||this._trigger("beforeActivate",t,c)===!1||(i.active=a?!1:this.tabs.index(r),this.active=s?e():r,this.xhr&&this.xhr.abort(),h.length||l.length||e.error("jQuery UI Tabs: Mismatching fragment identifier."),l.length&&this.load(this.tabs.index(r),t),this._toggle(t,c))},_toggle:function(t,i){function n(){r.running=!1,r._trigger("activate",t,i)}function o(){i.newTab.closest("li").addClass("ui-tabs-active ui-state-active"),s.length&&r.options.show?r._show(s,r.options.show,n):(s.show(),n())}var r=this,s=i.newPanel,a=i.oldPanel;this.running=!0,a.length&&this.options.hide?this._hide(a,this.options.hide,function(){i.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active"),o()}):(i.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active"),a.hide(),o()),a.attr("aria-hidden","true"),i.oldTab.attr({"aria-selected":"false","aria-expanded":"false"}),s.length&&a.length?i.oldTab.attr("tabIndex",-1):s.length&&this.tabs.filter(function(){return 0===e(this).attr("tabIndex")}).attr("tabIndex",-1),s.attr("aria-hidden","false"),i.newTab.attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0})},_activate:function(t){var i,n=this._findActive(t);n[0]!==this.active[0]&&(n.length||(n=this.active),i=n.find(".ui-tabs-anchor")[0],this._eventHandler({target:i,currentTarget:i,preventDefault:e.noop}))},_findActive:function(t){return t===!1?e():this.tabs.eq(t)},_getIndex:function(e){return"string"==typeof e&&(e=this.anchors.index(this.anchors.filter("[href$='"+e+"']"))),e},_destroy:function(){this.xhr&&this.xhr.abort(),this.element.removeClass("ui-tabs ui-widget ui-widget-content ui-corner-all ui-tabs-collapsible"),this.tablist.removeClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all").removeAttr("role"),this.anchors.removeClass("ui-tabs-anchor").removeAttr("role").removeAttr("tabIndex").removeUniqueId(),this.tablist.unbind(this.eventNamespace),this.tabs.add(this.panels).each(function(){e.data(this,"ui-tabs-destroy")?e(this).remove():e(this).removeClass("ui-state-default ui-state-active ui-state-disabled ui-corner-top ui-corner-bottom ui-widget-content ui-tabs-active ui-tabs-panel").removeAttr("tabIndex").removeAttr("aria-live").removeAttr("aria-busy").removeAttr("aria-selected").removeAttr("aria-labelledby").removeAttr("aria-hidden").removeAttr("aria-expanded").removeAttr("role")}),this.tabs.each(function(){var t=e(this),i=t.data("ui-tabs-aria-controls");i?t.attr("aria-controls",i).removeData("ui-tabs-aria-controls"):t.removeAttr("aria-controls")}),this.panels.show(),"content"!==this.options.heightStyle&&this.panels.css("height","")},enable:function(t){var i=this.options.disabled;i!==!1&&(void 0===t?i=!1:(t=this._getIndex(t),i=e.isArray(i)?e.map(i,function(e){return e!==t?e:null}):e.map(this.tabs,function(e,i){return i!==t?i:null})),this._setupDisabled(i))},disable:function(t){var i=this.options.disabled;if(i!==!0){if(void 0===t)i=!0;else{if(t=this._getIndex(t),-1!==e.inArray(t,i))return;i=e.isArray(i)?e.merge([t],i).sort():[t]}this._setupDisabled(i)}},load:function(t,i){t=this._getIndex(t);var n=this,o=this.tabs.eq(t),r=o.find(".ui-tabs-anchor"),s=this._getPanelForTab(o),a={tab:o,panel:s},l=function(e,t){"abort"===t&&n.panels.stop(!1,!0),o.removeClass("ui-tabs-loading"),s.removeAttr("aria-busy"),e===n.xhr&&delete n.xhr};this._isLocal(r[0])||(this.xhr=e.ajax(this._ajaxSettings(r,i,a)),this.xhr&&"canceled"!==this.xhr.statusText&&(o.addClass("ui-tabs-loading"),s.attr("aria-busy","true"),this.xhr.done(function(e,t,o){setTimeout(function(){s.html(e),n._trigger("load",i,a),l(o,t)
},1)}).fail(function(e,t){setTimeout(function(){l(e,t)},1)})))},_ajaxSettings:function(t,i,n){var o=this;return{url:t.attr("href"),beforeSend:function(t,r){return o._trigger("beforeLoad",i,e.extend({jqXHR:t,ajaxSettings:r},n))}}},_getPanelForTab:function(t){var i=e(t).attr("aria-controls");return this.element.find(this._sanitizeSelector("#"+i))}})}),function(e){define("bootstrap",["jquery","jquery-ui"],function(){return function(){if("undefined"==typeof jQuery)throw new Error("Bootstrap's JavaScript requires jQuery");+function(e){var t=e.fn.jquery.split(" ")[0].split(".");if(t[0]<2&&t[1]<9||1==t[0]&&9==t[1]&&t[2]<1||t[0]>2)throw new Error("Bootstrap's JavaScript requires jQuery version 1.9.1 or higher, but lower than version 3")}(jQuery),+function(e){function t(t){return this.each(function(){var n=e(this),o=n.data("bs.tooltip"),r="object"==typeof t&&t;(o||!/destroy|hide/.test(t))&&(o||n.data("bs.tooltip",o=new i(this,r)),"string"==typeof t&&o[t]())})}var i=function(e,t){this.type=null,this.options=null,this.enabled=null,this.timeout=null,this.hoverState=null,this.$element=null,this.inState=null,this.init("tooltip",e,t)};i.VERSION="3.3.6",i.TRANSITION_DURATION=150,i.DEFAULTS={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1,viewport:{selector:"body",padding:0}},i.prototype.init=function(t,i,n){if(this.enabled=!0,this.type=t,this.$element=e(i),this.options=this.getOptions(n),this.$viewport=this.options.viewport&&e(e.isFunction(this.options.viewport)?this.options.viewport.call(this,this.$element):this.options.viewport.selector||this.options.viewport),this.inState={click:!1,hover:!1,focus:!1},this.$element[0]instanceof document.constructor&&!this.options.selector)throw new Error("`selector` option must be specified when initializing "+this.type+" on the window.document object!");for(var o=this.options.trigger.split(" "),r=o.length;r--;){var s=o[r];if("click"==s)this.$element.on("click."+this.type,this.options.selector,e.proxy(this.toggle,this));else if("manual"!=s){var a="hover"==s?"mouseenter":"focusin",l="hover"==s?"mouseleave":"focusout";this.$element.on(a+"."+this.type,this.options.selector,e.proxy(this.enter,this)),this.$element.on(l+"."+this.type,this.options.selector,e.proxy(this.leave,this))}}this.options.selector?this._options=e.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},i.prototype.getDefaults=function(){return i.DEFAULTS},i.prototype.getOptions=function(t){return t=e.extend({},this.getDefaults(),this.$element.data(),t),t.delay&&"number"==typeof t.delay&&(t.delay={show:t.delay,hide:t.delay}),t},i.prototype.getDelegateOptions=function(){var t={},i=this.getDefaults();return this._options&&e.each(this._options,function(e,n){i[e]!=n&&(t[e]=n)}),t},i.prototype.enter=function(t){var i=t instanceof this.constructor?t:e(t.currentTarget).data("bs."+this.type);return i||(i=new this.constructor(t.currentTarget,this.getDelegateOptions()),e(t.currentTarget).data("bs."+this.type,i)),t instanceof e.Event&&(i.inState["focusin"==t.type?"focus":"hover"]=!0),i.tip().hasClass("in")||"in"==i.hoverState?void(i.hoverState="in"):(clearTimeout(i.timeout),i.hoverState="in",i.options.delay&&i.options.delay.show?void(i.timeout=setTimeout(function(){"in"==i.hoverState&&i.show()},i.options.delay.show)):i.show())},i.prototype.isInStateTrue=function(){for(var e in this.inState)if(this.inState[e])return!0;return!1},i.prototype.leave=function(t){var i=t instanceof this.constructor?t:e(t.currentTarget).data("bs."+this.type);return i||(i=new this.constructor(t.currentTarget,this.getDelegateOptions()),e(t.currentTarget).data("bs."+this.type,i)),t instanceof e.Event&&(i.inState["focusout"==t.type?"focus":"hover"]=!1),i.isInStateTrue()?void 0:(clearTimeout(i.timeout),i.hoverState="out",i.options.delay&&i.options.delay.hide?void(i.timeout=setTimeout(function(){"out"==i.hoverState&&i.hide()},i.options.delay.hide)):i.hide())},i.prototype.show=function(){var t=e.Event("show.bs."+this.type);if(this.hasContent()&&this.enabled){this.$element.trigger(t);var n=e.contains(this.$element[0].ownerDocument.documentElement,this.$element[0]);if(t.isDefaultPrevented()||!n)return;var o=this,r=this.tip(),s=this.getUID(this.type);this.setContent(),r.attr("id",s),this.$element.attr("aria-describedby",s),this.options.animation&&r.addClass("fade");var a="function"==typeof this.options.placement?this.options.placement.call(this,r[0],this.$element[0]):this.options.placement,l=/\s?auto?\s?/i,h=l.test(a);h&&(a=a.replace(l,"")||"top"),r.detach().css({top:0,left:0,display:"block"}).addClass(a).data("bs."+this.type,this),this.options.container?r.appendTo(this.options.container):r.insertAfter(this.$element),this.$element.trigger("inserted.bs."+this.type);var c=this.getPosition(),d=r[0].offsetWidth,u=r[0].offsetHeight;if(h){var p=a,f=this.getPosition(this.$viewport);a="bottom"==a&&c.bottom+u>f.bottom?"top":"top"==a&&c.top-u<f.top?"bottom":"right"==a&&c.right+d>f.width?"left":"left"==a&&c.left-d<f.left?"right":a,r.removeClass(p).addClass(a)}var g=this.getCalculatedOffset(a,c,d,u);this.applyPlacement(g,a);var m=function(){var e=o.hoverState;o.$element.trigger("shown.bs."+o.type),o.hoverState=null,"out"==e&&o.leave(o)};e.support.transition&&this.$tip.hasClass("fade")?r.one("bsTransitionEnd",m).emulateTransitionEnd(i.TRANSITION_DURATION):m()}},i.prototype.applyPlacement=function(t,i){var n=this.tip(),o=n[0].offsetWidth,r=n[0].offsetHeight,s=parseInt(n.css("margin-top"),10),a=parseInt(n.css("margin-left"),10);isNaN(s)&&(s=0),isNaN(a)&&(a=0),t.top+=s,t.left+=a,e.offset.setOffset(n[0],e.extend({using:function(e){n.css({top:Math.round(e.top),left:Math.round(e.left)})}},t),0),n.addClass("in");var l=n[0].offsetWidth,h=n[0].offsetHeight;"top"==i&&h!=r&&(t.top=t.top+r-h);var c=this.getViewportAdjustedDelta(i,t,l,h);c.left?t.left+=c.left:t.top+=c.top;var d=/top|bottom/.test(i),u=d?2*c.left-o+l:2*c.top-r+h,p=d?"offsetWidth":"offsetHeight";n.offset(t),this.replaceArrow(u,n[0][p],d)},i.prototype.replaceArrow=function(e,t,i){this.arrow().css(i?"left":"top",50*(1-e/t)+"%").css(i?"top":"left","")},i.prototype.setContent=function(){var e=this.tip(),t=this.getTitle();e.find(".tooltip-inner")[this.options.html?"html":"text"](t),e.removeClass("fade in top bottom left right")},i.prototype.hide=function(t){function n(){"in"!=o.hoverState&&r.detach(),o.$element.removeAttr("aria-describedby").trigger("hidden.bs."+o.type),t&&t()}var o=this,r=e(this.$tip),s=e.Event("hide.bs."+this.type);return this.$element.trigger(s),s.isDefaultPrevented()?void 0:(r.removeClass("in"),e.support.transition&&r.hasClass("fade")?r.one("bsTransitionEnd",n).emulateTransitionEnd(i.TRANSITION_DURATION):n(),this.hoverState=null,this)},i.prototype.fixTitle=function(){var e=this.$element;(e.attr("title")||"string"!=typeof e.attr("data-original-title"))&&e.attr("data-original-title",e.attr("title")||"").attr("title","")},i.prototype.hasContent=function(){return this.getTitle()},i.prototype.getPosition=function(t){t=t||this.$element;var i=t[0],n="BODY"==i.tagName,o=i.getBoundingClientRect();null==o.width&&(o=e.extend({},o,{width:o.right-o.left,height:o.bottom-o.top}));var r=n?{top:0,left:0}:t.offset(),s={scroll:n?document.documentElement.scrollTop||document.body.scrollTop:t.scrollTop()},a=n?{width:e(window).width(),height:e(window).height()}:null;return e.extend({},o,s,a,r)},i.prototype.getCalculatedOffset=function(e,t,i,n){return"bottom"==e?{top:t.top+t.height,left:t.left+t.width/2-i/2}:"top"==e?{top:t.top-n,left:t.left+t.width/2-i/2}:"left"==e?{top:t.top+t.height/2-n/2,left:t.left-i}:{top:t.top+t.height/2-n/2,left:t.left+t.width}},i.prototype.getViewportAdjustedDelta=function(e,t,i,n){var o={top:0,left:0};if(!this.$viewport)return o;var r=this.options.viewport&&this.options.viewport.padding||0,s=this.getPosition(this.$viewport);if(/right|left/.test(e)){var a=t.top-r-s.scroll,l=t.top+r-s.scroll+n;a<s.top?o.top=s.top-a:l>s.top+s.height&&(o.top=s.top+s.height-l)}else{var h=t.left-r,c=t.left+r+i;h<s.left?o.left=s.left-h:c>s.right&&(o.left=s.left+s.width-c)}return o},i.prototype.getTitle=function(){var e,t=this.$element,i=this.options;return e=t.attr("data-original-title")||("function"==typeof i.title?i.title.call(t[0]):i.title)},i.prototype.getUID=function(e){do e+=~~(1e6*Math.random());while(document.getElementById(e));return e},i.prototype.tip=function(){if(!this.$tip&&(this.$tip=e(this.options.template),1!=this.$tip.length))throw new Error(this.type+" `template` option must consist of exactly 1 top-level element!");return this.$tip},i.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},i.prototype.enable=function(){this.enabled=!0},i.prototype.disable=function(){this.enabled=!1},i.prototype.toggleEnabled=function(){this.enabled=!this.enabled},i.prototype.toggle=function(t){var i=this;t&&(i=e(t.currentTarget).data("bs."+this.type),i||(i=new this.constructor(t.currentTarget,this.getDelegateOptions()),e(t.currentTarget).data("bs."+this.type,i))),t?(i.inState.click=!i.inState.click,i.isInStateTrue()?i.enter(i):i.leave(i)):i.tip().hasClass("in")?i.leave(i):i.enter(i)},i.prototype.destroy=function(){var e=this;clearTimeout(this.timeout),this.hide(function(){e.$element.off("."+e.type).removeData("bs."+e.type),e.$tip&&e.$tip.detach(),e.$tip=null,e.$arrow=null,e.$viewport=null})};var n=e.fn.tooltip;e.fn.tooltip=t,e.fn.tooltip.Constructor=i,e.fn.tooltip.noConflict=function(){return e.fn.tooltip=n,this}}(jQuery),+function(e){function t(t){return this.each(function(){var n=e(this),o=n.data("bs.popover"),r="object"==typeof t&&t;(o||!/destroy|hide/.test(t))&&(o||n.data("bs.popover",o=new i(this,r)),"string"==typeof t&&o[t]())})}var i=function(e,t){this.init("popover",e,t)};if(!e.fn.tooltip)throw new Error("Popover requires tooltip.js");i.VERSION="3.3.6",i.DEFAULTS=e.extend({},e.fn.tooltip.Constructor.DEFAULTS,{placement:"right",trigger:"click",content:"",template:'<div class="popover" role="tooltip"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'}),i.prototype=e.extend({},e.fn.tooltip.Constructor.prototype),i.prototype.constructor=i,i.prototype.getDefaults=function(){return i.DEFAULTS},i.prototype.setContent=function(){var e=this.tip(),t=this.getTitle(),i=this.getContent();e.find(".popover-title")[this.options.html?"html":"text"](t),e.find(".popover-content").children().detach().end()[this.options.html?"string"==typeof i?"html":"append":"text"](i),e.removeClass("fade top bottom left right in"),e.find(".popover-title").html()||e.find(".popover-title").hide()},i.prototype.hasContent=function(){return this.getTitle()||this.getContent()},i.prototype.getContent=function(){var e=this.$element,t=this.options;return e.attr("data-content")||("function"==typeof t.content?t.content.call(e[0]):t.content)},i.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".arrow")};var n=e.fn.popover;e.fn.popover=t,e.fn.popover.Constructor=i,e.fn.popover.noConflict=function(){return e.fn.popover=n,this}}(jQuery),+function(e){function t(){var e=document.createElement("bootstrap"),t={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var i in t)if(void 0!==e.style[i])return{end:t[i]};return!1}e.fn.emulateTransitionEnd=function(t){var i=!1,n=this;e(this).one("bsTransitionEnd",function(){i=!0});var o=function(){i||e(n).trigger(e.support.transition.end)};return setTimeout(o,t),this},e(function(){e.support.transition=t(),e.support.transition&&(e.event.special.bsTransitionEnd={bindType:e.support.transition.end,delegateType:e.support.transition.end,handle:function(t){return e(t.target).is(this)?t.handleObj.handler.apply(this,arguments):void 0}})})}(jQuery)}.apply(e,arguments)})}(this),function(e){define("bootstrap-toogle",["jquery","bootstrap"],function(){return function(){+function(e){function t(t){return this.each(function(){var n=e(this),o=n.data("bs.toggle"),r="object"==typeof t&&t;o||n.data("bs.toggle",o=new i(this,r)),"string"==typeof t&&o[t]&&o[t]()})}var i=function(t,i){this.$element=e(t),this.options=e.extend({},this.defaults(),i),this.render()};i.VERSION="3.0.0",i.DEFAULTS={on:"On",off:"Off",onstyle:"primary",offstyle:"default",size:"normal",style:""},i.prototype.defaults=function(){return{on:this.$element.attr("data-on")||i.DEFAULTS.on,off:this.$element.attr("data-off")||i.DEFAULTS.off,onstyle:this.$element.attr("data-onstyle")||i.DEFAULTS.onstyle,offstyle:this.$element.attr("data-offstyle")||i.DEFAULTS.offstyle,size:this.$element.attr("data-size")||i.DEFAULTS.size,style:this.$element.attr("data-style")||i.DEFAULTS.style}},i.prototype.render=function(){this._onstyle="btn-"+this.options.onstyle,this._offstyle="btn-"+this.options.offstyle;var t="large"===this.options.size?"btn-large":"small"===this.options.size?"btn-small":"mini"===this.options.size?"btn-mini":"",i=e('<label class="btn">').html(this.options.on).addClass(this._onstyle+" "+t),n=e('<label class="btn">').html(this.options.off).addClass(this._offstyle+" "+t+" active"),o=e('<span class="toggle-handle btn btn-default">').addClass(t),r=e('<div class="toggle-group">').append(i,n,o),s=e('<div class="toggle btn" data-toggle="toggle">').addClass(this.$element.prop("checked")?this._onstyle:this._offstyle+" off").addClass(t).addClass(this.options.style);this.$element.wrap(s),e.extend(this,{$toggle:this.$element.parent(),$toggleOn:i,$toggleOff:n,$toggleGroup:r}),this.$toggle.append(r);var a=Math.max(i.width(),n.width())+o.outerWidth()/2,l=Math.max(i.height(),n.height());i.addClass("toggle-on"),n.addClass("toggle-off"),this.$toggle.css({width:a,height:l}),this.update(),this.trigger(!0)},i.prototype.toggle=function(){this.$element.prop("checked")?this.off():this.on()},i.prototype.on=function(){return this.$element.prop("disabled")?!1:(this.$toggle.removeClass(this._offstyle+" off").addClass(this._onstyle),this.$element.prop("checked",!0),void this.trigger())},i.prototype.off=function(){return this.$element.prop("disabled")?!1:(this.$toggle.removeClass(this._onstyle).addClass(this._offstyle+" off"),this.$element.prop("checked",!1),void this.trigger())},i.prototype.enable=function(){this.$toggle.removeAttr("disabled"),this.$element.prop("disabled",!1)},i.prototype.disable=function(){this.$toggle.attr("disabled","disabled"),this.$element.prop("disabled",!0)},i.prototype.update=function(){this.$element.prop("disabled")?this.disable():this.enable(),this.$element.prop("checked")?this.on():this.off()},i.prototype.trigger=function(t){this.$element.off("change.bs.toggle"),t||this.$element.change(),this.$element.on("change.bs.toggle",e.proxy(function(){this.update()},this))},i.prototype.destroy=function(){this.$element.off("change.bs.toggle"),this.$toggleGroup.remove(),this.$element.removeData("bs.toggle"),this.$element.unwrap()};var n=e.fn.bootstrapToggle;e.fn.bootstrapToggle=t,e.fn.bootstrapToggle.Constructor=i,e.fn.toggle.noConflict=function(){return e.fn.bootstrapToggle=n,this},e(function(){e("input[type=checkbox][data-toggle^=toggle]").bootstrapToggle()}),e(document).on("click.bs.toggle","div[data-toggle^=toggle]",function(t){var i=e(this).find("input[type=checkbox]");i.bootstrapToggle("toggle"),t.preventDefault()})}(jQuery)}.apply(e,arguments)})}(this),function(e){"function"==typeof define&&define.amd?define("jquery-mousewheel",["jquery"],e):"object"==typeof exports?module.exports=e:e(jQuery)}(function(e){function t(t){var s=t||window.event,a=l.call(arguments,1),h=0,c=0,d=0,u=0;if(t=e.event.fix(s),t.type="mousewheel","detail"in s&&(d=-1*s.detail),"wheelDelta"in s&&(d=s.wheelDelta),"wheelDeltaY"in s&&(d=s.wheelDeltaY),"wheelDeltaX"in s&&(c=-1*s.wheelDeltaX),"axis"in s&&s.axis===s.HORIZONTAL_AXIS&&(c=-1*d,d=0),h=0===d?c:d,"deltaY"in s&&(d=-1*s.deltaY,h=d),"deltaX"in s&&(c=s.deltaX,0===d&&(h=-1*c)),0!==d||0!==c){if(1===s.deltaMode){var p=e.data(this,"mousewheel-line-height");h*=p,d*=p,c*=p}else if(2===s.deltaMode){var f=e.data(this,"mousewheel-page-height");h*=f,d*=f,c*=f}return u=Math.max(Math.abs(d),Math.abs(c)),(!r||r>u)&&(r=u,n(s,u)&&(r/=40)),n(s,u)&&(h/=40,c/=40,d/=40),h=Math[h>=1?"floor":"ceil"](h/r),c=Math[c>=1?"floor":"ceil"](c/r),d=Math[d>=1?"floor":"ceil"](d/r),t.deltaX=c,t.deltaY=d,t.deltaFactor=r,t.deltaMode=0,a.unshift(t,h,c,d),o&&clearTimeout(o),o=setTimeout(i,200),(e.event.dispatch||e.event.handle).apply(this,a)}}function i(){r=null}function n(e,t){return c.settings.adjustOldDeltas&&"mousewheel"===e.type&&t%120===0}var o,r,s=["wheel","mousewheel","DOMMouseScroll","MozMousePixelScroll"],a="onwheel"in document||document.documentMode>=9?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"],l=Array.prototype.slice;if(e.event.fixHooks)for(var h=s.length;h;)e.event.fixHooks[s[--h]]=e.event.mouseHooks;var c=e.event.special.mousewheel={version:"3.1.9",setup:function(){if(this.addEventListener)for(var i=a.length;i;)this.addEventListener(a[--i],t,!1);else this.onmousewheel=t;e.data(this,"mousewheel-line-height",c.getLineHeight(this)),e.data(this,"mousewheel-page-height",c.getPageHeight(this))},teardown:function(){if(this.removeEventListener)for(var e=a.length;e;)this.removeEventListener(a[--e],t,!1);else this.onmousewheel=null},getLineHeight:function(t){return parseInt(e(t)["offsetParent"in e.fn?"offsetParent":"parent"]().css("fontSize"),10)},getPageHeight:function(t){return e(t).height()},settings:{adjustOldDeltas:!0}};e.fn.extend({mousewheel:function(e){return e?this.bind("mousewheel",e):this.trigger("mousewheel")},unmousewheel:function(e){return this.unbind("mousewheel",e)}})}),function(e,t){var i=function(i){return e(i,t)};"function"==typeof define&&define.amd?define("jscrollpane",["jquery"],i):"object"==typeof exports?module.exports=i:i(jQuery)}(function(e,t,i){e.fn.jScrollPane=function(n){function o(n,o){function r(t){var o,a,h,d,u,p,m=!1,y=!1;if(z=t,H===i)u=n.scrollTop(),p=n.scrollLeft(),n.css({overflow:"hidden",padding:0}),W=n.innerWidth()+vt,U=n.innerHeight(),n.width(W),H=e('<div class="jspPane" />').css("padding",bt).append(n.children()),V=e('<div class="jspContainer" />').css({width:W+"px",height:U+"px"}).append(H).appendTo(n);else{if(n.css("width",""),m=z.stickToBottom&&S(),y=z.stickToRight&&I(),d=n.innerWidth()+vt!=W||n.outerHeight()!=U,d&&(W=n.innerWidth()+vt,U=n.innerHeight(),V.css({width:W+"px",height:U+"px"})),!d&&Ct==q&&H.outerHeight()==Y)return void n.width(W);Ct=q,H.css("width",""),n.width(W),V.find(">.jspVerticalBar,>.jspHorizontalBar").remove().end()}H.css("overflow","auto"),q=t.contentWidth?t.contentWidth:H[0].scrollWidth,Y=H[0].scrollHeight,H.css("overflow",""),X=q/W,K=Y/U,J=K>1,Q=X>1,Q||J?(n.addClass("jspScrollable"),o=z.maintainPosition&&(et||nt),o&&(a=T(),h=E()),s(),l(),c(),o&&(x(y?q-W:a,!1),_(m?Y-U:h,!1)),D(),A(),G(),z.enableKeyboardNavigation&&L(),z.clickOnTrack&&f(),B(),z.hijackInternalLinks&&N()):(n.removeClass("jspScrollable"),H.css({top:0,left:0,width:V.width()-vt}),R(),k(),j(),g()),z.autoReinitialise&&!yt?yt=setInterval(function(){r(z)},z.autoReinitialiseDelay):!z.autoReinitialise&&yt&&clearInterval(yt),u&&n.scrollTop(0)&&_(u,!1),p&&n.scrollLeft(0)&&x(p,!1),n.trigger("jsp-initialised",[Q||J])}function s(){J&&(V.append(e('<div class="jspVerticalBar" />').append(e('<div class="jspCap jspCapTop" />'),e('<div class="jspTrack" />').append(e('<div class="jspDrag" />').append(e('<div class="jspDragTop" />'),e('<div class="jspDragBottom" />'))),e('<div class="jspCap jspCapBottom" />'))),ot=V.find(">.jspVerticalBar"),rt=ot.find(">.jspTrack"),Z=rt.find(">.jspDrag"),z.showArrows&&(ht=e('<a class="jspArrow jspArrowUp" />').bind("mousedown.jsp",u(0,-1)).bind("click.jsp",M),ct=e('<a class="jspArrow jspArrowDown" />').bind("mousedown.jsp",u(0,1)).bind("click.jsp",M),z.arrowScrollOnHover&&(ht.bind("mouseover.jsp",u(0,-1,ht)),ct.bind("mouseover.jsp",u(0,1,ct))),d(rt,z.verticalArrowPositions,ht,ct)),at=U,V.find(">.jspVerticalBar>.jspCap:visible,>.jspVerticalBar>.jspArrow").each(function(){at-=e(this).outerHeight()}),Z.hover(function(){Z.addClass("jspHover")},function(){Z.removeClass("jspHover")}).bind("mousedown.jsp",function(t){e("html").bind("dragstart.jsp selectstart.jsp",M),Z.addClass("jspActive");var i=t.pageY-Z.position().top;return e("html").bind("mousemove.jsp",function(e){y(e.pageY-i,!1)}).bind("mouseup.jsp mouseleave.jsp",m),!1}),a())}function a(){rt.height(at+"px"),et=0,st=z.verticalGutter+rt.outerWidth(),H.width(W-st-vt);try{0===ot.position().left&&H.css("margin-left",st+"px")}catch(e){}}function l(){Q&&(V.append(e('<div class="jspHorizontalBar" />').append(e('<div class="jspCap jspCapLeft" />'),e('<div class="jspTrack" />').append(e('<div class="jspDrag" />').append(e('<div class="jspDragLeft" />'),e('<div class="jspDragRight" />'))),e('<div class="jspCap jspCapRight" />'))),dt=V.find(">.jspHorizontalBar"),ut=dt.find(">.jspTrack"),tt=ut.find(">.jspDrag"),z.showArrows&&(gt=e('<a class="jspArrow jspArrowLeft" />').bind("mousedown.jsp",u(-1,0)).bind("click.jsp",M),mt=e('<a class="jspArrow jspArrowRight" />').bind("mousedown.jsp",u(1,0)).bind("click.jsp",M),z.arrowScrollOnHover&&(gt.bind("mouseover.jsp",u(-1,0,gt)),mt.bind("mouseover.jsp",u(1,0,mt))),d(ut,z.horizontalArrowPositions,gt,mt)),tt.hover(function(){tt.addClass("jspHover")},function(){tt.removeClass("jspHover")}).bind("mousedown.jsp",function(t){e("html").bind("dragstart.jsp selectstart.jsp",M),tt.addClass("jspActive");var i=t.pageX-tt.position().left;return e("html").bind("mousemove.jsp",function(e){v(e.pageX-i,!1)}).bind("mouseup.jsp mouseleave.jsp",m),!1}),pt=V.innerWidth(),h())}function h(){V.find(">.jspHorizontalBar>.jspCap:visible,>.jspHorizontalBar>.jspArrow").each(function(){pt-=e(this).outerWidth()}),ut.width(pt+"px"),nt=0}function c(){if(Q&&J){var t=ut.outerHeight(),i=rt.outerWidth();at-=t,e(dt).find(">.jspCap:visible,>.jspArrow").each(function(){pt+=e(this).outerWidth()}),pt-=i,U-=i,W-=t,ut.parent().append(e('<div class="jspCorner" />').css("width",t+"px")),a(),h()}Q&&H.width(V.outerWidth()-vt+"px"),Y=H.outerHeight(),K=Y/U,Q&&(ft=Math.ceil(1/X*pt),ft>z.horizontalDragMaxWidth?ft=z.horizontalDragMaxWidth:ft<z.horizontalDragMinWidth&&(ft=z.horizontalDragMinWidth),tt.width(ft+"px"),it=pt-ft,C(nt)),J&&(lt=Math.ceil(1/K*at),lt>z.verticalDragMaxHeight?lt=z.verticalDragMaxHeight:lt<z.verticalDragMinHeight&&(lt=z.verticalDragMinHeight),Z.height(lt+"px"),$=at-lt,b(et))}function d(e,t,i,n){var o,r="before",s="after";"os"==t&&(t=/Mac/.test(navigator.platform)?"after":"split"),t==r?s=t:t==s&&(r=t,o=i,i=n,n=o),e[r](i)[s](n)}function u(e,t,i){return function(){return p(e,t,this,i),this.blur(),!1}}function p(t,i,n,o){n=e(n).addClass("jspActive");var r,s,a=!0,l=function(){0!==t&&wt.scrollByX(t*z.arrowButtonSpeed),0!==i&&wt.scrollByY(i*z.arrowButtonSpeed),s=setTimeout(l,a?z.initialDelay:z.arrowRepeatFreq),a=!1};l(),r=o?"mouseout.jsp":"mouseup.jsp",o=o||e("html"),o.bind(r,function(){n.removeClass("jspActive"),s&&clearTimeout(s),s=null,o.unbind(r)})}function f(){g(),J&&rt.bind("mousedown.jsp",function(t){if(t.originalTarget===i||t.originalTarget==t.currentTarget){var n,o=e(this),r=o.offset(),s=t.pageY-r.top-et,a=!0,l=function(){var e=o.offset(),i=t.pageY-e.top-lt/2,r=U*z.scrollPagePercent,c=$*r/(Y-U);if(0>s)et-c>i?wt.scrollByY(-r):y(i);else{if(!(s>0))return void h();i>et+c?wt.scrollByY(r):y(i)}n=setTimeout(l,a?z.initialDelay:z.trackClickRepeatFreq),a=!1},h=function(){n&&clearTimeout(n),n=null,e(document).unbind("mouseup.jsp",h)};return l(),e(document).bind("mouseup.jsp",h),!1}}),Q&&ut.bind("mousedown.jsp",function(t){if(t.originalTarget===i||t.originalTarget==t.currentTarget){var n,o=e(this),r=o.offset(),s=t.pageX-r.left-nt,a=!0,l=function(){var e=o.offset(),i=t.pageX-e.left-ft/2,r=W*z.scrollPagePercent,c=it*r/(q-W);if(0>s)nt-c>i?wt.scrollByX(-r):v(i);else{if(!(s>0))return void h();i>nt+c?wt.scrollByX(r):v(i)}n=setTimeout(l,a?z.initialDelay:z.trackClickRepeatFreq),a=!1},h=function(){n&&clearTimeout(n),n=null,e(document).unbind("mouseup.jsp",h)};return l(),e(document).bind("mouseup.jsp",h),!1}})}function g(){ut&&ut.unbind("mousedown.jsp"),rt&&rt.unbind("mousedown.jsp")}function m(){e("html").unbind("dragstart.jsp selectstart.jsp mousemove.jsp mouseup.jsp mouseleave.jsp"),Z&&Z.removeClass("jspActive"),tt&&tt.removeClass("jspActive")}function y(e,t){J&&(0>e?e=0:e>$&&(e=$),t===i&&(t=z.animateScroll),t?wt.animate(Z,"top",e,b):(Z.css("top",e),b(e)))}function b(e){e===i&&(e=Z.position().top),V.scrollTop(0),et=e||0;var t=0===et,o=et==$,r=e/$,s=-r*(Y-U);(Pt!=t||xt!=o)&&(Pt=t,xt=o,n.trigger("jsp-arrow-change",[Pt,xt,_t,Ot])),w(t,o),H.css("top",s),n.trigger("jsp-scroll-y",[-s,t,o]).trigger("scroll")}function v(e,t){Q&&(0>e?e=0:e>it&&(e=it),t===i&&(t=z.animateScroll),t?wt.animate(tt,"left",e,C):(tt.css("left",e),C(e)))}function C(e){e===i&&(e=tt.position().left),V.scrollTop(0),nt=e||0;var t=0===nt,o=nt==it,r=e/it,s=-r*(q-W);(_t!=t||Ot!=o)&&(_t=t,Ot=o,n.trigger("jsp-arrow-change",[Pt,xt,_t,Ot])),P(t,o),H.css("left",s),n.trigger("jsp-scroll-x",[-s,t,o]).trigger("scroll")}function w(e,t){z.showArrows&&(ht[e?"addClass":"removeClass"]("jspDisabled"),ct[t?"addClass":"removeClass"]("jspDisabled"))}function P(e,t){z.showArrows&&(gt[e?"addClass":"removeClass"]("jspDisabled"),mt[t?"addClass":"removeClass"]("jspDisabled"))}function _(e,t){var i=e/(Y-U);y(i*$,t)}function x(e,t){var i=e/(q-W);v(i*it,t)}function O(t,i,n){var o,r,s,a,l,h,c,d,u,p=0,f=0;try{o=e(t)}catch(g){return}for(r=o.outerHeight(),s=o.outerWidth(),V.scrollTop(0),V.scrollLeft(0);!o.is(".jspPane");)if(p+=o.position().top,f+=o.position().left,o=o.offsetParent(),/^body|html$/i.test(o[0].nodeName))return;a=E(),h=a+U,a>p||i?d=p-z.horizontalGutter:p+r>h&&(d=p-U+r+z.horizontalGutter),isNaN(d)||_(d,n),l=T(),c=l+W,l>f||i?u=f-z.horizontalGutter:f+s>c&&(u=f-W+s+z.horizontalGutter),isNaN(u)||x(u,n)}function T(){return-H.position().left}function E(){return-H.position().top}function S(){var e=Y-U;return e>20&&e-E()<10}function I(){var e=q-W;return e>20&&e-T()<10}function A(){V.unbind(Et).bind(Et,function(e,t,i,n){nt||(nt=0),et||(et=0);var o=nt,r=et,s=e.deltaFactor||z.mouseWheelSpeed;return wt.scrollBy(i*s,-n*s,!1),o==nt&&r==et})}function R(){V.unbind(Et)}function M(){return!1}function D(){H.find(":input,a").unbind("focus.jsp").bind("focus.jsp",function(e){O(e.target,!1)})}function k(){H.find(":input,a").unbind("focus.jsp")}function L(){function t(){var e=nt,t=et;switch(i){case 40:wt.scrollByY(z.keyboardSpeed,!1);break;case 38:wt.scrollByY(-z.keyboardSpeed,!1);break;case 34:case 32:wt.scrollByY(U*z.scrollPagePercent,!1);break;case 33:wt.scrollByY(-U*z.scrollPagePercent,!1);break;case 39:wt.scrollByX(z.keyboardSpeed,!1);break;case 37:wt.scrollByX(-z.keyboardSpeed,!1)}return o=e!=nt||t!=et}var i,o,r=[];Q&&r.push(dt[0]),J&&r.push(ot[0]),H.focus(function(){n.focus()}),n.attr("tabindex",0).unbind("keydown.jsp keypress.jsp").bind("keydown.jsp",function(n){if(n.target===this||r.length&&e(n.target).closest(r).length){var s=nt,a=et;switch(n.keyCode){case 40:case 38:case 34:case 32:case 33:case 39:case 37:i=n.keyCode,t();break;case 35:_(Y-U),i=null;break;case 36:_(0),i=null}return o=n.keyCode==i&&s!=nt||a!=et,!o}}).bind("keypress.jsp",function(e){return e.keyCode==i&&t(),!o}),z.hideFocus?(n.css("outline","none"),"hideFocus"in V[0]&&n.attr("hideFocus",!0)):(n.css("outline",""),"hideFocus"in V[0]&&n.attr("hideFocus",!1))}function j(){n.attr("tabindex","-1").removeAttr("tabindex").unbind("keydown.jsp keypress.jsp")}function B(){if(location.hash&&location.hash.length>1){var t,i,n=escape(location.hash.substr(1));try{t=e("#"+n+', a[name="'+n+'"]')}catch(o){return}t.length&&H.find(n)&&(0===V.scrollTop()?i=setInterval(function(){V.scrollTop()>0&&(O(t,!0),e(document).scrollTop(V.position().top),clearInterval(i))},50):(O(t,!0),e(document).scrollTop(V.position().top)))}}function N(){e(document.body).data("jspHijack")||(e(document.body).data("jspHijack",!0),e(document.body).delegate("a[href*=#]","click",function(i){var n,o,r,s,a,l,h=this.href.substr(0,this.href.indexOf("#")),c=location.href;if(-1!==location.href.indexOf("#")&&(c=location.href.substr(0,location.href.indexOf("#"))),h===c){n=escape(this.href.substr(this.href.indexOf("#")+1));try{o=e("#"+n+', a[name="'+n+'"]')}catch(d){return}o.length&&(r=o.closest(".jspScrollable"),s=r.data("jsp"),s.scrollToElement(o,!0),r[0].scrollIntoView&&(a=e(t).scrollTop(),l=o.offset().top,(a>l||l>a+e(t).height())&&r[0].scrollIntoView()),i.preventDefault())}}))}function G(){var e,t,i,n,o,r=!1;V.unbind("touchstart.jsp touchmove.jsp touchend.jsp click.jsp-touchclick").bind("touchstart.jsp",function(s){var a=s.originalEvent.touches[0];e=T(),t=E(),i=a.pageX,n=a.pageY,o=!1,r=!0}).bind("touchmove.jsp",function(s){if(r){var a=s.originalEvent.touches[0],l=nt,h=et;return wt.scrollTo(e+i-a.pageX,t+n-a.pageY),o=o||Math.abs(i-a.pageX)>5||Math.abs(n-a.pageY)>5,l==nt&&h==et}}).bind("touchend.jsp",function(){r=!1}).bind("click.jsp-touchclick",function(){return o?(o=!1,!1):void 0})}function F(){var e=E(),t=T();n.removeClass("jspScrollable").unbind(".jsp"),n.replaceWith(Tt.append(H.children())),Tt.scrollTop(e),Tt.scrollLeft(t),yt&&clearInterval(yt)}var z,H,W,U,V,q,Y,X,K,J,Q,Z,$,et,tt,it,nt,ot,rt,st,at,lt,ht,ct,dt,ut,pt,ft,gt,mt,yt,bt,vt,Ct,wt=this,Pt=!0,_t=!0,xt=!1,Ot=!1,Tt=n.clone(!1,!1).empty(),Et=e.fn.mwheelIntent?"mwheelIntent.jsp":"mousewheel.jsp";"border-box"===n.css("box-sizing")?(bt=0,vt=0):(bt=n.css("paddingTop")+" "+n.css("paddingRight")+" "+n.css("paddingBottom")+" "+n.css("paddingLeft"),vt=(parseInt(n.css("paddingLeft"),10)||0)+(parseInt(n.css("paddingRight"),10)||0)),e.extend(wt,{reinitialise:function(t){t=e.extend({},z,t),r(t)},scrollToElement:function(e,t,i){O(e,t,i)},scrollTo:function(e,t,i){x(e,i),_(t,i)},scrollToX:function(e,t){x(e,t)},scrollToY:function(e,t){_(e,t)},scrollToPercentX:function(e,t){x(e*(q-W),t)},scrollToPercentY:function(e,t){_(e*(Y-U),t)},scrollBy:function(e,t,i){wt.scrollByX(e,i),wt.scrollByY(t,i)},scrollByX:function(e,t){var i=T()+Math[0>e?"floor":"ceil"](e),n=i/(q-W);v(n*it,t)},scrollByY:function(e,t){var i=E()+Math[0>e?"floor":"ceil"](e),n=i/(Y-U);y(n*$,t)},positionDragX:function(e,t){v(e,t)},positionDragY:function(e,t){y(e,t)},animate:function(e,t,i,n){var o={};o[t]=i,e.animate(o,{duration:z.animateDuration,easing:z.animateEase,queue:!1,step:n})},getContentPositionX:function(){return T()},getContentPositionY:function(){return E()},getContentWidth:function(){return q},getContentHeight:function(){return Y},getPercentScrolledX:function(){return T()/(q-W)},getPercentScrolledY:function(){return E()/(Y-U)},getIsScrollableH:function(){return Q},getIsScrollableV:function(){return J},getContentPane:function(){return H},scrollToBottom:function(e){y($,e)},hijackInternalLinks:e.noop,destroy:function(){F()}}),r(o)}return n=e.extend({},e.fn.jScrollPane.defaults,n),e.each(["arrowButtonSpeed","trackClickSpeed","keyboardSpeed"],function(){n[this]=n[this]||n.speed}),this.each(function(){var t=e(this),i=t.data("jsp");i?i.reinitialise(n):(e("script",t).filter('[type="text/javascript"],:not([type])').remove(),i=new o(t,n),t.data("jsp",i))})},e.fn.jScrollPane.defaults={showArrows:!1,maintainPosition:!0,stickToBottom:!1,stickToRight:!1,clickOnTrack:!0,autoReinitialise:!1,autoReinitialiseDelay:500,verticalDragMinHeight:0,verticalDragMaxHeight:99999,horizontalDragMinWidth:0,horizontalDragMaxWidth:99999,contentWidth:i,animateScroll:!1,animateDuration:300,animateEase:"linear",hijackInternalLinks:!1,verticalGutter:4,horizontalGutter:4,mouseWheelSpeed:3,arrowButtonSpeed:0,arrowRepeatFreq:50,arrowScrollOnHover:!1,trackClickSpeed:0,trackClickRepeatFreq:70,verticalArrowPositions:"split",horizontalArrowPositions:"split",enableKeyboardNavigation:!0,hideFocus:!1,keyboardSpeed:0,initialDelay:300,speed:30,scrollPagePercent:.8}},this),define("editor-delegates",["require","gb","world","class"],function(e){var t=(e("gb"),e("world"),e("class").extend({init:function(){this.delegates=[]
},add:function(e,t,n,o){e.on(t,n,o,!1,!1,!1,"editor-delegate"),i(e,this.delegates)},clean:function(){for(;this.delegates.length;)this.delegates.pop().levelCleanUp("editor-delegate")}})),i=function(e,t){for(var i=0;i<t.length;i++)if(t[i]===e)return;t.push(e)};return new t}),define("editor-viewports",["require","gb"],function(e){var t=function(){};t.prototype.add=function(){return{viewport:i.apply(null,arguments),NoClipping:function(){return this.viewport.Clipping=!1,this},NoCulling:function(){return this.viewport.Culling=!1,this},NoMouse:function(){return this.viewport.MouseEnabled=!1,this},NoMouseBounded:function(){return this.viewport.MouseBounded=!1,this},Stroke:function(e,t){return this.viewport.setStroke(e,t),this}}};var i=function(){var t=e("gb");return 1===arguments.length?t.viewports.addFromObject.apply(t.viewports,arguments):t.viewports.add.apply(t.viewports,arguments)};return new t}),define("editor-setup",["require","gb","world","editor-config","editor-delegates","editor-viewports","class","outline-bundle","grid-bundle","gizmo-bundle","grid-bundle"],function(e){var t=e("gb"),i=e("world"),n=e("editor-config"),o=e("editor-delegates"),r=e("editor-viewports"),s=e("class").extend({init:function(){},config:function(){return n},begin:function(){t.toggleDebug(!0),this.clear(),this.world(),this.groups(),this.mainViewport(),this.pools(),this.display()},display:function(){this.setupViewports(),this.setupGameObjects()},end:function(){o.add(t.viewports,t.viewports.ADD,this,function(){$("input[editor-toggle]").bootstrapToggle()}),$("input[editor-toggle]").bootstrapToggle()},reset:function(){$("input[editor-toggle]").bootstrapToggle("off")},exit:function(){t.toggleDebug(!1),o.clean(),$("input[editor-toggle]").bootstrapToggle("destroy"),$(".ui-dialog").remove()},clear:function(){t.reclaimer.clearAllObjectsFromPools().now(),t.groups.removeAll(),t.viewports.removeAll()},pools:function(){e("outline-bundle").create(),e("grid-bundle").create(),e("gizmo-bundle").create()},world:function(){i.create(t.canvas.width,t.canvas.height,50)},groups:function(){t.groups.add(n.getDefaultGroupName())},mainViewport:function(){var e=n.getMainViewportName(),i=t.canvas.width,o=t.canvas.height,s=r.add(e,i,o).NoClipping().NoCulling().NoMouseBounded().viewport;s.addLayer(n.getDefaultLayerName()),s.addLayer(n.getOutlineLayerName()),s.addLayer(n.getGizmoCollidersBackLayerName()),s.addLayer(n.getGizmoCollidersFrontLayerName()),s.addLayer(n.getGizmoRotationBackLayerName()),s.addLayer(n.getGizmoRotationFrontLayerName()),s.addLayer(n.getGizmoScaleBackLayerName()),s.addLayer(n.getGizmoScaleFrontLayerName()),s.addLayer(n.getGizmoIconFrontLayerName()),s.hideLayer(n.getGizmoCollidersBackLayerName()),s.hideLayer(n.getGizmoCollidersFrontLayerName()),s.hideLayer(n.getGizmoRotationBackLayerName()),s.hideLayer(n.getGizmoRotationFrontLayerName()),s.hideLayer(n.getGizmoScaleBackLayerName()),s.hideLayer(n.getGizmoScaleFrontLayerName())},gridViewport:function(){var e=n.getGridViewportName(),i=t.canvas.width,o=t.canvas.height,s=r.add(e,i,o).NoClipping().NoCulling().viewport;s.addLayer(n.getDefaultLayerName()),s.hide()},setupViewports:function(){this.gridViewport()},setupGameObjects:function(){var i=e("grid-bundle");t.add(i.getGridId(),n.getDefaultGroupName(),[{viewport:n.getGridViewportName(),layer:n.getDefaultLayerName()}])}});return new s}),define("attribute-assigner",["require","editor-config","class"],function(e){var t=e("editor-config"),i=e("class").extend({init:function(){},assignFrom:function(e,i){if(i.Attributes&&e.Attributes&&(i.Attributes=JSON.parse(JSON.stringify(e.Attributes))),i.rotation=e.rotation,i.scaleX=e.scaleX,i.scaleY=e.scaleY,e.components&&i.components)for(var n=0;n<e.components.length;n++){var o=e.components[n],r=i.components[n];o&&r&&(t.isEditorComponent(o.typeId)||t.isEditorComponent(r.typeId)||o.Attributes&&r.Attributes&&(r.Attributes=JSON.parse(JSON.stringify(o.Attributes))))}if(e.childs&&i.childs)for(var n=0;n<e.childs.length;n++){var s=e.childs[n],a=i.childs[n];s&&a&&(a.Attributes=s.Attributes,a.x=s.x,a.y=s.y,a.rotation=s.rotation,a.scaleX=s.scaleX,a.scaleY=s.scaleY,a.childs&&s.childs&&this.assignFrom(s,a))}}});return new i}),define("attribute-comparer",["require","vector-2D","util","class"],function(e){var t=e("vector-2D"),i=e("util"),n=e("class").extend({init:function(){},getChanges:function(e){var t={};if(!e.Attributes)return null;for(var n in e.Attributes){var s=e.Attributes[n],a=e.args[n],l=i.isObject(s),h=i.isObject(a),c=i.isArray(s),d=i.isArray(a),u=i.isFunction(s),p=i.isFunction(a);u||p||((l&&h||c&&d)&&(o(s,a)||(t[n]=s)),l||c||h||d||r(s,a)||(t[n]=s))}return Object.keys(t).length>0?t:void 0}}),o=function(e,t){if(Object.keys(e).length!=Object.keys(t).length)return!1;for(var i in e)if(!r(e[i],t[i]))return!1;return!0},r=function(e,i){return t.isVector(e)&&t.isVector(i)?e.equal(i):e==i};return new n}),define("configuration-creator",["require","gb","util","editor-config","class","attribute-comparer"],function(e){var t=e("gb"),i=e("util"),n=e("editor-config"),o=e("class").extend({init:function(){},createFromGameObject:function(e,o){o=o||{};var a={configurations:[],hasNew:!1};if(e.childs)for(var l=0;l<e.childs.length;l++){var h=e.childs[l];if(!n.isEditorGameObject(h.typeId)){var c=this.createFromGameObject(e.childs[l],i.shallow_merge(o,{isChildOnly:!0,force:!1}));c?o.getChildIds?(s(a.configurations,e.childs[l],c.configurationId,!0),a.hasNew=!0):(s(a.configurations,e.childs[l],c,!0),a.hasNew=!0):s(a.configurations,e.childs[l],e.childs[l].typeId,!1)}}if(!a.hasNew&&!r(e)&&!o.force)return null;var d;d=o.configurationId?o.configurationId:this.getNewConfigurationName(e);var u=t.goPool.createConfiguration(d,e.poolId);if(u.custom(),u.args(i.shallow_merge(e.args,{x:e.x,y:e.y,rotation:e.rotation,scaleX:e.scaleX,scaleY:e.scaleY})),e.components)for(var l=0;l<e.components.length;l++){var p=e.components[l];n.isEditorComponent(p.typeId)||u.addComponent(p.typeId,p.Attributes)}for(var l=0;l<a.configurations.length;l++){var f=a.configurations[l],g=i.shallow_merge(f.args,{x:f.child.x,y:f.child.y,rotation:f.child.rotation,scaleX:f.child.scaleX,scaleY:f.child.scaleY});u.addChild(f.id,g)}return u.setRenderer(e.renderer.typeId,e.renderer.args),o.isChildOnly&&u.childOnly(),o.getChildIds?{configurationId:d,childConfigurationIds:a.configurations.filter(function(e){return e.isNew}).map(function(e){return e.id})}:d},getNewConfigurationName:function(e){var i=t.goPool.getConfigurationTypes(),n=0;newName=e.typeId.replace(/\([^(]*$/,"").trim();for(var o=newName,r=0;r<i.length;r++)i[r].match(newName)&&(n++,o=newName+" ("+n.toString()+")");return o}}),r=function(t){if(t.hasStructuralChanges())return!0;if(t.args.x!=t.x||t.args.y!=t.y||t.args.rotation!=t.rotation||t.args.scaleX!=t.scaleX||t.args.scaleY!=t.scaleY)return!0;var i=t.findComponents().firstWithType(n.getColliderGizmoId()),o=i.getColliderComponent();return e("attribute-comparer").getChanges(o)},s=function(e,t,i,n){e.push({child:t,id:i,args:t.args,isNew:n})};return new o}),define("game-object-cloner",["require","gb","editor-config","class","setup-editable-game-object","attribute-assigner","object-counter","object-counter","configuration-creator","setup-editable-game-object","object-counter","object-counter"],function(e){var t=e("gb"),i=e("editor-config"),n=e("class").extend({init:function(){},clone:function(e){e.hasStructuralChanges()?r(e):o(e)}}),o=function(t){var i=e("setup-editable-game-object").setupWithGameObject(t.typeId,t);e("attribute-assigner").assignFrom(t,i),i&&(e("object-counter").count(i),e("object-counter").showSuccessFeedback(),s(t,i))},r=function(i){var n=e("configuration-creator").createFromGameObject(i,{force:!0,getChildIds:!0}),o=e("setup-editable-game-object").setupWithGameObject(n.configurationId,i);if(a(o,i),o.setStructuralChanges(),t.goPool.clearConfiguration(n.configurationId),n.childConfigurationIds)for(var r=0;r<n.childConfigurationIds.length;r++)t.goPool.clearConfiguration(n.childConfigurationIds[r]);o&&(e("object-counter").count(o),e("object-counter").showSuccessFeedback(),s(i,o))},s=function(e,t){e.findChildren().recurse().all(function(e){return i.isColliderGizmoGameObject(e.typeId)?void(e.canDraw&&t.findChildren().recurse().all(function(e){i.isColliderGizmoGameObject(e.typeId)&&e.show()})):i.isRotationGizmoGameObject(e.typeId)?void(e.canDraw&&t.findChildren().recurse().all(function(e){i.isRotationGizmoGameObject(e.typeId)&&e.show()})):i.isScaleGizmoGameObject(e.typeId)?void(e.canDraw&&t.findChildren().recurse().all(function(e){i.isScaleGizmoGameObject(e.typeId)&&e.show()})):void 0})},a=function(e,t){if(e.typeId=t.typeId,e.components&&t.components)for(var i=0;i<e.components.length;i++)e.components[i].typeId=t.components[i].typeId;if(e.childs&&t.childs)for(var i=0;i<e.childs.length;i++)a(e.childs[i],t.childs[i])};return new n}),define("create-status-message",["require","wrap-in-div","class"],function(e){var t=e("wrap-in-div"),i=e("class").extend({init:function(){},createErrorMessage:function(e){var t=n();return o.call(t,"Alert: ",e,"status-error","ui-state-error","ui-icon-alert"),t},createSuccessMessage:function(e){var t=n();return o.call(t,"Success: ",e,"status-success","ui-state-highlight","ui-icon-circle-check"),t},createInfoMessage:function(e){var t=n();return o.call(t,"Info: ",e,"status-success","ui-state-highlight","ui-icon-info"),t},createCustomMessage:function(e,t,i){var r=n();return o.call(r,e,t,"status-success","ui-state-highlight",i),r}}),n=function(e,i){var n=$(document.createElement("div"));n.addClass("ui-corner-all"),n.css({"padding-right":"5px"});var r=$(document.createElement("span"));r.css({"float":"left","margin-top":"2px","margin-right":"3px","margin-left":"3px"});var i=$(document.createElement("strong"));i.html(i);var s=$(t.wrap([r,i])),a=document.createTextNode(e);s.append(a),n.append(s);var l={html:n,messageTitle:i,messageContent:a,appendTo:function(e){var t=$(this.html);t.parent()&&$(e).append(t)},remove:function(){$(this.html).remove()},message:function(e){this.messageContent.textContent=e,""!=e&&e?$(this.html).show(0):$(this.html).hide()},toError:function(e){o.call(this,"Alert: ",e,"status-error","ui-state-error","ui-icon-alert")},toSuccess:function(e){o.call(this,"Success: ",e,"status-success","ui-state-highlight","ui-icon-circle-check")},toInfo:function(e){o.call(this,"Info: ",e,"status-success","ui-state-highlight","ui-icon-info")}};return l},o=function(e,t,i,n,o){this.messageTitle.html(e),this.html.removeClass(),this.html.addClass(i),this.html.addClass(n),this.html.find("span").removeClass(),this.html.find("span").addClass("ui-icon"),this.html.find("span").addClass(o),this.message(t)};return new i}),define("dialog-modular",["require","create-status-message","ui-component"],function(e){var t=e("create-status-message"),i=e("ui-component").extend({init:function(){},create:function(e){var i=document.createElement("div");i.id=e.id,$(i).addClass("dialog");var o=t.createInfoMessage(e.tip),a=document.createElement("form"),l=document.createElement("fieldset");o.appendTo(i),$(i).append(a),$(a).append(l);var h={};$.each(e.fields,function(e,t){t.create(),$(t.html()).css({"padding-bottom":"5px"}),h[s(t.name())]=t,$(l).append(t.html())}),$.each(e.buttons,function(t,i){e.buttons[t]=function(t,i){return function(){r(o,e.fields,e),result=n.call(d,o,e.validateOnAction[i],e.fields),result===!0&&t.call(d)}}.call(this,i,t)}),e.close=function(){var t=$(arguments[0].currentTarget).attr("title");$.each(e.fields,function(i,n){e.resetOnClose?"Close"==t&&n.reset():n.reset()})},e.open=function(){r(o,e.fields,e),$.each(e.fields,function(e,t){t.open()})},e.create=function(){$(this).css("minWidth",e.minWidth)},e.resizeStop=function(){$(d).dialog("option","position",{my:"center",at:"center",of:window})},e.updateField=function(e,t){h[s(e)].update(t)};var c={};$.each(e.fields,function(e,t){c[s(t.name())]=t.valueGetter()});var d=$.extend($(i).dialog(e),c);return $(d).submit(function(e){e.preventDefault()}),$(d).on("autoCenter",function(){$(d).dialog("option","position",{my:"center",at:"center",of:window})}),this.dialog=d,this.tip=o,d},destroy:function(){$(dialog).dialog("destroy").remove()}}),n=function(e,t,i){try{var n=this;$.each(t,function(t,r){$.each(i,function(t,i){var s=i.validations(),a=i.valueGetter();s&&i.name()==r&&$.each(s,function(t,r){if(!r.check.call(n,a()))throw o(e,i,r.tip),$(n).trigger("autoCenter"),new Error(r.tip)})})})}catch(r){return r.message}return!0},o=function(e,t,i){e.toError(i),t.applyFeedback()},r=function(e,t,i){e.toInfo(i.tip),$.each(t,function(e,t){t.resetFeedback()})},s=function(e){return e.replace(/ /g,"")};return i}),define("dialog-text-field",["require","wrap-in-div","class"],function(e){var t=e("wrap-in-div"),i=e("class").extend({init:function(e){this.options=e},name:function(){return this.options.name},html:function(){return this.h},validations:function(){return this.options.validations},create:function(){var e=this.name().toLowerCase(),i=document.createElement("label");i.innerHTML=this.name(),$(i).attr("for",e);var n=document.createElement("input");n.type="text",n.name=e,n.id=e,"[object Function]"==Object.prototype.toString.call(this.options.value)?$(n).data("valueGetter",this.options.value):n.value=this.options.value,$(n).addClass("ui-corner-all"),this.h=t.wrap([i,n])},open:function(){var e=$(this.html()).find("input"),t=$(e).data("valueGetter");t&&(e[0].value=t()),e.attr("default",e.value)},reset:function(){var e=$(this.html()).find("input");e.value=$(e).attr("default")},update:function(e){var t=$(this.html()).find("input");t[0].value=e},valueGetter:function(){var e=$(this.html()).find("input");return function(){return e[0].value}},applyFeedback:function(){var e=$(this.html()).find("input");$(e).addClass("ui-state-error")},resetFeedback:function(){var e=$(this.html()).find("input");$(e).removeClass("ui-state-error")}});return i}),define("new-type-dialog",["require","gb","dialog-modular","dialog-text-field","ui-component"],function(e){var t=e("gb"),i=e("dialog-modular"),n=e("dialog-text-field"),o=e("ui-component").extend({init:function(){var e=this;this.onClose=null,this.newTypeDialog=(new i).create({id:"new-type-dialog",title:"New Type",tip:"Choose a name for the new type",autoOpen:!1,height:"auto",width:"auto",minWidth:300,modal:!0,fields:[new n({name:"Type Name",value:"",validations:[{check:function(e){return""!=e.trim()},tip:"Type name can not be empty"},{check:function(e){return!t.goPool.configurationExists(e.trim())},tip:"Type name already exists"}]})],buttons:{"Create Type":function(){e.onClose&&e.onClose(this.TypeName().trim()),$(this).dialog("close")}},validateOnAction:{"Create Type":["Type Name"]}}),$("#new-type-dialog").on("dialogclose",function(){$("#new-type-dialog").dialog("destroy").remove(),e.newTypeDialog=null,e.onClose-null})},open:function(e,t){return this.onClose=t,$(this.newTypeDialog).dialog("option").updateField("Type Name",e),$(this.newTypeDialog).dialog("open")}});return o}),define("dialog-hidden-field",["require","wrap-in-div","class"],function(e){var t=(e("wrap-in-div"),e("class").extend({init:function(e){this.options=e},name:function(){return this.options.name},html:function(){return this.h},validations:function(){return this.options.validations},create:function(){this.h=document.createElement("div"),this.h.style.display="none"},open:function(){},reset:function(){},update:function(e){this.options.value=e},valueGetter:function(){var e=this;return function(){return e.options.value}},applyFeedback:function(){},resetFeedback:function(){}}));return t}),define("edit-type-dialog",["require","gb","dialog-modular","dialog-text-field","dialog-hidden-field","ui-component"],function(e){var t=e("gb"),i=e("dialog-modular"),n=e("dialog-text-field"),o=e("dialog-hidden-field"),r=e("ui-component").extend({init:function(e,r){this._super();var s=this,a={},l={};e&&(a.Edit=function(){s.execute("edit",[this.TypeName().trim(),this.InitialName().trim()],"apply"),s.hardCleanUp(),$(this).dialog("close")},l.Edit=["Type Name"]),r&&(a.Delete=function(){s.execute("delete",this.InitialName().trim()),s.hardCleanUp(),$(this).dialog("close")},l.Delete=[]),this.editTypeDialog=(new i).create({id:"edit-type-dialog",title:"Edit Type",tip:"Edit the type name",autoOpen:!1,height:"auto",width:"auto",minWidth:300,modal:!0,fields:[new n({name:"Type Name",value:"",validations:[{check:function(e){return""!=e.trim()},tip:"Type name can not be empty"},{check:function(e){return!t.goPool.configurationExists(e.trim())},tip:"Type name already exists"}]}),new o({name:"Initial Name",value:"",validations:[]})],buttons:a,validateOnAction:l}),$("#edit-type-dialog").on("dialogclose",function(){$("#edit-type-dialog").dialog("destroy").remove(),s.editTypeDialog=null})},open:function(e){return $(this.editTypeDialog).dialog("option").updateField("Type Name",e),$(this.editTypeDialog).dialog("option").updateField("Initial Name",e),$(this.editTypeDialog).dialog("open")}});return r}),define("toggle",["require","wrap-in-div","class"],function(e){var t=e("wrap-in-div"),i=e("class").extend({init:function(){},create:function(e){var i=document.createElement("input");return i.type="checkbox",$(i).attr("editor-toggle",""),$(i).attr("data-on",e.on),$(i).attr("data-off",e.off),$(i).change(e.onChange),t.wrap(i,{id:e.id,classNames:["editor-toggle"]})}});return new i}),define("colliders-toggle-ui",["require","toggle","gb","editor-config","ui-component"],function(e){var t=e("toggle"),i=(e("gb"),e("editor-config")),n=!1,o=e("ui-component").extend({init:function(){},create:function(){return t.create({id:"colliders-toggle-button",on:"Hide Colliders",off:"Show Colliders",onChange:function(){n=$(this).prop("checked"),n?(o.showAllColliderLayers(),o.showAllColliderLayersGameObjects()):(o.hideAllColliderLayers(),o.hideAllColliderLayersGameObjects())}})}});return o.isOn=function(){return n},o.showAllColliderLayers=function(){for(var e=i.getViewports(),t=0;t<e.length;t++)e[t].showLayer(i.getGizmoCollidersBackLayerName()),e[t].showLayer(i.getGizmoCollidersFrontLayerName())},o.showAllColliderLayersGameObjects=function(){for(var e=i.getViewports(),t=0;t<e.length;t++)e[t].getLayer(i.getGizmoCollidersBackLayerName()).showGameObjects(),e[t].getLayer(i.getGizmoCollidersFrontLayerName()).showGameObjects()},o.hideAllColliderLayers=function(){for(var e=i.getViewports(),t=0;t<e.length;t++)e[t].hideLayer(i.getGizmoCollidersBackLayerName()),e[t].hideLayer(i.getGizmoCollidersFrontLayerName())},o.hideAllColliderLayersGameObjects=function(){for(var e=i.getViewports(),t=0;t<e.length;t++)e[t].getLayer(i.getGizmoCollidersBackLayerName()).hideGameObjects(),e[t].getLayer(i.getGizmoCollidersFrontLayerName()).hideGameObjects()},o}),define("rotation-toggle-ui",["require","toggle","gb","editor-config","ui-component"],function(e){var t=e("toggle"),i=(e("gb"),e("editor-config")),n=!1,o=e("ui-component").extend({init:function(){},create:function(){return t.create({id:"rotations-toggle-button",on:"Hide Rotation Handles",off:"Show Rotation Handles",onChange:function(){n=$(this).prop("checked"),n?(o.showAllRotationLayers(),o.showAllRotationLayersGameObjects()):(o.hideAllRotationLayers(),o.hideAllRotationLayersGameObjects())}})}});return o.isOn=function(){return n},o.showAllRotationLayers=function(){for(var e=i.getViewports(),t=0;t<e.length;t++)e[t].showLayer(i.getGizmoRotationBackLayerName()),e[t].showLayer(i.getGizmoRotationFrontLayerName())},o.showAllRotationLayersGameObjects=function(){for(var e=i.getViewports(),t=0;t<e.length;t++)e[t].getLayer(i.getGizmoRotationBackLayerName()).showGameObjects(),e[t].getLayer(i.getGizmoRotationFrontLayerName()).showGameObjects()},o.hideAllRotationLayers=function(){for(var e=i.getViewports(),t=0;t<e.length;t++)e[t].hideLayer(i.getGizmoRotationBackLayerName()),e[t].hideLayer(i.getGizmoRotationFrontLayerName())},o.hideAllRotationLayersGameObjects=function(){for(var e=i.getViewports(),t=0;t<e.length;t++)e[t].getLayer(i.getGizmoRotationBackLayerName()).hideGameObjects(),e[t].getLayer(i.getGizmoRotationFrontLayerName()).hideGameObjects()},o}),define("scale-toggle-ui",["require","toggle","gb","editor-config","ui-component"],function(e){var t=e("toggle"),i=(e("gb"),e("editor-config")),n=!1,o=e("ui-component").extend({init:function(){},create:function(){return t.create({id:"scales-toggle-button",on:"Hide Scale Handles",off:"Show Scale Handles",onChange:function(){n=$(this).prop("checked"),n?(o.showAllScaleLayers(),o.showAllScaleLayersGameObjects()):(o.hideAllScaleLayers(),o.hideAllScaleLayersGameObjects())}})}});return o.isOn=function(){return n},o.showAllScaleLayers=function(){for(var e=i.getViewports(),t=0;t<e.length;t++)e[t].showLayer(i.getGizmoScaleBackLayerName()),e[t].showLayer(i.getGizmoScaleFrontLayerName())},o.showAllScaleLayersGameObjects=function(){for(var e=i.getViewports(),t=0;t<e.length;t++)e[t].getLayer(i.getGizmoScaleBackLayerName()).showGameObjects(),e[t].getLayer(i.getGizmoScaleFrontLayerName()).showGameObjects()},o.hideAllScaleLayers=function(){for(var e=i.getViewports(),t=0;t<e.length;t++)e[t].hideLayer(i.getGizmoScaleBackLayerName()),e[t].hideLayer(i.getGizmoScaleFrontLayerName())},o.hideAllScaleLayersGameObjects=function(){for(var e=i.getViewports(),t=0;t<e.length;t++)e[t].getLayer(i.getGizmoScaleBackLayerName()).hideGameObjects(),e[t].getLayer(i.getGizmoScaleFrontLayerName()).hideGameObjects()},o}),define("game-object-context-menu",["require","gb","editor-config","menu","attribute-assigner","configuration-creator","game-object-cloner","new-type-dialog","edit-type-dialog","ui-component","mode","object-counter","object-counter","mode","object-counter","object-counter","mode","colliders-toggle-ui","rotation-toggle-ui","scale-toggle-ui","setup-editable-game-object","object-counter","object-counter"],function(e){var t=e("gb"),i=e("editor-config"),n=e("menu"),o=(e("attribute-assigner"),e("configuration-creator")),r=e("game-object-cloner"),s=e("new-type-dialog"),a=e("edit-type-dialog"),l=e("ui-component").extend({init:function(){this.newTypeDialog=null,this.editTypeDialog=null},create:function(){var l=this,h=(new n).create({id:"game-object-context-menu",options:[{name:function(){return u.go.typeId},icon:"ui-icon-caret-1-e",disable:!0},{name:"Clone",icon:"ui-icon-plusthick",omit:function(){return e("mode").isAdvanced()},click:function(){return e("object-counter").canCreate()?void e("object-counter").showErrorFeedback():void r.clone(u.go)}},{name:"Create",icon:"ui-icon-plusthick",omit:function(){return e("mode").isBasic()},options:[{name:"Clone",icon:"ui-icon-bullet",click:function(){return e("object-counter").canCreate()?void e("object-counter").showErrorFeedback():void r.clone(u.go)}},{name:"Type",icon:"ui-icon-bullet",click:function(){l.newTypeDialog=new s;var e=u.go;l.newTypeDialog.open(o.getNewConfigurationName(e),function(t){o.createFromGameObject(e,{force:!0,configurationId:t}),c(e,t)})}}]},{name:"Viewports",icon:"ui-icon-wrench",omit:function(){return e("mode").isBasic()},disable:function(){return u?u.go.isChild():!1},options:[{name:"Add To",icon:"ui-icon-plusthick",options:function(){var e=i.getViewports().map(function(e){return e.name});return e.map(function(e){return{name:e,icon:"ui-icon-bullet",disable:function(){return d(u.go,e)||!t.viewports.get(e).layerExists(u.l)},click:function(e){t.viewports.get(e).addGameObject(u.l,u.go)}}})}},{name:"Remove From",icon:"ui-icon-minusthick",options:function(){var e=i.getViewports().map(function(e){return e.name});return e.map(function(e){return{name:e,icon:"ui-icon-bullet",disable:!d(u.go,e),click:function(e){t.viewports.get(e).removeGameObject(u.l,u.go)}}})}},{name:"Remove Current",icon:"ui-icon-minusthick",click:function(){u.v.removeGameObject(u.l,u.go)}},{name:"Change layer",icon:"ui-icon-transferthick-e-w",options:function(){return i.getViewportLayers(u.v).map(function(e){return{name:e,icon:"ui-icon-bullet",disable:u.l==e,click:function(e){u.v.moveGameObject(u.l,e,u.go)}}})}}]},{name:"Move",icon:"ui-icon-transferthick-e-w",options:[{name:"To Front",icon:"ui-icon-bullet",click:function(){u.v.getLayer(u.l).moveGameObjectToFront(u.go)}},{name:"To Back",icon:"ui-icon-bullet",click:function(){u.v.getLayer(u.l).moveGameObjectToBack(u.go)}}]},{name:"Edit",icon:"ui-icon-wrench",options:function(){var n=[];return n.push({name:"Collider",icon:"ui-icon-radio-off",click:function(){e("colliders-toggle-ui").showAllColliderLayers(),u.go.toggleVisibility(!0).recurse().ommitSelf().all(function(e){return i.isColliderGizmoGameObject(e.typeId)})}}),n.push({name:"Rotation",icon:"ui-icon-arrowrefresh-1-w",click:function(){e("rotation-toggle-ui").showAllRotationLayers(),u.go.toggleVisibility(!0).recurse().ommitSelf().all(function(e){return i.isRotationGizmoGameObject(e.typeId)})}}),n.push({name:"Scale",icon:"ui-icon-arrow-2-se-nw",click:function(){e("scale-toggle-ui").showAllScaleLayers(),u.go.toggleVisibility(!0).recurse().ommitSelf().all(function(e){return i.isScaleGizmoGameObject(e.typeId)})}}),t.goPool.isConfigurationCustom(u.go.typeId)&&n.push({name:"Type",icon:"ui-icon-bullet",click:function(){l.editTypeDialog=new a(!0,!1),l.editTypeDialog.open(u.go.typeId),l.editTypeDialog.on("edit",this,function(e,i){t.goPool.updateConfigurationId(i,e)})}}),n}},{name:"Remove",icon:"ui-icon-trash",options:function(){var e=[];return e.push({name:"This",icon:"ui-icon-bullet",click:function(){t.reclaimer.claim(u.go)}}),e.push({name:"All",icon:"ui-icon-bullet",click:function(){for(var e=t.findGameObjectsOfType(u.go),i=0;i<e.length;i++)t.reclaimer.claim(e[i])}}),t.goPool.isConfigurationCustom(u.go.typeId)&&e.push({name:"Type",icon:"ui-icon-bullet",click:function(){t.reclaimer.clearGameObjectConfiguration(u.go.typeId)}}),e}}]}),c=function(i,n){if(n){var o=e("setup-editable-game-object").setupWithGameObject(n,i);o&&(e("object-counter").count(o),e("object-counter").showSuccessFeedback()),t.reclaimer.claim(i)}},d=function(e,t){for(var i=0;i<e.getViewportList().length;i++){var n=e.getViewportList()[i];if(n.viewport===t)return!0}return!1},u={menu:h,go:null,v:null,l:null,show:function(e){this.go=e.go,this.v=e.viewport,this.l=e.layer,this.menu.show(e.globalMouseX,e.globalMouseY),this.removeHideEvents(),this.addHideEvents()},hide:function(){this.go=null,this.v=null,this.l=null,this.menu.hide(),this.removeHideEvents()},belongs:function(e){return this.menu.belongs(e)},addHideEvents:function(){t.Mouse.on(t.Mouse.NOTHING_CLICKED_ON_CANVAS,this,this.hideMenu),t.Mouse.on(t.Mouse.CANVAS_CONTEXT_MENU,this,this.hideMenu),t.Mouse.on(t.Mouse.CLICKED_OUTSIDE_CANVAS,this,this.checkBelongsThenHide)},removeHideEvents:function(){t.Mouse.remove(t.Mouse.NOTHING_CLICKED_ON_CANVAS,this,this.hideMenu),t.Mouse.remove(t.Mouse.CANVAS_CONTEXT_MENU,this,this.hideMenu),t.Mouse.remove(t.Mouse.CLICKED_OUTSIDE_CANVAS,this,this.checkBelongsThenHide)},hideMenu:function(){this.hide()},checkBelongsThenHide:function(e){this.belongs(e.target)||this.hide()}};return u}});return l}),define("setup-game-object-input",["require","gb","editor-config","snap-to-grid-value","game-object-context-menu","control-object-context-menu","class","game-object"],function(e){var t=e("gb"),i=e("editor-config"),n=e("snap-to-grid-value"),o=e("game-object-context-menu"),r=e("control-object-context-menu"),s=null,a=null,l=i.getGridCellSize(),h=e("class").extend({init:function(){this.contextMenu=(new o).create(),this.controlObjectContextMenu=(new r).create()},setupInteraction:function(e){c.call(this,e)}});Object.defineProperty(e("game-object").prototype,"Selected",{get:function(){return this.selected},set:function(e){this.renderer.debugColor=e?"#00FF00":"#FFFF00",this.selected=e}});var c=function(e){if(t.goPool.getConfigurationObject(e.typeId).hasMouseSupport()&&(e.Dragable=!0,e.single(e.CONTEXT_MENU,this,function(e){i.isControlObject(e.go.typeId)?this.controlObjectContextMenu.show(e):i.isDraggableOnlyObject(e.go.typeId)||this.contextMenu.show(e)}),e.single(e.CLICK,this,function(){this.contextMenu.hide(),this.controlObjectContextMenu.hide()}),e.single(e.MOUSE_DRAG_START,this,function(e){e.go.Selected=!0}),e.single(e.MOUSE_DRAG_END,this,function(e){e.go.Selected=!1}),e.single(e.MOUSE_DRAG,this,function(e){n.get()&&(s=Number(l.width.toFixed(2)),a=Number(l.height.toFixed(2)),e.go.x=s*Math.floor(e.go.x/s+.5),e.go.y=a*Math.floor(e.go.y/a+.5))}),e.childs))for(var o=0;o<e.childs.length;o++)i.isEditorGameObject(e.childs[o].typeId)||c.call(this,e.childs[o])};return new h}),define("scene-serializer",["require","gb","world","editor-config","util","attribute-comparer","class"],function(e){var t=e("gb"),i=e("world"),n=e("editor-config"),o=e("util"),r=e("attribute-comparer"),s=e("class").extend({init:function(){this.serializableObjects=[]},add:function(e){this.serializableObjects.push(e),e.on(e.RECYCLE,this,function(e){this.serializableObjects.splice(this.serializableObjects.indexOf(e),1)})},serialize:function(e){try{for(var r=[],s=0;s<this.serializableObjects.length;s++){var l=this.serializableObjects[s],h={id:l.typeId,g:l.getUpdateGroup(),v:l.getViewportList(),x:l.x,y:l.y};l.hasStructuralChanges()?(h.properties=u(l),h.hasStructuralChanges=!0):(h.properties=f(l),h.hasStructuralChanges=!1),r.push(h)}var c=t.groups.allGroupNames(),d=[],p=n.getViewports();for(s=0;s<p.length;s++){var g=p[s];d.push({name:g.name,width:g.Width,height:g.Height,offsetX:g.OffsetX,offsetY:g.OffsetY,scaleX:g.ScaleX,scaleY:g.ScaleY,stroke:g.getStroke(),worldFit:g.WorldFit,layers:n.getViewportLayers(g)})}var m={name:e,objects:r,groups:c,viewports:d,goConfig:a(t.goPool),coConfig:a(t.coPool),world:{width:i.getWidth(),height:i.getHeight()}};return JSON.stringify(m,function(e,t){if(o.isObject(t)){for(var i in t)o.isObject(t[i])&&0==Object.keys(t[i]).length&&delete t[i];if(0==Object.keys(t).length)return void 0}return o.isArray(t)&&0==t.length?void 0:null===t?void 0:t})}catch(y){return!1}}}),a=function(e){for(var t=e.getConfigurationTypes({customOnly:!0}),i=[],n=0;n<t.length;n++)i.push(e.getConfigurationObject(t[n]));return i},l=function(e,t,i){t[i]=void 0!==e.x&&void 0!==e.y&&void 0!==e.rotation&&void 0!==e.scaleX&&void 0!==e.scaleY?o.shallow_merge_many(e.args,e.Attributes,{x:e.x,y:e.y,rotation:e.rotation,scaleX:e.scaleX,scaleY:e.scaleY}):o.shallow_merge_many(e.args,e.Attributes)},h=function(e,t,i){var n;n=void 0!==e.x&&void 0!==e.y&&void 0!==e.rotation&&void 0!==e.scaleX&&void 0!==e.scaleY?o.shallow_merge_many(e.args,e.Attributes):o.shallow_merge_many(e.args,e.Attributes,{x:e.x,y:e.y,rotation:e.rotation,scaleX:e.scaleX,scaleY:e.scaleY}),t.push({attributes:n,indexInParent:i})},c=function(e,t,i){var n=r.getChanges(e);n&&(t[i]=n),void 0!==e.x&&void 0!==e.y&&void 0!==e.rotation&&void 0!==e.scaleX&&void 0!==e.scaleY&&(t[i]||(t[i]={}),t[i].x=e.x,t[i].y=e.y,t[i].rotation=e.rotation,t[i].scaleX=e.scaleX,t[i].scaleY=e.scaleY)},d=function(e,t,i){var n=r.getChanges(e);n&&t.push({attributes:n,indexInParent:i})},u=function(e){var t={};if(l(e,t,"args"),e.components){t.componentArgs={};for(var i=-1,o=0;o<e.components.length;o++){var r=e.components[o];n.isEditorComponent(r.typeId)||(i++,y(t.componentArgs,r.typeId),h(r,t.componentArgs[r.typeId],i))}}return t.children=p(e),t},p=function(e){if(e.childs){for(var t={},i=-1,o=0;o<e.childs.length;o++){var r=e.childs[o],s=r.typeId;if(!n.isEditorGameObject(r.typeId)){i++,y(t,s);var a=u(r);a.indexInParent=i,a.hasStructuralChanges=r.hasStructuralChanges(),t[s].push(a)}}return m(t)}},f=function(e){var t={};if(c(e,t,"args"),e.components){t.componentArgs={};for(var i=-1,o=0;o<e.components.length;o++){var r=e.components[o];n.isEditorComponent(r.typeId)||(i++,y(t.componentArgs,r.typeId),d(r,t.componentArgs[r.typeId],i))}t.componentArgs=m(t.componentArgs),t.children=g(e)}return t},g=function(e){if(e.childs){for(var t={},i=-1,o=0;o<e.childs.length;o++){var r=e.childs[o],s=r.typeId;if(!n.isEditorGameObject(s)){i++,y(t,s);var a=f(r);Object.keys(a).length>0&&(a.indexInParent=i,a.hasStructuralChanges=r.hasStructuralChanges(),t[s].push(a))}}return m(t)}},m=function(e){for(var t in e)0==e[t].length&&delete e[t];return 0==Object.keys(e).length?null:e},y=function(e,t){e[t]||(e[t]=[])
};return new s}),define("setup-editable-game-object",["require","gb","editor-config","setup-game-object-input","scene-serializer","editor-gizmos","delegate"],function(e){var t=e("gb"),i=e("editor-config"),n=e("setup-game-object-input"),o=e("scene-serializer"),r=e("editor-gizmos"),s=e("delegate").extend({init:function(){this._super()},setup:function(e,t,i,n){var o=a(e,t,i,n);return o&&this.execute(this.GAME_OBJECT_ADDED,o),o},setupWithGameObject:function(e,t){var i;return i=t.isChild()?l(e,t.parent):a(e,t.getUpdateGroup(),JSON.parse(JSON.stringify(t.getViewportList()))),i?(i.x=t.x,i.y=t.y,this.execute(this.GAME_OBJECT_ADDED,i),i):void 0},setupWithViewport:function(e,t,i,n){var o=a(e,t,i);return o?(o.x=-n.x+n.Width/2,o.y=-n.y+n.Height/2,this.execute(this.GAME_OBJECT_ADDED,o),o):void 0},setupChild:function(e,t){return l(e,t)},addGizmos:function(e){d(e)}}),a=function(e,i,n,r){if("Nothing"!=e&&"Nothing"!=i&&n.length>0){var s=t.getGameObject(e,i,n,r,"create");return h(s),o.add(s),s}},l=function(e,i){var n=t.addChildTo(i,e,null,null,"create",!1);return h(n),n},h=function(e){c(e),e.start(),d(e),n.setupInteraction(e),e.execute("setup_complete")},c=function(e){if(e.editorStart=function(){},e.editorUpdate=function(){},e.components)for(var t=0;t<e.components.length;t++){var i=e.components[t];i.editorStart=function(){},i.editorAdded=function(){},i.editorUpdate=function(){}}if(e.childs)for(var t=0;t<e.childs.length;t++)c(e.childs[t])},d=function(e){if(!i.isDraggableOnlyObject(e.typeId)&&(r.addGizmos(e),e.childs))for(var t=0;t<e.childs.length;t++)d(e.childs[t])};return Object.defineProperty(s.prototype,"GAME_OBJECT_ADDED",{get:function(){return"game-object-added"}}),new s}),define("scene-name",["require","gb","class"],function(e){var t=(e("gb"),e("class").extend({init:function(){},set:function(e){document.querySelector(".side-menu-scene-title").innerHTML=e},get:function(){return document.querySelector(".side-menu-scene-title").innerHTML}}));return new t}),define("editor-scene-loader",["require","gb","world","editor-setup","editor-viewports","setup-editable-game-object","scene-name","scene-loader"],function(e){var t=(e("gb"),e("world")),i=e("editor-setup"),n=e("editor-viewports"),o=e("setup-editable-game-object"),r=e("scene-name"),s=e("scene-loader").extend({init:function(){this._super()},cleanUp:function(){i.clear()},sceneName:function(e){r.set(e.name)},world:function(e){t.setWidth(e.world.width),t.setHeight(e.world.height)},viewports:function(e){for(var t=e.viewports,o=0;o<t.length;o++)"Main"==t[o].name?n.add(t[o]).NoClipping().NoCulling().NoMouseBounded().Stroke("none"):n.add(t[o]).NoClipping().NoCulling().NoMouseBounded();i.display()},getGameObject:function(e){return o.setup(e.id,e.g,e.v,this.getGameObjectArgs(e.properties))},addChildGameObject:function(e,t){return o.setupChild(e,t)},decorateGameObject:function(e){o.addGizmos(e)}});return new s}),define("ui-component-controller",["require","ui-component"],function(e){var t=e("ui-component").extend({init:function(e,t){this._super(),this.html=e,this.parent=t}});return t}),define("ui-component-factory",["require","ui-component-controller","ui-component-controller","ui-component-controller","ui-component-controller"],function(e){var t=function(){};return t.prototype.getController=function(){if(1==arguments.length)return new(e("ui-component-controller"))(arguments[0]);if(2==arguments.length)return new(e("ui-component-controller").extend(arguments[0]))(arguments[1]);throw new Error("ui-component-factory.js: Wrong number of arguments")},t.prototype.getControllerWithParent=function(){if(2==arguments.length)return new(e("ui-component-controller"))(arguments[0],arguments[1]);if(3==arguments.length)return new(e("ui-component-controller").extend(arguments[0]))(arguments[1],arguments[2]);throw new Error("ui-component-factory.js: Wrong number of arguments")},new t}),define("dialog-tabbed-modular",["require","create-status-message","util","ui-component"],function(e){var t=e("create-status-message"),i=e("util"),n=e("ui-component").extend({init:function(){},create:function(e){var i=document.createElement("div");i.id=e.id,$(i).addClass("dialog");var n=t.createInfoMessage(e.tip);n.appendTo(i);var h=document.createElement("div"),c=document.createElement("ul");$(h).css({"padding-top":"5px","min-height":"220px"}),$(h).append(c),$(i).append(h);var d={};$.each(e.tabs,function(t,i){var o=document.createElement("li"),s=document.createElement("a"),u=document.createElement("div");s.setAttribute("href","#"+e.id+"-tab-"+t),s.innerHTML=i.name,u.setAttribute("id",e.id+"-tab-"+t),$(o).append(s),$(c).append(o),$(h).append(u);var p=document.createElement("form"),f=document.createElement("fieldset");$(u).append(p),$(p).append(f),$(p).css({padding:"2px"});var m=i.fields;d[i.name]={},$.each(m,function(e,t){t.create(),$(t.html()).css({"margin-bottom":"5px"}),d[i.name][l(t.name())]=t,$(f).append(t.html())});var y=i.buttons,b=i.validateOnAction;$.each(y,function(t,i){y[t]=function(t,i,o,s){return function(){a(n,s,e),result=r.call(g,n,o[i],s),result===!0&&t.call(g)}}.call(this,i,t,b,m)})}),e.close=function(){var t=$(arguments[0].currentTarget).attr("title");$.each(e.tabs,function(i,o){a(n,o.fields,e),$.each(o.fields,function(i,n){e.resetOnClose?"Close"==t&&n.reset():n.reset()})})},e.open=function(){$.each(e.tabs,function(t,i){a(n,i.fields,e),$.each(i.fields,function(e,t){t.open(g)})}),$(g).dialog("option","position",{my:"center",at:"center",of:window});var t=$(m).tabs("option","active");o.call(g,e.tabs[t])},e.create=function(){$(this).css("minWidth",e.minWidth)},e.resizeStop=function(){$(g).dialog("option","position",{my:"center",at:"center",of:window})},e.updateField=function(e,t,i){d[e][l(t)].update(i)},e.enableField=function(e,t){d[e][l(t)].enable()},e.disableField=function(e,t){d[e][l(t)].disable()},e.resetField=function(e,t){d[e][l(t)].reset()},e.showLoadingFeedback=function(){$(g).attr("disabled",!0).addClass("ui-state-disabled"),$(g).css({pointerEvents:"none"}),$(g).parent().css({pointerEvents:"none"})},e.hideLoadingFeedback=function(){$(g).attr("disabled",!1).removeClass("ui-state-disabled"),$(g).css({pointerEvents:"all"}),$(g).parent().css({pointerEvents:"all"})},e.showErrorFeedback=function(e){s(n,null,e),$(g).dialog("option","position",{my:"center",at:"center",of:window})};var u={};for(var p in d)for(var f in d[p])u[l(d[p][f].name())]=d[p][f].valueGetter();e.buttons=e.tabs[0].buttons;var g=$.extend($(i).dialog(e),u),m=$(h).tabs({activate:function(){var t=$(m).tabs("option","active");$(g).dialog("option","buttons",e.tabs[t].buttons),$.each(e.tabs,function(t,i){a(n,i.fields,e)}),o.call(g,e.tabs[t])}});return $(g).submit(function(e){e.preventDefault()}),$(g).on("autoCenter",function(){$(g).dialog("option","position",{my:"center",at:"center",of:window})}),this.dialog=g,this.tip=n,this.tabs=m,g},destroy:function(){$(this.tabs).tabs("destroy").remove(),$(this.dialog).dialog("destroy").remove()}}),o=function(e){i.isFunction(e.activate)&&e.activate.call(this)},r=function(e,t,i){try{var n=this;$.each(t,function(t,o){$.each(i,function(t,i){var r=i.validations(),a=i.valueGetter();r&&i.name()==o&&$.each(r,function(t,o){if(!o.check.call(n,a()))throw s(e,i,o.tip),$(n).trigger("autoCenter"),new Error(o.tip)})})})}catch(o){return o.message}return!0},s=function(e,t,i){e.toError(i),t&&t.applyFeedback()},a=function(e,t,i){e.toInfo(i.tip),t&&$.each(t,function(e,t){t.resetFeedback()})},l=function(e){return e.replace(/ /g,"")};return n}),define("scene-save-ui",["require","local-storage","level-requester","scene-serializer","dialog-tabbed-modular","dialog-text-field","dialog-hidden-field","scene-name","util","ui-component"],function(e){var t=e("local-storage"),i=e("level-requester"),n=e("scene-serializer"),o=e("dialog-tabbed-modular"),r=e("dialog-text-field"),s=e("dialog-hidden-field"),a=e("scene-name"),l=(e("util"),e("ui-component").extend({init:function(){this.saveSceneDialog=(new o).create({id:"save-scene-dialog",title:"Save the current scene",tip:"Set a name",autoOpen:!1,height:"auto",width:"auto",minWidth:300,modal:!0,tabs:[{name:"Local Storage",fields:[new r({name:"Local Scene Name",value:function(){return a.get()},validations:[{check:function(e){return""!=e},tip:"Scene name can't be empty"}]}),new s({name:"Scene Already Exists",validations:[{check:function(){return!t.getScene(this.LocalSceneName())},tip:"To overwrite the old scene click 'Update'"}]})],buttons:{Save:function(){c.call(this)},Update:function(){c.call(this)}},validateOnAction:{Save:["Local Scene Name","Scene Already Exists"],Update:["Scene Name"]}},{name:"Remote Storage",fields:[new r({name:"Remote Scene Name",value:function(){return a.get()},validations:[{check:function(e){return""!=e},tip:"Scene name can't be empty"}]}),new s({name:"Remote Url",validations:[{check:function(){return i.pingRemote(h())},tip:"Remote is not available"}]})],buttons:{Upload:function(){d.call(this)}},validateOnAction:{Upload:["Remote Scene Name","Remote Url"]}}]})},open:function(){return this.saveSceneDialog.dialog("open")}})),h=function(){var e=window.location.hostname;return"localhost"===e?"http://localhost:3000":""===e?"http://localhost:3000":"http://scene-store.herokuapp.com"},c=function(){var e=this.LocalSceneName(),i=n.serialize(e);return i===!1?void $(self).dialog("option").showErrorFeedback("Error saving then scene."):(t.setScene(e,i)?$(this).dialog("close"):$(self).dialog("option").showErrorFeedback("No more space in local storage."),void a.set(e))},d=function(){var e=this.RemoteSceneName(),o=this,r=n.serialize(e);return r===!1?void $(o).dialog("option").showErrorFeedback("Error saving the scene."):(i.post(r,h()+"/add",function(e){$(o).dialog("close");var i=JSON.parse(e);t.setRemoteId(i.name,i.id,i.remote)},function(){$(o).dialog("option").showErrorFeedback("Error posting to the remote.")}),void a.set(e))};return l.serializeAndStoreRemoteShare=function(e,t){var o=this,r=n.serialize("!@<share>@!");return r===!1?void t():void i.post(r,h()+"/add",function(t){$(o).dialog("close");var i=JSON.parse(t);e(i.name,i.id,i.remote)},function(){t()})},l}),define("dialog-paging-field",["require","wrap-in-div","util","class"],function(e){var t=e("wrap-in-div"),i=e("util"),n=e("class").extend({init:function(e){this.options=e,this.page=0,this.cachedData=null,this.cachedPages=null,this.dialog=null},name:function(){return this.options.name},html:function(){return this.h},validations:function(){return this.options.validations},itemsPerPage:function(){return this.options.itemsPerPage},unknownPageLimit:function(){return!this.options.data},data:function(){return this.options.data?this.options.data():this.cachedData?this.cachedData:[]},pages:function(){return Math.ceil(this.data().length/this.itemsPerPage())},currentPage:function(){return this.page},getDialog:function(){return this.dialog},create:function(){var e=this.name().toLowerCase(),i=document.createElement("label");i.innerHTML=this.name(),$(i).attr("for",e);var n=document.createElement("div"),o=this.data();this.addListItem(n,{"margin-top":"0px"},o[0],0);for(var r=0;r<this.itemsPerPage()-2;r++)this.addListItem(n,null,o[r+1],r+1);this.options.hideNavagationButtons?this.addListItem(n,{"margin-bottom":"0px"},o[this.itemsPerPage()-1],this.itemsPerPage()-1):(this.addListItem(n,null,o[this.itemsPerPage()-1],this.itemsPerPage()-1),this.addNavigationButtons(n)),$(n).addClass("ui-corner-all"),$(n).addClass("well"),$(n).addClass("well-small"),this.h=t.wrap([i,n]),this.options.disabled&&this.disable()},addListItem:function(e,t,i,n){var o=document.createElement("label");o.setAttribute("index",n),$(o).addClass("radio"),o.style.marginBottom="13px",t&&$(o).css(t);var r=document.createElement("input");r.type="radio",r.name=this.name().toLowerCase()+"_radio",r.style.width="auto",r.style.marginTop="1px",o.appendChild(r),i?(o.appendChild(document.createTextNode(i)),r.setAttribute("text",i),$(r).attr("disabled",!1).removeClass("ui-state-disabled")):(o.appendChild(document.createTextNode("No Data")),r.setAttribute("text","no-data"),$(r).attr("disabled",!0).addClass("ui-state-disabled")),o.style.fontWeight="normal",e.appendChild(o)},addNavigationButtons:function(e){var t=document.createElement("ul"),i=document.createElement("li"),n=document.createElement("li"),o=document.createElement("a"),r=document.createElement("a");$(t).addClass("pager"),t.style.marginBottom="0px",o.href="#",r.href="#",o.textContent="<< Last",r.textContent="Next >>",$(o).on("click",function(){this.page--,this.page<0?this.page=0:this.update()}.bind(this)),$(r).on("click",function(){this.page++,this.unknownPageLimit()?-1===this.cachedPages.indexOf(this.page)?this.options.next.call(this):this.update():this.page>this.pages()-1?this.page=this.pages()-1:this.update()}.bind(this)),t.appendChild(i),t.appendChild(n),i.appendChild(o),n.appendChild(r),e.appendChild(t)},open:function(e){this.dialog=e,this.options.data&&(this.update(),0===this.options.data().length?this.disable():this.enable())},reset:function(){this.page=0,this.cachedData=null,this.cachedPages=null},update:function(e){this.unknownPageLimit()&&e&&(this.cachedData||(this.cachedData=[]),this.cachedPages||(this.cachedPages=[]),e.length>0?-1===this.cachedPages.indexOf(this.page)&&(this.cachedData=this.cachedData.concat(e),this.cachedPages.push(this.page)):(this.page--,this.page<0&&(this.page=0)));for(var e=this.data(),t=this.itemsPerPage(),n=0;t>n;n++){var o="",r=e[this.page*t+n];if(i.isObject(r)){if(!r.hasOwnProperty("displaytext"))throw new Error('missing required property "displaytext"');if("string"!=typeof r.displaytext)throw new Error('"displaytext" property must be a string');o=r.displaytext}else o=r;var s=$(this.html()).find('label[index="'+n+'"]'),a=s.find("input"),l=s.children();if(s.empty(),s.append(l),o){if(s.append(document.createTextNode(o)),a.attr("text",o),i.isObject(r)){a.attr("hasAttributes",!0);for(var h in r)a.attr(h,r[h])}a.attr("text",o),$(a).attr("disabled",!1).removeClass("ui-state-disabled")}else s.append(document.createTextNode("No Data")),a.attr("text","no-data"),$(a).attr("disabled",!0).addClass("ui-state-disabled");a.prop("checked",!1)}},valueGetter:function(){var e=this;return function(){var t=$(e.html()).find("input:checked");if(t){if(t.attr("hasAttributes")){var i={};return $.each(t.get(0).attributes,function(){this.specified&&(i[this.name]=this.value)}),i}return t.attr("text")}return"no-data"}},applyFeedback:function(){},resetFeedback:function(){},enable:function(){var e=$(this.html());e.attr("disabled",!1).removeClass("ui-state-disabled"),e.find("a").attr("disabled",!1).removeClass("ui-state-disabled"),e.css({pointerEvents:"all"}),e.find("a").css({pointerEvents:"all"})},disable:function(){var e=$(this.html());e.attr("disabled",!0).addClass("ui-state-disabled"),e.find("a").attr("disabled",!0).addClass("ui-state-disabled"),e.css({pointerEvents:"none"}),e.find("a").css({pointerEvents:"none"})}});return n}),define("scene-load-ui",["require","local-storage","level-requester","level-compressor","editor-scene-loader","scene-serializer","dialog-tabbed-modular","dialog-text-field","dialog-paging-field","dialog-hidden-field","ui-component","scene-name","scene-name","level-storage","scene-name","level-storage","scene-name"],function(e){var t=e("local-storage"),i=e("level-requester"),n=(e("level-compressor"),e("editor-scene-loader")),o=e("scene-serializer"),r=e("dialog-tabbed-modular"),s=(e("dialog-text-field"),e("dialog-paging-field")),a=e("dialog-hidden-field"),l="",h=e("ui-component").extend({init:function(){this.loadSceneDialog=(new r).create({id:"load-scene-dialog",title:"Open a scene",tip:"Choose a scene to load",autoOpen:!1,height:"auto",width:"auto",minWidth:300,modal:!0,tabs:[{name:"Local Scenes",fields:[new s({name:"Local Scene Selector",itemsPerPage:10,data:function(){return t.getAllScenes()},validations:[{check:function(){return this.LocalSceneSelector()},tip:"No scene selected"}]})],buttons:{"Open Local":function(){t.setBackUpScene(o.serialize(e("scene-name").get()));try{var i=t.getScene(this.LocalSceneSelector());n.load(JSON.parse(i)),n.layout(),$(this).dialog("close")}catch(r){n.load(t.getBackUpScene()),n.layout(),$(this).dialog("option").showErrorFeedback("Error opening scene.")}}},validateOnAction:{"Open Local":["Local Scene Selector"]}},{name:"Remote Scenes",activate:function(){var e=this,t=$(e).dialog("option");return t.showLoadingFeedback(),i.pingRemote(c())?void i.get(c()+"/view/"+d(),function(e){t.enableField("Remote Scenes","Remote Scene Selector");var i=JSON.parse(e).map(function(e){return{displaytext:e.name,id:e.id}});l!==c()&&t.resetField("Remote Scenes","Remote Scene Selector"),t.updateField("Remote Scenes","Remote Scene Selector",i),t.hideLoadingFeedback(),l=c()},function(){t.disableField("Remote Scenes","Remote Scene Selector"),t.showErrorFeedback("Error connecting to the remote."),t.hideLoadingFeedback()}):(t.disableField("Remote Scenes","Remote Scene Selector"),t.showErrorFeedback("Remote is not available"),void t.hideLoadingFeedback())},fields:[new s({name:"Remote Scene Selector",itemsPerPage:10,disabled:!0,next:function(){var e=this.getDialog();$(e).dialog("option").showLoadingFeedback(),i.get(c()+"/view/"+this.currentPage()+d(),function(t){$(e).dialog("option").enableField("Remote Scenes","Remote Scene Selector");var i=JSON.parse(t).map(function(e){return{displaytext:e.name,id:e.id}});$(e).dialog("option").updateField("Remote Scenes","Remote Scene Selector",i),$(e).dialog("option").hideLoadingFeedback()},function(){$(e).dialog("option").disableField("Remote Scenes","Remote Scene Selector"),$(e).dialog("option").updateField("Remote Scenes","Remote Scene Selector",[]),$(e).dialog("option").showErrorFeedback("Error getting more scenes."),$(e).dialog("option").hideLoadingFeedback()})},validations:[{check:function(){return this.RemoteSceneSelector()},tip:"No scene selected"}]}),new a({name:"Remote Availability",validations:[{check:function(){return i.pingRemote(c())},tip:"Remote is not available"}]})],buttons:{"Open Remote Scene":function(){var r=this,s=this.RemoteSceneSelector().id;t.setBackUpScene(o.serialize(e("scene-name").get())),i.getLevel(c()+"/data/"+s,function(e){try{n.load(e),n.layout(),$(r).dialog("close")}catch(i){n.load(t.getBackUpScene()),n.layout(),$(r).dialog("option").showErrorFeedback("Error opening scene.")}},function(){$(r).dialog("option").showErrorFeedback("Error opening scene.")})}},validateOnAction:{"Open Remote Scene":["Remote Input","Remote Availability","Remote Scene Selector"]}},{name:"Built In Scenes",fields:[new s({name:"Built Scene Selector",itemsPerPage:4,hideNavagationButtons:!0,data:function(){return e("level-storage").getLevelNames()},validations:[{check:function(){return this.BuiltSceneSelector()},tip:"No scene selected"}]})],buttons:{"Open Built In":function(){t.setBackUpScene(o.serialize(e("scene-name").get()));try{var i=e("level-storage").getLevelFromName(this.BuiltSceneSelector());n.load(i),n.layout(),$(this).dialog("close")}catch(r){n.load(t.getBackUpScene()),n.layout(),$(self).dialog("option").showErrorFeedback("Error opening scene.")}}},validateOnAction:{"Open Built In":["Built Scene Selector"]}},{name:"My Remote Scenes",fields:[new s({name:"My Remote Scenes Selector",itemsPerPage:10,data:function(){return t.getRemoteIdNames().map(function(e){return{displaytext:e.match(/^(.*) => .*$/)[1],id:e.match(/^.* => (.*)$/)[1]}})},validations:[{check:function(){return this.MyRemoteScenesSelector()},tip:"No scene selected"}]})],buttons:{"Open My Remote Scene":function(){var r=this.MyRemoteScenesSelector().displaytext,s=this.MyRemoteScenesSelector().id,a=t.getRemoteIdRemote(r,s),l=this;t.setBackUpScene(o.serialize(e("scene-name").get())),i.getLevel(a+"/data/"+s,function(e){try{n.load(e),n.layout(),$(l).dialog("close")}catch(i){n.load(t.getBackUpScene()),n.layout(),$(l).dialog("option").showErrorFeedback("Error opening scene.")}},function(){$(l).dialog("option").showErrorFeedback("Error opening scene.")})}},validateOnAction:{"Open Known Remote Scene":["Known Remote Scene Selector"]}}]})},open:function(){return this.loadSceneDialog.dialog("open")}}),c=function(){var e=window.location.hostname;return"localhost"===e?"http://localhost:3000":""===e?"http://localhost:3000":"http://scene-store.herokuapp.com"},d=function(){var e=window.location.hostname;return"localhost"===e?0:""===e?0:1};return h}),define("scene-delete-ui",["require","local-storage","dialog-tabbed-modular","dialog-text-field","dialog-paging-field","ui-component"],function(e){var t=e("local-storage"),i=e("dialog-tabbed-modular"),n=(e("dialog-text-field"),e("dialog-paging-field")),o=e("ui-component").extend({init:function(){this.deleteSceneDialog=(new i).create({id:"delete-scene-dialog",title:"Delete scenes",tip:"Choose a scene to delete",autoOpen:!1,height:"auto",width:"auto",minWidth:300,modal:!0,tabs:[{name:"Delete Local",fields:[new n({name:"Local Scene Selector",itemsPerPage:10,data:function(){return t.getAllScenes()},validations:[{check:function(){return this.LocalSceneSelector()},tip:"No scene selected"}]})],buttons:{Delete:function(){t.removeScene(this.LocalSceneSelector()),$(this).dialog("close")},"Delete All":function(){t.clearScenes(),$(this).dialog("close")}},validateOnAction:{Delete:["Local Scene Selector"],"Delete All":[]}},{name:"Delete Remote",fields:[new n({name:"Remote Scene Selector",itemsPerPage:10,data:function(){return t.getRemoteIdNames().map(function(e){return{displaytext:e.match(/^(.*) => .*$/)[1],id:e.match(/^.* => (.*)$/)[1]}})},validations:[{check:function(){return this.RemoteSceneSelector()},tip:"No scene selected"}]})],buttons:{Delete:function(){var e=this.RemoteSceneSelector().displaytext,i=this.RemoteSceneSelector().id;t.removeRemoteId(e,i),$(this).dialog("close")},"Delete All":function(){t.removeAllRemoteIds(),$(this).dialog("close")}},validateOnAction:{Delete:["Remote Scene Selector"],"Delete All":[]}}]})},open:function(){return this.deleteSceneDialog.dialog("open")}});return o}),define("message",["require","ui-component"],function(e){var t=e("ui-component").extend({init:function(){},create:function(e){var t=document.createElement("div");t.id=e.id,$(t).addClass("dialog");var i=document.createElement("div");i.innerHTML=e.message,$(t).append(i),e.create=function(){$(this).css("minWidth",e.minWidth)},e.resizeStop=function(){$(n).dialog("option","position",{my:"center",at:"center",of:window})};var n=$(t).dialog(e);return $(n).submit(function(e){e.preventDefault()}),$(n).on("autoCenter",function(){$(n).dialog("option","position",{my:"center",at:"center",of:window})}),this.dialog=n,n},destroy:function(){$(this.dialog).dialog("destroy").remove(),this.dialog=null}});return t}),define("list",["require","class"],function(e){var t=e("class").extend({init:function(){},create:function(e){var t=document.createElement("ul");t.id=e.id,$(t).addClass("unordered-list"),$(t).addClass(i(e.classNames));for(var n=0;n<e.items.length;n++){var o=e.items[n],r=document.createElement("li");$(r).addClass("unordered-list-item"),$(r).addClass(i(o.classNames)),r.innerHTML=o.content,$(t).append(r)}return{html:t}}}),i=function(e){return e?"[object Array]"==Object.prototype.toString.call(e)?e.join(" "):e:""};return t}),define("editor-regions",["require","wrap-in-div","util","create-status-message","ui-component-factory","ui-component"],function(e){var t=e("wrap-in-div"),i=e("util"),n=(e("create-status-message"),e("ui-component-factory")),o=e("ui-component").extend({init:function(){this.controller=null},get:function(){return this.controller||(this.controller=this.create()),this.controller},create:function(){var e={appendToTopLeft:function(e){this.getTopLeft().append(e)},appendToTopRight:function(e){this.getTopRight().append(e)},appendToBottomLeft:function(e){this.getBottomLeft().append(e)},appendToBottomRight:function(e){this.getBottomRight().append(e)},getTopLeft:function(){return $(this.html).find("#topLeft")},getTopRight:function(){return $(this.html).find("#topRight")},getBottomLeft:function(){return $(this.html).find("#bottomLeft")},getBottomRight:function(){return $(this.html).find("#bottomRight")},getTopLeftContainer:function(){return this.getTopLeft().parent(".region")},getTopRightContainer:function(){return this.getTopRight().parent(".region")},getBottomLeftContainer:function(){return this.getBottomLeft().parent(".region")},getBottomRightContainer:function(){return this.getBottomRight().parent(".region")},getRegion:function(e){for(var t=this.regionGetters(),i=0;i<t.length;i++){var n=s(t[i].call(this),e);if(n.contains)return n.region}},regionGetters:i.cache(function(){return[this.getTopLeft,this.getTopRight,this.getBottomLeft,this.getBottomRight]})};return this.controller=n.getController(e,r()),this.controller}}),r=function(){return t.wrap(t.wrap([a("topLeft"),a("topRight"),a("bottomLeft"),a("bottomRight")],{id:"editor-regions",classNames:["ui-widget"]}),{id:"editor-regions-wrapper"})},s=function(e,t){return{contains:1==$(e).find(t).length,region:$(e)[0]}},a=function(e){var i=document.createElement("div");return i.id=e,$(i).addClass("region-container"),t.wrap([i],{className:"region"})};return new o}),define("fb",["require","gb","scene-save-ui"],function(e){var t=e("gb"),i=e("scene-save-ui"),n=function(){this.initialized=!1};n.prototype.share=function(e,n){var a=this;if("dev"===t.getEnvironment()){if(!this.initialized)return window.fbAsyncInit=function(){o("678625568980303"),r("http://www.treintipollo.com"),a.initialized=!0},void s(document,"script","facebook-jssdk",n);this.initialized&&r("http://www.treintipollo.com")}else{if(!this.initialized)return window.fbAsyncInit=function(){o("1910504332510208");var t=function(t,i,n){r("http://www.treintipollo.com/space-maze/"+n+"/"+i,e),a.initialized=!0};i.serializeAndStoreRemoteShare(t,n)},void s(document,"script","facebook-jssdk",n);if(this.initialized){var l=function(t,i,n){r("http://www.treintipollo.com/space-maze/"+n+"/"+i,e)};i.serializeAndStoreRemoteShare(l,n)}}};var o=function(e){FB.init({appId:e,version:"v2.8"})},r=function(e,t){FB.ui({method:"share",href:e},function(){t()})},s=function(e,t,i,n){var o,r=e.getElementsByTagName(t)[0];e.getElementById(i)||(o=e.createElement(t),o.onerror=function(){n()},o.id=i,o.src="//connect.facebook.net/en_US/sdk.js",r?r.parentNode.insertBefore(o,r):e.body.appendChild(o))};return new n}),define("editor-side-menu",["require","wrap-in-div","gb","ui-component-factory","scene-save-ui","scene-load-ui","scene-delete-ui","message","list","editor-regions","ui-component","local-storage","scene-serializer","scene-name","logger","scene-name","editor-setup","fb","mode","activity-display","logger","logger","mode","fit-canvas-in-region","fit-canvas-in-region"],function(e){var t=e("wrap-in-div"),i=e("gb"),n=e("ui-component-factory"),o=e("scene-save-ui"),r=e("scene-load-ui"),s=e("scene-delete-ui"),a=e("message"),l=e("list"),h=e("editor-regions"),c=e("ui-component").extend({init:function(){this._super(),this.saveDialog=new o,this.loadDialog=new r,this.deleteDialog=new s,this.tooltipListCreator=new l,this.canvasTooltipContent=this.tooltipListCreator.create({id:"canvas-section-tooltip",items:[{type:"item",content:"Drag objects with the mouse."},{type:"item",content:"Right click on objects to show a context menu."},{type:"item",content:"Right click on empty space to show a global context menu from which to create objects."}]}),this.settingsTooltipContent=this.tooltipListCreator.create({id:"settings-section-tooltip",items:[{type:"item",content:"Toggle the grid on and off."},{type:"item",content:"Toggle snap to grid when dragging objects."},{type:"item",content:"Toggle collider, rotation and scale handles on all game objects."},{type:"item",content:"Change the size of the world."}]}),this.gameObjectsTooltipContent=this.tooltipListCreator.create({id:"game-objects-section-tooltip",items:[{type:"item",content:"Choose between different objects to create."},{type:"item",content:"Edit custom types created from an object's context menu."},{type:"item",content:"Clear all the objects."}]}),this.viewportsTooltipContent=this.tooltipListCreator.create({id:"viewports-section-tooltip",items:[{type:"item",content:"Do stuff with viewports man."}]})},create:function(){var o=document.createElement("ul");o.id="editor-side-menu",$(o).addClass("nav nav-list");var r=[];r.push(d("Untitled","side-menu-scene-title")),r.push(g()),r.push(d("Preview")),r.push(u("Play","glyphicon-play-circle",function(){var t=e("local-storage"),n=e("scene-serializer");try{t.setPreviewScene(n.serialize(e("scene-name").get())),this.execute(this.PREVIEW)}catch(o){var r=i.game.get_extension(e("logger"));r.error("Error previewing the scene."),r.show(),setTimeout(r.hide,1e4)}}.bind(this))),r.push(g()),r.push(d("Sections")),r.push(f("Canvas","glyphicon-question-sign",null,null,this.canvasTooltipContent.html.outerHTML,h.get().getTopLeft()[0],function(){}));var s=f("Misc. Settings","glyphicon-question-sign","glyphicon-eye-open","glyphicon-eye-close",this.settingsTooltipContent.html.outerHTML,h.get().getTopRight()[0],function(){b(h.get().getTopRightContainer()[0])});r.push(s);var l=f("Game Objects","glyphicon-question-sign","glyphicon-eye-open","glyphicon-eye-close",this.gameObjectsTooltipContent.html.outerHTML,h.get().getBottomLeft()[0],function(){b(h.get().getBottomLeftContainer()[0])});r.push(l);var c=f("Viewports","glyphicon-question-sign","glyphicon-eye-open","glyphicon-eye-close",this.viewportsTooltipContent.html.outerHTML,h.get().getBottomRight()[0],function(){b(h.get().getBottomRightContainer()[0])});r.push(c),r.push(g()),r.push(d("Storage")),r.push(u("New","glyphicon-file",function(){e("scene-name").set("Untitled"),i.reclaimer.clearAllObjectsFromPools().now(),e("editor-setup").setupGameObjects(),$("#remove-toggle-button input").bootstrapToggle("off")})),r.push(u("Save","glyphicon-floppy-save",function(){this.open()}.bind(this.saveDialog))),r.push(u("Open","glyphicon-folder-open",function(){this.open()}.bind(this.loadDialog))),r.push(u("Delete","glyphicon-trash",function(){this.open()}.bind(this.deleteDialog))),r.push(g()),r.push(d("Share")),r.push(u("Facebook","fa-facebook-official",function(){var t=document.createElement("div");t.id="blocker",document.body.appendChild(t),e("fb").share(function(){document.body.removeChild(t)},function(){document.body.removeChild(t);var e=(new a).create({title:"Share Failed",message:"Sharing failed, please try again later. Reasons for the failure are unknown. It is a mystery.",modal:!0,buttons:{Ok:function(){e.destroy()}}})})},"fa fa-lg")),r.push(g()),r.push(d("Misc.")),e("mode").isAdvanced()&&r.push(p("Activity Display","glyphicon-eye-close","glyphicon-eye-open",function(){i.game.get_extension(e("activity-display")).toggle()}.bind(this)));var m=p("Log","glyphicon-eye-close","glyphicon-eye-open",function(){i.game.get_extension(e("logger")).toggle()}.bind(this));i.game.on(i.game.EXTENSION_ADDED,this,function(t){t.constructor===e("logger")&&(t.onShow=function(){$(m).find(".side-menu-icon").toggle()},t.onHide=function(){$(m).find(".side-menu-icon").toggle()})}),r.push(m),r.push(g()),r.push(u("Exit","glyphicon-log-out",function(){this.execute(this.EXIT)}.bind(this))),$(r).each(function(e){this.tabIndex=e}),$(o).append($(r));var v=n.getController(t.wrap(o,{id:"editor-side-menu-wrapper"}));return v.update=function(){y=4,e("mode").isBasic()&&($(s).click(),$(l).click(),$(c).click(),c.style.display="none",l.style.display="none")},v}}),d=function(e,t){var i=m(e);return $(i).addClass("nav-header"),$(i).addClass(t?t:"side-menu-title"),i},u=function(e,t,i,n){n||(n="glyphicon");var o=document.createElement("li"),r=document.createElement("a");r.href="#",r.innerHTML=e,$(o).append(r),$(o).addClass("side-menu-item"),$(o).on("click",i);var s=document.createElement("span");return $(s).addClass("side-menu-icon"),$(s).addClass("main-side-menu-icon"),$(s).addClass("icon-white"),$(s).addClass(n),$(s).addClass(t),$(r).append(s),o},p=function(e,t,i,n){var o=u(e,t,function(){n(),$(o).find(".side-menu-icon").toggle()}),r=$(o).find("a"),s=document.createElement("span");
return $(s).addClass("side-menu-icon"),$(s).addClass("glyphicon icon-white"),$(s).addClass(i),s.style.display="none",$(r).append(s),o},f=function(e,t,i,n,o,r,s){var a,l,h=u(e,t,function(){s(),i&&n&&$(h).find(".secondary-side-menu-icon").toggle()}),c=$(h).find("a");i&&n&&(a=document.createElement("span"),$(a).addClass("side-menu-icon"),$(a).addClass("secondary-side-menu-icon"),$(a).addClass("glyphicon icon-white"),$(a).addClass(i),$(c).append(a),l=document.createElement("span"),$(l).addClass("side-menu-icon"),$(l).addClass("secondary-side-menu-icon"),$(l).addClass("glyphicon icon-white"),$(l).addClass(n),l.style.display="none",$(c).append(l));var d=$(h).find(".main-side-menu-icon");return d.attr("data-toogle","popover"),d.attr("data-placement","right"),d.attr("data-html",!0),d.attr("title",e),d.attr("data-content",o),$(d).on("mouseenter",function(){d.popover({container:"body"}).on("show.bs.popover",function(){$(this).data("bs.popover").tip().css({maxWidth:"350px"})}),d.popover("show")}),$(d).on("mouseleave",function(){d.popover("destroy")}),$(h).on("mouseenter",function(){r.style.border="1px solid #f0ad4e"}),$(h).on("mouseleave",function(){r.style.border=""}),h},g=function(){var e=document.createElement("li");return $(e).addClass("divider"),e},m=function(e){var t=document.createElement("li");return t.innerHTML=e,t},y=4,b=function(t){""==t.style.display?(t.style.display="none",y--):(t.style.display="",y++),1==y&&$(".region").css({width:"100%",height:"100%"}),2==y&&$(".region").css({width:"100%",height:"50%"}),3==y&&$(".region").css({width:"50%",height:"50%"}),4==y&&$(".region").css({width:"50%",height:"50%"}),i.game.get_extension(e("fit-canvas-in-region"))&&i.game.get_extension(e("fit-canvas-in-region")).fit()};return Object.defineProperty(c.prototype,"EXIT",{get:function(){return"exit"}}),Object.defineProperty(c.prototype,"PREVIEW",{get:function(){return"preview"}}),c}),define("canvas-scroll-bars-ui",["require","gb","world","editor-config","editor-delegates","canvas-container","ui-component","grid-bundle"],function(e){var t=e("gb"),i=e("world"),n=e("editor-config"),o=e("editor-delegates"),r=(e("canvas-container"),e("ui-component").extend({init:function(){this._super();var i={canvas:t.canvas,viewports:t.viewports,config:n,gridBundle:e("grid-bundle")};this.onScroll=function(e){var t=this.viewports.get(this.config.getMainViewportName()),i=e.target.scrollLeft,n=e.target.scrollTop,o="translate("+i+"px,"+n+"px)";this.canvas.style.webkitTransform=o,this.canvas.style.transform=o,t.X=-i,t.Y=-n,this.gridBundle.setOffsetX(i),this.gridBundle.setOffsetY(n)}.bind(i)},create:function(){var e=t.viewports.get(n.getMainViewportName());t.canvas.style.position="absolute",t.canvas.style.left="0px",t.canvas.style.top="0px";var r=document.createElement("div");r.id="scroller",r.style.position="absolute",r.style.top="0px",r.style.left="0px",r.style.pointerEvents="none";var l=document.querySelector("#main");l.style.overflowX="scroll",l.style.overflowY="scroll",l.appendChild(r),l.addEventListener("scroll",this.onScroll),o.add(t.viewports,t.viewports.ADD,this,function(o){if(o.name==n.getMainViewportName()){e=o,e.X=0,e.Y=0,l.scrollLeft=0,l.scrollTop=0,t.canvas.style.webkitTransform="translate(0px,0px)",t.canvas.style.transform="translate(0px,0px)";var s=i.getWidth()-t.game.WIDTH;r.style.width=s>0?t.game.WIDTH+s:t.game.WIDTH,s=i.getHeight()-t.game.HEIGHT,r.style.height=s>0?t.game.HEIGHT+s:t.game.HEIGHT}}),o.add(i,i.CHANGE_WIDTH,this,function(e){s(r,l,e,t.game.WIDTH)}),o.add(i,i.CHANGE_HEIGHT,this,function(e){a(r,l,e,t.game.HEIGHT)}),o.add(t.game,t.game.CHANGE_WIDTH,this,function(e){s(r,l,i.getWidth(),e)}),o.add(t.game,t.game.CHANGE_HEIGHT,this,function(e){a(r,l,i.getHeight(),e)})},destroy:function(){main=document.querySelector("#main"),main.style.overflowX="",main.style.overflowY="",main.removeChild(document.querySelector("#scroller")),main.removeEventListener("scroll",this.onScroll),t.canvas.style.position="",t.canvas.style.left="",t.canvas.style.top="",t.canvas.style.transform=""}})),s=function(e,t,i,n){var o=i-n;e.style.width=o>0?n+o:n,o=parseInt(e.style.width)-main.scrollWidth,0>o&&(t.scrollLeft+=o)},a=function(e,t,i,n){var o=i-n;e.style.height=o>0?n+o:n,o=parseInt(e.style.height)-main.scrollWidth,0>o&&(t.scrollTop+=o)};return r}),define("grid-toggle-ui",["require","gb","toggle","editor-config","ui-component"],function(e){var t=e("gb"),i=e("toggle"),n=e("editor-config"),o=e("ui-component").extend({init:function(){},create:function(){return i.create({id:"grid-toggle-button",on:"Turn Grid Off",off:"Turn Grid On",onChange:function(){var e=t.viewports.get(n.getGridViewportName());$(this).prop("checked")?e.show():e.hide()}})}});return o}),define("snap-to-grid-toggle-ui",["require","toggle","ui-component"],function(e){var t=e("toggle"),i=e("ui-component").extend({init:function(){},create:function(){return t.create({id:"snap-to-grid-toggle-button",on:"Turn Snap Off",off:"Turn Snap On"})}});return i}),define("grid-controls-ui",["require","wrap-in-div","grid-toggle-ui","snap-to-grid-toggle-ui","ui-component"],function(e){var t=e("wrap-in-div"),i=e("grid-toggle-ui"),n=e("snap-to-grid-toggle-ui"),o=e("ui-component").extend({init:function(){this.grid=null,this.snap=null},create:function(){this.grid=(new i).create(),this.snap=(new n).create();var e=document.createElement("label");return e.innerHTML="Grid Controls",t.wrap([e,this.grid,this.snap],{id:"grid-control-buttons",classNames:["well","well-small"]})},toggleGrid:function(){var e=$(this.grid).find("input");e.bootstrapToggle(e.prop("checked")?"off":"on")},toggleSnap:function(){var e=$(this.snap).find("input");e.bootstrapToggle(e.prop("checked")?"off":"on")}});return o}),define("bounding-boxes-toggle-ui",["require","toggle","gb","ui-component"],function(e){var t=e("toggle"),i=e("gb"),n=e("ui-component").extend({init:function(){},create:function(){return t.create({id:"bounding-box-toggle-button",on:"Hide Bounding Boxes",off:"Show Bounding Boxes",onChange:function(){i.toggleRendererDebug($(this).prop("checked"))}})}});return n}),define("registration-points-toggle-ui",["require","toggle","gb","ui-component"],function(e){var t=e("toggle"),i=e("gb"),n=e("ui-component").extend({init:function(){},create:function(){return t.create({id:"registration-point-toggle-button",on:"Hide Centers",off:"Show Centers",onChange:function(){var e=$(this).prop("checked");i.toggleGameObjectDebug(e)}})}});return n}),define("game-object-controls-ui",["require","wrap-in-div","bounding-boxes-toggle-ui","colliders-toggle-ui","registration-points-toggle-ui","rotation-toggle-ui","scale-toggle-ui","ui-component","editor-delegates","setup-editable-game-object","setup-editable-game-object","editor-config","editor-config","editor-config","editor-delegates","gb","gb","editor-config","editor-config","editor-config"],function(e){var t=e("wrap-in-div"),i=e("bounding-boxes-toggle-ui"),n=e("colliders-toggle-ui"),o=e("registration-points-toggle-ui"),r=e("rotation-toggle-ui"),s=e("scale-toggle-ui"),a=e("ui-component").extend({init:function(){this.boundings=null,this.colliders=null,this.centers=null,this.rotations=null,this.scales=null},create:function(){this.boundings=(new i).create(),this.colliders=(new n).create(),this.centers=(new o).create(),this.rotations=(new r).create(),this.scales=(new s).create();var a=document.createElement("label");return a.innerHTML="Game Object Controls",e("editor-delegates").add(e("setup-editable-game-object"),e("setup-editable-game-object").GAME_OBJECT_ADDED,this,function(t){t.isContainer()&&(n.isOn()&&t.toggleVisibility(!0).recurse().ommitSelf().all(function(t){return e("editor-config").isColliderGizmoGameObject(t.typeId)}),r.isOn()&&t.toggleVisibility(!0).recurse().ommitSelf().all(function(t){return e("editor-config").isRotationGizmoGameObject(t.typeId)}),s.isOn()&&t.toggleVisibility(!0).recurse().ommitSelf().all(function(t){return e("editor-config").isScaleGizmoGameObject(t.typeId)}))}),e("editor-delegates").add(e("gb"),e("gb").GAME_OBJECT_ADDED,this,function(t){t.isContainer()&&(n.isOn()&&t.toggleVisibility(!0).recurse().ommitSelf().all(function(t){return e("editor-config").isColliderGizmoGameObject(t.typeId)}),r.isOn()&&t.toggleVisibility(!0).recurse().ommitSelf().all(function(t){return e("editor-config").isRotationGizmoGameObject(t.typeId)}),s.isOn()&&t.toggleVisibility(!0).recurse().ommitSelf().all(function(t){return e("editor-config").isScaleGizmoGameObject(t.typeId)}))}),t.wrap([a,this.boundings,this.colliders,this.centers,this.rotations,this.scales],{id:"game-object-control-buttons",classNames:["well","well-small"]})},toggleColliders:function(){var e=$(this.colliders).find("input");e.bootstrapToggle(e.prop("checked")?"off":"on")},toggleRotations:function(){var e=$(this.rotations).find("input");e.bootstrapToggle(e.prop("checked")?"off":"on")},toggleScales:function(){var e=$(this.scales).find("input");e.bootstrapToggle(e.prop("checked")?"off":"on")},toggleBoundings:function(){var e=$(this.boundings).find("input");e.bootstrapToggle(e.prop("checked")?"off":"on")},toggleCenters:function(){var e=$(this.centers).find("input");e.bootstrapToggle(e.prop("checked")?"off":"on")}});return a}),define("spinner",["require","wrap-in-div","ui-component-factory","class"],function(e){var t=e("wrap-in-div"),i=e("ui-component-factory"),n=e("class").extend({init:function(){},create:function(e){var n=document.createElement("input");n.value=e.value,e.change=e.onChange,e.spin=e.onSpin,e.stop=e.onStop;var o=$(n).spinner(e);return i.getController({controller:function(){$(n).spinner.apply($(n),arguments)},destroy:function(){$(n).spinner("destroy")}},t.wrap(o.parent()[0],e))}});return n}),define("two-dimentions-spinner",["require","wrap-in-div","ui-component-factory","spinner","class"],function(e){var t=e("wrap-in-div"),i=e("ui-component-factory"),n=e("spinner"),o=e("class").extend({init:function(){this.spinnerX=null,this.spinnerY=null},create:function(e){var o=document.createElement("label");return o.innerHTML=e.label,this.spinnerX=(new n).create({id:e.id+"-X",value:e.valueX,max:e.maxX,min:e.minX,step:e.stepX,onChange:e.onChangeX,onSpin:e.onSpinX,onStop:e.onStopX}),this.spinnerY=(new n).create({id:e.id+"-Y",value:e.valueY,max:e.maxY,min:e.minY,step:e.stepY,onChange:e.onChangeY,onSpin:e.onSpinY,onStop:e.onStopY}),i.getControllerWithParent({controller:{X:this.spinnerX.controller,Y:this.spinnerY.controller}},t.wrap([t.wrap(o),t.wrap(this.spinnerX.html),t.wrap(this.spinnerY.html)],{id:e.id,classNames:["ui-widget","two-dimentional-spinner","well","well-small"]}),this)}});return o}),define("world-edit-ui",["require","wrap-in-div","gb","world","editor-config","editor-delegates","two-dimentions-spinner","ui-component"],function(e){var t=e("wrap-in-div"),i=e("gb"),n=e("world"),o=e("editor-config"),r=e("editor-delegates"),s=e("two-dimentions-spinner"),a=e("ui-component").extend({init:function(){this.sizeUI=null,this.gridCellSize=null},create:function(){return this.gridCellSize=o.getGridCellSize(),this.sizeUI=(new s).create({id:"world-size-container",label:"World Size",minX:i.canvas.width,stepX:this.gridCellSize.width,valueX:n.getWidth(),onStopX:function(e){n.setWidth($(e.target).spinner("value"))},minY:i.canvas.height,stepY:this.gridCellSize.height,valueY:n.getHeight(),onStopY:function(e){n.setHeight($(e.target).spinner("value"))}}),r.add(n,n.CHANGE_WIDTH,this,function(e){this.sizeUI.controller.X("value",e)}),r.add(n,n.CHANGE_HEIGHT,this,function(e){this.sizeUI.controller.Y("value",e)}),t.wrap(t.wrap([this.sizeUI.html],{id:"world-edit"}),{id:"world-edit-wrapper"})}});return a}),define("clicked-outside",["require","class"],function(e){var t=e("class").extend({init:function(){this.removeFunctions={}},register:function(e,t,n){var o=i(t,n);$(document).on("mouseup",o),this.removeFunctions[e]=function(){$(document).off("mouseup",o)}},unregister:function(e){this.removeFunctions[e]&&(this.removeFunctions[e](),delete this.removeFunctions[e])}}),i=function(e,t){return function(i){var n;n=$("[object Function]"==Object.prototype.toString.call(e)?e():e),n.is(i.target)||0!==n.has(i.target).length||0!==n.parent().length&&(i.preventDefault(),i.stopImmediatePropagation(),t(n))}};return new t}),define("button",["require","class"],function(e){var t=e("class").extend({init:function(){},create:function(e){var t=document.createElement("button");return e.id&&(t.id=e.id),e.className&&(t.className=e.className),e.label&&(t.innerHTML=e.label),t.type="button",t.onclick=e.onClick,t}});return t}),define("mouse-coordinates",["require","class"],function(e){var t=e("class").extend({init:function(){},get:function(e){var t,i;e.pageX||e.pageY?(t=e.pageX,i=e.pageY):(e.clientX||e.clientY)&&(t=e.clientX+document.body.scrollLeft+document.documentElement.scrollLeft,i=e.clientY+document.body.scrollTop+document.documentElement.scrollTop);var n=$(e.target).parent().offset(),o=t-n.left,r=i-n.top,s=n.left+o,a=n.top+r;return{top:r,left:o,globalX:s,globalY:a}}});return new t}),define("fit-in-viewport",["require","class"],function(e){var t=e("class").extend({init:function(){},fit:function(e,t){var i={left:t.globalX,top:t.globalY};$(e).css(i);var n=e.getBoundingClientRect();n.bottom>=(window.innerHeight||document.documentElement.clientHeight)&&(i.top-=n.height),n.right>=(window.innerWidth||document.documentElement.clientWidth)&&(i.left-=n.width),$(e).css(i)}});return new t}),define("dropdown-base",["require","wrap-in-div","clicked-outside","button","mouse-coordinates","fit-in-viewport","ui-component-factory","ui-component"],function(e){var t=e("wrap-in-div"),i=e("clicked-outside"),n=e("button"),o=e("mouse-coordinates"),r=e("fit-in-viewport"),s=e("ui-component-factory"),a=e("ui-component").extend({init:function(){this.options=null},create:function(e){return this.getOptions=function(){return this.options}.bind(this),this.getContainer=function(){return this.container}.bind(this),this.getContentContainer=function(){return this.contentContainer}.bind(this),this.getOptionElements=function(){return this.optionElements}.bind(this),this.getMainUI=function(){return this.mainUI}.bind(this),this.showEvent=null,this.options=e,this.mainUI=this.createMainUI(function(){return this.getOptions()}.bind(this),function(){return this.getContainer()}.bind(this),function(){return this.getContentContainer()}.bind(this),function(){return this.getOptionElements()}.bind(this)),this.uiMainController=this.setMainUIController(this.mainUI),this.container=t.wrap(this.uiMainController.html,{id:e.id}),this.contentContainer=this.createContentContainer(),this.optionElements=this.createOptions(e),this.appendContentToContainer(this.contentContainer,this.optionElements),this.addStyles($(this.container)),i.register("dropdown-"+e.id,function(){return this.getContentContainer()}.bind(this),function(e){this.removeMenu(e)}.bind(this)),this.getComponentControllerWithParent({refresh:function(){this.refreshContent()}.bind(this),getOptions:function(){return this.getOptions()}.bind(this),show:function(e){this.showEvent=e,$(this.getMainUI()).trigger("click")}.bind(this),disable:function(){$(this.getMainUI()).button("option","disabled",!0)}.bind(this),enable:function(){$(this.getMainUI()).button("option","disabled",!1)}.bind(this),destroy:function(){i.unregister("dropdown-"+e.id)}},this.container)},getComponentControllerWithParent:function(e,t){return s.getControllerWithParent(e,t,this)},getComponentController:function(e,t){return s.getController(e,t)},setupUI:function(){throw new Error("Must Override")},createMainUI:function(e,t,i,s){var a=(new n).create({label:e().defaultMessage,onClick:function(n){n=this.showEvent||n,this.refreshContent(),$("body").append(i()),this.setupUI($(t()),$(i()),e()),this.setupOptionEvents(s(),t(),i(),e()),r.fit(i(),o.get(n)),this.showEvent=null}.bind(this)});if($(a).button().addClass("main-button"),e().icon){$(a).find("span").css({flex:1}),$(a).css({display:"flex","flex-flow":"row nowrap"});var l=document.createElement("span");l.className="glyphicon glyphicon-"+e().icon,$(a).append(l)}return a},setMainUIController:function(e){return this.getComponentController({destroy:function(){$(e).button("destroy")}.bind(this)},e)},addStyles:function(e){$(e).addClass("drop-down"),$(e).addClass("ui-widget")},createContentContainer:function(){var e=document.createElement("ul");return t.wrap(e,{classNames:["ui-corner-all","drop-down-menu","ui-widget-content"]})},appendContentToContainer:function(e,t){$(e).find("ul").append(t)},createOptions:function(e){for(var t=[],i=e.data(),n=0;n<i.length;n++){var o=$(document.createElement("li"));this.setOptionState(o,i[n],e),o.addClass("ui-corner-all"),o.attr("value",i[n]),o.html(i[n]),t.push(o[0])}return t},setupOptionEvents:function(e){for(var t=0;t<e.length;t++){var i=e[t];$(i).hasClass("ui-state-default")&&($(i).on("mouseover",function(){$(this).addClass("ui-state-hover")}),$(i).on("mouseout",function(){$(this).removeClass("ui-state-hover")}))}},setOptionState:function(e,t,i){$(e).removeClass("ui-state-highlight"),$(e).addClass(i.disabledItems?-1==i.disabledItems.indexOf(t)?"ui-state-default":"ui-state-disabled":"ui-state-default")},removeMenu:function(e){$(e).remove(),this.refreshContent(),this.resetContentState()},resetContentState:function(){for(var e=this.getOptions(),t=this.getOptionElements(),i=0;i<t.length;i++)this.setOptionState(t[i],e.data()[i],e)},refreshContent:function(){this.contentContainer=this.createContentContainer(),this.optionElements=this.createOptions(this.getOptions()),this.getContentContainer=function(){return this.contentContainer}.bind(this),this.getOptionElements=function(){return this.optionElements}.bind(this),this.appendContentToContainer(this.contentContainer,this.optionElements)}});return a}),define("dropdown-scroll",["require","wrap-in-div","dropdown-base"],function(e){var t=(e("wrap-in-div"),e("dropdown-base").extend({init:function(){},setupUI:function(e,t,i){$(t).css({"max-height":i.height||305}),$(t).jScrollPane({showArrows:!0}),$(t).find("ul").css(parseFloat($(t).css("height"))<305?{width:""}:{width:"auto"})},setupOptionEvents:function(e,t,i,n){this._super(e,t,i,n);for(var o=$(t).find(".main-button").find("span")[0],r=this,s=0;s<e.length;s++){var a=e[s];$(a).hasClass("ui-state-default")&&$(a).on("click",function(){$(this).removeClass("ui-state-hover");var e=$(this).attr("value");$(t).attr("value",e),n.selector&&(o.innerHTML=n.selectedMessage+" "+e),n.buttons&&n.onClick&&n.onClick(e),r.removeMenu(i)})}},removeMenu:function(e){this._super(e),this.refreshContent(),$(e).jScrollPane().data("jsp").destroy()}}));return t}),define("main-viewport",["require","gb","editor-config","class"],function(e){var t=e("gb"),i=e("editor-config"),n=e("class").extend({init:function(){},get:function(){return t.viewports.get(i.getMainViewportName())}});return new n}),define("game-object-selector-ui",["require","gb","ui-component","editor-config","dropdown-scroll","editor-config","object-counter","object-counter","setup-editable-game-object","main-viewport","object-counter","logger","object-counter","editor-delegates","editor-delegates","editor-delegates","wrap-in-div"],function(e){var t=e("gb"),i=e("ui-component").extend({init:function(){this.gameObjectSelectorUI=null},toButtons:function(){this.gameObjectSelectorUI.getOptions().selector=!1,this.gameObjectSelectorUI.getOptions().buttons=!0},show:function(t,i,n){this.gameObjectSelectorUI.getOptions().data=function(){return e("editor-config").getCategoryGameObjects(i,n)},this.gameObjectSelectorUI.refresh(),this.gameObjectSelectorUI.show(t)},create:function(){var i=this;return this.gameObjectSelectorUI=(new(e("dropdown-scroll"))).create({id:"game-object-selector",icon:"chevron-down",defaultMessage:"Choose a Game Object",selectedMessage:"",selector:!0,data:function(){return e("editor-config").getGameObjects({filterChilds:!0})},onClick:function(n){if(i.gameObjectSelectorUI.getOptions().selector=!0,i.gameObjectSelectorUI.getOptions().buttons=!1,e("object-counter").canCreate())return void e("object-counter").showErrorFeedback();var o=e("setup-editable-game-object").setupWithViewport(n,"First",[{viewport:"Main",layer:"Front"}],e("main-viewport").get());o&&e("object-counter").count(o),t.game.get_extension(e("logger")).success("Game object created successfully! "+e("object-counter").toString())}}),e("editor-delegates").add(t.goPool,t.goPool.CREATE_CONFIGURATION,this,function(){this.gameObjectSelectorUI.refresh()}),e("editor-delegates").add(t.goPool,t.goPool.UPDATE_CONFIGURATION,this,function(){this.gameObjectSelectorUI.refresh()}),e("editor-delegates").add(t.goPool,t.goPool.CLEAR_CONFIGURATION,this,function(){this.gameObjectSelectorUI.refresh()}),e("wrap-in-div").wrap(this.gameObjectSelectorUI.html,{id:"game-object-selector-wrapper",classNames:["well","well-small"]})}});return i}),define("control-objects-selector-ui",["require","gb","root","ui-component","dropdown-scroll","editor-config","editor-config","editor-config","editor-config","object-counter","object-counter","setup-editable-game-object","main-viewport","object-counter","object-counter","wrap-in-div","gb","logger","gb","logger","gb","logger"],function(e){var t=(e("gb"),e("root")),i="",n=e("ui-component").extend({init:function(){this.controlObjectSelectorUI=null,this.hasStartPosition=null},show:function(e,t){i=t,this.controlObjectSelectorUI.show(e)},create:function(){var n=this;return this.controlObjectSelectorUI=(new(e("dropdown-scroll"))).create({id:"control-object-selector",icon:"plus",defaultMessage:"Add a Control Object",buttons:!0,height:200,data:function(){return i?"control"===i?e("editor-config").getControlObjects():"sound"===i?e("editor-config").getSoundObjects():void 0:e("editor-config").getControlObjects()},onClick:function(o){if("control"===i&&(o=e("editor-config").getControlObjectOriginalName(o)),null===n.hasStartPosition&&(n.hasStartPosition=!!t.findChildren().recurse().firstWithType("StartPosition")),"start-position-right"===o&&n.hasStartPosition)return void n.startPositionErrorFeedback();if("start-position-left"===o&&n.hasStartPosition)return void n.startPositionErrorFeedback();if("start-position-up"===o&&n.hasStartPosition)return void n.startPositionErrorFeedback();if("start-position-down"===o&&n.hasStartPosition)return void n.startPositionErrorFeedback();if(e("object-counter").canCreate())return void e("object-counter").showErrorFeedback();var r=e("setup-editable-game-object").setupWithViewport(o,"First",[{viewport:"Main",layer:"Front"}],e("main-viewport").get());r&&("start-position-right"===o&&n.trackStartPositionObject(r),"start-position-left"===o&&n.trackStartPositionObject(r),"start-position-up"===o&&n.trackStartPositionObject(r),"start-position-down"===o&&n.trackStartPositionObject(r),e("object-counter").count(r),e("object-counter").showSuccessFeedback())}}),e("wrap-in-div").wrap(this.controlObjectSelectorUI.html,{id:"control-object-selector-wrapper",classNames:["well","well-small"]})},trackStartPositionObject:function(e){this.hasStartPosition=!0,e.once(e.RECYCLE,this,function(){this.hasStartPosition=!1})},startPositionErrorFeedback:function(){e("gb").game.get_extension(e("logger")).error("Only one start position object is allowed"),e("gb").game.get_extension(e("logger")).show(),setTimeout(e("gb").game.get_extension(e("logger")).hide,3e3)}});return n}),define("active-viewports",["require","editor-config","class"],function(e){var t=e("editor-config"),i=e("class").extend({init:function(){},get:function(){var e="Main";if(e){for(var i=e.split(", "),n=[],o=0;o<i.length;o++){var r=i[o];n.push({viewport:r,layer:t.getViewportTopMostLayer(r)})}return n}}});return new i}),define("selected-game-object",["require","class"],function(e){var t=e("class").extend({init:function(){},get:function(){return $(document.querySelector("#game-object-selector")).attr("value")}});return new t}),define("selected-group",["require","class"],function(e){var t=e("class").extend({init:function(){},get:function(){return"First"}});return new t}),define("game-object-creator-ui",["require","wrap-in-div","button","gb","setup-editable-game-object","active-viewports","selected-game-object","selected-group","main-viewport","ui-component","object-counter","object-counter","logger","logger","logger","logger","logger","logger","logger","logger","logger","object-counter","object-counter"],function(e){var t=e("wrap-in-div"),i=e("button"),n=e("gb"),o=e("setup-editable-game-object"),r=e("active-viewports"),s=e("selected-game-object"),a=e("selected-group"),l=e("main-viewport"),h=e("ui-component").extend({init:function(){this.element=null},create:function(){this.element=(new i).create({id:"game-object-create-button",label:"Create Game Object",onClick:function(){var t=s.get(),i=a.get(),h=r.get(),c=l.get();if(e("object-counter").canCreate())return void e("object-counter").showErrorFeedback();if("Nothing"==t||""==t||!t)return n.game.get_extension(e("logger")).error("No game object has been selected"),n.game.get_extension(e("logger")).show(),void setTimeout(n.game.get_extension(e("logger")).hide,3e3);if(!n.goPool.configurationExists(t))return n.game.get_extension(e("logger")).error("Game object type does not exist"),n.game.get_extension(e("logger")).show(),void setTimeout(n.game.get_extension(e("logger")).hide,3e3);if(!h||0==h.length)return n.game.get_extension(e("logger")).error("No viewports have been selected"),n.game.get_extension(e("logger")).show(),void setTimeout(n.game.get_extension(e("logger")).hide,3e3);var d=o.setupWithViewport(t,i,h,c);d&&(e("object-counter").count(d),e("object-counter").showSuccessFeedback())}}),$(this.element).button(),$(this.element).find("span").css({flex:1}),$(this.element).css({display:"flex","flex-flow":"row nowrap"});var h=document.createElement("span");return h.className="glyphicon glyphicon-plus",$(this.element).append(h),t.wrap(this.element,{id:"game-object-create-button-wrapper",classNames:["well","well-small"]})},destroy:function(){$(this.element).button("destroy")}});return h}),define("edit-custom-types-ui",["require","gb","ui-component","dropdown-scroll","edit-type-dialog","editor-delegates","editor-delegates","editor-delegates","wrap-in-div"],function(e){var t=e("gb"),i=e("ui-component").extend({init:function(){this.customTypeSelector=null,this.editTypeDialog=null},show:function(e){this.customTypeSelector.show(e)},create:function(){var i=this;return this.customTypeSelector=(new(e("dropdown-scroll"))).create({id:"custom-game-object-selector",icon:"chevron-down",defaultMessage:"Edit Custom Types",buttons:!0,data:function(){return t.goPool.getConfigurationTypes({customOnly:!0})},onClick:function(n){i.editTypeDialog=new(e("edit-type-dialog"))(!0,!0),i.editTypeDialog.open(n),i.editTypeDialog.on("edit",this,function(e,i){t.goPool.updateConfigurationId(i,e)}),i.editTypeDialog.on("delete",this,function(e){t.reclaimer.clearGameObjectConfiguration(e)})}}),this.customTypeSelector.disable(),e("editor-delegates").add(t.goPool,t.goPool.CREATE_CONFIGURATION,this,function(){this.customTypeSelector.refresh(),this.customTypeSelector.enable()}),e("editor-delegates").add(t.goPool,t.goPool.UPDATE_CONFIGURATION,this,function(){this.customTypeSelector.refresh()}),e("editor-delegates").add(t.goPool,t.goPool.CLEAR_CONFIGURATION,this,function(){this.customTypeSelector.refresh(),0==t.goPool.getConfigurationTypes({customOnly:!0}).length&&this.customTypeSelector.disable()}),e("wrap-in-div").wrap(this.customTypeSelector.html,{id:"custom-game-object-selector-wrapper",classNames:["well","well-small"]})}});return i}),define("game-object-remove-ui",["require","gb","wrap-in-div","button","toggle","ui-component","editor-setup"],function(e){var t=e("gb"),i=e("wrap-in-div"),n=e("button"),o=e("toggle"),r=e("ui-component").extend({init:function(){this.element=null,this.toggle=null},create:function(){this.element=(new n).create({id:"game-object-remove-button",label:"Remove all Game Objects",onClick:function(){t.reclaimer.clearAllObjectsFromPools().now(),e("editor-setup").setupGameObjects(),$("#remove-toggle-button input").bootstrapToggle("off")}});var r=this.element;$(r).button(),$(r).find("span").css({flex:1}),$(r).css({display:"flex","flex-flow":"row nowrap"});var s=document.createElement("span");return s.className="glyphicon glyphicon-trash",$(r).append(s),this.toggle=o.create({id:"remove-toggle-button",on:" ",off:" ",onChange:function(){$(r).button("option","disabled",!$(this).prop("checked"))}}),i.wrap([this.element,this.toggle],{id:"game-object-remove-button-wrapper",classNames:["well","well-small"]})},destroy:function(){$(this.element).button("destroy")}});return r}),define("viewport-outline",["require","gb","editor-delegates","class"],function(e){var t=e("gb"),i=e("editor-delegates"),n=null,o=e("class").extend({init:function(){this.viewportOutlines={},i.add(t.game,t.game.UPDATE,this,function(){for(var e in this.viewportOutlines)n=this.viewportOutlines[e],n.outline.x=-1*n.viewport.x,n.outline.y=-1*n.viewport.y})},add:function(e){this.viewportOutlines[e.viewportName]={viewport:t.viewports.get("Main"),outline:t.create(e.gameObjectId,e.updateGroup,e.viewports,e.gameObjectArguments)}},remove:function(e){t.reclaimer.claim(this.viewportOutlines[e].outline),this.viewportOutlines[e]=null,delete this.viewportOutlines[e]}});return new o}),define("setup-viewport",["require","gb","editor-config","outline-bundle","viewport-outline","class"],function(e){var t=e("gb"),i=e("editor-config"),n=e("outline-bundle"),o=e("viewport-outline"),r=e("class").extend({init:function(){},setup:function(e){var n=t.viewports.get(e);return n.addLayer(i.getDefaultLayerName()),n.addLayer(i.getOutlineLayerName()),n.addLayer(i.getGizmoCollidersBackLayerName()),n.addLayer(i.getGizmoCollidersFrontLayerName()),n.addLayer(i.getGizmoRotationBackLayerName()),n.addLayer(i.getGizmoRotationFrontLayerName()),n.addLayer(i.getGizmoScaleBackLayerName()),n.addLayer(i.getGizmoScaleFrontLayerName()),n.addLayer(i.getGizmoIconFrontLayerName()),n.hideLayer(i.getGizmoCollidersBackLayerName()),n.hideLayer(i.getGizmoCollidersFrontLayerName()),n.hideLayer(i.getGizmoRotationBackLayerName()),n.hideLayer(i.getGizmoRotationFrontLayerName()),n.hideLayer(i.getGizmoScaleBackLayerName()),n.hideLayer(i.getGizmoScaleFrontLayerName()),n},addOutline:function(e){o.add({viewportName:e,gameObjectId:n.getOutlineId(),updateGroup:i.getDefaultGroupName(),viewports:[{viewport:e,layer:i.getOutlineLayerName()}],gameObjectArguments:{viewport:t.viewports.get(e)}})},removeOutline:function(e){o.remove(e)}});return new r}),define("checkbox-set",["require","wrap-in-div","ui-component-factory","ui-component"],function(e){var t=e("wrap-in-div"),i=e("ui-component-factory"),n=e("ui-component").extend({init:function(){this.wrapped=null},create:function(e){for(var n=[],o=0;o<e.checkboxes.length;o++){var r=document.createElement("input"),s=e.checkboxes[o];if(s.classNames)for(var a=0;a<s.classNames.length;a++)$(r).addClass(s.classNames[a]);var l=s.label?s.label:s.offLabel;r.id=e.id+"-"+l,r.name=l,r.value=l,r.type="checkbox",r.checked=s.state,r.disabled=s.disable;var h=document.createElement("label");h.setAttribute("for",r.id),h.innerHTML=l,r.onchange=function(e,t){return function(i){e.onChange&&(e.label||$(i.target).next("label").find("span").text(i.target.checked?e.onLabel:e.offLabel),e.icons&&e.icons.on&&e.icons.off&&(e.icons.primary=e.icons.primary==e.icons.on?e.icons.off:e.icons.on,$(t).button(e)),e.onChange(i))}}(s,r),n.push(r),n.push(h)}this.wrapped=t.wrap(t.wrap(n),{id:e.id,className:e.containerClass}),$(this.wrapped).buttonset();for(var o=0;o<n.length;o+=2){var c=e.checkboxes[o/2];c.icons&&c.icons.on&&c.icons.off&&(c.icons.primary=s.state?c.icons.off:c.icons.on),$(n[o]).button(c)}return i.getControllerWithParent(this.wrapped,this)},destroy:function(){$(this.wrapped).buttonset("destroy")}});return n}),define("editable-dropdown-basic",["require","dropdown-base"],function(e){var t=e("dropdown-base").extend({init:function(){},setupUI:function(e,t,i){var n,o;t.find("ul").sortable({placeholder:"ui-state-highlight",items:"li:not(.ui-state-disabled)",cursor:"move",delay:15,start:function(e,t){n=t.item.index(),t.placeholder.height(t.item.height())
},update:function(e,t){i.onEdit&&(o=t.item.index(),i.onEdit(t.item.attr("value"),o,n))}}).disableSelection(),this.uiContentController=this.getComponentController(t.find("ul")[0])}});return t}),define("editable-dropdown-remove",["require","wrap-in-div","editable-dropdown-basic"],function(e){var t=e("wrap-in-div"),i=e("editable-dropdown-basic").extend({init:function(){},setupUI:function(e,t,i){var n,o;t.find("ul").sortable({placeholder:"ui-state-highlight",items:"li:not(.ui-state-disabled)",cursor:"move",handle:".handle",delay:15,start:function(e,t){n=t.item.index(),t.placeholder.width(t.item.width()),t.placeholder.height(t.item.height())},update:function(e,t){i.onEdit&&(o=t.item.index(),i.onEdit(t.item.attr("value"),o,n))}}).disableSelection(),this.uiContentController=this.getComponentController(t.find("ul")[0])},createOptions:function(e){for(var i=[],n=e.data(),o=0;o<n.length;o++){var r=$(document.createElement("li"));this.setOptionState(r,n[o],e);var s=$(document.createElement("div")),a=$(document.createElement("button"));s.html(n[o]),s.addClass("handle"),a.attr("value",n[o]),a.html("Remove"),r.addClass("ui-corner-all"),r.attr("value",n[o]),r.append(s),r.append(t.wrap(a[0])),i.push(r[0])}return i},setupOptionEvents:function(e,t,i,n){this._super(e,t,i,n);for(var o=0;o<e.length;o++){var r=$(e[o]);if($(r).hasClass("ui-state-default")){var s=r.find("button").button();s.click(function(e){return function(t){if(n.onRemove){var o=$(t.target).closest("[value]").first().attr("value");n.onRemove(o),e.remove(),$(i).remove()}}}(r))}}}});return i}),define("editable-dropdown-add-remove",["require","wrap-in-div","button","editable-dropdown-remove"],function(e){var t=e("wrap-in-div"),i=e("button"),n=e("editable-dropdown-remove").extend({init:function(){},createMainUI:function(e,n,o,r){var s=this._super(e,n,o,r),a=(new i).create({label:"Add",onClick:function(){e().onAdd&&e().onAdd()}.bind(this)});$(a).button().addClass("add-button");var n=t.wrap([s,a],{className:"split-button"});return $(n).buttonset(),n},setMainUIController:function(e){return this.getComponentController({destroy:function(){$(e).buttonset("destroy")}.bind(this)},e)}});return n}),define("dialog",["require","create-status-message","ui-component"],function(e){var t=e("create-status-message"),i=e("ui-component").extend({init:function(){},create:function(e){var i=document.createElement("div");i.id=e.id,$(i).addClass("dialog");var s=t.createInfoMessage(e.tip),h=document.createElement("form"),c=document.createElement("fieldset");s.appendTo(i),$(i).append(h),$(h).append(c);var d={},u={},p={};$.each(e.fields,function(e,t){var i=t.name.toLowerCase(),n=document.createElement("label");n.innerHTML=t.name,$(n).attr("for",i);var o=document.createElement("input");o.type="text",o.name=i,o.id=i,"[object Function]"==Object.prototype.toString.call(t.value)?$(o).data("valueGetter",t.value):o.value=t.value,t.hidden&&(n.style.display="none",o.style.display="none"),$(o).addClass("ui-corner-all"),$(c).append(n),$(c).append(o),d[l(t.name)]=function(e){return function(){return e.value}}(o),p[l(t.name)]=function(e){return function(){return e}}(n),u[l(t.name)]=function(e){return function(){return e}}(o)}),$.each(e.buttons,function(t,i){e.buttons[t]=function(t,i){return function(){a(s,u,e),result=n.call(f,s,e.validateOnAction[i],e.fields,d,u),result===!0&&t.call(f)}}.call(this,i,t)}),e.close=function(){if(e.resetOnClose){if("Close"==$(arguments[0].currentTarget).attr("title"))for(var t in u){var i=u[t]();i.value=$(i).attr("default")}}else for(var t in u){var i=u[t]();i.value=$(i).attr("default")}},e.create=function(){$(this).css("minWidth",e.minWidth)},e.open=function(){a(s,u,e);for(var t in u){var i=$(u[t]()),n=$(i).data("valueGetter");n&&(i[0].value=n()),i.attr("default",d[t]())}},e.resizeStop=function(){$(f).dialog("option","position",{my:"center",at:"center",of:window})},e.disableField=function(e){var t=$(p[l(e)]()),i=$(u[l(e)]());t.addClass("ui-state-disabled"),i.addClass("ui-state-disabled"),i.attr("disabled",!0)},e.enableField=function(e){var t=$(p[l(e)]()),i=$(u[l(e)]());t.removeClass("ui-state-disabled"),i.removeClass("ui-state-disabled"),i.attr("disabled",!1)},e.setField=function(e,t){var i=u[l(e)]();i.value=t},e.setErrorFeedback=function(e){o(s,e)},e.setInfoFeedback=function(e){r(s,e)};var f=$.extend($(i).dialog(e),d);return $(f).submit(function(e){e.preventDefault()}),$(f).on("autoCenter",function(){$(f).dialog("option","position",{my:"center",at:"center",of:window})}),this.dialog=f,this.tip=s,f},destroy:function(){$(this.dialog).dialog("destroy").remove()}}),n=function(e,t,i,n,o){try{var r=this;$.each(t,function(t,a){$.each(i,function(t,i){i.validations&&i.name==a&&$.each(i.validations,function(t,a){var h=l(i.name);if(!a.check.call(r,n[h]()))throw s(e,o[h](),a.tip),$(r).trigger("autoCenter"),new Error(a.tip)})})})}catch(a){return a.message}return!0},o=function(e,t){e.toError(t)},r=function(e,t){e.toInfo(t)},s=function(e,t,i){$(t).addClass("ui-state-error"),o(e,i)},a=function(e,t,i){r(e,i.tip),$.each(t,function(e,t){$(t()).removeClass("ui-state-error")})},l=function(e){return e.replace(/ /g,"")};return i}),define("viewport-editor-ui",["require","editor-config","setup-viewport","ui-component-factory","wrap-in-div","gb","world","checkbox-set","editable-dropdown-add-remove","dialog","ui-component"],function(e){var t=e("editor-config"),i=e("setup-viewport"),n=e("ui-component-factory"),o=e("wrap-in-div"),r=e("gb"),s=e("world"),a=e("checkbox-set"),l=e("editable-dropdown-add-remove"),h=e("dialog"),c=null,d=null,u=e("ui-component").extend({init:function(){this.container=null,this.checkboxSetUI=null,this.layersUI=null,C(),w()},create:function(e){var i=document.createElement("div");i.id="viewport-control",i.className="viewport-control",$(i).attr("viewport-name",e.viewport.name);var r=(new a).create({id:"viewport-checkboxes-"+e.viewport.name,containerClass:"viewport-checkboxes",checkboxes:f(e.viewport,i)}),s=(new l).create({id:"layers-"+e.viewport.name,defaultMessage:"Arrange Layers",data:function(){return t.getViewportLayers(e.viewport)},onAdd:function(){$(c).dialog("option","viewport",e.viewport),$(c).dialog("option","title","Add a new layer in viewport "+e.viewport.name),$(c).dialog("open")},onEdit:function(t,i){e.viewport.changeLayer(t,i)},onRemove:function(t){e.viewport.removeLayer(t)}});return e.viewport.on(e.viewport.ADD,this,function(){s.refresh()}),i.appendChild(r.html),i.appendChild(s.html),this.container=i,this.checkboxSetUI=r,this.layersUI=s,this.wrapped=$(o.wrap(i,{classNames:["well","well-small"]})),this.wrapped.tooltip({container:"body",title:e.viewport.name,placement:"left",trigger:"manual"}).on("mouseenter",function(){p&&$(this).tooltip("show")}).on("mouseleave",function(){$(this).tooltip("hide")}).on("mousedown",function(){$(this).tooltip("hide")}),n.getControllerWithParent(this.wrapped[0],this)},destroy:function(){this.wrapped.tooltip("destroy")}});u.destroy=function(){$(c).dialog("destroy").remove(),$(d).dialog("destroy").remove(),c=null,d=null};var p=!0;$(document).on("mousedown",function(){p=!1}),$(document).on("mouseup",function(){p=!0});var f=function(e){var i;i=e.name==t.getMainViewportName()?[b,g]:[g,m,y,b,v];var n=arguments;return $.map(i,function(e){return e.apply(null,n)})},g=function(e){return{label:"Edit",onChange:function(){d.dialog("option","viewport",e),d.dialog("option","title","Edit viewport "+e.name),e.WorldFit?(d.dialog("option","disableField")("ScaleX"),d.dialog("option","disableField")("ScaleY")):(d.dialog("option","enableField")("ScaleX"),d.dialog("option","enableField")("ScaleY")),d.dialog("option","setField")("Width",e.Width),d.dialog("option","setField")("Height",e.Height),d.dialog("option","setField")("OffsetX",e.OffsetX),d.dialog("option","setField")("OffsetY",e.OffsetY),d.dialog("option","setField")("ScaleX",e.ScaleX),d.dialog("option","setField")("ScaleY",e.ScaleY),d.dialog("option","setField")("StrokeColor",e.getStroke().color),d.dialog("option","setField")("StrokeWidth",e.getStroke().width),d.dialog("open")}}},m=function(e){return{label:t.getOutlineLayerName(),onChange:function(t){t.target.checked?i.addOutline(e.name):i.removeOutline(e.name)}}},y=function(e){return{label:"Fit World",state:e.WorldFit,onChange:function(t){t.target.checked?s.scaleViewportToFit(e):s.resetViewportScale(e)}}},b=function(e){return{onLabel:"Show",offLabel:"Hide",onChange:function(t){t.target.checked?e.hide():e.show()}}},v=function(e){return{label:"Remove",onChange:function(){r.viewports.remove(e.name)}}},C=function(){c||(c=(new h).create({id:"add-layer-dialog",tip:"Use a unique name",autoOpen:!1,height:"auto",width:"auto",minWidth:350,modal:!0,viewport:null,fields:[{name:"Layer Name",value:"",validations:[{check:function(e){return""!=e},tip:"Layer name can't be empty"},{check:function(e){return!$(this).dialog("option","viewport").layerExists(e)},tip:"This layer Id is already in use"}]}],buttons:{Add:function(){$(this).dialog("option","viewport").addLayerBefore(this.LayerName(),t.getOutlineLayerName()),$(this).dialog("close")}},validateOnAction:{Add:["Layer Name"]}}))},w=function(){d||(d=(new h).create({id:"edit-viewport-dialog",tip:"",autoOpen:!1,height:"auto",width:"auto",minWidth:300,modal:!0,resetOnClose:!0,viewport:null,fields:[{name:"Width",value:0,validations:[{check:function(e){return e>0},tip:"Width must be greater than 0"}]},{name:"Height",value:0,validations:[{check:function(e){return e>0},tip:"Height must be greater than 0"}]},{name:"Offset X",value:0},{name:"Offset Y",value:0},{name:"Scale X",value:0,validations:[{check:function(e){return e>0},tip:"Scale X must be greater to 0"}]},{name:"Scale Y",value:0,validations:[{check:function(e){return e>0},tip:"Scale Y must be greater to 0"}]},{name:"Stroke Color",value:0},{name:"Stroke Width",value:0}],buttons:{Save:function(){var e=$(this).dialog("option","viewport");e.Width=this.Width(),e.Height=this.Height(),e.OffsetX=this.OffsetX(),e.OffsetY=this.OffsetY(),e.ScaleX=this.ScaleX(),e.ScaleY=this.ScaleY(),e.setStroke(this.StrokeWidth(),this.StrokeColor()),e.WorldFit&&s.scaleViewportToFit(e),$(this).dialog("close")}},validateOnAction:{Save:["Width","Height","Scale X","Scale Y"]}}))};return u}),define("viewport-selector-ui",["require","wrap-in-div","gb","viewport-editor-ui","setup-viewport","editor-config","editor-regions","ui-component"],function(e){var t=e("wrap-in-div"),i=e("gb"),n=e("viewport-editor-ui"),o=e("setup-viewport"),r=e("editor-config"),s=(e("editor-regions"),e("ui-component").extend({init:function(){this.container=null,this.children={}},create:function(){this.container=document.createElement("div"),this.container.id="viewports-container";var e=t.wrap(this.container,{classNames:["well","well-small"]});a(this.container);for(var i=r.getViewports(),n=0;n<i.length;n++)this.add(i[n]);return e},add:function(e){o.setup(e.name);var t=(new n).create({viewport:e});this.children[e.name]=t,$(this.container).append($(t.html)),$(this.container).sortable("refresh")},remove:function(e){$(this.children[e.name].html).remove(),$(this.container).sortable("refresh"),delete this.children[e.name]},destroy:function(){$(this.container).sortable("destroy")}})),a=function(e){$(e).sortable({placeholder:"ui-state-highlight",items:"> div",cursor:"move",delay:15,start:function(e,t){t.placeholder.width(t.item.outerWidth()),t.placeholder.height(t.item.outerHeight())},update:function(e,t){i.viewports.change($(t.item).find(".viewport-control").attr("viewport-name"),t.item.index())}}).disableSelection()};return s}),define("viewport-creator-ui",["require","wrap-in-div","button","dialog","gb","editor-config","editor-viewports","ui-component"],function(e){var t=e("wrap-in-div"),i=e("button"),n=e("dialog"),o=e("gb"),r=e("editor-config"),s=e("editor-viewports"),a=e("ui-component").extend({init:function(){this.viewportDialogUI=null,this.buttonUI=null},create:function(){return this.viewportDialogUI=(new n).create({id:"add-viewport-dialog",title:"Add a viewport",tip:"Use a unique name",autoOpen:!1,height:"auto",width:"auto",minWidth:300,modal:!0,fields:[{name:"Name",value:"",validations:[{check:function(e){return""!=e},tip:"Viewport name can't be empty"},{check:function(e){return!o.viewports.exists(e)},tip:"The viewport name is already in use"}]},{name:"Width",value:o.canvas.width,validations:[{check:function(e){return e>0},tip:"Width must be greater than 0"},{check:function(e){return function(t){return e>=t}}(o.canvas.width),tip:"Width must be less than or equal to "+o.canvas.width}]},{name:"Height",value:o.canvas.height,validations:[{check:function(e){return e>0},tip:"Height must be greater than 0"},{check:function(e){return function(t){return e>=t}}(o.canvas.height),tip:"Height must be less than or equal to "+o.canvas.height}]},{name:"Offset X",value:0},{name:"Offset Y",value:0},{name:"Scale X",value:1,validations:[{check:function(e){return e>0},tip:"Scale X must be greater to 0"}]},{name:"Scale Y",value:1,validations:[{check:function(e){return e>0},tip:"Scale Y must be greater to 0"}]},{name:"Stroke Color",value:"none"},{name:"Stroke Width",value:"none"}],buttons:{Add:function(){s.add(this.Name(),this.Width(),this.Height(),this.OffsetX(),this.OffsetY(),this.ScaleX(),this.ScaleY(),null,this.StrokeColor(),this.StrokeWidth()).NoClipping().NoCulling().NoMouseBounded(),o.viewports.before(this.Name(),r.getGridViewportName()),$(this).dialog("close")}},validateOnAction:{Add:["Name","Width","Height","Scale X","Scale Y"]}}),this.buttonUI=(new i).create({label:"Add Viewport",onClick:function(){this.viewportDialogUI.dialog("open")}.bind(this)}),$(this.buttonUI).button(),t.wrap([this.buttonUI],{id:"viewport-creator",classNames:["well","well-small"]})},destroy:function(){$(this.buttonUI).button("destroy")}});return a}),define("global-context-menu",["require","gb","ui-component","menu"],function(e){var t=e("gb"),i=e("ui-component").extend({init:function(){},create:function(i,n,o,r,s){var a=(new(e("menu"))).create({id:"global-context-menu",options:[{name:"Add Obstacle",icon:"ui-icon-plusthick",click:function(e,t){i.toButtons(),i.show(t,"obstacle")}},{name:"Add Weak Enemy",icon:"ui-icon-plusthick",click:function(e,t){i.toButtons(),i.show(t,"enemy","weak")}},{name:"Add Strong Enemy",icon:"ui-icon-plusthick",click:function(e,t){i.toButtons(),i.show(t,"enemy","strong")}},{name:"Add Boss Enemy",icon:"ui-icon-plusthick",click:function(e,t){i.toButtons(),i.show(t,"enemy","boss")}},{name:"Add Weak Boss Helper",icon:"ui-icon-plusthick",click:function(e,t){i.toButtons(),i.show(t,"enemy","weak-boss-helper")}},{name:"Add Strong Boss Helper",icon:"ui-icon-plusthick",click:function(e,t){i.toButtons(),i.show(t,"enemy","strong-boss-helper")}},{name:"Add Item",icon:"ui-icon-plusthick",click:function(e,t){i.toButtons(),i.show(t,"item")}},{name:"Add Control Object",icon:"ui-icon-plusthick",click:function(e,t){n.show(t,"control")}},{name:"Add Sound Object",icon:"ui-icon-volume-on",click:function(e,t){n.show(t,"sound")}},{name:"Grid",icon:"ui-icon-calculator",options:[{name:"Show/Hide",icon:"ui-icon-bullet",click:function(){r.toggleGrid()}},{name:"Snap",icon:"ui-icon-bullet",click:function(){r.toggleSnap()}}]},{name:"Game Object",icon:"ui-icon-wrench",options:[{name:"Colliders",icon:"ui-icon-radio-off",click:function(){s.toggleColliders()}},{name:"Rotation",icon:"ui-icon-arrowrefresh-1-w",click:function(){s.toggleRotations()}},{name:"Scale",icon:"ui-icon-arrow-2-se-nw",click:function(){s.toggleScales()}}]},{name:"Misc.",icon:"ui-icon-wrench",options:[{name:"Rectangles",icon:"ui-icon-stop",click:function(){s.toggleBoundings()}},{name:"Centers",icon:"ui-icon-bullet",click:function(){s.toggleCenters()}}]}]}),l={menu:a,show:function(e,t){this.menu.show(e,t),this.removeHideEvents(),this.addHideEvents()},hide:function(){this.menu.hide(),this.removeHideEvents()},belongs:function(e){return this.menu.belongs(e)},addHideEvents:function(){t.Mouse.on(t.Mouse.NOTHING_CLICKED_ON_CANVAS,this,this.hideMenu),t.Mouse.on(t.Mouse.GAME_OBJECT_CONTEXT_MENU,this,this.hideMenu),t.Mouse.on(t.Mouse.CLICKED_OUTSIDE_CANVAS,this,this.checkBelongsThenHide)},removeHideEvents:function(){t.Mouse.remove(t.Mouse.NOTHING_CLICKED_ON_CANVAS,this,this.hideMenu),t.Mouse.remove(t.Mouse.GAME_OBJECT_CONTEXT_MENU,this,this.hideMenu),t.Mouse.remove(t.Mouse.CLICKED_OUTSIDE_CANVAS,this,this.checkBelongsThenHide)},hideMenu:function(){this.hide()},checkBelongsThenHide:function(e){this.belongs(e.target)||this.hide()}};return l}});return i}),define("scene-editor",["require","jquery","jquery-ui","bootstrap","bootstrap-toogle","jscrollpane","gb","util","editor-setup","editor-delegates","world","canvas-container","editor-scene-loader","ui-component","editor-side-menu","editor-regions","canvas-scroll-bars-ui","grid-controls-ui","game-object-controls-ui","world-edit-ui","game-object-selector-ui","control-objects-selector-ui","game-object-creator-ui","edit-custom-types-ui","game-object-remove-ui","viewport-selector-ui","viewport-creator-ui","global-context-menu","viewport-editor-ui"],function(e){e("jquery"),e("jquery-ui"),e("bootstrap"),e("bootstrap-toogle"),e("jscrollpane");var t=e("gb"),i=(e("util"),e("editor-setup")),n=e("editor-delegates"),o=e("world"),r=e("canvas-container"),s=e("editor-scene-loader"),a=e("ui-component").extend({init:function(){this._super()},create:function(a){this.editorSideMenu=new(e("editor-side-menu")),this.editorRegions=e("editor-regions"),this.canvasScrollBarsUI=new(e("canvas-scroll-bars-ui")),this.gridControlsUI=new(e("grid-controls-ui")),this.gameObjectControlsUI=new(e("game-object-controls-ui")),this.worldEditUI=new(e("world-edit-ui")),this.gameObjectSelectorUI=new(e("game-object-selector-ui")),this.controlObjectSelectorUI=new(e("control-objects-selector-ui")),this.gameObjectCreatorUI=new(e("game-object-creator-ui")),this.customTypesEditorUI=new(e("edit-custom-types-ui")),this.gameObjectRemoveUI=new(e("game-object-remove-ui")),this.viewportsUI=new(e("viewport-selector-ui")),this.viewportCreateUI=new(e("viewport-creator-ui")),i.begin(this),this.mainContainer=document.createElement("div"),this.mainContainer.id="main-editor-container",document.body.appendChild(this.mainContainer),this.editorRegionsController=this.editorRegions.create(),this.editorSideMenuController=this.editorSideMenu.create(),this.mainContainer.appendChild(this.editorSideMenuController.html),this.mainContainer.appendChild(this.editorRegionsController.html),this.editorRegionsController.appendToTopLeft(r.getCanvasContainer()),this.canvasScrollBarsUI.create(),this.editorRegionsController.appendToTopRight(this.gridControlsUI.create()),this.editorRegionsController.appendToTopRight(this.gameObjectControlsUI.create()),this.editorRegionsController.appendToTopRight(this.worldEditUI.create()),this.editorRegionsController.appendToBottomLeft(this.gameObjectSelectorUI.create()),this.editorRegionsController.appendToBottomLeft(this.controlObjectSelectorUI.create()),this.editorRegionsController.appendToBottomLeft(this.gameObjectCreatorUI.create()),this.editorRegionsController.appendToBottomLeft(this.customTypesEditorUI.create()),this.editorRegionsController.appendToBottomLeft(this.gameObjectRemoveUI.create()),this.editorRegionsController.appendToBottomRight(this.viewportCreateUI.create()),this.editorRegionsController.appendToBottomRight(this.viewportsUI.create()),n.add(t.viewports,t.viewports.ADD,this,function(e){i.config().isEditorViewport(e.name)||this.viewportsUI.add(e)}),n.add(t.viewports,t.viewports.REMOVE,this,function(e){i.config().isEditorViewport(e.name)||this.viewportsUI.remove(e)}),n.add(o,o.CHANGE,this,function(){t.viewports.iterate(this,function(e){e.WorldFit&&o.scaleViewportToFit(e)})}),n.add(this.editorSideMenu,this.editorSideMenu.EXIT,this,function(){this.execute(this.EXIT)}),n.add(this.editorSideMenu,this.editorSideMenu.PREVIEW,this,function(){this.execute(this.PREVIEW)}),i.end(),s.load(a),s.layout(),n.add(s,s.LOAD_COMPLETE,this,function(){i.reset(),this.gridControlsUI.toggleGrid(),this.gameObjectControlsUI.toggleBoundings()}),this.globalContextMenu=(new(e("global-context-menu"))).create(this.gameObjectSelectorUI,this.controlObjectSelectorUI,this.customTypesEditorUI,this.gridControlsUI,this.gameObjectControlsUI),n.add(t.Mouse,t.Mouse.CANVAS_CONTEXT_MENU,this,function(e){this.globalContextMenu.show(e.clientX,e.clientY)}),this.editorSideMenuController.update(),this.gridControlsUI.toggleGrid(),this.gameObjectControlsUI.toggleBoundings()},cleanUp:function(){e("viewport-editor-ui").destroy(),i.exit(),this._super(),$("#main-editor-container").remove()}});return Object.defineProperty(a.prototype,"EXIT",{get:function(){return"exit"}}),Object.defineProperty(a.prototype,"PREVIEW",{get:function(){return"preview"}}),new a}),define("patch-game-object-container",["require","gb","draw","game-object-container","game-object","extension"],function(e){var t=e("gb"),i=e("draw"),n=e("game-object-container"),o=e("game-object"),r=null,s=e("extension").extend({init:function(){},type:function(){return t.game.CREATE},execute:function(){r=n.prototype.draw;var e=o.prototype.draw;n.prototype.draw=function(n,o){if(this.canDraw&&o.isGameObjectInside(this,n)&&e.call(this,n,o),t.debug&&!this.skipDebug){if(n.save(),n.setTransform(1,0,0,1,0,0),o.transformContext(n),this.components)for(var r=0;r<this.components.length;r++)this.components[r].debug_draw(n,o,i,t);n.restore()}if(this.childs)for(var s=null,r=0;r<this.childs.length;r++)s=this.childs[r],s.isContainer()?s.draw(n,o):s.canDraw&&o.isGameObjectInside(s,n)&&(this.childrenOptions&&this.childrenOptions[s.uid]?this.childrenOptions[s.uid].draw&&s.draw(n,o):s.draw(n,o))}},destroy:function(){n.prototype.draw=r}});return s}),define("scene-editor-state",["require","state-machine","gb","loader-container","canvas-container","scene-editor","center-canvas","common-bundle","sound-bundle","add-components-bundle","explosion-generator-bundle","particle-generator-bundle","obstacle-bundle","cannon-bundle","boss-bundle","items-bundle","mine-bundle","generator-bundle","enemy-ship-bundle","blob-bundle","spider-bundle","control-objects-bundle","mouse-events","patch-game-object-container","activity-display","logger","fit-canvas-in-region","activity-display","logger","mouse-events","fit-canvas-in-region","patch-game-object-container"],function(e){var t=e("state-machine"),i=e("gb"),n=e("loader-container"),o=e("canvas-container"),r=e("scene-editor"),s=i.game;return function(a){var l=t.createState(this,a);l.addStartAction(function(){i.groups.removeAll(),i.viewports.removeAll(),s.remove_extension(e("center-canvas")),e("common-bundle").create(),e("sound-bundle").create(),e("add-components-bundle").create(),e("explosion-generator-bundle").create(),e("particle-generator-bundle").create(),e("obstacle-bundle").create(),e("cannon-bundle").create(),e("boss-bundle").create(),e("items-bundle").create(),e("mine-bundle").create(),e("generator-bundle").create(),e("enemy-ship-bundle").create(),e("blob-bundle").create(),e("spider-bundle").create(),e("control-objects-bundle").create()}),l.addStartAction(function(){s.add_extension(e("mouse-events")),s.add_extension(e("patch-game-object-container"))}),l.addStartAction(function(e){o.detachCanvas(),r.create(e),r.once(r.EXIT,this,function(){n.transition(),n.once(n.CLOSE,this,function(){h(),l.execute(l.BACK)},"enter-scene-editor")},"enter-scene-editor"),r.once(r.PREVIEW,this,function(){n.close(),n.once(n.CLOSE,this,function(){l.execute(l.NEXT,{nextInitArgs:null,lastCompleteArgs:null})},"enter-scene-editor")},"enter-scene-editor")}),l.addStartAction(function(){s.add_extension(e("activity-display"),{hide:!0}),s.add_extension(e("logger"),{hide:!0}),s.add_extension(e("fit-canvas-in-region"))}),l.addCompleteAction(function(){h()});var h=function(){s.remove_extension(e("activity-display")),s.remove_extension(e("logger")),s.remove_extension(e("mouse-events")),s.remove_extension(e("fit-canvas-in-region")),s.remove_extension(e("patch-game-object-container")),r.cleanUp(),i.reclaimer.clearAllObjectsFromPools().now(),i.reclaimer.clearAllPools().now(),n.levelCleanUp("enter-scene-editor"),r.levelCleanUp("enter-scene-editor")};return Object.defineProperty(l,"BACK",{get:function(){return"back"}}),l}}),define("preview-scene-player",["require","canvas-container","game-scene-player"],function(e){var t=e("canvas-container"),i=e("game-scene-player").constructor.extend({init:function(){this._super()},decorateContainer:function(e){this._super(e),document.getElementById("player-title").innerHTML="",document.getElementById("player-title").appendChild(document.createTextNode("Scene Preview"))},removeContainer:function(){t.detachCanvas(),$(this.mainContainer).remove()}});return new i}),define("scene-editor-player-state",["require","state-machine","gb","viewport-follow","preview-scene-player","local-storage","loader-container","center-canvas"],function(e){var t=e("state-machine"),i=e("gb"),n=e("viewport-follow"),o=e("preview-scene-player"),r=e("local-storage"),s=e("loader-container");return function(a){var l=t.createState(this,a);return l.addStartAction(function(){i.groups.removeAll(),i.viewports.removeAll(),i.game.add_extension(e("center-canvas"))}),l.addStartAction(function(){var e=JSON.parse(r.getPreviewScene());o.once(o.ESCAPE,this,function(){s.once(s.CLOSE,this,function(){l.execute(l.PREVIOUS,{nextInitArgs:e,lastCompleteArgs:null})}),s.transition()}),o.once(o.EXIT,this,function(){o.enableEscape()}),o.once(o.FAILURE,this,function(){o.enableEscape()}),s.once(s.OPEN,this,function(){o.start()}),o.once(o.CREATION_COMPLETE,this,function(){s.open()}),o.create(e)}),l.addUpdateAction(function(e){n.update(e)}),l.addCompleteAction(function(){i.reclaimer.clearAllObjectsFromPools().now(),i.reclaimer.clearAllPools().now(),o.cleanUp()}),l}}),define("custom-stages-menu-renderer",["path-renderer","draw"],function(e,t){var i=e.extend({init:function(){this._super(),this.width=750,this.height=360,this.name="custom-stages-menu-renderer"},start:function(){this._super()},drawPath:function(e){e.save(),t.rectangle(e,0,0,this.width,this.height,null,"#FFFFFF",5),t.rectangle(e,100,0,2,this.height,"#FFFFFF","#FFFFFF",1),t.rectangle(e,0,this.height/4*1,this.width,2,"#FFFFFF","#FFFFFF",1),t.rectangle(e,0,this.height/4*2,this.width,2,"#FFFFFF","#FFFFFF",1),t.rectangle(e,0,this.height/4*3,this.width,2,"#FFFFFF","#FFFFFF",1),e.restore()}});return i}),define("custom-stage-select-animation",["game-object","gb","TimelineLite","keyboard","local-storage","util","TweenLite","EasePack"],function(e,t,i,n,o,r){var s=e.extend({init:function(){this._super()},start:function(){var e=[{viewport:"Main",layer:"Front"}];this.customStages=t.create("CustomStages","First",e,{x:-300,y:70}),this.menu=t.create("CustomStagesMenu","First",e,{x:-1e3,y:130}),this.backOption=t.create("Back","First",e,{x:t.canvas.width/2-150,y:2*t.canvas.height}),this.startOption=t.create("Start","First",e,{x:t.canvas.width/2+150,y:2*t.canvas.height}),this.markers=this.menu.findChildren().allWithType("CurrentStageMarker"),this.stageNames=this.menu.findChildren().all(function(e){return-1!=e.typeId.search("StageName")}),this.tl=new i({onComplete:function(){n.onKeyDown(n.GAME_LEFT,this,this.onLeftPress),n.onKeyDown(n.GAME_RIGHT,this,this.onRightPress),n.onKeyDown(n.GAME_UP,this,this.onUpPress),n.onKeyDown(n.GAME_DOWN,this,this.onDownPress),n.onKeyDown(n.GAME_BUTTON_1,this,this.onOptionSelected),this.execute(this.ENTER)}.bind(this),onReverseComplete:function(){return this.backOption.selected?void this.execute(this.BACK_EXIT):this.startOption.selected?void(o.getUrlScene()&&0===this.stageIndex?this.execute(this.START_EXIT,JSON.parse(o.getUrlScene())):this.execute(this.START_EXIT,this.scenes[this.stageIndex])):void 0}.bind(this)}),this.tl.to(this.customStages,.5,{x:t.canvas.width/2}),this.tl.to(this.menu,.5,{x:25}),this.tl.staggerTo([this.backOption,this.startOption],.5,{y:t.canvas.height-40},0),this.tl.play(),this.onRightPress(),this.currentIndex=0,this.stageIndex=0,this.scenes=[],o.getUrlScene()&&this.scenes.push(JSON.parse(o.getUrlScene()).name),this.scenes=this.scenes.concat(o.getAllScenes()),this.sceneCount=this.scenes.length-1,l.call(this),a.call(this,this.currentIndex),h.call(this,this.currentIndex,this.stageIndex,!0),this._super()},reverse:function(){n.removeKeyDown(n.GAME_LEFT,this,this.onLeftPress),n.removeKeyDown(n.GAME_RIGHT,this,this.onRightPress),n.removeKeyDown(n.GAME_UP,this,this.onUpPress),n.removeKeyDown(n.GAME_DOWN,this,this.onDownPress),n.removeKeyDown(n.GAME_BUTTON_1,this,this.onOptionSelected),this.tl.reverse()},onLeftPress:function(){var e=this.backOption.findChildren().allWithType("MarkerArrow");this.backOption.selected||this.execute("option"),this.backOption.selected=!0,this.startOption.selected=!1;for(var t=0;t<e.length;t++)e[t].show();for(var e=this.startOption.findChildren().allWithType("MarkerArrow"),t=0;t<e.length;t++)e[t].hide()},onRightPress:function(){var e=this.backOption.findChildren().allWithType("MarkerArrow");this.backOption.selected&&this.execute("option"),this.backOption.selected=!1,this.startOption.selected=!0;for(var t=0;t<e.length;t++)e[t].hide();for(var e=this.startOption.findChildren().allWithType("MarkerArrow"),t=0;t<e.length;t++)e[t].show()},onUpPress:function(){this.stageIndex>0&&(this.stageIndex--,this.execute("option")),this.currentIndex>0?this.currentIndex--:0==this.currentIndex&&h.call(this,this.currentIndex,this.stageIndex),l.call(this),a.call(this,this.currentIndex)},onDownPress:function(){this.stageIndex<this.sceneCount&&(this.stageIndex++,this.execute("option")),this.currentIndex<this.markers.length-1?this.currentIndex++:this.currentIndex==this.markers.length-1&&h.call(this,this.currentIndex,this.stageIndex),l.call(this),a.call(this,this.currentIndex)},onOptionSelected:function(){return this.backOption.selected?(this.reverse(),this.execute(this.BACK_SELECTED),void this.execute("back")):this.startOption.selected&&this.stageNames[this.currentIndex].validLevel?(this.reverse(),this.execute("select"),void(o.getUrlScene()&&0===this.stageIndex?this.execute(this.START_SELECTED,JSON.parse(o.getUrlScene())):this.execute(this.START_SELECTED,this.scenes[this.stageIndex]))):void 0},recycle:function(){this._super(),n.removeKeyDown(n.GAME_LEFT,this,this.onLeftPress),n.removeKeyDown(n.GAME_RIGHT,this,this.onRightPress),n.removeKeyDown(n.GAME_UP,this,this.onUpPress),n.removeKeyDown(n.GAME_DOWN,this,this.onDownPress),n.removeKeyDown(n.GAME_BUTTON_1,this,this.onOptionSelected),this.tl.kill(),this.tl=null,this.customStages=null,this.backOption=null,this.startOption=null}}),a=function(e){this.markers[e].show()},l=function(){for(var e=0;e<this.markers.length;e++)this.markers[e].hide()},h=function(e,t,i){if(!(this.scenes.length<this.markers.length)||i)for(var n=r.wrapInRange(t,0,this.markers.length-1),o=0;o<this.markers.length;o++)this.scenes[n+o]?(this.stageNames[o].renderer.Text=this.scenes[n+o],this.stageNames[o].validLevel=!0):(this.stageNames[o].renderer.Text="no data",this.stageNames[o].validLevel=!1)};return Object.defineProperty(s.prototype,"ENTER",{get:function(){return"enter"}}),Object.defineProperty(s.prototype,"BACK_SELECTED",{get:function(){return"back_selected"}}),Object.defineProperty(s.prototype,"START_SELECTED",{get:function(){return"start_selected"}}),Object.defineProperty(s.prototype,"BACK_EXIT",{get:function(){return"back_exit"}}),Object.defineProperty(s.prototype,"START_EXIT",{get:function(){return"start_exit"}}),s}),define("custom-stage-select-bundle",["require","common-bundle","bundle","arrow-renderer","custom-stages-menu-renderer","ship-renderer","custom-stage-select-animation"],function(e){var t=e("common-bundle"),i=e("bundle").extend({create:function(){this.componentPool.createPool("MarkerArrowRenderer",e("arrow-renderer")),this.componentPool.createPool("CustomStagesMenuRenderer",e("custom-stages-menu-renderer")),this.componentPool.createPool("ShipRenderer",e("ship-renderer")),this.gameObjectPool.createDynamicPool("CustomStageSelect",e("custom-stage-select-animation")),this.componentPool.createConfiguration("TextRenderer",t.getTextRendererPoolId()),this.componentPool.createConfiguration("StageNameRenderer",t.getTextRendererPoolId()).args({fillColor:"none",text:"",strokeColor:"#FFFFFF",font:"Russo One",padding:3,size:55}),this.componentPool.createConfiguration("MarkerArrowRenderer","MarkerArrowRenderer"),this.componentPool.createConfiguration("ShipRenderer","ShipRenderer"),this.componentPool.createConfiguration("CustomStagesMenuRenderer","CustomStagesMenuRenderer"),this.gameObjectPool.createConfiguration("CurrentStageMarker",t.getGameObjectPoolId()).args({rotation:90}).setRenderer("ShipRenderer"),this.gameObjectPool.createConfiguration("StageName1",t.getGameObjectPoolId()).setRenderer("StageNameRenderer",{name:"stage-name-1"}),this.gameObjectPool.createConfiguration("StageName2",t.getGameObjectPoolId()).setRenderer("StageNameRenderer",{name:"stage-name-2"}),this.gameObjectPool.createConfiguration("StageName3",t.getGameObjectPoolId()).setRenderer("StageNameRenderer",{name:"stage-name-3"}),this.gameObjectPool.createConfiguration("StageName4",t.getGameObjectPoolId()).setRenderer("StageNameRenderer",{name:"stage-name-4"}),this.gameObjectPool.createConfiguration("CustomStagesMenu",t.getGameObjectContainerPoolId()).addChild("CurrentStageMarker",{x:50,y:45}).addChild("CurrentStageMarker",{x:50,y:135}).addChild("CurrentStageMarker",{x:50,y:225}).addChild("CurrentStageMarker",{x:50,y:315}).addChild("StageName1",{x:120,y:15}).addChild("StageName2",{x:120,y:105}).addChild("StageName3",{x:120,y:195}).addChild("StageName4",{x:120,y:285}).setRenderer("CustomStagesMenuRenderer"),this.gameObjectPool.createConfiguration("MarkerArrow",t.getGameObjectPoolId()).setRenderer("MarkerArrowRenderer"),this.gameObjectPool.createConfiguration("CustomStages",t.getGameObjectPoolId()).setRenderer("TextRenderer",{name:"custom-stages-title",text:"Custom Mazes",fillColor:"none",strokeColor:"#FFFFFF",font:"Russo One",padding:3,size:90,offset:"center"}),this.gameObjectPool.createConfiguration("Back",t.getGameObjectContainerPoolId()).addChild("MarkerArrow",{rotation:90,x:100,y:0}).addChild("MarkerArrow",{rotation:270,x:-100,y:0}).setRenderer("TextRenderer",{name:"back-button",fillColor:"none",strokeColor:"#FFFFFF",text:"Back",font:"Russo One",padding:3,size:55,offset:"center"}),this.gameObjectPool.createConfiguration("Start",t.getGameObjectContainerPoolId()).addChild("MarkerArrow",{rotation:90,x:100,y:0}).addChild("MarkerArrow",{rotation:270,x:-100,y:0}).setRenderer("TextRenderer",{name:"start-button",fillColor:"none",strokeColor:"#FFFFFF",text:"Start",font:"Russo One",padding:3,size:55,offset:"center"}),this.gameObjectPool.createConfiguration("CustomStageSelect","CustomStageSelect").addComponent("OptionHighlight").addComponent("OptionSelect").addComponent("OptionBack")
}});return new i}),define("custom-stage-select-state",["require","state-machine","gb","loader-container","sound-player","common-bundle","sound-bundle","custom-stage-select-bundle"],function(e){var t=e("state-machine"),i=e("gb"),n=e("loader-container"),o=e("sound-player");return function(r){var s=t.createState(this,r);return s.addStartAction(function(){o.playLoop("INTRO"),i.groups.removeAll(),i.viewports.removeAll(),i.groups.add("First"),i.groups.add("Second");var t=i.viewports.add("Main",i.canvas.width,i.canvas.height,0,0);t.addLayer("Front"),e("common-bundle").create(),e("sound-bundle").create(),e("custom-stage-select-bundle").create();var r=i.create("CustomStageSelect","First",[{viewport:"Main",layer:"Front"}]);r.on(r.BACK_EXIT,this,function(){s.execute(s.BACK)}),r.on(r.START_SELECTED,this,function(e){n.once(n.CLOSE,this,function(){o.stop("INTRO"),s.execute(s.NEXT,{nextInitArgs:e,lastCompleteArgs:null})}),n.close()})}),s.addCompleteAction(function(){i.reclaimer.clearAllObjectsFromPools().now(),i.reclaimer.clearAllPools().now()}),Object.defineProperty(s,"BACK",{get:function(){return"back"}}),s}}),define("custom-scene-player-state",["require","state-machine","gb","viewport-follow","game-scene-player","local-storage","loader-container","util"],function(e){var t=e("state-machine"),i=e("gb"),n=e("viewport-follow"),o=e("game-scene-player"),r=e("local-storage"),s=e("loader-container"),a=e("util");return function(e){var l=t.createState(this,e);return l.addStartAction(function(){i.groups.removeAll(),i.viewports.removeAll()}),l.addStartAction(function(e){o.once(o.ESCAPE,this,function(){s.once(s.CLOSE,this,function(){l.execute(l.PREVIOUS,{nextInitArgs:null,lastCompleteArgs:null})}),s.transition()}),o.once(o.EXIT,this,function(){s.once(s.CLOSE,this,function(){l.execute(l.PREVIOUS,{nextInitArgs:null,lastCompleteArgs:null})}),s.transition()}),o.once(o.FAILURE,this,function(){s.once(s.CLOSE,this,function(){l.execute(l.PREVIOUS,{nextInitArgs:null,lastCompleteArgs:null})}),s.transition()}),o.once(o.CREATION_COMPLETE,this,function(){s.open()}),s.once(s.OPEN,this,function(){o.start()}),o.create(a.isString(e)?JSON.parse(r.getScene(e)):e)}),l.addUpdateAction(function(e){n.update(e)}),l.addCompleteAction(function(){i.reclaimer.clearAllObjectsFromPools().now(),i.reclaimer.clearAllPools().now(),o.cleanUp(),s.hardCleanUp()}),l}}),define("url-scene-player-state",["require","state-machine","gb","viewport-follow","game-scene-player","local-storage","loader-container","center-canvas","center-canvas"],function(e){var t=e("state-machine"),i=e("gb"),n=e("viewport-follow"),o=e("game-scene-player"),r=e("local-storage"),s=e("loader-container");return function(a){var l=t.createState(this,a);return l.addStartAction(function(){i.groups.removeAll(),i.viewports.removeAll()}),l.addStartAction(function(t){i.game.add_extension(e("center-canvas")),o.once(o.ESCAPE,this,function(){s.once(s.CLOSE,this,function(){l.execute(l.BACK)}),s.transition()}),o.once(o.EXIT,this,function(){s.once(s.CLOSE,this,function(){l.execute(l.BACK)}),s.transition()}),o.once(o.FAILURE,this,function(){s.once(s.CLOSE,this,function(){l.execute(l.BACK)}),s.transition()}),s.once(s.OPEN,this,function(){o.start()}),o.once(o.CREATION_COMPLETE,this,function(){s.open()}),o.create(JSON.parse(t)),r.setUrlScene(t)}),l.addUpdateAction(function(e){n.update(e)}),l.addCompleteAction(function(){i.game.remove_extension(e("center-canvas")),i.reclaimer.clearAllObjectsFromPools().now(),i.reclaimer.clearAllPools().now(),o.cleanUp(),s.hardCleanUp()}),Object.defineProperty(l,"BACK",{get:function(){return"back"}}),l}}),define("game-modes-state",["require","state-machine","gb","level-storage","local-storage","stage-overview-state","scene-player-state","scene-editor-state","scene-editor-player-state","custom-stage-select-state","custom-scene-player-state","url-scene-player-state"],function(e){var t=e("state-machine"),i=e("gb"),n=e("level-storage"),o=e("local-storage"),r=t.createFixedStateMachine();r.add(e("stage-overview-state")("stage_overview_state")),r.add(e("scene-player-state")("scene_player_state"));var s=t.createFixedStateMachine();s.add(e("scene-editor-state")("scene_editor_state")),s.add(e("scene-editor-player-state")("scene_editor_player_state"));var a=t.createFixedStateMachine();a.add(e("custom-stage-select-state")("custom_stage_select_state")),a.add(e("custom-scene-player-state")("custom_scene_player_state"));var l=t.createFixedStateMachine();return l.add(e("url-scene-player-state")("url_scene_player_state")),function(e){var h=t.createState(this,e),c=null;return h.addStartAction(function(e){var t=e.mode?e.mode:e;if("play-mode"===t){c=r,c.start();var i=c.get("stage_overview_state");i.once(i.BACK,this,function(){c.finish(),h.execute(h.PREVIOUS,{nextInitArgs:null,lastCompleteArgs:null})})}if("edit-mode"===t){c=s,c.start(o.getUrlScene()?JSON.parse(o.getUrlScene()):n.getLevel(0));var d=c.get("scene_editor_state");d.once(d.BACK,this,function(){c.finish(),h.execute(h.PREVIOUS,{nextInitArgs:null,lastCompleteArgs:null})})}if("custom-mode"===t){c=a,c.start();var u=c.get("custom_stage_select_state");u.once(u.BACK,this,function(){c.finish(),h.execute(h.PREVIOUS,{nextInitArgs:null,lastCompleteArgs:null})})}if("url-mode"===t){c=l,c.start(e.data);var p=c.get("url_scene_player_state");p.once(p.BACK,this,function(){c.finish(),h.execute(h.PREVIOUS,{nextInitArgs:null,lastCompleteArgs:null})})}}),h.addUpdateAction(function(e){c.update(e)}),h.addCompleteAction(function(){i.reclaimer.clearAllObjectsFromPools().now(),i.reclaimer.clearAllPools().now()}),h}}),define("main",["require","gb","loader-container","query-string","sound-player","asset-preloader","patch-collider-components","patch-game-object-configuration","patch-game-object-pool","pause","resume","sound-control","timers-control","tweens-control","state-machine","splash-state","game-modes-state"],function(e){function t(e){this.game.once(this.game.CREATE,this,function(){try{this.mainStateMachine.start({mode:"url-mode",data:e},1)}catch(t){return this.mainStateMachine.start(),void r.open()}}),this.game.on(this.game.UPDATE,this,function(e){this.mainStateMachine.update(e)}),this.game.create()}function i(){this.game.on(this.game.CREATE,this,function(){this.mainStateMachine.start(),r.open()}),this.game.on(this.game.UPDATE,this,function(e){this.mainStateMachine.update(e)}),this.game.create()}function n(){s.hasScene(t.bind(this),i.bind(this))}var o=e("gb"),r=e("loader-container"),s=e("query-string"),a=e("sound-player"),l=e("asset-preloader");this.game=o.game,this.game.add_extension(e("patch-collider-components")),this.game.add_extension(e("patch-game-object-configuration")),this.game.add_extension(e("patch-game-object-pool")),this.game.add_extension(e("pause")),this.game.add_extension(e("resume")),this.game.add_extension(e("sound-control")),this.game.add_extension(e("timers-control")),this.game.add_extension(e("tweens-control")),this.stateMachineFactory=e("state-machine"),this.mainStateMachine=this.stateMachineFactory.createFixedStateMachine(),this.mainStateMachine.add(e("splash-state")("splash_state")),this.mainStateMachine.add(e("game-modes-state")("game_modes_state")),l.addAsset(o.assetMap()["INTRO.OGG"]),l.addAsset(o.assetMap()["SELECT.OGG"]),l.addAsset(o.assetMap()["OK.OGG"]),l.addAsset(o.assetMap()["BACK.OGG"]),l.addAsset(o.assetMap()["BOSS1PORTRAIT.PNG"]),l.addAsset(o.assetMap()["BOSS2PORTRAIT.PNG"]),l.addAsset(o.assetMap()["BOSS3PORTRAIT.PNG"]),l.addAsset(o.assetMap()["BOSS4PORTRAIT.PNG"]),l.addAsset(o.assetMap()["LEVELFRAME.PNG"]),a.createChannels(10),a.assignChannels("INTRO",1),a.assignChannels("PLAYER_SHOT",10),a.add("INTRO",o.assetMap()["INTRO.OGG"],!0),a.add("LEVEL_1",o.assetMap()["LEVEL1.OGG"],!0),a.add("LEVEL_2",o.assetMap()["LEVEL2.OGG"],!0),a.add("LEVEL_3",o.assetMap()["LEVEL3.OGG"],!0),a.add("LEVEL_4",o.assetMap()["LEVEL5.OGG"],!0),a.add("BOSS",o.assetMap()["COSMICDANCE.OGG"],!0),a.add("PLAYER_SHOT",o.assetMap()["PLAYERSHOT.OGG"],!0),a.add("POWER_UP",o.assetMap()["POWERUP.OGG"],!0),a.add("EXPLOSION_1",o.assetMap()["EXPLOSION1.OGG"],!0),a.add("EXPLOSION_2",o.assetMap()["EXPLOSION2.OGG"],!0),a.add("EXPLOSION_3",o.assetMap()["EXPLOSION3.OGG"],!0),a.add("EXPLOSION_4",o.assetMap()["EXPLOSION4.OGG"],!0),a.add("EXPLOSION_5",o.assetMap()["EXPLOSION5.OGG"],!0),a.add("EXPLOSION_6",o.assetMap()["EXPLOSION6.OGG"],!0),a.add("EXPLOSION_7",o.assetMap()["EXPLOSION7.OGG"],!0),a.add("BUG",o.assetMap()["BUG.OGG"],!0),a.add("LARGE_BUG",o.assetMap()["LARGEBUG.OGG"],!0),a.add("SMALL_LAUNCH",o.assetMap()["SMALLLAUNCH.OGG"],!0),a.add("BLOOP",o.assetMap()["BLOOB.OGG"],!0),a.add("OPEN_HATCH",o.assetMap()["OPENHATCH.OGG"],!0),a.add("HIT",o.assetMap()["HIT.OGG"],!0),a.add("DEFLECT",o.assetMap()["DEFLECT.OGG"],!0),a.add("PLAYER_DAMAGE",o.assetMap()["PLAYERDAMAGE.OGG"],!0),a.add("SELECT",o.assetMap()["SELECT.OGG"],!0),a.add("OK",o.assetMap()["OK.OGG"],!0),a.add("BACK",o.assetMap()["BACK.OGG"],!0),a.add("WARNING",o.assetMap()["WARNING.OGG"],!0),a.add("WIN",o.assetMap()["WIN.OGG"],!0),l.loadAll(),a.loadAll();var h=0;l.once(l.ON_LOAD_ALL_COMPLETE,this,function(){h++,2===h&&n.call(this)}),a.once(a.ON_LOAD_ALL_COMPLETE,this,function(){h++,2===h&&n.call(this)})}),require(["pre-load"]);